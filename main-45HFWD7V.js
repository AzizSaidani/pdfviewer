import{a as ce,b as ke,c as Co,d as en,e as Wp,f as ye}from"./chunk-4IDNTCH7.js";var yo=en(()=>{"use strict"});var Lp=en((vT,Fp)=>{"use strict";var Ow="bold|bolder|lighter|[1-9]00",Fw="italic|oblique",Lw="small-caps",jw="ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded",Bw="px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q",Op=`'([^']+)'|"([^"]+)"|[\\w\\s-]+`,Uw=new RegExp(`(${Ow}) +`,"i"),Vw=new RegExp(`(${Fw}) +`,"i"),Hw=new RegExp(`(${Lw}) +`,"i"),$w=new RegExp(`(${jw}) +`,"i"),zw=new RegExp(`([\\d\\.]+)(${Bw}) *((?:${Op})( *, *(?:${Op}))*)`),Ul={},Ww=16;Fp.exports=e=>{if(Ul[e])return Ul[e];let t=zw.exec(e);if(!t)return;let n={weight:"normal",style:"normal",stretch:"normal",variant:"normal",size:parseFloat(t[1]),unit:t[2],family:t[3].replace(/["']/g,"").replace(/ *, */g,",")},r,i,s,o,c=e.substring(0,t.index);switch((r=Uw.exec(c))&&(n.weight=r[1]),(i=Vw.exec(c))&&(n.style=i[1]),(s=Hw.exec(c))&&(n.variant=s[1]),(o=$w.exec(c))&&(n.stretch=o[1]),n.unit){case"pt":n.size/=.75;break;case"pc":n.size*=16;break;case"in":n.size*=96;break;case"cm":n.size*=96/2.54;break;case"mm":n.size*=96/25.4;break;case"%":break;case"em":case"rem":n.size*=Ww/.75;break;case"q":n.size*=96/25.4/4;break}return Ul[e]=n}});var jp=en(Mi=>{"use strict";var Gw=Lp();Mi.parseFont=Gw;Mi.createCanvas=function(e,t){return Object.assign(document.createElement("canvas"),{width:e,height:t})};Mi.createImageData=function(e,t,n){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(e);case 2:return new ImageData(e,t);default:return new ImageData(e,t,n)}};Mi.loadImage=function(e,t){return new Promise(function(n,r){let i=Object.assign(document.createElement("img"),t);function s(){i.onload=null,i.onerror=null}i.onload=function(){s(),n(i)},i.onerror=function(){s(),r(new Error('Failed to load the image "'+e+'"'))},i.src=e})}});var Bp=en(()=>{"use strict"});var Vl=en(()=>{"use strict"});var Hl=en(()=>{"use strict"});var Up=en(()=>{"use strict"});var Vp=en((exports,module)=>{"use strict";(function(t,n){typeof exports=="object"&&typeof module=="object"?module.exports=t.pdfjsLib=n():typeof define=="function"&&define.amd?define("pdfjs-dist/build/pdf",[],()=>t.pdfjsLib=n()):typeof exports=="object"?exports["pdfjs-dist/build/pdf"]=t.pdfjsLib=n():t["pdfjs-dist/build/pdf"]=t.pdfjsLib=n()})(globalThis,()=>(()=>{"use strict";var __webpack_modules__=[,(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=b,t.bytesToString=B,t.createValidAbsoluteUrl=A,t.getModificationDate=Ze,t.getUuid=$p,t.getVerbosityLevel=ie,t.info=Z,t.isArrayBuffer=Pe,t.isArrayEqual=st,t.isNodeJS=void 0,t.normalizeUnicode=_o,t.objectFromMap=q,t.objectSize=re,t.setVerbosityLevel=Q,t.shadow=N,t.string32=G,t.stringToBytes=V,t.stringToPDFString=ue,t.stringToUTF8String=fe,t.unreachable=S,t.utf8StringToString=De,t.warn=O;let n=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=n;let r=[1,0,0,1,0,0];t.IDENTITY_MATRIX=r;let i=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=i;let s=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=s;let o=1.35;t.LINE_FACTOR=o;let c=.35;t.LINE_DESCENT_FACTOR=c;let d=c/o;t.BASELINE_FACTOR=d;let u={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=u;let a={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=a;let l="pdfjs_internal_editor_";t.AnnotationEditorPrefix=l;let h={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorType=h;let p={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.AnnotationEditorParamsType=p;let g={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=g;let f={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=f;let v={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=v;let y={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=y;let E={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=E;let T={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=T;let M={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=M;let w={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=w;let C={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=C;let L={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=L;let U={O:"PageOpen",C:"PageClose"};t.PageActionEventType=U;let F={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=F;let $={NONE:0,BINARY:1};t.CMapCompressionType=$;let W={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=W;let ne={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=ne;let J=F.WARNINGS;function Q(te){Number.isInteger(te)&&(J=te)}function ie(){return J}function Z(te){J>=F.INFOS&&console.log(`Info: ${te}`)}function O(te){J>=F.WARNINGS&&console.log(`Warning: ${te}`)}function S(te){throw new Error(te)}function b(te,z){te||S(z)}function _(te){switch(te?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function A(te,z=null,H=null){if(!te)return null;try{if(H&&typeof te=="string"&&(H.addDefaultProtocol&&te.startsWith("www.")&&te.match(/\./g)?.length>=2&&(te=`http://${te}`),H.tryConvertEncoding))try{te=fe(te)}catch{}let ae=z?new URL(te,z):new URL(te);if(_(ae))return ae}catch{}return null}function N(te,z,H,ae=!1){return Object.defineProperty(te,z,{value:H,enumerable:!ae,configurable:!0,writable:!1}),H}let k=function(){function z(H,ae){this.constructor===z&&S("Cannot initialize BaseException."),this.message=H,this.name=ae}return z.prototype=new Error,z.constructor=z,z}();t.BaseException=k;class j extends k{constructor(z,H){super(z,"PasswordException"),this.code=H}}t.PasswordException=j;class x extends k{constructor(z,H){super(z,"UnknownErrorException"),this.details=H}}t.UnknownErrorException=x;class m extends k{constructor(z){super(z,"InvalidPDFException")}}t.InvalidPDFException=m;class D extends k{constructor(z){super(z,"MissingPDFException")}}t.MissingPDFException=D;class I extends k{constructor(z,H){super(z,"UnexpectedResponseException"),this.status=H}}t.UnexpectedResponseException=I;class R extends k{constructor(z){super(z,"FormatError")}}t.FormatError=R;class P extends k{constructor(z){super(z,"AbortException")}}t.AbortException=P;function B(te){(typeof te!="object"||te?.length===void 0)&&S("Invalid argument for bytesToString");let z=te.length,H=8192;if(z<H)return String.fromCharCode.apply(null,te);let ae=[];for(let xe=0;xe<z;xe+=H){let $e=Math.min(xe+H,z),ze=te.subarray(xe,$e);ae.push(String.fromCharCode.apply(null,ze))}return ae.join("")}function V(te){typeof te!="string"&&S("Invalid argument for stringToBytes");let z=te.length,H=new Uint8Array(z);for(let ae=0;ae<z;++ae)H[ae]=te.charCodeAt(ae)&255;return H}function G(te){return String.fromCharCode(te>>24&255,te>>16&255,te>>8&255,te&255)}function re(te){return Object.keys(te).length}function q(te){let z=Object.create(null);for(let[H,ae]of te)z[H]=ae;return z}function Y(){let te=new Uint8Array(4);return te[0]=1,new Uint32Array(te.buffer,0,1)[0]===1}function X(){try{return new Function(""),!0}catch{return!1}}class K{static get isLittleEndian(){return N(this,"isLittleEndian",Y())}static get isEvalSupported(){return N(this,"isEvalSupported",X())}static get isOffscreenCanvasSupported(){return N(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?N(this,"platform",{isWin:!1,isMac:!1}):N(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return N(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}t.FeatureTest=K;let ee=[...Array(256).keys()].map(te=>te.toString(16).padStart(2,"0"));class se{static makeHexColor(z,H,ae){return`#${ee[z]}${ee[H]}${ee[ae]}`}static scaleMinMax(z,H){let ae;z[0]?(z[0]<0&&(ae=H[0],H[0]=H[1],H[1]=ae),H[0]*=z[0],H[1]*=z[0],z[3]<0&&(ae=H[2],H[2]=H[3],H[3]=ae),H[2]*=z[3],H[3]*=z[3]):(ae=H[0],H[0]=H[2],H[2]=ae,ae=H[1],H[1]=H[3],H[3]=ae,z[1]<0&&(ae=H[2],H[2]=H[3],H[3]=ae),H[2]*=z[1],H[3]*=z[1],z[2]<0&&(ae=H[0],H[0]=H[1],H[1]=ae),H[0]*=z[2],H[1]*=z[2]),H[0]+=z[4],H[1]+=z[4],H[2]+=z[5],H[3]+=z[5]}static transform(z,H){return[z[0]*H[0]+z[2]*H[1],z[1]*H[0]+z[3]*H[1],z[0]*H[2]+z[2]*H[3],z[1]*H[2]+z[3]*H[3],z[0]*H[4]+z[2]*H[5]+z[4],z[1]*H[4]+z[3]*H[5]+z[5]]}static applyTransform(z,H){let ae=z[0]*H[0]+z[1]*H[2]+H[4],xe=z[0]*H[1]+z[1]*H[3]+H[5];return[ae,xe]}static applyInverseTransform(z,H){let ae=H[0]*H[3]-H[1]*H[2],xe=(z[0]*H[3]-z[1]*H[2]+H[2]*H[5]-H[4]*H[3])/ae,$e=(-z[0]*H[1]+z[1]*H[0]+H[4]*H[1]-H[5]*H[0])/ae;return[xe,$e]}static getAxialAlignedBoundingBox(z,H){let ae=this.applyTransform(z,H),xe=this.applyTransform(z.slice(2,4),H),$e=this.applyTransform([z[0],z[3]],H),ze=this.applyTransform([z[2],z[1]],H);return[Math.min(ae[0],xe[0],$e[0],ze[0]),Math.min(ae[1],xe[1],$e[1],ze[1]),Math.max(ae[0],xe[0],$e[0],ze[0]),Math.max(ae[1],xe[1],$e[1],ze[1])]}static inverseTransform(z){let H=z[0]*z[3]-z[1]*z[2];return[z[3]/H,-z[1]/H,-z[2]/H,z[0]/H,(z[2]*z[5]-z[4]*z[3])/H,(z[4]*z[1]-z[5]*z[0])/H]}static singularValueDecompose2dScale(z){let H=[z[0],z[2],z[1],z[3]],ae=z[0]*H[0]+z[1]*H[2],xe=z[0]*H[1]+z[1]*H[3],$e=z[2]*H[0]+z[3]*H[2],ze=z[2]*H[1]+z[3]*H[3],Un=(ae+ze)/2,Vn=Math.sqrt((ae+ze)**2-4*(ae*ze-$e*xe))/2,pn=Un+Vn||1,nt=Un-Vn||1;return[Math.sqrt(pn),Math.sqrt(nt)]}static normalizeRect(z){let H=z.slice(0);return z[0]>z[2]&&(H[0]=z[2],H[2]=z[0]),z[1]>z[3]&&(H[1]=z[3],H[3]=z[1]),H}static intersect(z,H){let ae=Math.max(Math.min(z[0],z[2]),Math.min(H[0],H[2])),xe=Math.min(Math.max(z[0],z[2]),Math.max(H[0],H[2]));if(ae>xe)return null;let $e=Math.max(Math.min(z[1],z[3]),Math.min(H[1],H[3])),ze=Math.min(Math.max(z[1],z[3]),Math.max(H[1],H[3]));return $e>ze?null:[ae,$e,xe,ze]}static bezierBoundingBox(z,H,ae,xe,$e,ze,Un,Vn){let pn=[],nt=[[],[]],Hn,Jt,Ti,Ue,xi,Ri,wo,Eo;for(let Do=0;Do<2;++Do){if(Do===0?(Jt=6*z-12*ae+6*$e,Hn=-3*z+9*ae-9*$e+3*Un,Ti=3*ae-3*z):(Jt=6*H-12*xe+6*ze,Hn=-3*H+9*xe-9*ze+3*Vn,Ti=3*xe-3*H),Math.abs(Hn)<1e-12){if(Math.abs(Jt)<1e-12)continue;Ue=-Ti/Jt,0<Ue&&Ue<1&&pn.push(Ue);continue}wo=Jt*Jt-4*Ti*Hn,Eo=Math.sqrt(wo),!(wo<0)&&(xi=(-Jt+Eo)/(2*Hn),0<xi&&xi<1&&pn.push(xi),Ri=(-Jt-Eo)/(2*Hn),0<Ri&&Ri<1&&pn.push(Ri))}let Nr=pn.length,ot,kr=Nr;for(;Nr--;)Ue=pn[Nr],ot=1-Ue,nt[0][Nr]=ot*ot*ot*z+3*ot*ot*Ue*ae+3*ot*Ue*Ue*$e+Ue*Ue*Ue*Un,nt[1][Nr]=ot*ot*ot*H+3*ot*ot*Ue*xe+3*ot*Ue*Ue*ze+Ue*Ue*Ue*Vn;return nt[0][kr]=z,nt[1][kr]=H,nt[0][kr+1]=Un,nt[1][kr+1]=Vn,nt[0].length=nt[1].length=kr+2,[Math.min(...nt[0]),Math.min(...nt[1]),Math.max(...nt[0]),Math.max(...nt[1])]}}t.Util=se;let le=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ue(te){if(te[0]>="\xEF"){let H;if(te[0]==="\xFE"&&te[1]==="\xFF"?H="utf-16be":te[0]==="\xFF"&&te[1]==="\xFE"?H="utf-16le":te[0]==="\xEF"&&te[1]==="\xBB"&&te[2]==="\xBF"&&(H="utf-8"),H)try{let ae=new TextDecoder(H,{fatal:!0}),xe=V(te);return ae.decode(xe)}catch(ae){O(`stringToPDFString: "${ae}".`)}}let z=[];for(let H=0,ae=te.length;H<ae;H++){let xe=le[te.charCodeAt(H)];z.push(xe?String.fromCharCode(xe):te.charAt(H))}return z.join("")}function fe(te){return decodeURIComponent(escape(te))}function De(te){return unescape(encodeURIComponent(te))}function Pe(te){return typeof te=="object"&&te?.byteLength!==void 0}function st(te,z){if(te.length!==z.length)return!1;for(let H=0,ae=te.length;H<ae;H++)if(te[H]!==z[H])return!1;return!0}function Ze(te=new Date){return[te.getUTCFullYear().toString(),(te.getUTCMonth()+1).toString().padStart(2,"0"),te.getUTCDate().toString().padStart(2,"0"),te.getUTCHours().toString().padStart(2,"0"),te.getUTCMinutes().toString().padStart(2,"0"),te.getUTCSeconds().toString().padStart(2,"0")].join("")}class Bn{#e=!1;constructor(){this.promise=new Promise((z,H)=>{this.resolve=ae=>{this.#e=!0,z(ae)},this.reject=ae=>{this.#e=!0,H(ae)}})}get settled(){return this.#e}}t.PromiseCapability=Bn;let Qe=null,Ht=null;function _o(te){return Qe||(Qe=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ht=new Map([["\uFB05","\u017Ft"]])),te.replaceAll(Qe,(z,H,ae)=>H?H.normalize("NFKC"):Ht.get(ae))}function $p(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();let te=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(te);else for(let z=0;z<32;z++)te[z]=Math.floor(Math.random()*255);return B(te)}let zp="pdfjs_internal_id_";t.AnnotationPrefix=zp},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);let DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(e){if(typeof e=="string"||e instanceof URL?e={url:e}:(0,_util.isArrayBuffer)(e)&&(e={data:e}),typeof e!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");let t=new PDFDocumentLoadingTask,{docId:n}=t,r=e.url?getUrlProp(e.url):null,i=e.data?getDataProp(e.data):null,s=e.httpHeaders||null,o=e.withCredentials===!0,c=e.password??null,d=e.range instanceof PDFDataRangeTransport?e.range:null,u=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE,a=e.worker instanceof PDFWorker?e.worker:null,l=e.verbosity,h=typeof e.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(e.docBaseUrl)?e.docBaseUrl:null,p=typeof e.cMapUrl=="string"?e.cMapUrl:null,g=e.cMapPacked!==!1,f=e.CMapReaderFactory||DefaultCMapReaderFactory,v=typeof e.standardFontDataUrl=="string"?e.standardFontDataUrl:null,y=e.StandardFontDataFactory||DefaultStandardFontDataFactory,E=e.stopAtErrors!==!0,T=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,M=e.isEvalSupported!==!1,w=typeof e.isOffscreenCanvasSupported=="boolean"?e.isOffscreenCanvasSupported:!_util.isNodeJS,C=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,L=typeof e.disableFontFace=="boolean"?e.disableFontFace:_util.isNodeJS,U=e.fontExtraProperties===!0,F=e.enableXfa===!0,$=e.ownerDocument||globalThis.document,W=e.disableRange===!0,ne=e.disableStream===!0,J=e.disableAutoFetch===!0,Q=e.pdfBug===!0,ie=d?d.length:e.length??NaN,Z=typeof e.useSystemFonts=="boolean"?e.useSystemFonts:!_util.isNodeJS&&!L,O=typeof e.useWorkerFetch=="boolean"?e.useWorkerFetch:f===_display_utils.DOMCMapReaderFactory&&y===_display_utils.DOMStandardFontDataFactory&&p&&v&&(0,_display_utils.isValidFetchUrl)(p,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(v,document.baseURI),S=e.canvasFactory||new DefaultCanvasFactory({ownerDocument:$}),b=e.filterFactory||new DefaultFilterFactory({docId:n,ownerDocument:$}),_=null;(0,_util.setVerbosityLevel)(l);let A={canvasFactory:S,filterFactory:b};if(O||(A.cMapReaderFactory=new f({baseUrl:p,isCompressed:g}),A.standardFontDataFactory=new y({baseUrl:v})),!a){let j={verbosity:l,port:_worker_options.GlobalWorkerOptions.workerPort};a=j.port?PDFWorker.fromPort(j):new PDFWorker(j),t._worker=a}let N={docId:n,apiVersion:"3.11.174",data:i,password:c,disableAutoFetch:J,rangeChunkSize:u,length:ie,docBaseUrl:h,enableXfa:F,evaluatorOptions:{maxImageSize:T,disableFontFace:L,ignoreErrors:E,isEvalSupported:M,isOffscreenCanvasSupported:w,canvasMaxAreaInBytes:C,fontExtraProperties:U,useSystemFonts:Z,cMapUrl:O?p:null,standardFontDataUrl:O?v:null}},k={ignoreErrors:E,isEvalSupported:M,disableFontFace:L,fontExtraProperties:U,enableXfa:F,ownerDocument:$,disableAutoFetch:J,pdfBug:Q,styleElement:_};return a.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");let j=_fetchDocument(a,N),x=new Promise(function(m){let D;d?D=new _transport_stream.PDFDataTransportStream({length:ie,initialData:d.initialData,progressiveDone:d.progressiveDone,contentDispositionFilename:d.contentDispositionFilename,disableRange:W,disableStream:ne},d):i||(D=(R=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(R):(0,_display_utils.isValidFetchUrl)(R.url)?new _displayFetch_stream.PDFFetchStream(R):new _displayNetwork.PDFNetworkStream(R))({url:r,length:ie,httpHeaders:s,withCredentials:o,rangeChunkSize:u,disableRange:W,disableStream:ne})),m(D)});return Promise.all([j,x]).then(function([m,D]){if(t.destroyed)throw new Error("Loading aborted");let I=new _message_handler.MessageHandler(n,m,a.port),R=new WorkerTransport(I,t,D,k,A);t._transport=R,I.send("Ready",null)})}).catch(t._capability.reject),t}function _fetchDocument(e,t){return ye(this,null,function*(){if(e.destroyed)throw new Error("Worker was destroyed");let n=yield e.messageHandler.sendWithPromise("GetDocRequest",t,t.data?[t.data.buffer]:null);if(e.destroyed)throw new Error("Worker was destroyed");return n})}function getUrlProp(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch{if(_util.isNodeJS&&typeof e=="string")return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(e){if(_util.isNodeJS&&typeof Buffer<"u"&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if(typeof e=="string")return(0,_util.stringToBytes)(e);if(typeof e=="object"&&!isNaN(e?.length)||(0,_util.isArrayBuffer)(e))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){return ye(this,null,function*(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),yield this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(t,n,r=!1,i=null){this.length=t,this.initialData=n,this.progressiveDone=r,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,n){for(let r of this._rangeListeners)r(t,n)}onDataProgress(t,n){this._readyCapability.promise.then(()=>{for(let r of this._progressListeners)r(t,n)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(let n of this._progressiveReadListeners)n(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,n){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,n){this._pdfInfo=t,this._transport=n,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(r=>{if(!r)return r;let i=[];for(let s in r)i.push(...r[s]);return i}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#e=null;#t=!1;constructor(t,n,r,i=!1){this._pageIndex=t,this._pageInfo=n,this._transport=r,this._stats=i?new _display_utils.StatTimer:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:n=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:s=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:n,offsetX:r,offsetY:i,dontFlip:s})}getAnnotations({intent:t="display"}={}){let n=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,n.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){return ye(this,null,function*(){return this._transport._htmlForXfa?.children[this._pageIndex]||null})}render({canvasContext:t,viewport:n,intent:r="display",annotationMode:i=_util.AnnotationMode.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:u=null,printAnnotationStorage:a=null}){this._stats?.time("Overall");let l=this._transport.getRenderingIntent(r,i,a);this.#t=!1,this.#r(),c||(c=this._transport.getOptionalContentConfig());let h=this._intentStates.get(l.cacheKey);h||(h=Object.create(null),this._intentStates.set(l.cacheKey,h)),h.streamReaderCancelTimeout&&(clearTimeout(h.streamReaderCancelTimeout),h.streamReaderCancelTimeout=null);let p=!!(l.renderingIntent&_util.RenderingIntentFlag.PRINT);h.displayReadyCapability||(h.displayReadyCapability=new _util.PromiseCapability,h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l));let g=y=>{h.renderTasks.delete(f),(this._maybeCleanupAfterRender||p)&&(this.#t=!0),this.#n(!p),y?(f.capability.reject(y),this._abortOperatorList({intentState:h,reason:y instanceof Error?y:new Error(y)})):f.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},f=new InternalRenderTask({callback:g,params:{canvasContext:t,viewport:n,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:h.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!p,pdfBug:this._pdfBug,pageColors:u});(h.renderTasks||=new Set).add(f);let v=f.task;return Promise.all([h.displayReadyCapability.promise,c]).then(([y,E])=>{if(this.destroyed){g();return}this._stats?.time("Rendering"),f.initializeGraphics({transparency:y,optionalContentConfig:E}),f.operatorListChanged()}).catch(g),v}getOperatorList({intent:t="display",annotationMode:n=_util.AnnotationMode.ENABLE,printAnnotationStorage:r=null}={}){function i(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(c))}let s=this._transport.getRenderingIntent(t,n,r,!0),o=this._intentStates.get(s.cacheKey);o||(o=Object.create(null),this._intentStates.set(s.cacheKey,o));let c;return o.opListReadCapability||(c=Object.create(null),c.operatorListChanged=i,o.opListReadCapability=new _util.PromiseCapability,(o.renderTasks||=new Set).add(c),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(s)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:n===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>_xfa_text.XfaText.textContent(r));let n=this.streamTextContent(t);return new Promise(function(r,i){function s(){o.read().then(function({value:d,done:u}){if(u){r(c);return}Object.assign(c.styles,d.styles),c.items.push(...d.items),s()},i)}let o=n.getReader(),c={items:[],styles:Object.create(null)};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let t=[];for(let n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(let r of n.renderTasks)t.push(r.completed),r.cancel();return this.objs.clear(),this.#t=!1,this.#r(),Promise.all(t)}cleanup(t=!1){this.#t=!0;let n=this.#n(!1);return t&&n&&(this._stats&&=new _display_utils.StatTimer),n}#n(t=!1){if(this.#r(),!this.#t||this.destroyed)return!1;if(t)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(let{renderTasks:n,operatorList:r}of this._intentStates.values())if(n.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#r(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(t,n){let r=this._intentStates.get(n);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(t))}_renderPageChunk(t,n){for(let r=0,i=t.length;r<i;r++)n.operatorList.fnArray.push(t.fnArray[r]),n.operatorList.argsArray.push(t.argsArray[r]);n.operatorList.lastChunk=t.lastChunk,n.operatorList.separateAnnots=t.separateAnnots;for(let r of n.renderTasks)r.operatorListChanged();t.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:n,annotationStorageSerializable:r}){let{map:i,transfers:s}=r,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:i},s).getReader(),d=this._intentStates.get(n);d.streamReader=c;let u=()=>{c.read().then(({value:a,done:l})=>{if(l){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(a,d),u())},a=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(let l of d.renderTasks)l.operatorListChanged();this.#n(!0)}if(d.displayReadyCapability)d.displayReadyCapability.reject(a);else if(d.opListReadCapability)d.opListReadCapability.reject(a);else throw a}})};u()}_abortOperatorList({intentState:t,reason:n,force:r=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!r){if(t.renderTasks.size>0)return;if(n instanceof _display_utils.RenderingCancelledException){let i=RENDERING_CANCELLED_TIMEOUT;n.extraDelay>0&&n.extraDelay<1e3&&(i+=n.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},i);return}}if(t.streamReader.cancel(new _util.AbortException(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(let[i,s]of this._intentStates)if(s===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#e=new Set;#t=Promise.resolve();postMessage(t,n){let r={data:structuredClone(t,n?{transfer:n}:null)};this.#t.then(()=>{for(let i of this.#e)i.call(this,r)})}addEventListener(t,n){this.#e.add(n)}removeEventListener(t,n){this.#e.delete(n)}terminate(){this.#e.clear()}}exports.LoopbackPort=LoopbackPort;let PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof Co=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){let e=document?.currentScript?.src;e&&(PDFWorkerUtil.fallbackWorkerSrc=e.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(e,t){let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}let r=new URL(t,n);return n.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(e){let t=`importScripts("${e}");`;return URL.createObjectURL(new Blob([t]))}}class PDFWorker{static#workerPorts;constructor({name:e=null,port:t=null,verbosity:n=(0,_util.getVerbosityLevel)()}={}){if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,t){if(PDFWorker.#workerPorts?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:e}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,e)||(e=PDFWorkerUtil.createCDNWrapper(new URL(e,window.location).href));let t=new Worker(e),n=new _message_handler.MessageHandler("main","worker",t),r=()=>{t.removeEventListener("error",i),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=()=>{this._webWorker||r()};t.addEventListener("error",i),n.on("test",o=>{if(t.removeEventListener("error",i),this.destroyed){r();return}o?(this._messageHandler=n,this._port=t,this._webWorker=t,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),t.terminate())}),n.on("ready",o=>{if(t.removeEventListener("error",i),this.destroyed){r();return}try{s()}catch{this._setupFakeWorker()}});let s=()=>{let o=new Uint8Array;n.send("test",o,[o.buffer])};s();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}let t=new LoopbackPort;this._port=t;let n=`fake${PDFWorkerUtil.fakeWorkerId++}`,r=new _message_handler.MessageHandler(n+"_worker",n,t);e.setup(r,t);let i=new _message_handler.MessageHandler(n,n+"_worker",t);this._messageHandler=i,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");let t=this.#workerPorts?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new PDFWorker(e)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){let loader=()=>ye(this,null,function*(){let mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof Co=="function"){let worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#e=new Map;#t=new Map;#n=new Map;#r=null;constructor(t,n,r,i,s){this.messageHandler=t,this.loadingTask=n,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#a(t,n=null){let r=this.#e.get(t);if(r)return r;let i=this.messageHandler.sendWithPromise(t,n);return this.#e.set(t,i),i}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(t,n=_util.AnnotationMode.ENABLE,r=null,i=!1){let s=_util.RenderingIntentFlag.DISPLAY,o=_annotation_storage.SerializableEmpty;switch(t){case"any":s=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":s=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${t}`)}switch(n){case _util.AnnotationMode.DISABLE:s+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:s+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:s+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,o=(s&_util.RenderingIntentFlag.PRINT&&r instanceof _annotation_storage.PrintAnnotationStorage?r:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${n}`)}return i&&(s+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:s,cacheKey:`${s}_${o.hash}`,annotationStorageSerializable:o}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));let t=[];for(let r of this.#t.values())t.push(r._destroy());this.#t.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:t,loadingTask:n}=this;t.on("GetReader",(r,i)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){i.close();return}(0,_util.assert)(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",r=>{let i=new _util.PromiseCapability,s=this._fullReader;return s.headersReady.then(()=>{(!s.isStreamingSupported||!s.isRangeSupported)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),s.onProgress=o=>{n.onProgress?.({loaded:o.loaded,total:o.total})}),i.resolve({isStreamingSupported:s.isStreamingSupported,isRangeSupported:s.isRangeSupported,contentLength:s.contentLength})},i.reject),i.promise}),t.on("GetRangeReader",(r,i)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let s=this._networkStream.getRangeReader(r.begin,r.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:o,done:c}){if(c){i.close();return}(0,_util.assert)(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{s.cancel(o),i.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,n._capability.resolve(new PDFDocumentProxy(r,this))}),t.on("DocException",function(r){let i;switch(r.name){case"PasswordException":i=new _util.PasswordException(r.message,r.code);break;case"InvalidPDFException":i=new _util.InvalidPDFException(r.message);break;case"MissingPDFException":i=new _util.MissingPDFException(r.message);break;case"UnexpectedResponseException":i=new _util.UnexpectedResponseException(r.message,r.status);break;case"UnknownErrorException":i=new _util.UnknownErrorException(r.message,r.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}n._capability.reject(i)}),t.on("PasswordRequest",r=>{if(this.#r=new _util.PromiseCapability,n.onPassword){let i=s=>{s instanceof Error?this.#r.reject(s):this.#r.resolve({password:s})};try{n.onPassword(i,r.code)}catch(s){this.#r.reject(s)}}else this.#r.reject(new _util.PasswordException(r.message,r.code));return this.#r.promise}),t.on("DataLoaded",r=>{n.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),t.on("StartRenderPage",r=>{if(this.destroyed)return;this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),t.on("commonobj",([r,i,s])=>{if(!this.destroyed&&!this.commonObjs.has(r))switch(i){case"Font":let o=this._params;if("error"in s){let u=s.error;(0,_util.warn)(`Error during font loading: ${u}`),this.commonObjs.resolve(r,u);break}let c=o.pdfBug&&globalThis.FontInspector?.enabled?(u,a)=>globalThis.FontInspector.fontAdded(u,a):null,d=new _font_loader.FontFaceObject(s,{isEvalSupported:o.isEvalSupported,disableFontFace:o.disableFontFace,ignoreErrors:o.ignoreErrors,inspectFont:c});this.fontLoader.bind(d).catch(u=>t.sendWithPromise("FontFallback",{id:r})).finally(()=>{!o.fontExtraProperties&&d.data&&(d.data=null),this.commonObjs.resolve(r,d)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,s);break;default:throw new Error(`Got unknown common object type ${i}`)}}),t.on("obj",([r,i,s,o])=>{if(this.destroyed)return;let c=this.#t.get(i);if(!c.objs.has(r))switch(s){case"Image":if(c.objs.resolve(r,o),o){let d;if(o.bitmap){let{width:u,height:a}=o;d=u*a*4}else d=o.data?.length||0;d>_util.MAX_IMAGE_SIZE_TO_CACHE&&(c._maybeCleanupAfterRender=!0)}break;case"Pattern":c.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${s}`)}}),t.on("DocProgress",r=>{this.destroyed||n.onProgress?.({loaded:r.loaded,total:r.total})}),t.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:t,transfers:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));let n=t-1,r=this.#n.get(n);if(r)return r;let i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");let o=new PDFPageProxy(n,s,this,this._params.pdfBug);return this.#t.set(n,o),o});return this.#n.set(n,i),i}getPageIndex(t){return typeof t!="object"||t===null||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:n})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(t=>new _optional_content_config.OptionalContentConfig(t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let t="GetMetadata",n=this.#e.get(t);if(n)return n;let r=this.messageHandler.sendWithPromise(t,null).then(i=>({info:i[0],metadata:i[1]?new _metadata.Metadata(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(t,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(t=!1){return ye(this,null,function*(){if(!this.destroyed){yield this.messageHandler.sendWithPromise("Cleanup",null);for(let n of this.#t.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0)}})}get loadingParams(){let{disableAutoFetch:t,enableXfa:n}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t,enableXfa:n})}}class PDFObjects{#e=Object.create(null);#t(t){return this.#e[t]||={capability:new _util.PromiseCapability,data:null}}get(t,n=null){if(n){let i=this.#t(t);return i.capability.promise.then(()=>n(i.data)),null}let r=this.#e[t];if(!r?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return r.data}has(t){return this.#e[t]?.capability.settled||!1}resolve(t,n=null){let r=this.#t(t);r.data=n,r.capability.resolve()}clear(){for(let t in this.#e){let{data:n}=this.#e[t];n?.bitmap?.close()}this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(t){this.#e=t,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(t=0){this.#e.cancel(null,t)}get separateAnnots(){let{separateAnnots:t}=this.#e.operatorList;if(!t)return!1;let{annotationCanvasMap:n}=this.#e;return t.form||t.canvas&&n?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:t,params:n,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:o,pageIndex:c,canvasFactory:d,filterFactory:u,useRequestAnimationFrame:a=!1,pdfBug:l=!1,pageColors:h=null}){this.callback=t,this.params=n,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=c,this.canvasFactory=d,this.filterFactory=u,this._pdfBug=l,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=a===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:r,viewport:i,transform:s,background:o}=this.params;this.gfx=new _canvas.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:i,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,n))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){return ye(this,null,function*(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback())))})}}let version="3.11.174";exports.version=version;let build="ce8716743";exports.build=build},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var r=n(1),i=n(4),s=n(8);let o=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=o;class c{#e=!1;#t=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(a,l){let h=this.#t.get(a);return h===void 0?l:Object.assign(l,h)}getRawValue(a){return this.#t.get(a)}remove(a){if(this.#t.delete(a),this.#t.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(let l of this.#t.values())if(l instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(a,l){let h=this.#t.get(a),p=!1;if(h!==void 0)for(let[g,f]of Object.entries(l))h[g]!==f&&(p=!0,h[g]=f);else p=!0,this.#t.set(a,l);p&&this.#n(),l instanceof i.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(l.constructor._type)}has(a){return this.#t.has(a)}getAll(){return this.#t.size>0?(0,r.objectFromMap)(this.#t):null}setAll(a){for(let[l,h]of Object.entries(a))this.setValue(l,h)}get size(){return this.#t.size}#n(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new d(this)}get serializable(){if(this.#t.size===0)return o;let a=new Map,l=new s.MurmurHash3_64,h=[],p=Object.create(null),g=!1;for(let[f,v]of this.#t){let y=v instanceof i.AnnotationEditor?v.serialize(!1,p):v;y&&(a.set(f,y),l.update(`${f}:${JSON.stringify(y)}`),g||=!!y.bitmap)}if(g)for(let f of a.values())f.bitmap&&h.push(f.bitmap);return a.size>0?{map:a,hash:l.hexdigest(),transfers:h}:o}}t.AnnotationStorage=c;class d extends c{#e;constructor(a){super();let{map:l,hash:h,transfers:p}=a.serializable,g=structuredClone(l,p?{transfer:p}:null);this.#e={map:g,hash:h,transfers:p}}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}t.PrintAnnotationStorage=d},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var r=n(5),i=n(1),s=n(6);class o{#e="";#t=!1;#n=null;#r=null;#a=null;#o=!1;#s=null;#c=this.focusin.bind(this);#l=this.focusout.bind(this);#i=!1;#f=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#h=!1;#p=o._zIndex++;static _borderLineWidth=-1;static _colorManager=new r.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(u){this.constructor===o&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=u.parent,this.id=u.id,this.width=this.height=null,this.pageIndex=u.parent.pageIndex,this.name=u.name,this.div=null,this._uiManager=u.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=u.isCentered,this._structTreeParentId=null;let{rotation:a,rawDims:{pageWidth:l,pageHeight:h,pageX:p,pageY:g}}=this.parent.viewport;this.rotation=a,this.pageRotation=(360+a-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[l,h],this.pageTranslation=[p,g];let[f,v]=this.parentDimensions;this.x=u.x/f,this.y=u.y/v,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(u){let a=new c({id:u.parent.getNextId(),parent:u.parent,uiManager:u._uiManager});a.annotationElementId=u.annotationElementId,a.deleted=!0,a._uiManager.addToAnnotationStorage(a)}static initialize(u,a=null){if(o._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(h=>[h,u.get(h)])),a?.strings)for(let h of a.strings)o._l10nPromise.set(h,u.get(h));if(o._borderLineWidth!==-1)return;let l=getComputedStyle(document.documentElement);o._borderLineWidth=parseFloat(l.getPropertyValue("--outline-width"))||0}static updateDefaultParams(u,a){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(u){return!1}static paste(u,a){(0,i.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#h}set _isDraggable(u){this.#h=u,this.div?.classList.toggle("draggable",u)}center(){let[u,a]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*a/(u*2),this.y+=this.width*u/(a*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*a/(u*2),this.y-=this.width*u/(a*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(u){this._uiManager.addCommands(u)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(u){u!==null&&(this.pageIndex=u.pageIndex,this.pageDimensions=u.pageDimensions),this.parent=u}focusin(u){this._focusEventsAllowed&&(this.#i?this.#i=!1:this.parent.setSelected(this))}focusout(u){!this._focusEventsAllowed||!this.isAttachedToDOM||u.relatedTarget?.closest(`#${this.id}`)||(u.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(u,a,l,h){let[p,g]=this.parentDimensions;[l,h]=this.screenToPageTranslation(l,h),this.x=(u+l)/p,this.y=(a+h)/g,this.fixAndSetPosition()}#v([u,a],l,h){[l,h]=this.screenToPageTranslation(l,h),this.x+=l/u,this.y+=h/a,this.fixAndSetPosition()}translate(u,a){this.#v(this.parentDimensions,u,a)}translateInPage(u,a){this.#v(this.pageDimensions,u,a),this.div.scrollIntoView({block:"nearest"})}drag(u,a){let[l,h]=this.parentDimensions;if(this.x+=u/l,this.y+=a/h,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:y,y:E}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,E)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:p,y:g}=this,[f,v]=this.#m();p+=f,g+=v,this.div.style.left=`${(100*p).toFixed(2)}%`,this.div.style.top=`${(100*g).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#m(){let[u,a]=this.parentDimensions,{_borderLineWidth:l}=o,h=l/u,p=l/a;switch(this.rotation){case 90:return[-h,p];case 180:return[h,p];case 270:return[h,-p];default:return[-h,-p]}}fixAndSetPosition(){let[u,a]=this.pageDimensions,{x:l,y:h,width:p,height:g}=this;switch(p*=u,g*=a,l*=u,h*=a,this.rotation){case 0:l=Math.max(0,Math.min(u-p,l)),h=Math.max(0,Math.min(a-g,h));break;case 90:l=Math.max(0,Math.min(u-g,l)),h=Math.min(a,Math.max(p,h));break;case 180:l=Math.min(u,Math.max(p,l)),h=Math.min(a,Math.max(g,h));break;case 270:l=Math.min(u,Math.max(g,l)),h=Math.max(0,Math.min(a-p,h));break}this.x=l/=u,this.y=h/=a;let[f,v]=this.#m();l+=f,h+=v;let{style:y}=this.div;y.left=`${(100*l).toFixed(2)}%`,y.top=`${(100*h).toFixed(2)}%`,this.moveInDOM()}static#g(u,a,l){switch(l){case 90:return[a,-u];case 180:return[-u,-a];case 270:return[-a,u];default:return[u,a]}}screenToPageTranslation(u,a){return o.#g(u,a,this.parentRotation)}pageTranslationToScreen(u,a){return o.#g(u,a,360-this.parentRotation)}#u(u){switch(u){case 90:{let[a,l]=this.pageDimensions;return[0,-a/l,l/a,0]}case 180:return[-1,0,0,-1];case 270:{let[a,l]=this.pageDimensions;return[0,a/l,-l/a,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:u,pageDimensions:[a,l]}=this,h=a*u,p=l*u;return i.FeatureTest.isCSSRoundSupported?[Math.round(h),Math.round(p)]:[h,p]}setDims(u,a){let[l,h]=this.parentDimensions;this.div.style.width=`${(100*u/l).toFixed(2)}%`,this.#o||(this.div.style.height=`${(100*a/h).toFixed(2)}%`),this.#n?.classList.toggle("small",u<o.SMALL_EDITOR_SIZE||a<o.SMALL_EDITOR_SIZE)}fixDims(){let{style:u}=this.div,{height:a,width:l}=u,h=l.endsWith("%"),p=!this.#o&&a.endsWith("%");if(h&&p)return;let[g,f]=this.parentDimensions;h||(u.width=`${(100*parseFloat(l)/g).toFixed(2)}%`),!this.#o&&!p&&(u.height=`${(100*parseFloat(a)/f).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#y(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");let u=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||u.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(let a of u){let l=document.createElement("div");this.#s.append(l),l.classList.add("resizer",a),l.addEventListener("pointerdown",this.#D.bind(this,a)),l.addEventListener("contextmenu",s.noContextMenu)}this.div.prepend(this.#s)}#D(u,a){a.preventDefault();let{isMac:l}=i.FeatureTest.platform;if(a.button!==0||a.ctrlKey&&l)return;let h=this.#E.bind(this,u),p=this._isDraggable;this._isDraggable=!1;let g={passive:!0,capture:!0};window.addEventListener("pointermove",h,g);let f=this.x,v=this.y,y=this.width,E=this.height,T=this.parent.div.style.cursor,M=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(a.target).cursor;let w=()=>{this._isDraggable=p,window.removeEventListener("pointerup",w),window.removeEventListener("blur",w),window.removeEventListener("pointermove",h,g),this.parent.div.style.cursor=T,this.div.style.cursor=M;let C=this.x,L=this.y,U=this.width,F=this.height;C===f&&L===v&&U===y&&F===E||this.addCommands({cmd:()=>{this.width=U,this.height=F,this.x=C,this.y=L;let[$,W]=this.parentDimensions;this.setDims($*U,W*F),this.fixAndSetPosition()},undo:()=>{this.width=y,this.height=E,this.x=f,this.y=v;let[$,W]=this.parentDimensions;this.setDims($*y,W*E),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",w),window.addEventListener("blur",w)}#E(u,a){let[l,h]=this.parentDimensions,p=this.x,g=this.y,f=this.width,v=this.height,y=o.MIN_SIZE/l,E=o.MIN_SIZE/h,T=x=>Math.round(x*1e4)/1e4,M=this.#u(this.rotation),w=(x,m)=>[M[0]*x+M[2]*m,M[1]*x+M[3]*m],C=this.#u(360-this.rotation),L=(x,m)=>[C[0]*x+C[2]*m,C[1]*x+C[3]*m],U,F,$=!1,W=!1;switch(u){case"topLeft":$=!0,U=(x,m)=>[0,0],F=(x,m)=>[x,m];break;case"topMiddle":U=(x,m)=>[x/2,0],F=(x,m)=>[x/2,m];break;case"topRight":$=!0,U=(x,m)=>[x,0],F=(x,m)=>[0,m];break;case"middleRight":W=!0,U=(x,m)=>[x,m/2],F=(x,m)=>[0,m/2];break;case"bottomRight":$=!0,U=(x,m)=>[x,m],F=(x,m)=>[0,0];break;case"bottomMiddle":U=(x,m)=>[x/2,m],F=(x,m)=>[x/2,0];break;case"bottomLeft":$=!0,U=(x,m)=>[0,m],F=(x,m)=>[x,0];break;case"middleLeft":W=!0,U=(x,m)=>[0,m/2],F=(x,m)=>[x,m/2];break}let ne=U(f,v),J=F(f,v),Q=w(...J),ie=T(p+Q[0]),Z=T(g+Q[1]),O=1,S=1,[b,_]=this.screenToPageTranslation(a.movementX,a.movementY);if([b,_]=L(b/l,_/h),$){let x=Math.hypot(f,v);O=S=Math.max(Math.min(Math.hypot(J[0]-ne[0]-b,J[1]-ne[1]-_)/x,1/f,1/v),y/f,E/v)}else W?O=Math.max(y,Math.min(1,Math.abs(J[0]-ne[0]-b)))/f:S=Math.max(E,Math.min(1,Math.abs(J[1]-ne[1]-_)))/v;let A=T(f*O),N=T(v*S);Q=w(...F(A,N));let k=ie-Q[0],j=Z-Q[1];this.width=A,this.height=N,this.x=k,this.y=j,this.setDims(l*A,h*N),this.fixAndSetPosition()}addAltTextButton(){return ye(this,null,function*(){if(this.#n)return;let u=this.#n=document.createElement("button");u.className="altText";let a=yield o._l10nPromise.get("editor_alt_text_button_label");u.textContent=a,u.setAttribute("aria-label",a),u.tabIndex="0",u.addEventListener("contextmenu",s.noContextMenu),u.addEventListener("pointerdown",l=>l.stopPropagation()),u.addEventListener("click",l=>{l.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),u.addEventListener("keydown",l=>{l.target===u&&l.key==="Enter"&&(l.preventDefault(),this._uiManager.editAltText(this))}),this.#A(),this.div.append(u),o.SMALL_EDITOR_SIZE||(o.SMALL_EDITOR_SIZE=Math.min(128,Math.round(u.getBoundingClientRect().width*1.4)))})}#A(){return ye(this,null,function*(){let u=this.#n;if(!u)return;if(!this.#e&&!this.#t){u.classList.remove("done"),this.#r?.remove();return}o._l10nPromise.get("editor_alt_text_edit_button_label").then(l=>{u.setAttribute("aria-label",l)});let a=this.#r;if(!a){this.#r=a=document.createElement("span"),a.className="tooltip",a.setAttribute("role","tooltip");let l=a.id=`alt-text-tooltip-${this.id}`;u.setAttribute("aria-describedby",l);let h=100;u.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#r.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},h)}),u.addEventListener("mouseleave",()=>{clearTimeout(this.#a),this.#a=null,this.#r?.classList.remove("show")})}u.classList.add("done"),a.innerText=this.#t?yield o._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#e,a.parentNode||u.append(a)})}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#e,decorative:this.#t}}set altTextData({altText:u,decorative:a}){this.#e===u&&this.#t===a||(this.#e=u,this.#t=a,this.#A())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#c),this.div.addEventListener("focusout",this.#l);let[u,a]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*a/u).toFixed(2)}%`,this.div.style.maxHeight=`${(100*u/a).toFixed(2)}%`);let[l,h]=this.getInitialTranslation();return this.translate(l,h),(0,r.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(u){let{isMac:a}=i.FeatureTest.platform;if(u.button!==0||u.ctrlKey&&a){u.preventDefault();return}this.#i=!0,this.#M(u)}#M(u){if(!this._isDraggable)return;let a=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let l,h;a&&(l={passive:!0,capture:!0},h=g=>{let[f,v]=this.screenToPageTranslation(g.movementX,g.movementY);this._uiManager.dragSelectedEditors(f,v)},window.addEventListener("pointermove",h,l));let p=()=>{if(window.removeEventListener("pointerup",p),window.removeEventListener("blur",p),a&&window.removeEventListener("pointermove",h,l),this.#i=!1,!this._uiManager.endDragSession()){let{isMac:g}=i.FeatureTest.platform;u.ctrlKey&&!g||u.shiftKey||u.metaKey&&g?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",p),window.addEventListener("blur",p)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(u,a,l){u.changeParent(this),this.x=a,this.y=l,this.fixAndSetPosition()}getRect(u,a){let l=this.parentScale,[h,p]=this.pageDimensions,[g,f]=this.pageTranslation,v=u/l,y=a/l,E=this.x*h,T=this.y*p,M=this.width*h,w=this.height*p;switch(this.rotation){case 0:return[E+v+g,p-T-y-w+f,E+v+M+g,p-T-y+f];case 90:return[E+y+g,p-T+v+f,E+y+w+g,p-T+v+M+f];case 180:return[E-v-M+g,p-T+y+f,E-v+g,p-T+y+w+f];case 270:return[E-y-w+g,p-T-v-M+f,E-y+g,p-T-v+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(u,a){let[l,h,p,g]=u,f=p-l,v=g-h;switch(this.rotation){case 0:return[l,a-g,f,v];case 90:return[l,a-h,v,f];case 180:return[p,a-h,f,v];case 270:return[p,a-g,v,f];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#c),this.div?.addEventListener("focusout",this.#l)}serialize(u=!1,a=null){(0,i.unreachable)("An editor must be serializable")}static deserialize(u,a,l){let h=new this.prototype.constructor({parent:a,id:a.getNextId(),uiManager:l});h.rotation=u.rotation;let[p,g]=h.pageDimensions,[f,v,y,E]=h.getRectInCurrentCoords(u.rect,g);return h.x=f/p,h.y=v/g,h.width=y/p,h.height=E/g,h}remove(){this.div.removeEventListener("focusin",this.#c),this.div.removeEventListener("focusout",this.#l),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#r=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#y(),this.#s.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(u,a){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(u){this.#f=u,this.parent&&(u?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(u,a){this.#o=!0;let l=u/a,{style:h}=this.div;h.aspectRatio=l,h.height="auto"}static get MIN_SIZE(){return 16}}t.AnnotationEditor=o;class c extends o{constructor(u){super(u),this.annotationElementId=u.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=s,t.opacityToHex=o;var r=n(1),i=n(6);function s(p,g,f){for(let v of f)g.addEventListener(v,p[v].bind(p))}function o(p){return Math.round(Math.min(255,Math.max(1,255*p))).toString(16).padStart(2,"0")}class c{#e=0;getId(){return`${r.AnnotationEditorPrefix}${this.#e++}`}}class d{#e=(0,r.getUuid)();#t=0;#n=null;static get _isSVGFittingCanvas(){let g='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',v=new OffscreenCanvas(1,3).getContext("2d"),y=new Image;y.src=g;let E=y.decode().then(()=>(v.drawImage(y,0,0,1,1,0,0,1,3),new Uint32Array(v.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,r.shadow)(this,"_isSVGFittingCanvas",E)}#r(g,f){return ye(this,null,function*(){this.#n||=new Map;let v=this.#n.get(g);if(v===null)return null;if(v?.bitmap)return v.refCounter+=1,v;try{v||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let y;if(typeof f=="string"){v.url=f;let E=yield fetch(f);if(!E.ok)throw new Error(E.statusText);y=yield E.blob()}else y=v.file=f;if(y.type==="image/svg+xml"){let E=d._isSVGFittingCanvas,T=new FileReader,M=new Image,w=new Promise((C,L)=>{M.onload=()=>{v.bitmap=M,v.isSvg=!0,C()},T.onload=()=>ye(this,null,function*(){let U=v.svgUrl=T.result;M.src=(yield E)?`${U}#svgView(preserveAspectRatio(none))`:U}),M.onerror=T.onerror=L});T.readAsDataURL(y),yield w}else v.bitmap=yield createImageBitmap(y);v.refCounter=1}catch(y){console.error(y),v=null}return this.#n.set(g,v),v&&this.#n.set(v.id,v),v})}getFromFile(g){return ye(this,null,function*(){let{lastModified:f,name:v,size:y,type:E}=g;return this.#r(`${f}_${v}_${y}_${E}`,g)})}getFromUrl(g){return ye(this,null,function*(){return this.#r(g,g)})}getFromId(g){return ye(this,null,function*(){this.#n||=new Map;let f=this.#n.get(g);return f?f.bitmap?(f.refCounter+=1,f):f.file?this.getFromFile(f.file):this.getFromUrl(f.url):null})}getSvgUrl(g){let f=this.#n.get(g);return f?.isSvg?f.svgUrl:null}deleteId(g){this.#n||=new Map;let f=this.#n.get(g);f&&(f.refCounter-=1,f.refCounter===0&&(f.bitmap=null))}isValidId(g){return g.startsWith(`image_${this.#e}_`)}}class u{#e=[];#t=!1;#n;#r=-1;constructor(g=128){this.#n=g}add({cmd:g,undo:f,mustExec:v,type:y=NaN,overwriteIfSameType:E=!1,keepUndo:T=!1}){if(v&&g(),this.#t)return;let M={cmd:g,undo:f,type:y};if(this.#r===-1){this.#e.length>0&&(this.#e.length=0),this.#r=0,this.#e.push(M);return}if(E&&this.#e[this.#r].type===y){T&&(M.undo=this.#e[this.#r].undo),this.#e[this.#r]=M;return}let w=this.#r+1;w===this.#n?this.#e.splice(0,1):(this.#r=w,w<this.#e.length&&this.#e.splice(w)),this.#e.push(M)}undo(){this.#r!==-1&&(this.#t=!0,this.#e[this.#r].undo(),this.#t=!1,this.#r-=1)}redo(){this.#r<this.#e.length-1&&(this.#r+=1,this.#t=!0,this.#e[this.#r].cmd(),this.#t=!1)}hasSomethingToUndo(){return this.#r!==-1}hasSomethingToRedo(){return this.#r<this.#e.length-1}destroy(){this.#e=null}}t.CommandManager=u;class a{constructor(g){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:f}=r.FeatureTest.platform;for(let[v,y,E={}]of g)for(let T of v){let M=T.startsWith("mac+");f&&M?(this.callbacks.set(T.slice(4),{callback:y,options:E}),this.allKeys.add(T.split("+").at(-1))):!f&&!M&&(this.callbacks.set(T,{callback:y,options:E}),this.allKeys.add(T.split("+").at(-1)))}}#e(g){g.altKey&&this.buffer.push("alt"),g.ctrlKey&&this.buffer.push("ctrl"),g.metaKey&&this.buffer.push("meta"),g.shiftKey&&this.buffer.push("shift"),this.buffer.push(g.key);let f=this.buffer.join("+");return this.buffer.length=0,f}exec(g,f){if(!this.allKeys.has(f.key))return;let v=this.callbacks.get(this.#e(f));if(!v)return;let{callback:y,options:{bubbles:E=!1,args:T=[],checker:M=null}}=v;M&&!M(g,f)||(y.bind(g,...T)(),E||(f.stopPropagation(),f.preventDefault()))}}t.KeyboardManager=a;class l{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){let g=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(g),(0,r.shadow)(this,"_colors",g)}convert(g){let f=(0,i.getRGB)(g);if(!window.matchMedia("(forced-colors: active)").matches)return f;for(let[v,y]of this._colors)if(y.every((E,T)=>E===f[T]))return l._colorsMapping.get(v);return f}getHexCode(g){let f=this._colors.get(g);return f?r.Util.makeHexColor(...f):g}}t.ColorManager=l;let h=(()=>{class p{#e=null;#t=new Map;#n=new Map;#r=null;#a=null;#o=new u;#s=0;#c=new Set;#l=null;#i=null;#f=new Set;#d=null;#h=new c;#p=!1;#v=!1;#m=null;#g=r.AnnotationEditorType.NONE;#u=new Set;#y=null;#D=this.blur.bind(this);#E=this.focus.bind(this);#A=this.copy.bind(this);#M=this.cut.bind(this);#k=this.paste.bind(this);#O=this.keydown.bind(this);#F=this.onEditingAction.bind(this);#b=this.onPageChanging.bind(this);#N=this.onScaleChanging.bind(this);#T=this.onRotationChanging.bind(this);#x={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#_=[0,0];#I=null;#C=null;#L=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let f=p.prototype,v=T=>{let{activeElement:M}=document;return M&&T.#C.contains(M)&&T.hasSomethingToControl()},y=this.TRANSLATE_SMALL,E=this.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new a([[["ctrl+a","mac+meta+a"],f.selectAll],[["ctrl+z","mac+meta+z"],f.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],f.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],f.delete],[["Escape","mac+Escape"],f.unselectAll],[["ArrowLeft","mac+ArrowLeft"],f.translateSelectedEditors,{args:[-y,0],checker:v}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],f.translateSelectedEditors,{args:[-E,0],checker:v}],[["ArrowRight","mac+ArrowRight"],f.translateSelectedEditors,{args:[y,0],checker:v}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],f.translateSelectedEditors,{args:[E,0],checker:v}],[["ArrowUp","mac+ArrowUp"],f.translateSelectedEditors,{args:[0,-y],checker:v}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],f.translateSelectedEditors,{args:[0,-E],checker:v}],[["ArrowDown","mac+ArrowDown"],f.translateSelectedEditors,{args:[0,y],checker:v}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],f.translateSelectedEditors,{args:[0,E],checker:v}]]))}constructor(f,v,y,E,T,M){this.#C=f,this.#L=v,this.#r=y,this._eventBus=E,this._eventBus._on("editingaction",this.#F),this._eventBus._on("pagechanging",this.#b),this._eventBus._on("scalechanging",this.#N),this._eventBus._on("rotationchanging",this.#T),this.#a=T.annotationStorage,this.#d=T.filterFactory,this.#y=M,this.viewParameters={realScale:i.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#R(),this.#B(),this._eventBus._off("editingaction",this.#F),this._eventBus._off("pagechanging",this.#b),this._eventBus._off("scalechanging",this.#N),this._eventBus._off("rotationchanging",this.#T);for(let f of this.#n.values())f.destroy();this.#n.clear(),this.#t.clear(),this.#f.clear(),this.#e=null,this.#u.clear(),this.#o.destroy(),this.#r.destroy()}get hcmFilter(){return(0,r.shadow)(this,"hcmFilter",this.#y?this.#d.addHCMFilter(this.#y.foreground,this.#y.background):"none")}get direction(){return(0,r.shadow)(this,"direction",getComputedStyle(this.#C).direction)}editAltText(f){this.#r?.editAltText(this,f)}onPageChanging({pageNumber:f}){this.#s=f-1}focusMainContainer(){this.#C.focus()}findParent(f,v){for(let y of this.#n.values()){let{x:E,y:T,width:M,height:w}=y.div.getBoundingClientRect();if(f>=E&&f<=E+M&&v>=T&&v<=T+w)return y}return null}disableUserSelect(f=!1){this.#L.classList.toggle("noUserSelect",f)}addShouldRescale(f){this.#f.add(f)}removeShouldRescale(f){this.#f.delete(f)}onScaleChanging({scale:f}){this.commitOrRemove(),this.viewParameters.realScale=f*i.PixelsPerInch.PDF_TO_CSS_UNITS;for(let v of this.#f)v.onScaleChanging()}onRotationChanging({pagesRotation:f}){this.commitOrRemove(),this.viewParameters.rotation=f}addToAnnotationStorage(f){!f.isEmpty()&&this.#a&&!this.#a.has(f.id)&&this.#a.setValue(f.id,f)}#j(){window.addEventListener("focus",this.#E),window.addEventListener("blur",this.#D)}#B(){window.removeEventListener("focus",this.#E),window.removeEventListener("blur",this.#D)}blur(){if(!this.hasSelection)return;let{activeElement:f}=document;for(let v of this.#u)if(v.div.contains(f)){this.#m=[v,f],v._focusEventsAllowed=!1;break}}focus(){if(!this.#m)return;let[f,v]=this.#m;this.#m=null,v.addEventListener("focusin",()=>{f._focusEventsAllowed=!0},{once:!0}),v.focus()}#U(){window.addEventListener("keydown",this.#O,{capture:!0})}#R(){window.removeEventListener("keydown",this.#O,{capture:!0})}#P(){document.addEventListener("copy",this.#A),document.addEventListener("cut",this.#M),document.addEventListener("paste",this.#k)}#S(){document.removeEventListener("copy",this.#A),document.removeEventListener("cut",this.#M),document.removeEventListener("paste",this.#k)}addEditListeners(){this.#U(),this.#P()}removeEditListeners(){this.#R(),this.#S()}copy(f){if(f.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;let v=[];for(let y of this.#u){let E=y.serialize(!0);E&&v.push(E)}v.length!==0&&f.clipboardData.setData("application/pdfjs",JSON.stringify(v))}cut(f){this.copy(f),this.delete()}paste(f){f.preventDefault();let{clipboardData:v}=f;for(let T of v.items)for(let M of this.#i)if(M.isHandlingMimeForPasting(T.type)){M.paste(T,this.currentLayer);return}let y=v.getData("application/pdfjs");if(!y)return;try{y=JSON.parse(y)}catch(T){(0,r.warn)(`paste: "${T.message}".`);return}if(!Array.isArray(y))return;this.unselectAll();let E=this.currentLayer;try{let T=[];for(let C of y){let L=E.deserialize(C);if(!L)return;T.push(L)}let M=()=>{for(let C of T)this.#$(C);this.#z(T)},w=()=>{for(let C of T)C.remove()};this.addCommands({cmd:M,undo:w,mustExec:!0})}catch(T){(0,r.warn)(`paste: "${T.message}".`)}}keydown(f){this.getActive()?.shouldGetKeyboardEvents()||p._keyboardManager.exec(this,f)}onEditingAction(f){["undo","redo","delete","selectAll"].includes(f.name)&&this[f.name]()}#w(f){Object.entries(f).some(([y,E])=>this.#x[y]!==E)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#x,f)})}#V(f){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:f})}setEditingState(f){f?(this.#j(),this.#U(),this.#P(),this.#w({isEditing:this.#g!==r.AnnotationEditorType.NONE,isEmpty:this.#H(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#B(),this.#R(),this.#S(),this.#w({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(f){if(!this.#i){this.#i=f;for(let v of this.#i)this.#V(v.defaultPropertiesToUpdate)}}getId(){return this.#h.getId()}get currentLayer(){return this.#n.get(this.#s)}getLayer(f){return this.#n.get(f)}get currentPageIndex(){return this.#s}addLayer(f){this.#n.set(f.pageIndex,f),this.#p?f.enable():f.disable()}removeLayer(f){this.#n.delete(f.pageIndex)}updateMode(f,v=null){if(this.#g!==f){if(this.#g=f,f===r.AnnotationEditorType.NONE){this.setEditingState(!1),this.#G();return}this.setEditingState(!0),this.#W(),this.unselectAll();for(let y of this.#n.values())y.updateMode(f);if(v){for(let y of this.#t.values())if(y.annotationElementId===v){this.setSelected(y),y.enterInEditMode();break}}}}updateToolbar(f){f!==this.#g&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:f})}updateParams(f,v){if(this.#i){if(f===r.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(f);return}for(let y of this.#u)y.updateParams(f,v);for(let y of this.#i)y.updateDefaultParams(f,v)}}enableWaiting(f=!1){if(this.#v!==f){this.#v=f;for(let v of this.#n.values())f?v.disableClick():v.enableClick(),v.div.classList.toggle("waiting",f)}}#W(){if(!this.#p){this.#p=!0;for(let f of this.#n.values())f.enable()}}#G(){if(this.unselectAll(),this.#p){this.#p=!1;for(let f of this.#n.values())f.disable()}}getEditors(f){let v=[];for(let y of this.#t.values())y.pageIndex===f&&v.push(y);return v}getEditor(f){return this.#t.get(f)}addEditor(f){this.#t.set(f.id,f)}removeEditor(f){this.#t.delete(f.id),this.unselect(f),(!f.annotationElementId||!this.#c.has(f.annotationElementId))&&this.#a?.remove(f.id)}addDeletedAnnotationElement(f){this.#c.add(f.annotationElementId),f.deleted=!0}isDeletedAnnotationElement(f){return this.#c.has(f)}removeDeletedAnnotationElement(f){this.#c.delete(f.annotationElementId),f.deleted=!1}#$(f){let v=this.#n.get(f.pageIndex);v?v.addOrRebuild(f):this.addEditor(f)}setActiveEditor(f){this.#e!==f&&(this.#e=f,f&&this.#V(f.propertiesToUpdate))}toggleSelected(f){if(this.#u.has(f)){this.#u.delete(f),f.unselect(),this.#w({hasSelectedEditor:this.hasSelection});return}this.#u.add(f),f.select(),this.#V(f.propertiesToUpdate),this.#w({hasSelectedEditor:!0})}setSelected(f){for(let v of this.#u)v!==f&&v.unselect();this.#u.clear(),this.#u.add(f),f.select(),this.#V(f.propertiesToUpdate),this.#w({hasSelectedEditor:!0})}isSelected(f){return this.#u.has(f)}unselect(f){f.unselect(),this.#u.delete(f),this.#w({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#u.size!==0}undo(){this.#o.undo(),this.#w({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#H()})}redo(){this.#o.redo(),this.#w({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#H()})}addCommands(f){this.#o.add(f),this.#w({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#H()})}#H(){if(this.#t.size===0)return!0;if(this.#t.size===1)for(let f of this.#t.values())return f.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;let f=[...this.#u],v=()=>{for(let E of f)E.remove()},y=()=>{for(let E of f)this.#$(E)};this.addCommands({cmd:v,undo:y,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#z(f){this.#u.clear();for(let v of f)v.isEmpty()||(this.#u.add(v),v.select());this.#w({hasSelectedEditor:!0})}selectAll(){for(let f of this.#u)f.commit();this.#z(this.#t.values())}unselectAll(){if(this.#e){this.#e.commitOrRemove();return}if(this.hasSelection){for(let f of this.#u)f.unselect();this.#u.clear(),this.#w({hasSelectedEditor:!1})}}translateSelectedEditors(f,v,y=!1){if(y||this.commitOrRemove(),!this.hasSelection)return;this.#_[0]+=f,this.#_[1]+=v;let[E,T]=this.#_,M=[...this.#u],w=1e3;this.#I&&clearTimeout(this.#I),this.#I=setTimeout(()=>{this.#I=null,this.#_[0]=this.#_[1]=0,this.addCommands({cmd:()=>{for(let C of M)this.#t.has(C.id)&&C.translateInPage(E,T)},undo:()=>{for(let C of M)this.#t.has(C.id)&&C.translateInPage(-E,-T)},mustExec:!1})},w);for(let C of M)C.translateInPage(f,v)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#l=new Map;for(let f of this.#u)this.#l.set(f,{savedX:f.x,savedY:f.y,savedPageIndex:f.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#l)return!1;this.disableUserSelect(!1);let f=this.#l;this.#l=null;let v=!1;for(let[{x:E,y:T,pageIndex:M},w]of f)w.newX=E,w.newY=T,w.newPageIndex=M,v||=E!==w.savedX||T!==w.savedY||M!==w.savedPageIndex;if(!v)return!1;let y=(E,T,M,w)=>{if(this.#t.has(E.id)){let C=this.#n.get(w);C?E._setParentAndPosition(C,T,M):(E.pageIndex=w,E.x=T,E.y=M)}};return this.addCommands({cmd:()=>{for(let[E,{newX:T,newY:M,newPageIndex:w}]of f)y(E,T,M,w)},undo:()=>{for(let[E,{savedX:T,savedY:M,savedPageIndex:w}]of f)y(E,T,M,w)},mustExec:!0}),!0}dragSelectedEditors(f,v){if(this.#l)for(let y of this.#l.keys())y.drag(f,v)}rebuild(f){if(f.parent===null){let v=this.getLayer(f.pageIndex);v?(v.changeParent(f),v.addOrRebuild(f)):(this.addEditor(f),this.addToAnnotationStorage(f),f.rebuild())}else f.parent.addOrRebuild(f)}isActive(f){return this.#e===f}getActive(){return this.#e}getMode(){return this.#g}get imageManager(){return(0,r.shadow)(this,"imageManager",new d)}}return p})();t.AnnotationEditorUIManager=h},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=L,t.getColorValues=ne,t.getCurrentTransform=J,t.getCurrentTransformInverse=Q,t.getFilenameFromUrl=y,t.getPdfFilenameFromUrl=E,t.getRGB=W,t.getXfaPageViewport=$,t.isDataScheme=f,t.isPdfFile=v,t.isValidFetchUrl=M,t.loadScript=C,t.noContextMenu=w,t.setLayerDimensions=ie;var r=n(7),i=n(1);let s="http://www.w3.org/2000/svg";class o{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}t.PixelsPerInch=o;class c extends r.BaseFilterFactory{#e;#t;#n;#r;#a;#o;#s;#c;#l;#i;#f=0;constructor({docId:O,ownerDocument:S=globalThis.document}={}){super(),this.#n=O,this.#r=S}get#d(){return this.#e||=new Map}get#h(){if(!this.#t){let O=this.#r.createElement("div"),{style:S}=O;S.visibility="hidden",S.contain="strict",S.width=S.height=0,S.position="absolute",S.top=S.left=0,S.zIndex=-1;let b=this.#r.createElementNS(s,"svg");b.setAttribute("width",0),b.setAttribute("height",0),this.#t=this.#r.createElementNS(s,"defs"),O.append(b),b.append(this.#t),this.#r.body.append(O)}return this.#t}addFilter(O){if(!O)return"none";let S=this.#d.get(O);if(S)return S;let b,_,A,N;if(O.length===1){let m=O[0],D=new Array(256);for(let I=0;I<256;I++)D[I]=m[I]/255;N=b=_=A=D.join(",")}else{let[m,D,I]=O,R=new Array(256),P=new Array(256),B=new Array(256);for(let V=0;V<256;V++)R[V]=m[V]/255,P[V]=D[V]/255,B[V]=I[V]/255;b=R.join(","),_=P.join(","),A=B.join(","),N=`${b}${_}${A}`}if(S=this.#d.get(N),S)return this.#d.set(O,S),S;let k=`g_${this.#n}_transfer_map_${this.#f++}`,j=`url(#${k})`;this.#d.set(O,j),this.#d.set(N,j);let x=this.#v(k);return this.#g(b,_,A,x),j}addHCMFilter(O,S){let b=`${O}-${S}`;if(this.#o===b)return this.#s;if(this.#o=b,this.#s="none",this.#a?.remove(),!O||!S)return this.#s;let _=this.#u(O);O=i.Util.makeHexColor(..._);let A=this.#u(S);if(S=i.Util.makeHexColor(...A),this.#h.style.color="",O==="#000000"&&S==="#ffffff"||O===S)return this.#s;let N=new Array(256);for(let D=0;D<=255;D++){let I=D/255;N[D]=I<=.03928?I/12.92:((I+.055)/1.055)**2.4}let k=N.join(","),j=`g_${this.#n}_hcm_filter`,x=this.#c=this.#v(j);this.#g(k,k,k,x),this.#p(x);let m=(D,I)=>{let R=_[D]/255,P=A[D]/255,B=new Array(I+1);for(let V=0;V<=I;V++)B[V]=R+V/I*(P-R);return B.join(",")};return this.#g(m(0,5),m(1,5),m(2,5),x),this.#s=`url(#${j})`,this.#s}addHighlightHCMFilter(O,S,b,_){let A=`${O}-${S}-${b}-${_}`;if(this.#l===A)return this.#i;if(this.#l=A,this.#i="none",this.#c?.remove(),!O||!S)return this.#i;let[N,k]=[O,S].map(this.#u.bind(this)),j=Math.round(.2126*N[0]+.7152*N[1]+.0722*N[2]),x=Math.round(.2126*k[0]+.7152*k[1]+.0722*k[2]),[m,D]=[b,_].map(this.#u.bind(this));x<j&&([j,x,m,D]=[x,j,D,m]),this.#h.style.color="";let I=(B,V,G)=>{let re=new Array(256),q=(x-j)/G,Y=B/255,X=(V-B)/(255*G),K=0;for(let ee=0;ee<=G;ee++){let se=Math.round(j+ee*q),le=Y+ee*X;for(let ue=K;ue<=se;ue++)re[ue]=le;K=se+1}for(let ee=K;ee<256;ee++)re[ee]=re[K-1];return re.join(",")},R=`g_${this.#n}_hcm_highlight_filter`,P=this.#c=this.#v(R);return this.#p(P),this.#g(I(m[0],D[0],5),I(m[1],D[1],5),I(m[2],D[2],5),P),this.#i=`url(#${R})`,this.#i}destroy(O=!1){O&&(this.#s||this.#i)||(this.#t&&(this.#t.parentNode.parentNode.remove(),this.#t=null),this.#e&&(this.#e.clear(),this.#e=null),this.#f=0)}#p(O){let S=this.#r.createElementNS(s,"feColorMatrix");S.setAttribute("type","matrix"),S.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),O.append(S)}#v(O){let S=this.#r.createElementNS(s,"filter");return S.setAttribute("color-interpolation-filters","sRGB"),S.setAttribute("id",O),this.#h.append(S),S}#m(O,S,b){let _=this.#r.createElementNS(s,S);_.setAttribute("type","discrete"),_.setAttribute("tableValues",b),O.append(_)}#g(O,S,b,_){let A=this.#r.createElementNS(s,"feComponentTransfer");_.append(A),this.#m(A,"feFuncR",O),this.#m(A,"feFuncG",S),this.#m(A,"feFuncB",b)}#u(O){return this.#h.style.color=O,W(getComputedStyle(this.#h).getPropertyValue("color"))}}t.DOMFilterFactory=c;class d extends r.BaseCanvasFactory{constructor({ownerDocument:O=globalThis.document}={}){super(),this._document=O}_createCanvas(O,S){let b=this._document.createElement("canvas");return b.width=O,b.height=S,b}}t.DOMCanvasFactory=d;function u(Z,O=!1){return ye(this,null,function*(){if(M(Z,document.baseURI)){let S=yield fetch(Z);if(!S.ok)throw new Error(S.statusText);return O?new Uint8Array(yield S.arrayBuffer()):(0,i.stringToBytes)(yield S.text())}return new Promise((S,b)=>{let _=new XMLHttpRequest;_.open("GET",Z,!0),O&&(_.responseType="arraybuffer"),_.onreadystatechange=()=>{if(_.readyState===XMLHttpRequest.DONE){if(_.status===200||_.status===0){let A;if(O&&_.response?A=new Uint8Array(_.response):!O&&_.responseText&&(A=(0,i.stringToBytes)(_.responseText)),A){S(A);return}}b(new Error(_.statusText))}},_.send(null)})})}class a extends r.BaseCMapReaderFactory{_fetchData(O,S){return u(O,this.isCompressed).then(b=>({cMapData:b,compressionType:S}))}}t.DOMCMapReaderFactory=a;class l extends r.BaseStandardFontDataFactory{_fetchData(O){return u(O,!0)}}t.DOMStandardFontDataFactory=l;class h extends r.BaseSVGFactory{_createSVG(O){return document.createElementNS(s,O)}}t.DOMSVGFactory=h;class p{constructor({viewBox:O,scale:S,rotation:b,offsetX:_=0,offsetY:A=0,dontFlip:N=!1}){this.viewBox=O,this.scale=S,this.rotation=b,this.offsetX=_,this.offsetY=A;let k=(O[2]+O[0])/2,j=(O[3]+O[1])/2,x,m,D,I;switch(b%=360,b<0&&(b+=360),b){case 180:x=-1,m=0,D=0,I=1;break;case 90:x=0,m=1,D=1,I=0;break;case 270:x=0,m=-1,D=-1,I=0;break;case 0:x=1,m=0,D=0,I=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}N&&(D=-D,I=-I);let R,P,B,V;x===0?(R=Math.abs(j-O[1])*S+_,P=Math.abs(k-O[0])*S+A,B=(O[3]-O[1])*S,V=(O[2]-O[0])*S):(R=Math.abs(k-O[0])*S+_,P=Math.abs(j-O[1])*S+A,B=(O[2]-O[0])*S,V=(O[3]-O[1])*S),this.transform=[x*S,m*S,D*S,I*S,R-x*S*k-D*S*j,P-m*S*k-I*S*j],this.width=B,this.height=V}get rawDims(){let{viewBox:O}=this;return(0,i.shadow)(this,"rawDims",{pageWidth:O[2]-O[0],pageHeight:O[3]-O[1],pageX:O[0],pageY:O[1]})}clone({scale:O=this.scale,rotation:S=this.rotation,offsetX:b=this.offsetX,offsetY:_=this.offsetY,dontFlip:A=!1}={}){return new p({viewBox:this.viewBox.slice(),scale:O,rotation:S,offsetX:b,offsetY:_,dontFlip:A})}convertToViewportPoint(O,S){return i.Util.applyTransform([O,S],this.transform)}convertToViewportRectangle(O){let S=i.Util.applyTransform([O[0],O[1]],this.transform),b=i.Util.applyTransform([O[2],O[3]],this.transform);return[S[0],S[1],b[0],b[1]]}convertToPdfPoint(O,S){return i.Util.applyInverseTransform([O,S],this.transform)}}t.PageViewport=p;class g extends i.BaseException{constructor(O,S=0){super(O,"RenderingCancelledException"),this.extraDelay=S}}t.RenderingCancelledException=g;function f(Z){let O=Z.length,S=0;for(;S<O&&Z[S].trim()==="";)S++;return Z.substring(S,S+5).toLowerCase()==="data:"}function v(Z){return typeof Z=="string"&&/\.pdf$/i.test(Z)}function y(Z,O=!1){return O||([Z]=Z.split(/[#?]/,1)),Z.substring(Z.lastIndexOf("/")+1)}function E(Z,O="document.pdf"){if(typeof Z!="string")return O;if(f(Z))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),O;let S=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,b=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,_=S.exec(Z),A=b.exec(_[1])||b.exec(_[2])||b.exec(_[3]);if(A&&(A=A[0],A.includes("%")))try{A=b.exec(decodeURIComponent(A))[0]}catch{}return A||O}class T{started=Object.create(null);times=[];time(O){O in this.started&&(0,i.warn)(`Timer is already running for ${O}`),this.started[O]=Date.now()}timeEnd(O){O in this.started||(0,i.warn)(`Timer has not been started for ${O}`),this.times.push({name:O,start:this.started[O],end:Date.now()}),delete this.started[O]}toString(){let O=[],S=0;for(let{name:b}of this.times)S=Math.max(b.length,S);for(let{name:b,start:_,end:A}of this.times)O.push(`${b.padEnd(S)} ${A-_}ms
`);return O.join("")}}t.StatTimer=T;function M(Z,O){try{let{protocol:S}=O?new URL(Z,O):new URL(Z);return S==="http:"||S==="https:"}catch{return!1}}function w(Z){Z.preventDefault()}function C(Z,O=!1){return new Promise((S,b)=>{let _=document.createElement("script");_.src=Z,_.onload=function(A){O&&_.remove(),S(A)},_.onerror=function(){b(new Error(`Cannot load script at: ${_.src}`))},(document.head||document.documentElement).append(_)})}function L(Z){console.log("Deprecated API usage: "+Z)}let U;class F{static toDateObject(O){if(!O||typeof O!="string")return null;U||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");let S=U.exec(O);if(!S)return null;let b=parseInt(S[1],10),_=parseInt(S[2],10);_=_>=1&&_<=12?_-1:0;let A=parseInt(S[3],10);A=A>=1&&A<=31?A:1;let N=parseInt(S[4],10);N=N>=0&&N<=23?N:0;let k=parseInt(S[5],10);k=k>=0&&k<=59?k:0;let j=parseInt(S[6],10);j=j>=0&&j<=59?j:0;let x=S[7]||"Z",m=parseInt(S[8],10);m=m>=0&&m<=23?m:0;let D=parseInt(S[9],10)||0;return D=D>=0&&D<=59?D:0,x==="-"?(N+=m,k+=D):x==="+"&&(N-=m,k-=D),new Date(Date.UTC(b,_,A,N,k,j))}}t.PDFDateString=F;function $(Z,{scale:O=1,rotation:S=0}){let{width:b,height:_}=Z.attributes.style,A=[0,0,parseInt(b),parseInt(_)];return new p({viewBox:A,scale:O,rotation:S})}function W(Z){if(Z.startsWith("#")){let O=parseInt(Z.slice(1),16);return[(O&16711680)>>16,(O&65280)>>8,O&255]}return Z.startsWith("rgb(")?Z.slice(4,-1).split(",").map(O=>parseInt(O)):Z.startsWith("rgba(")?Z.slice(5,-1).split(",").map(O=>parseInt(O)).slice(0,3):((0,i.warn)(`Not a valid color format: "${Z}"`),[0,0,0])}function ne(Z){let O=document.createElement("span");O.style.visibility="hidden",document.body.append(O);for(let S of Z.keys()){O.style.color=S;let b=window.getComputedStyle(O).color;Z.set(S,W(b))}O.remove()}function J(Z){let{a:O,b:S,c:b,d:_,e:A,f:N}=Z.getTransform();return[O,S,b,_,A,N]}function Q(Z){let{a:O,b:S,c:b,d:_,e:A,f:N}=Z.getTransform().invertSelf();return[O,S,b,_,A,N]}function ie(Z,O,S=!1,b=!0){if(O instanceof p){let{pageWidth:_,pageHeight:A}=O.rawDims,{style:N}=Z,k=i.FeatureTest.isCSSRoundSupported,j=`var(--scale-factor) * ${_}px`,x=`var(--scale-factor) * ${A}px`,m=k?`round(${j}, 1px)`:`calc(${j})`,D=k?`round(${x}, 1px)`:`calc(${x})`;!S||O.rotation%180===0?(N.width=m,N.height=D):(N.width=D,N.height=m)}b&&Z.setAttribute("data-main-rotation",O.rotation)}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var r=n(1);class i{constructor(){this.constructor===i&&(0,r.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(a){return"none"}addHCMFilter(a,l){return"none"}addHighlightHCMFilter(a,l,h,p){return"none"}destroy(a=!1){}}t.BaseFilterFactory=i;class s{constructor(){this.constructor===s&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(a,l){if(a<=0||l<=0)throw new Error("Invalid canvas size");let h=this._createCanvas(a,l);return{canvas:h,context:h.getContext("2d")}}reset(a,l,h){if(!a.canvas)throw new Error("Canvas is not specified");if(l<=0||h<=0)throw new Error("Invalid canvas size");a.canvas.width=l,a.canvas.height=h}destroy(a){if(!a.canvas)throw new Error("Canvas is not specified");a.canvas.width=0,a.canvas.height=0,a.canvas=null,a.context=null}_createCanvas(a,l){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=s;class o{constructor({baseUrl:a=null,isCompressed:l=!0}){this.constructor===o&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=a,this.isCompressed=l}fetch(l){return ye(this,arguments,function*({name:a}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!a)throw new Error("CMap name must be specified.");let h=this.baseUrl+a+(this.isCompressed?".bcmap":""),p=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(h,p).catch(g=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${h}`)})})}_fetchData(a,l){(0,r.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=o;class c{constructor({baseUrl:a=null}){this.constructor===c&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=a}fetch(l){return ye(this,arguments,function*({filename:a}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!a)throw new Error("Font filename must be specified.");let h=`${this.baseUrl}${a}`;return this._fetchData(h).catch(p=>{throw new Error(`Unable to load font data at: ${h}`)})})}_fetchData(a){(0,r.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=c;class d{constructor(){this.constructor===d&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(a,l,h=!1){if(a<=0||l<=0)throw new Error("Invalid SVG dimensions");let p=this._createSVG("svg:svg");return p.setAttribute("version","1.1"),h||(p.setAttribute("width",`${a}px`),p.setAttribute("height",`${l}px`)),p.setAttribute("preserveAspectRatio","none"),p.setAttribute("viewBox",`0 0 ${a} ${l}`),p}createElement(a){if(typeof a!="string")throw new Error("Invalid SVG element type");return this._createSVG(a)}_createSVG(a){(0,r.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=d},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var r=n(1);let i=3285377520,s=4294901760,o=65535;class c{constructor(u){this.h1=u?u&4294967295:i,this.h2=u?u&4294967295:i}update(u){let a,l;if(typeof u=="string"){a=new Uint8Array(u.length*2),l=0;for(let L=0,U=u.length;L<U;L++){let F=u.charCodeAt(L);F<=255?a[l++]=F:(a[l++]=F>>>8,a[l++]=F&255)}}else if((0,r.isArrayBuffer)(u))a=u.slice(),l=a.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");let h=l>>2,p=l-h*4,g=new Uint32Array(a.buffer,0,h),f=0,v=0,y=this.h1,E=this.h2,T=3432918353,M=461845907,w=T&o,C=M&o;for(let L=0;L<h;L++)L&1?(f=g[L],f=f*T&s|f*w&o,f=f<<15|f>>>17,f=f*M&s|f*C&o,y^=f,y=y<<13|y>>>19,y=y*5+3864292196):(v=g[L],v=v*T&s|v*w&o,v=v<<15|v>>>17,v=v*M&s|v*C&o,E^=v,E=E<<13|E>>>19,E=E*5+3864292196);switch(f=0,p){case 3:f^=a[h*4+2]<<16;case 2:f^=a[h*4+1]<<8;case 1:f^=a[h*4],f=f*T&s|f*w&o,f=f<<15|f>>>17,f=f*M&s|f*C&o,h&1?y^=f:E^=f}this.h1=y,this.h2=E}hexdigest(){let u=this.h1,a=this.h2;return u^=a>>>1,u=u*3981806797&s|u*36045&o,a=a*4283543511&s|((a<<16|u>>>16)*2950163797&s)>>>16,u^=a>>>1,u=u*444984403&s|u*60499&o,a=a*3301882366&s|((a<<16|u>>>16)*3120437893&s)>>>16,u^=a>>>1,(u>>>0).toString(16).padStart(8,"0")+(a>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=c},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var r=n(1);class i{#e=new Set;constructor({ownerDocument:c=globalThis.document,styleElement:d=null}){this._document=c,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(c){this.nativeFontFaces.add(c),this._document.fonts.add(c)}removeNativeFontFace(c){this.nativeFontFaces.delete(c),this._document.fonts.delete(c)}insertRule(c){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let d=this.styleElement.sheet;d.insertRule(c,d.cssRules.length)}clear(){for(let c of this.nativeFontFaces)this._document.fonts.delete(c);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(c){return ye(this,null,function*(){if(!(!c||this.#e.has(c.loadedName))){if((0,r.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:d,src:u,style:a}=c,l=new FontFace(d,u,a);this.addNativeFontFace(l);try{yield l.load(),this.#e.add(d)}catch{(0,r.warn)(`Cannot load system font: ${c.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}(0,r.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}})}bind(c){return ye(this,null,function*(){if(c.attached||c.missingFile&&!c.systemFontInfo)return;if(c.attached=!0,c.systemFontInfo){yield this.loadSystemFont(c.systemFontInfo);return}if(this.isFontLoadingAPISupported){let u=c.createNativeFontFace();if(u){this.addNativeFontFace(u);try{yield u.loaded}catch(a){throw(0,r.warn)(`Failed to load font '${u.family}': '${a}'.`),c.disableFontFace=!0,a}}return}let d=c.createFontFaceRule();if(d){if(this.insertRule(d),this.isSyncFontLoadingSupported)return;yield new Promise(u=>{let a=this._queueLoadingCallback(u);this._prepareFontLoadEvent(c,a)})}})}get isFontLoadingAPISupported(){let c=!!this._document?.fonts;return(0,r.shadow)(this,"isFontLoadingAPISupported",c)}get isSyncFontLoadingSupported(){let c=!1;return(r.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(c=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",c)}_queueLoadingCallback(c){function d(){for((0,r.assert)(!a.done,"completeRequest() cannot be called twice."),a.done=!0;u.length>0&&u[0].done;){let l=u.shift();setTimeout(l.callback,0)}}let{loadingRequests:u}=this,a={done:!1,complete:d,callback:c};return u.push(a),a}get _loadTestFont(){let c=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,r.shadow)(this,"_loadTestFont",c)}_prepareFontLoadEvent(c,d){function u($,W){return $.charCodeAt(W)<<24|$.charCodeAt(W+1)<<16|$.charCodeAt(W+2)<<8|$.charCodeAt(W+3)&255}function a($,W,ne,J){let Q=$.substring(0,W),ie=$.substring(W+ne);return Q+J+ie}let l,h,p=this._document.createElement("canvas");p.width=1,p.height=1;let g=p.getContext("2d"),f=0;function v($,W){if(++f>30){(0,r.warn)("Load test font never loaded."),W();return}if(g.font="30px "+$,g.fillText(".",0,20),g.getImageData(0,0,1,1).data[3]>0){W();return}setTimeout(v.bind(null,$,W))}let y=`lt${Date.now()}${this.loadTestFontId++}`,E=this._loadTestFont;E=a(E,976,y.length,y);let M=16,w=1482184792,C=u(E,M);for(l=0,h=y.length-3;l<h;l+=4)C=C-w+u(y,l)|0;l<y.length&&(C=C-w+u(y+"XXX",l)|0),E=a(E,M,4,(0,r.string32)(C));let L=`url(data:font/opentype;base64,${btoa(E)});`,U=`@font-face {font-family:"${y}";src:${L}}`;this.insertRule(U);let F=this._document.createElement("div");F.style.visibility="hidden",F.style.width=F.style.height="10px",F.style.position="absolute",F.style.top=F.style.left="0px";for(let $ of[c.loadedName,y]){let W=this._document.createElement("span");W.textContent="Hi",W.style.fontFamily=$,F.append(W)}this._document.body.append(F),v(y,()=>{F.remove(),d.complete()})}}t.FontLoader=i;class s{constructor(c,{isEvalSupported:d=!0,disableFontFace:u=!1,ignoreErrors:a=!1,inspectFont:l=null}){this.compiledGlyphs=Object.create(null);for(let h in c)this[h]=c[h];this.isEvalSupported=d!==!1,this.disableFontFace=u===!0,this.ignoreErrors=a===!0,this._inspectFont=l}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let c;if(!this.cssFontInfo)c=new FontFace(this.loadedName,this.data,{});else{let d={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(d.style=`oblique ${this.cssFontInfo.italicAngle}deg`),c=new FontFace(this.cssFontInfo.fontFamily,this.data,d)}return this._inspectFont?.(this),c}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let c=(0,r.bytesToString)(this.data),d=`url(data:${this.mimetype};base64,${btoa(c)});`,u;if(!this.cssFontInfo)u=`@font-face {font-family:"${this.loadedName}";src:${d}}`;else{let a=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(a+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),u=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${a}src:${d}}`}return this._inspectFont?.(this,d),u}getPathGenerator(c,d){if(this.compiledGlyphs[d]!==void 0)return this.compiledGlyphs[d];let u;try{u=c.get(this.loadedName+"_path_"+d)}catch(a){if(!this.ignoreErrors)throw a;return(0,r.warn)(`getPathGenerator - ignoring character: "${a}".`),this.compiledGlyphs[d]=function(l,h){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){let a=[];for(let l of u){let h=l.args!==void 0?l.args.join(","):"";a.push("c.",l.cmd,"(",h,`);
`)}return this.compiledGlyphs[d]=new Function("c","size",a.join(""))}return this.compiledGlyphs[d]=function(a,l){for(let h of u)h.cmd==="scale"&&(h.args=[l,-l]),a[h.cmd].apply(a,h.args)}}}t.FontFaceObject=s},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var r=n(7),i=n(1);let s=function(a){return new Promise((l,h)=>{yo().readFile(a,(g,f)=>{if(g||!f){h(new Error(g));return}l(new Uint8Array(f))})})};class o extends r.BaseFilterFactory{}t.NodeFilterFactory=o;class c extends r.BaseCanvasFactory{_createCanvas(l,h){return jp().createCanvas(l,h)}}t.NodeCanvasFactory=c;class d extends r.BaseCMapReaderFactory{_fetchData(l,h){return s(l).then(p=>({cMapData:p,compressionType:h}))}}t.NodeCMapReaderFactory=d;class u extends r.BaseStandardFontDataFactory{_fetchData(l){return s(l)}}t.NodeStandardFontDataFactory=u},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var r=n(1),i=n(6),s=n(12),o=n(13);let c=16,d=100,u=4096,a=15,l=10,h=1e3,p=16;function g(S,b){if(S._removeMirroring)throw new Error("Context is already forwarding operations.");S.__originalSave=S.save,S.__originalRestore=S.restore,S.__originalRotate=S.rotate,S.__originalScale=S.scale,S.__originalTranslate=S.translate,S.__originalTransform=S.transform,S.__originalSetTransform=S.setTransform,S.__originalResetTransform=S.resetTransform,S.__originalClip=S.clip,S.__originalMoveTo=S.moveTo,S.__originalLineTo=S.lineTo,S.__originalBezierCurveTo=S.bezierCurveTo,S.__originalRect=S.rect,S.__originalClosePath=S.closePath,S.__originalBeginPath=S.beginPath,S._removeMirroring=()=>{S.save=S.__originalSave,S.restore=S.__originalRestore,S.rotate=S.__originalRotate,S.scale=S.__originalScale,S.translate=S.__originalTranslate,S.transform=S.__originalTransform,S.setTransform=S.__originalSetTransform,S.resetTransform=S.__originalResetTransform,S.clip=S.__originalClip,S.moveTo=S.__originalMoveTo,S.lineTo=S.__originalLineTo,S.bezierCurveTo=S.__originalBezierCurveTo,S.rect=S.__originalRect,S.closePath=S.__originalClosePath,S.beginPath=S.__originalBeginPath,delete S._removeMirroring},S.save=function(){b.save(),this.__originalSave()},S.restore=function(){b.restore(),this.__originalRestore()},S.translate=function(A,N){b.translate(A,N),this.__originalTranslate(A,N)},S.scale=function(A,N){b.scale(A,N),this.__originalScale(A,N)},S.transform=function(A,N,k,j,x,m){b.transform(A,N,k,j,x,m),this.__originalTransform(A,N,k,j,x,m)},S.setTransform=function(A,N,k,j,x,m){b.setTransform(A,N,k,j,x,m),this.__originalSetTransform(A,N,k,j,x,m)},S.resetTransform=function(){b.resetTransform(),this.__originalResetTransform()},S.rotate=function(A){b.rotate(A),this.__originalRotate(A)},S.clip=function(A){b.clip(A),this.__originalClip(A)},S.moveTo=function(_,A){b.moveTo(_,A),this.__originalMoveTo(_,A)},S.lineTo=function(_,A){b.lineTo(_,A),this.__originalLineTo(_,A)},S.bezierCurveTo=function(_,A,N,k,j,x){b.bezierCurveTo(_,A,N,k,j,x),this.__originalBezierCurveTo(_,A,N,k,j,x)},S.rect=function(_,A,N,k){b.rect(_,A,N,k),this.__originalRect(_,A,N,k)},S.closePath=function(){b.closePath(),this.__originalClosePath()},S.beginPath=function(){b.beginPath(),this.__originalBeginPath()}}class f{constructor(b){this.canvasFactory=b,this.cache=Object.create(null)}getCanvas(b,_,A){let N;return this.cache[b]!==void 0?(N=this.cache[b],this.canvasFactory.reset(N,_,A)):(N=this.canvasFactory.create(_,A),this.cache[b]=N),N}delete(b){delete this.cache[b]}clear(){for(let b in this.cache){let _=this.cache[b];this.canvasFactory.destroy(_),delete this.cache[b]}}}function v(S,b,_,A,N,k,j,x,m,D){let[I,R,P,B,V,G]=(0,i.getCurrentTransform)(S);if(R===0&&P===0){let Y=j*I+V,X=Math.round(Y),K=x*B+G,ee=Math.round(K),se=(j+m)*I+V,le=Math.abs(Math.round(se)-X)||1,ue=(x+D)*B+G,fe=Math.abs(Math.round(ue)-ee)||1;return S.setTransform(Math.sign(I),0,0,Math.sign(B),X,ee),S.drawImage(b,_,A,N,k,0,0,le,fe),S.setTransform(I,R,P,B,V,G),[le,fe]}if(I===0&&B===0){let Y=x*P+V,X=Math.round(Y),K=j*R+G,ee=Math.round(K),se=(x+D)*P+V,le=Math.abs(Math.round(se)-X)||1,ue=(j+m)*R+G,fe=Math.abs(Math.round(ue)-ee)||1;return S.setTransform(0,Math.sign(R),Math.sign(P),0,X,ee),S.drawImage(b,_,A,N,k,0,0,fe,le),S.setTransform(I,R,P,B,V,G),[fe,le]}S.drawImage(b,_,A,N,k,j,x,m,D);let re=Math.hypot(I,R),q=Math.hypot(P,B);return[re*m,q*D]}function y(S){let{width:b,height:_}=S;if(b>h||_>h)return null;let A=1e3,N=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),k=b+1,j=new Uint8Array(k*(_+1)),x,m,D,I=b+7&-8,R=new Uint8Array(I*_),P=0;for(let q of S.data){let Y=128;for(;Y>0;)R[P++]=q&Y?0:255,Y>>=1}let B=0;for(P=0,R[P]!==0&&(j[0]=1,++B),m=1;m<b;m++)R[P]!==R[P+1]&&(j[m]=R[P]?2:1,++B),P++;for(R[P]!==0&&(j[m]=2,++B),x=1;x<_;x++){P=x*I,D=x*k,R[P-I]!==R[P]&&(j[D]=R[P]?1:8,++B);let q=(R[P]?4:0)+(R[P-I]?8:0);for(m=1;m<b;m++)q=(q>>2)+(R[P+1]?4:0)+(R[P-I+1]?8:0),N[q]&&(j[D+m]=N[q],++B),P++;if(R[P-I]!==R[P]&&(j[D+m]=R[P]?2:4,++B),B>A)return null}for(P=I*(_-1),D=x*k,R[P]!==0&&(j[D]=8,++B),m=1;m<b;m++)R[P]!==R[P+1]&&(j[D+m]=R[P]?4:8,++B),P++;if(R[P]!==0&&(j[D+m]=4,++B),B>A)return null;let V=new Int32Array([0,k,-1,0,-k,0,0,0,1]),G=new Path2D;for(x=0;B&&x<=_;x++){let q=x*k,Y=q+b;for(;q<Y&&!j[q];)q++;if(q===Y)continue;G.moveTo(q%k,x);let X=q,K=j[q];do{let ee=V[K];do q+=ee;while(!j[q]);let se=j[q];se!==5&&se!==10?(K=se,j[q]=0):(K=se&51*K>>4,j[q]&=K>>2|K<<2),G.lineTo(q%k,q/k|0),j[q]||--B}while(X!==q);--x}return R=null,j=null,function(q){q.save(),q.scale(1/b,-1/_),q.translate(0,-_),q.fill(G),q.beginPath(),q.restore()}}class E{constructor(b,_){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,b,_])}clone(){let b=Object.create(this);return b.clipBox=this.clipBox.slice(),b}setCurrentPoint(b,_){this.x=b,this.y=_}updatePathMinMax(b,_,A){[_,A]=r.Util.applyTransform([_,A],b),this.minX=Math.min(this.minX,_),this.minY=Math.min(this.minY,A),this.maxX=Math.max(this.maxX,_),this.maxY=Math.max(this.maxY,A)}updateRectMinMax(b,_){let A=r.Util.applyTransform(_,b),N=r.Util.applyTransform(_.slice(2),b);this.minX=Math.min(this.minX,A[0],N[0]),this.minY=Math.min(this.minY,A[1],N[1]),this.maxX=Math.max(this.maxX,A[0],N[0]),this.maxY=Math.max(this.maxY,A[1],N[1])}updateScalingPathMinMax(b,_){r.Util.scaleMinMax(b,_),this.minX=Math.min(this.minX,_[0]),this.maxX=Math.max(this.maxX,_[1]),this.minY=Math.min(this.minY,_[2]),this.maxY=Math.max(this.maxY,_[3])}updateCurvePathMinMax(b,_,A,N,k,j,x,m,D,I){let R=r.Util.bezierBoundingBox(_,A,N,k,j,x,m,D);if(I){I[0]=Math.min(I[0],R[0],R[2]),I[1]=Math.max(I[1],R[0],R[2]),I[2]=Math.min(I[2],R[1],R[3]),I[3]=Math.max(I[3],R[1],R[3]);return}this.updateRectMinMax(b,R)}getPathBoundingBox(b=s.PathType.FILL,_=null){let A=[this.minX,this.minY,this.maxX,this.maxY];if(b===s.PathType.STROKE){_||(0,r.unreachable)("Stroke bounding box must include transform.");let N=r.Util.singularValueDecompose2dScale(_),k=N[0]*this.lineWidth/2,j=N[1]*this.lineWidth/2;A[0]-=k,A[1]-=j,A[2]+=k,A[3]+=j}return A}updateClipFromPath(){let b=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(b||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(b){this.clipBox=b,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(b=s.PathType.FILL,_=null){return r.Util.intersect(this.clipBox,this.getPathBoundingBox(b,_))}}function T(S,b){if(typeof ImageData<"u"&&b instanceof ImageData){S.putImageData(b,0,0);return}let _=b.height,A=b.width,N=_%p,k=(_-N)/p,j=N===0?k:k+1,x=S.createImageData(A,p),m=0,D,I=b.data,R=x.data,P,B,V,G;if(b.kind===r.ImageKind.GRAYSCALE_1BPP){let re=I.byteLength,q=new Uint32Array(R.buffer,0,R.byteLength>>2),Y=q.length,X=A+7>>3,K=4294967295,ee=r.FeatureTest.isLittleEndian?4278190080:255;for(P=0;P<j;P++){for(V=P<k?p:N,D=0,B=0;B<V;B++){let se=re-m,le=0,ue=se>X?A:se*8-7,fe=ue&-8,De=0,Pe=0;for(;le<fe;le+=8)Pe=I[m++],q[D++]=Pe&128?K:ee,q[D++]=Pe&64?K:ee,q[D++]=Pe&32?K:ee,q[D++]=Pe&16?K:ee,q[D++]=Pe&8?K:ee,q[D++]=Pe&4?K:ee,q[D++]=Pe&2?K:ee,q[D++]=Pe&1?K:ee;for(;le<ue;le++)De===0&&(Pe=I[m++],De=128),q[D++]=Pe&De?K:ee,De>>=1}for(;D<Y;)q[D++]=0;S.putImageData(x,0,P*p)}}else if(b.kind===r.ImageKind.RGBA_32BPP){for(B=0,G=A*p*4,P=0;P<k;P++)R.set(I.subarray(m,m+G)),m+=G,S.putImageData(x,0,B),B+=p;P<j&&(G=A*N*4,R.set(I.subarray(m,m+G)),S.putImageData(x,0,B))}else if(b.kind===r.ImageKind.RGB_24BPP)for(V=p,G=A*V,P=0;P<j;P++){for(P>=k&&(V=N,G=A*V),D=0,B=G;B--;)R[D++]=I[m++],R[D++]=I[m++],R[D++]=I[m++],R[D++]=255;S.putImageData(x,0,P*p)}else throw new Error(`bad image kind: ${b.kind}`)}function M(S,b){if(b.bitmap){S.drawImage(b.bitmap,0,0);return}let _=b.height,A=b.width,N=_%p,k=(_-N)/p,j=N===0?k:k+1,x=S.createImageData(A,p),m=0,D=b.data,I=x.data;for(let R=0;R<j;R++){let P=R<k?p:N;({srcPos:m}=(0,o.convertBlackAndWhiteToRGBA)({src:D,srcPos:m,dest:I,width:A,height:P,nonBlackColor:0})),S.putImageData(x,0,R*p)}}function w(S,b){let _=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let A of _)S[A]!==void 0&&(b[A]=S[A]);S.setLineDash!==void 0&&(b.setLineDash(S.getLineDash()),b.lineDashOffset=S.lineDashOffset)}function C(S){if(S.strokeStyle=S.fillStyle="#000000",S.fillRule="nonzero",S.globalAlpha=1,S.lineWidth=1,S.lineCap="butt",S.lineJoin="miter",S.miterLimit=10,S.globalCompositeOperation="source-over",S.font="10px sans-serif",S.setLineDash!==void 0&&(S.setLineDash([]),S.lineDashOffset=0),!r.isNodeJS){let{filter:b}=S;b!=="none"&&b!==""&&(S.filter="none")}}function L(S,b,_,A){let N=S.length;for(let k=3;k<N;k+=4){let j=S[k];if(j===0)S[k-3]=b,S[k-2]=_,S[k-1]=A;else if(j<255){let x=255-j;S[k-3]=S[k-3]*j+b*x>>8,S[k-2]=S[k-2]*j+_*x>>8,S[k-1]=S[k-1]*j+A*x>>8}}}function U(S,b,_){let A=S.length,N=1/255;for(let k=3;k<A;k+=4){let j=_?_[S[k]]:S[k];b[k]=b[k]*j*N|0}}function F(S,b,_){let A=S.length;for(let N=3;N<A;N+=4){let k=S[N-3]*77+S[N-2]*152+S[N-1]*28;b[N]=_?b[N]*_[k>>8]>>8:b[N]*k>>16}}function $(S,b,_,A,N,k,j,x,m,D,I){let R=!!k,P=R?k[0]:0,B=R?k[1]:0,V=R?k[2]:0,G=N==="Luminosity"?F:U,q=Math.min(A,Math.ceil(1048576/_));for(let Y=0;Y<A;Y+=q){let X=Math.min(q,A-Y),K=S.getImageData(x-D,Y+(m-I),_,X),ee=b.getImageData(x,Y+m,_,X);R&&L(K.data,P,B,V),G(K.data,ee.data,j),b.putImageData(ee,x,Y+m)}}function W(S,b,_,A){let N=A[0],k=A[1],j=A[2]-N,x=A[3]-k;j===0||x===0||($(b.context,_,j,x,b.subtype,b.backdrop,b.transferMap,N,k,b.offsetX,b.offsetY),S.save(),S.globalAlpha=1,S.globalCompositeOperation="source-over",S.setTransform(1,0,0,1,0,0),S.drawImage(_.canvas,0,0),S.restore())}function ne(S,b){let _=r.Util.singularValueDecompose2dScale(S);_[0]=Math.fround(_[0]),_[1]=Math.fround(_[1]);let A=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return b!==void 0?b:_[0]<=A||_[1]<=A}let J=["butt","round","square"],Q=["miter","round","bevel"],ie={},Z={};class O{constructor(b,_,A,N,k,{optionalContentConfig:j,markedContentStack:x=null},m,D){this.ctx=b,this.current=new E(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=_,this.objs=A,this.canvasFactory=N,this.filterFactory=k,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=x||[],this.optionalContentConfig=j,this.cachedCanvases=new f(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=m,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=D,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(b,_=null){return typeof b=="string"?b.startsWith("g_")?this.commonObjs.get(b):this.objs.get(b):_}beginDrawing({transform:b,viewport:_,transparency:A=!1,background:N=null}){let k=this.ctx.canvas.width,j=this.ctx.canvas.height,x=this.ctx.fillStyle;if(this.ctx.fillStyle=N||"#ffffff",this.ctx.fillRect(0,0,k,j),this.ctx.fillStyle=x,A){let m=this.cachedCanvases.getCanvas("transparent",k,j);this.compositeCtx=this.ctx,this.transparentCanvas=m.canvas,this.ctx=m.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),C(this.ctx),b&&(this.ctx.transform(...b),this.outputScaleX=b[0],this.outputScaleY=b[0]),this.ctx.transform(..._.transform),this.viewportScale=_.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx)}executeOperatorList(b,_,A,N){let k=b.argsArray,j=b.fnArray,x=_||0,m=k.length;if(m===x)return x;let D=m-x>l&&typeof A=="function",I=D?Date.now()+a:0,R=0,P=this.commonObjs,B=this.objs,V;for(;;){if(N!==void 0&&x===N.nextBreakPoint)return N.breakIt(x,A),x;if(V=j[x],V!==r.OPS.dependency)this[V].apply(this,k[x]);else for(let G of k[x]){let re=G.startsWith("g_")?P:B;if(!re.has(G))return re.get(G,A),x}if(x++,x===m)return x;if(D&&++R>l){if(Date.now()>I)return A(),x;R=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let b of this._cachedBitmapsMap.values()){for(let _ of b.values())typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement&&(_.width=_.height=0);b.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){let b=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(b!=="none"){let _=this.ctx.filter;this.ctx.filter=b,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=_}}}_scaleImage(b,_){let A=b.width,N=b.height,k=Math.max(Math.hypot(_[0],_[1]),1),j=Math.max(Math.hypot(_[2],_[3]),1),x=A,m=N,D="prescale1",I,R;for(;k>2&&x>1||j>2&&m>1;){let P=x,B=m;k>2&&x>1&&(P=x>=16384?Math.floor(x/2)-1||1:Math.ceil(x/2),k/=x/P),j>2&&m>1&&(B=m>=16384?Math.floor(m/2)-1||1:Math.ceil(m)/2,j/=m/B),I=this.cachedCanvases.getCanvas(D,P,B),R=I.context,R.clearRect(0,0,P,B),R.drawImage(b,0,0,x,m,0,0,P,B),b=I.canvas,x=P,m=B,D=D==="prescale1"?"prescale2":"prescale1"}return{img:b,paintWidth:x,paintHeight:m}}_createMaskCanvas(b){let _=this.ctx,{width:A,height:N}=b,k=this.current.fillColor,j=this.current.patternFill,x=(0,i.getCurrentTransform)(_),m,D,I,R;if((b.bitmap||b.data)&&b.count>1){let le=b.bitmap||b.data.buffer;D=JSON.stringify(j?x:[x.slice(0,4),k]),m=this._cachedBitmapsMap.get(le),m||(m=new Map,this._cachedBitmapsMap.set(le,m));let ue=m.get(D);if(ue&&!j){let fe=Math.round(Math.min(x[0],x[2])+x[4]),De=Math.round(Math.min(x[1],x[3])+x[5]);return{canvas:ue,offsetX:fe,offsetY:De}}I=ue}I||(R=this.cachedCanvases.getCanvas("maskCanvas",A,N),M(R.context,b));let P=r.Util.transform(x,[1/A,0,0,-1/N,0,0]);P=r.Util.transform(P,[1,0,0,1,0,-N]);let B=r.Util.applyTransform([0,0],P),V=r.Util.applyTransform([A,N],P),G=r.Util.normalizeRect([B[0],B[1],V[0],V[1]]),re=Math.round(G[2]-G[0])||1,q=Math.round(G[3]-G[1])||1,Y=this.cachedCanvases.getCanvas("fillCanvas",re,q),X=Y.context,K=Math.min(B[0],V[0]),ee=Math.min(B[1],V[1]);X.translate(-K,-ee),X.transform(...P),I||(I=this._scaleImage(R.canvas,(0,i.getCurrentTransformInverse)(X)),I=I.img,m&&j&&m.set(D,I)),X.imageSmoothingEnabled=ne((0,i.getCurrentTransform)(X),b.interpolate),v(X,I,0,0,I.width,I.height,0,0,A,N),X.globalCompositeOperation="source-in";let se=r.Util.transform((0,i.getCurrentTransformInverse)(X),[1,0,0,1,-K,-ee]);return X.fillStyle=j?k.getPattern(_,this,se,s.PathType.FILL):k,X.fillRect(0,0,A,N),m&&!j&&(this.cachedCanvases.delete("fillCanvas"),m.set(D,Y.canvas)),{canvas:Y.canvas,offsetX:Math.round(K),offsetY:Math.round(ee)}}setLineWidth(b){b!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=b,this.ctx.lineWidth=b}setLineCap(b){this.ctx.lineCap=J[b]}setLineJoin(b){this.ctx.lineJoin=Q[b]}setMiterLimit(b){this.ctx.miterLimit=b}setDash(b,_){let A=this.ctx;A.setLineDash!==void 0&&(A.setLineDash(b),A.lineDashOffset=_)}setRenderingIntent(b){}setFlatness(b){}setGState(b){for(let[_,A]of b)switch(_){case"LW":this.setLineWidth(A);break;case"LC":this.setLineCap(A);break;case"LJ":this.setLineJoin(A);break;case"ML":this.setMiterLimit(A);break;case"D":this.setDash(A[0],A[1]);break;case"RI":this.setRenderingIntent(A);break;case"FL":this.setFlatness(A);break;case"Font":this.setFont(A[0],A[1]);break;case"CA":this.current.strokeAlpha=A;break;case"ca":this.current.fillAlpha=A,this.ctx.globalAlpha=A;break;case"BM":this.ctx.globalCompositeOperation=A;break;case"SMask":this.current.activeSMask=A?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(A);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let b=this.inSMaskMode;this.current.activeSMask&&!b?this.beginSMaskMode():!this.current.activeSMask&&b&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let b=this.ctx.canvas.width,_=this.ctx.canvas.height,A="smaskGroupAt"+this.groupLevel,N=this.cachedCanvases.getCanvas(A,b,_);this.suspendedCtx=this.ctx,this.ctx=N.context;let k=this.ctx;k.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),w(this.suspendedCtx,k),g(k,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),w(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(b){if(!this.current.activeSMask)return;b?(b[0]=Math.floor(b[0]),b[1]=Math.floor(b[1]),b[2]=Math.ceil(b[2]),b[3]=Math.ceil(b[3])):b=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let _=this.current.activeSMask,A=this.suspendedCtx;W(A,_,this.ctx,b),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(w(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let b=this.current;this.stateStack.push(b),this.current=b.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),w(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(b,_,A,N,k,j){this.ctx.transform(b,_,A,N,k,j),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(b,_,A){let N=this.ctx,k=this.current,j=k.x,x=k.y,m,D,I=(0,i.getCurrentTransform)(N),R=I[0]===0&&I[3]===0||I[1]===0&&I[2]===0,P=R?A.slice(0):null;for(let B=0,V=0,G=b.length;B<G;B++)switch(b[B]|0){case r.OPS.rectangle:j=_[V++],x=_[V++];let re=_[V++],q=_[V++],Y=j+re,X=x+q;N.moveTo(j,x),re===0||q===0?N.lineTo(Y,X):(N.lineTo(Y,x),N.lineTo(Y,X),N.lineTo(j,X)),R||k.updateRectMinMax(I,[j,x,Y,X]),N.closePath();break;case r.OPS.moveTo:j=_[V++],x=_[V++],N.moveTo(j,x),R||k.updatePathMinMax(I,j,x);break;case r.OPS.lineTo:j=_[V++],x=_[V++],N.lineTo(j,x),R||k.updatePathMinMax(I,j,x);break;case r.OPS.curveTo:m=j,D=x,j=_[V+4],x=_[V+5],N.bezierCurveTo(_[V],_[V+1],_[V+2],_[V+3],j,x),k.updateCurvePathMinMax(I,m,D,_[V],_[V+1],_[V+2],_[V+3],j,x,P),V+=6;break;case r.OPS.curveTo2:m=j,D=x,N.bezierCurveTo(j,x,_[V],_[V+1],_[V+2],_[V+3]),k.updateCurvePathMinMax(I,m,D,j,x,_[V],_[V+1],_[V+2],_[V+3],P),j=_[V+2],x=_[V+3],V+=4;break;case r.OPS.curveTo3:m=j,D=x,j=_[V+2],x=_[V+3],N.bezierCurveTo(_[V],_[V+1],j,x,j,x),k.updateCurvePathMinMax(I,m,D,_[V],_[V+1],j,x,j,x,P),V+=4;break;case r.OPS.closePath:N.closePath();break}R&&k.updateScalingPathMinMax(I,P),k.setCurrentPoint(j,x)}closePath(){this.ctx.closePath()}stroke(b=!0){let _=this.ctx,A=this.current.strokeColor;_.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof A=="object"&&A?.getPattern?(_.save(),_.strokeStyle=A.getPattern(_,this,(0,i.getCurrentTransformInverse)(_),s.PathType.STROKE),this.rescaleAndStroke(!1),_.restore()):this.rescaleAndStroke(!0)),b&&this.consumePath(this.current.getClippedPathBoundingBox()),_.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(b=!0){let _=this.ctx,A=this.current.fillColor,N=this.current.patternFill,k=!1;N&&(_.save(),_.fillStyle=A.getPattern(_,this,(0,i.getCurrentTransformInverse)(_),s.PathType.FILL),k=!0);let j=this.current.getClippedPathBoundingBox();this.contentVisible&&j!==null&&(this.pendingEOFill?(_.fill("evenodd"),this.pendingEOFill=!1):_.fill()),k&&_.restore(),b&&this.consumePath(j)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ie}eoClip(){this.pendingClip=Z}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let b=this.pendingTextPaths,_=this.ctx;if(b===void 0){_.beginPath();return}_.save(),_.beginPath();for(let A of b)_.setTransform(...A.transform),_.translate(A.x,A.y),A.addToPath(_,A.fontSize);_.restore(),_.clip(),_.beginPath(),delete this.pendingTextPaths}setCharSpacing(b){this.current.charSpacing=b}setWordSpacing(b){this.current.wordSpacing=b}setHScale(b){this.current.textHScale=b/100}setLeading(b){this.current.leading=-b}setFont(b,_){let A=this.commonObjs.get(b),N=this.current;if(!A)throw new Error(`Can't find font for ${b}`);if(N.fontMatrix=A.fontMatrix||r.FONT_IDENTITY_MATRIX,(N.fontMatrix[0]===0||N.fontMatrix[3]===0)&&(0,r.warn)("Invalid font matrix for font "+b),_<0?(_=-_,N.fontDirection=-1):N.fontDirection=1,this.current.font=A,this.current.fontSize=_,A.isType3Font)return;let k=A.loadedName||"sans-serif",j=A.systemFontInfo?.css||`"${k}", ${A.fallbackName}`,x="normal";A.black?x="900":A.bold&&(x="bold");let m=A.italic?"italic":"normal",D=_;_<c?D=c:_>d&&(D=d),this.current.fontSizeScale=_/D,this.ctx.font=`${m} ${x} ${D}px ${j}`}setTextRenderingMode(b){this.current.textRenderingMode=b}setTextRise(b){this.current.textRise=b}moveText(b,_){this.current.x=this.current.lineX+=b,this.current.y=this.current.lineY+=_}setLeadingMoveText(b,_){this.setLeading(-_),this.moveText(b,_)}setTextMatrix(b,_,A,N,k,j){this.current.textMatrix=[b,_,A,N,k,j],this.current.textMatrixScale=Math.hypot(b,_),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(b,_,A,N){let k=this.ctx,j=this.current,x=j.font,m=j.textRenderingMode,D=j.fontSize/j.fontSizeScale,I=m&r.TextRenderingMode.FILL_STROKE_MASK,R=!!(m&r.TextRenderingMode.ADD_TO_PATH_FLAG),P=j.patternFill&&!x.missingFile,B;(x.disableFontFace||R||P)&&(B=x.getPathGenerator(this.commonObjs,b)),x.disableFontFace||P?(k.save(),k.translate(_,A),k.beginPath(),B(k,D),N&&k.setTransform(...N),(I===r.TextRenderingMode.FILL||I===r.TextRenderingMode.FILL_STROKE)&&k.fill(),(I===r.TextRenderingMode.STROKE||I===r.TextRenderingMode.FILL_STROKE)&&k.stroke(),k.restore()):((I===r.TextRenderingMode.FILL||I===r.TextRenderingMode.FILL_STROKE)&&k.fillText(b,_,A),(I===r.TextRenderingMode.STROKE||I===r.TextRenderingMode.FILL_STROKE)&&k.strokeText(b,_,A)),R&&(this.pendingTextPaths||=[]).push({transform:(0,i.getCurrentTransform)(k),x:_,y:A,fontSize:D,addToPath:B})}get isFontSubpixelAAEnabled(){let{context:b}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);b.scale(1.5,1),b.fillText("I",0,10);let _=b.getImageData(0,0,10,10).data,A=!1;for(let N=3;N<_.length;N+=4)if(_[N]>0&&_[N]<255){A=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",A)}showText(b){let _=this.current,A=_.font;if(A.isType3Font)return this.showType3Text(b);let N=_.fontSize;if(N===0)return;let k=this.ctx,j=_.fontSizeScale,x=_.charSpacing,m=_.wordSpacing,D=_.fontDirection,I=_.textHScale*D,R=b.length,P=A.vertical,B=P?1:-1,V=A.defaultVMetrics,G=N*_.fontMatrix[0],re=_.textRenderingMode===r.TextRenderingMode.FILL&&!A.disableFontFace&&!_.patternFill;k.save(),k.transform(..._.textMatrix),k.translate(_.x,_.y+_.textRise),D>0?k.scale(I,-1):k.scale(I,1);let q;if(_.patternFill){k.save();let se=_.fillColor.getPattern(k,this,(0,i.getCurrentTransformInverse)(k),s.PathType.FILL);q=(0,i.getCurrentTransform)(k),k.restore(),k.fillStyle=se}let Y=_.lineWidth,X=_.textMatrixScale;if(X===0||Y===0){let se=_.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;(se===r.TextRenderingMode.STROKE||se===r.TextRenderingMode.FILL_STROKE)&&(Y=this.getSinglePixelWidth())}else Y/=X;if(j!==1&&(k.scale(j,j),Y/=j),k.lineWidth=Y,A.isInvalidPDFjsFont){let se=[],le=0;for(let ue of b)se.push(ue.unicode),le+=ue.width;k.fillText(se.join(""),0,0),_.x+=le*G*I,k.restore(),this.compose();return}let K=0,ee;for(ee=0;ee<R;++ee){let se=b[ee];if(typeof se=="number"){K+=B*se*N/1e3;continue}let le=!1,ue=(se.isSpace?m:0)+x,fe=se.fontChar,De=se.accent,Pe,st,Ze=se.width;if(P){let Qe=se.vmetric||V,Ht=-(se.vmetric?Qe[1]:Ze*.5)*G,_o=Qe[2]*G;Ze=Qe?-Qe[0]:Ze,Pe=Ht/j,st=(K+_o)/j}else Pe=K/j,st=0;if(A.remeasure&&Ze>0){let Qe=k.measureText(fe).width*1e3/N*j;if(Ze<Qe&&this.isFontSubpixelAAEnabled){let Ht=Ze/Qe;le=!0,k.save(),k.scale(Ht,1),Pe/=Ht}else Ze!==Qe&&(Pe+=(Ze-Qe)/2e3*N/j)}if(this.contentVisible&&(se.isInFont||A.missingFile)){if(re&&!De)k.fillText(fe,Pe,st);else if(this.paintChar(fe,Pe,st,q),De){let Qe=Pe+N*De.offset.x/j,Ht=st-N*De.offset.y/j;this.paintChar(De.fontChar,Qe,Ht,q)}}let Bn=P?Ze*G-ue*D:Ze*G+ue*D;K+=Bn,le&&k.restore()}P?_.y-=K:_.x+=K*I,k.restore(),this.compose()}showType3Text(b){let _=this.ctx,A=this.current,N=A.font,k=A.fontSize,j=A.fontDirection,x=N.vertical?1:-1,m=A.charSpacing,D=A.wordSpacing,I=A.textHScale*j,R=A.fontMatrix||r.FONT_IDENTITY_MATRIX,P=b.length,B=A.textRenderingMode===r.TextRenderingMode.INVISIBLE,V,G,re,q;if(!(B||k===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,_.save(),_.transform(...A.textMatrix),_.translate(A.x,A.y),_.scale(I,j),V=0;V<P;++V){if(G=b[V],typeof G=="number"){q=x*G*k/1e3,this.ctx.translate(q,0),A.x+=q*I;continue}let Y=(G.isSpace?D:0)+m,X=N.charProcOperatorList[G.operatorListId];if(!X){(0,r.warn)(`Type3 character "${G.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=G,this.save(),_.scale(k,k),_.transform(...R),this.executeOperatorList(X),this.restore()),re=r.Util.applyTransform([G.width,0],R)[0]*k+Y,_.translate(re,0),A.x+=re*I}_.restore(),this.processingType3=null}}setCharWidth(b,_){}setCharWidthAndBounds(b,_,A,N,k,j){this.ctx.rect(A,N,k-A,j-N),this.ctx.clip(),this.endPath()}getColorN_Pattern(b){let _;if(b[0]==="TilingPattern"){let A=b[1],N=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),k={createCanvasGraphics:j=>new O(j,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};_=new s.TilingPattern(b,A,this.ctx,k,N)}else _=this._getPattern(b[1],b[2]);return _}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(b,_,A){let N=r.Util.makeHexColor(b,_,A);this.ctx.strokeStyle=N,this.current.strokeColor=N}setFillRGBColor(b,_,A){let N=r.Util.makeHexColor(b,_,A);this.ctx.fillStyle=N,this.current.fillColor=N,this.current.patternFill=!1}_getPattern(b,_=null){let A;return this.cachedPatterns.has(b)?A=this.cachedPatterns.get(b):(A=(0,s.getShadingPattern)(this.getObject(b)),this.cachedPatterns.set(b,A)),_&&(A.matrix=_),A}shadingFill(b){if(!this.contentVisible)return;let _=this.ctx;this.save();let A=this._getPattern(b);_.fillStyle=A.getPattern(_,this,(0,i.getCurrentTransformInverse)(_),s.PathType.SHADING);let N=(0,i.getCurrentTransformInverse)(_);if(N){let{width:k,height:j}=_.canvas,[x,m,D,I]=r.Util.getAxialAlignedBoundingBox([0,0,k,j],N);this.ctx.fillRect(x,m,D-x,I-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(b,_){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(b)&&b.length===6&&this.transform(...b),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),_)){let A=_[2]-_[0],N=_[3]-_[1];this.ctx.rect(_[0],_[1],A,N),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),_),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(b){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let _=this.ctx;b.isolated||(0,r.info)("TODO: Support non-isolated groups."),b.knockout&&(0,r.warn)("Knockout groups not supported.");let A=(0,i.getCurrentTransform)(_);if(b.matrix&&_.transform(...b.matrix),!b.bbox)throw new Error("Bounding box is required.");let N=r.Util.getAxialAlignedBoundingBox(b.bbox,(0,i.getCurrentTransform)(_)),k=[0,0,_.canvas.width,_.canvas.height];N=r.Util.intersect(N,k)||[0,0,0,0];let j=Math.floor(N[0]),x=Math.floor(N[1]),m=Math.max(Math.ceil(N[2])-j,1),D=Math.max(Math.ceil(N[3])-x,1),I=1,R=1;m>u&&(I=m/u,m=u),D>u&&(R=D/u,D=u),this.current.startNewPathAndClipBox([0,0,m,D]);let P="groupAt"+this.groupLevel;b.smask&&(P+="_smask_"+this.smaskCounter++%2);let B=this.cachedCanvases.getCanvas(P,m,D),V=B.context;V.scale(1/I,1/R),V.translate(-j,-x),V.transform(...A),b.smask?this.smaskStack.push({canvas:B.canvas,context:V,offsetX:j,offsetY:x,scaleX:I,scaleY:R,subtype:b.smask.subtype,backdrop:b.smask.backdrop,transferMap:b.smask.transferMap||null,startTransformInverse:null}):(_.setTransform(1,0,0,1,0,0),_.translate(j,x),_.scale(I,R),_.save()),w(_,V),this.ctx=V,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(_),this.groupLevel++}endGroup(b){if(!this.contentVisible)return;this.groupLevel--;let _=this.ctx,A=this.groupStack.pop();if(this.ctx=A,this.ctx.imageSmoothingEnabled=!1,b.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let N=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...N);let k=r.Util.getAxialAlignedBoundingBox([0,0,_.canvas.width,_.canvas.height],N);this.ctx.drawImage(_.canvas,0,0),this.ctx.restore(),this.compose(k)}}beginAnnotation(b,_,A,N,k){if(this.#e(),C(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(_)&&_.length===4){let j=_[2]-_[0],x=_[3]-_[1];if(k&&this.annotationCanvasMap){A=A.slice(),A[4]-=_[0],A[5]-=_[1],_=_.slice(),_[0]=_[1]=0,_[2]=j,_[3]=x;let[m,D]=r.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:I}=this,R=Math.ceil(j*this.outputScaleX*I),P=Math.ceil(x*this.outputScaleY*I);this.annotationCanvas=this.canvasFactory.create(R,P);let{canvas:B,context:V}=this.annotationCanvas;this.annotationCanvasMap.set(b,B),this.annotationCanvas.savedCtx=this.ctx,this.ctx=V,this.ctx.save(),this.ctx.setTransform(m,0,0,-D,0,x*D),C(this.ctx)}else C(this.ctx),this.ctx.rect(_[0],_[1],j,x),this.ctx.clip(),this.endPath()}this.current=new E(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...A),this.transform(...N)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(b){if(!this.contentVisible)return;let _=b.count;b=this.getObject(b.data,b),b.count=_;let A=this.ctx,N=this.processingType3;if(N&&(N.compiled===void 0&&(N.compiled=y(b)),N.compiled)){N.compiled(A);return}let k=this._createMaskCanvas(b),j=k.canvas;A.save(),A.setTransform(1,0,0,1,0,0),A.drawImage(j,k.offsetX,k.offsetY),A.restore(),this.compose()}paintImageMaskXObjectRepeat(b,_,A=0,N=0,k,j){if(!this.contentVisible)return;b=this.getObject(b.data,b);let x=this.ctx;x.save();let m=(0,i.getCurrentTransform)(x);x.transform(_,A,N,k,0,0);let D=this._createMaskCanvas(b);x.setTransform(1,0,0,1,D.offsetX-m[4],D.offsetY-m[5]);for(let I=0,R=j.length;I<R;I+=2){let P=r.Util.transform(m,[_,A,N,k,j[I],j[I+1]]),[B,V]=r.Util.applyTransform([0,0],P);x.drawImage(D.canvas,B,V)}x.restore(),this.compose()}paintImageMaskXObjectGroup(b){if(!this.contentVisible)return;let _=this.ctx,A=this.current.fillColor,N=this.current.patternFill;for(let k of b){let{data:j,width:x,height:m,transform:D}=k,I=this.cachedCanvases.getCanvas("maskCanvas",x,m),R=I.context;R.save();let P=this.getObject(j,k);M(R,P),R.globalCompositeOperation="source-in",R.fillStyle=N?A.getPattern(R,this,(0,i.getCurrentTransformInverse)(_),s.PathType.FILL):A,R.fillRect(0,0,x,m),R.restore(),_.save(),_.transform(...D),_.scale(1,-1),v(_,I.canvas,0,0,x,m,0,-1,1,1),_.restore()}this.compose()}paintImageXObject(b){if(!this.contentVisible)return;let _=this.getObject(b);if(!_){(0,r.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(_)}paintImageXObjectRepeat(b,_,A,N){if(!this.contentVisible)return;let k=this.getObject(b);if(!k){(0,r.warn)("Dependent image isn't ready yet");return}let j=k.width,x=k.height,m=[];for(let D=0,I=N.length;D<I;D+=2)m.push({transform:[_,0,0,A,N[D],N[D+1]],x:0,y:0,w:j,h:x});this.paintInlineImageXObjectGroup(k,m)}applyTransferMapsToCanvas(b){return this.current.transferMaps!=="none"&&(b.filter=this.current.transferMaps,b.drawImage(b.canvas,0,0),b.filter="none"),b.canvas}applyTransferMapsToBitmap(b){if(this.current.transferMaps==="none")return b.bitmap;let{bitmap:_,width:A,height:N}=b,k=this.cachedCanvases.getCanvas("inlineImage",A,N),j=k.context;return j.filter=this.current.transferMaps,j.drawImage(_,0,0),j.filter="none",k.canvas}paintInlineImageXObject(b){if(!this.contentVisible)return;let _=b.width,A=b.height,N=this.ctx;if(this.save(),!r.isNodeJS){let{filter:x}=N;x!=="none"&&x!==""&&(N.filter="none")}N.scale(1/_,-1/A);let k;if(b.bitmap)k=this.applyTransferMapsToBitmap(b);else if(typeof HTMLElement=="function"&&b instanceof HTMLElement||!b.data)k=b;else{let m=this.cachedCanvases.getCanvas("inlineImage",_,A).context;T(m,b),k=this.applyTransferMapsToCanvas(m)}let j=this._scaleImage(k,(0,i.getCurrentTransformInverse)(N));N.imageSmoothingEnabled=ne((0,i.getCurrentTransform)(N),b.interpolate),v(N,j.img,0,0,j.paintWidth,j.paintHeight,0,-A,_,A),this.compose(),this.restore()}paintInlineImageXObjectGroup(b,_){if(!this.contentVisible)return;let A=this.ctx,N;if(b.bitmap)N=b.bitmap;else{let k=b.width,j=b.height,m=this.cachedCanvases.getCanvas("inlineImage",k,j).context;T(m,b),N=this.applyTransferMapsToCanvas(m)}for(let k of _)A.save(),A.transform(...k.transform),A.scale(1,-1),v(A,N,k.x,k.y,k.w,k.h,0,-1,1,1),A.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(b){}markPointProps(b,_){}beginMarkedContent(b){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(b,_){b==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(_)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(b){let _=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(b);let A=this.ctx;this.pendingClip&&(_||(this.pendingClip===Z?A.clip("evenodd"):A.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),A.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let b=(0,i.getCurrentTransform)(this.ctx);if(b[1]===0&&b[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(b[0]),Math.abs(b[3]));else{let _=Math.abs(b[0]*b[3]-b[2]*b[1]),A=Math.hypot(b[0],b[2]),N=Math.hypot(b[1],b[3]);this._cachedGetSinglePixelWidth=Math.max(A,N)/_}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:b}=this.current,{a:_,b:A,c:N,d:k}=this.ctx.getTransform(),j,x;if(A===0&&N===0){let m=Math.abs(_),D=Math.abs(k);if(m===D)if(b===0)j=x=1/m;else{let I=m*b;j=x=I<1?1/I:1}else if(b===0)j=1/m,x=1/D;else{let I=m*b,R=D*b;j=I<1?1/I:1,x=R<1?1/R:1}}else{let m=Math.abs(_*k-A*N),D=Math.hypot(_,A),I=Math.hypot(N,k);if(b===0)j=I/m,x=D/m;else{let R=b*m;j=I>R?I/R:1,x=D>R?D/R:1}}this._cachedScaleForStroking[0]=j,this._cachedScaleForStroking[1]=x}return this._cachedScaleForStroking}rescaleAndStroke(b){let{ctx:_}=this,{lineWidth:A}=this.current,[N,k]=this.getScaleForStroking();if(_.lineWidth=A||1,N===1&&k===1){_.stroke();return}let j=_.getLineDash();if(b&&_.save(),_.scale(N,k),j.length>0){let x=Math.max(N,k);_.setLineDash(j.map(m=>m/x)),_.lineDashOffset/=x}_.stroke(),b&&_.restore()}isContentVisible(){for(let b=this.markedContentStack.length-1;b>=0;b--)if(!this.markedContentStack[b].visible)return!1;return!0}}t.CanvasGraphics=O;for(let S in r.OPS)O.prototype[S]!==void 0&&(O.prototype[r.OPS[S]]=O.prototype[S])},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=p;var r=n(1),i=n(6);let s={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=s;function o(v,y){if(!y)return;let E=y[2]-y[0],T=y[3]-y[1],M=new Path2D;M.rect(y[0],y[1],E,T),v.clip(M)}class c{constructor(){this.constructor===c&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class d extends c{constructor(y){super(),this._type=y[1],this._bbox=y[2],this._colorStops=y[3],this._p0=y[4],this._p1=y[5],this._r0=y[6],this._r1=y[7],this.matrix=null}_createGradient(y){let E;this._type==="axial"?E=y.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(E=y.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let T of this._colorStops)E.addColorStop(T[0],T[1]);return E}getPattern(y,E,T,M){let w;if(M===s.STROKE||M===s.FILL){let C=E.current.getClippedPathBoundingBox(M,(0,i.getCurrentTransform)(y))||[0,0,0,0],L=Math.ceil(C[2]-C[0])||1,U=Math.ceil(C[3]-C[1])||1,F=E.cachedCanvases.getCanvas("pattern",L,U,!0),$=F.context;$.clearRect(0,0,$.canvas.width,$.canvas.height),$.beginPath(),$.rect(0,0,$.canvas.width,$.canvas.height),$.translate(-C[0],-C[1]),T=r.Util.transform(T,[1,0,0,1,C[0],C[1]]),$.transform(...E.baseTransform),this.matrix&&$.transform(...this.matrix),o($,this._bbox),$.fillStyle=this._createGradient($),$.fill(),w=y.createPattern(F.canvas,"no-repeat");let W=new DOMMatrix(T);w.setTransform(W)}else o(y,this._bbox),w=this._createGradient(y);return w}}function u(v,y,E,T,M,w,C,L){let U=y.coords,F=y.colors,$=v.data,W=v.width*4,ne;U[E+1]>U[T+1]&&(ne=E,E=T,T=ne,ne=w,w=C,C=ne),U[T+1]>U[M+1]&&(ne=T,T=M,M=ne,ne=C,C=L,L=ne),U[E+1]>U[T+1]&&(ne=E,E=T,T=ne,ne=w,w=C,C=ne);let J=(U[E]+y.offsetX)*y.scaleX,Q=(U[E+1]+y.offsetY)*y.scaleY,ie=(U[T]+y.offsetX)*y.scaleX,Z=(U[T+1]+y.offsetY)*y.scaleY,O=(U[M]+y.offsetX)*y.scaleX,S=(U[M+1]+y.offsetY)*y.scaleY;if(Q>=S)return;let b=F[w],_=F[w+1],A=F[w+2],N=F[C],k=F[C+1],j=F[C+2],x=F[L],m=F[L+1],D=F[L+2],I=Math.round(Q),R=Math.round(S),P,B,V,G,re,q,Y,X;for(let K=I;K<=R;K++){if(K<Z){let fe=K<Q?0:(Q-K)/(Q-Z);P=J-(J-ie)*fe,B=b-(b-N)*fe,V=_-(_-k)*fe,G=A-(A-j)*fe}else{let fe;K>S?fe=1:Z===S?fe=0:fe=(Z-K)/(Z-S),P=ie-(ie-O)*fe,B=N-(N-x)*fe,V=k-(k-m)*fe,G=j-(j-D)*fe}let ee;K<Q?ee=0:K>S?ee=1:ee=(Q-K)/(Q-S),re=J-(J-O)*ee,q=b-(b-x)*ee,Y=_-(_-m)*ee,X=A-(A-D)*ee;let se=Math.round(Math.min(P,re)),le=Math.round(Math.max(P,re)),ue=W*K+se*4;for(let fe=se;fe<=le;fe++)ee=(P-fe)/(P-re),ee<0?ee=0:ee>1&&(ee=1),$[ue++]=B-(B-q)*ee|0,$[ue++]=V-(V-Y)*ee|0,$[ue++]=G-(G-X)*ee|0,$[ue++]=255}}function a(v,y,E){let T=y.coords,M=y.colors,w,C;switch(y.type){case"lattice":let L=y.verticesPerRow,U=Math.floor(T.length/L)-1,F=L-1;for(w=0;w<U;w++){let $=w*L;for(let W=0;W<F;W++,$++)u(v,E,T[$],T[$+1],T[$+L],M[$],M[$+1],M[$+L]),u(v,E,T[$+L+1],T[$+1],T[$+L],M[$+L+1],M[$+1],M[$+L])}break;case"triangles":for(w=0,C=T.length;w<C;w+=3)u(v,E,T[w],T[w+1],T[w+2],M[w],M[w+1],M[w+2]);break;default:throw new Error("illegal figure")}}class l extends c{constructor(y){super(),this._coords=y[2],this._colors=y[3],this._figures=y[4],this._bounds=y[5],this._bbox=y[7],this._background=y[8],this.matrix=null}_createMeshCanvas(y,E,T){let L=Math.floor(this._bounds[0]),U=Math.floor(this._bounds[1]),F=Math.ceil(this._bounds[2])-L,$=Math.ceil(this._bounds[3])-U,W=Math.min(Math.ceil(Math.abs(F*y[0]*1.1)),3e3),ne=Math.min(Math.ceil(Math.abs($*y[1]*1.1)),3e3),J=F/W,Q=$/ne,ie={coords:this._coords,colors:this._colors,offsetX:-L,offsetY:-U,scaleX:1/J,scaleY:1/Q},Z=W+2*2,O=ne+2*2,S=T.getCanvas("mesh",Z,O,!1),b=S.context,_=b.createImageData(W,ne);if(E){let N=_.data;for(let k=0,j=N.length;k<j;k+=4)N[k]=E[0],N[k+1]=E[1],N[k+2]=E[2],N[k+3]=255}for(let N of this._figures)a(_,N,ie);return b.putImageData(_,2,2),{canvas:S.canvas,offsetX:L-2*J,offsetY:U-2*Q,scaleX:J,scaleY:Q}}getPattern(y,E,T,M){o(y,this._bbox);let w;if(M===s.SHADING)w=r.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(y));else if(w=r.Util.singularValueDecompose2dScale(E.baseTransform),this.matrix){let L=r.Util.singularValueDecompose2dScale(this.matrix);w=[w[0]*L[0],w[1]*L[1]]}let C=this._createMeshCanvas(w,M===s.SHADING?null:this._background,E.cachedCanvases);return M!==s.SHADING&&(y.setTransform(...E.baseTransform),this.matrix&&y.transform(...this.matrix)),y.translate(C.offsetX,C.offsetY),y.scale(C.scaleX,C.scaleY),y.createPattern(C.canvas,"no-repeat")}}class h extends c{getPattern(){return"hotpink"}}function p(v){switch(v[0]){case"RadialAxial":return new d(v);case"Mesh":return new l(v);case"Dummy":return new h}throw new Error(`Unknown IR type: ${v[0]}`)}let g={COLORED:1,UNCOLORED:2},f=(()=>{class v{static MAX_PATTERN_SIZE=3e3;constructor(E,T,M,w,C){this.operatorList=E[2],this.matrix=E[3]||[1,0,0,1,0,0],this.bbox=E[4],this.xstep=E[5],this.ystep=E[6],this.paintType=E[7],this.tilingType=E[8],this.color=T,this.ctx=M,this.canvasGraphicsFactory=w,this.baseTransform=C}createPatternCanvas(E){let T=this.operatorList,M=this.bbox,w=this.xstep,C=this.ystep,L=this.paintType,U=this.tilingType,F=this.color,$=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+U);let W=M[0],ne=M[1],J=M[2],Q=M[3],ie=r.Util.singularValueDecompose2dScale(this.matrix),Z=r.Util.singularValueDecompose2dScale(this.baseTransform),O=[ie[0]*Z[0],ie[1]*Z[1]],S=this.getSizeAndScale(w,this.ctx.canvas.width,O[0]),b=this.getSizeAndScale(C,this.ctx.canvas.height,O[1]),_=E.cachedCanvases.getCanvas("pattern",S.size,b.size,!0),A=_.context,N=$.createCanvasGraphics(A);N.groupLevel=E.groupLevel,this.setFillAndStrokeStyleToContext(N,L,F);let k=W,j=ne,x=J,m=Q;return W<0&&(k=0,x+=Math.abs(W)),ne<0&&(j=0,m+=Math.abs(ne)),A.translate(-(S.scale*k),-(b.scale*j)),N.transform(S.scale,0,0,b.scale,0,0),A.save(),this.clipBbox(N,k,j,x,m),N.baseTransform=(0,i.getCurrentTransform)(N.ctx),N.executeOperatorList(T),N.endDrawing(),{canvas:_.canvas,scaleX:S.scale,scaleY:b.scale,offsetX:k,offsetY:j}}getSizeAndScale(E,T,M){E=Math.abs(E);let w=Math.max(v.MAX_PATTERN_SIZE,T),C=Math.ceil(E*M);return C>=w?C=w:M=C/E,{scale:M,size:C}}clipBbox(E,T,M,w,C){let L=w-T,U=C-M;E.ctx.rect(T,M,L,U),E.current.updateRectMinMax((0,i.getCurrentTransform)(E.ctx),[T,M,w,C]),E.clip(),E.endPath()}setFillAndStrokeStyleToContext(E,T,M){let w=E.ctx,C=E.current;switch(T){case g.COLORED:let L=this.ctx;w.fillStyle=L.fillStyle,w.strokeStyle=L.strokeStyle,C.fillColor=L.fillStyle,C.strokeColor=L.strokeStyle;break;case g.UNCOLORED:let U=r.Util.makeHexColor(M[0],M[1],M[2]);w.fillStyle=U,w.strokeStyle=U,C.fillColor=U,C.strokeColor=U;break;default:throw new r.FormatError(`Unsupported paint type: ${T}`)}}getPattern(E,T,M,w){let C=M;w!==s.SHADING&&(C=r.Util.transform(C,T.baseTransform),this.matrix&&(C=r.Util.transform(C,this.matrix)));let L=this.createPatternCanvas(T),U=new DOMMatrix(C);U=U.translate(L.offsetX,L.offsetY),U=U.scale(1/L.scaleX,1/L.scaleY);let F=E.createPattern(L.canvas,"repeat");return F.setTransform(U),F}}return v})();t.TilingPattern=f},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=s,t.convertToRGBA=i,t.grayToRGBA=c;var r=n(1);function i(d){switch(d.kind){case r.ImageKind.GRAYSCALE_1BPP:return s(d);case r.ImageKind.RGB_24BPP:return o(d)}return null}function s({src:d,srcPos:u=0,dest:a,width:l,height:h,nonBlackColor:p=4294967295,inverseDecode:g=!1}){let f=r.FeatureTest.isLittleEndian?4278190080:255,[v,y]=g?[p,f]:[f,p],E=l>>3,T=l&7,M=d.length;a=new Uint32Array(a.buffer);let w=0;for(let C=0;C<h;C++){for(let U=u+E;u<U;u++){let F=u<M?d[u]:255;a[w++]=F&128?y:v,a[w++]=F&64?y:v,a[w++]=F&32?y:v,a[w++]=F&16?y:v,a[w++]=F&8?y:v,a[w++]=F&4?y:v,a[w++]=F&2?y:v,a[w++]=F&1?y:v}if(T===0)continue;let L=u<M?d[u++]:255;for(let U=0;U<T;U++)a[w++]=L&1<<7-U?y:v}return{srcPos:u,destPos:w}}function o({src:d,srcPos:u=0,dest:a,destPos:l=0,width:h,height:p}){let g=0,f=d.length>>2,v=new Uint32Array(d.buffer,u,f);if(r.FeatureTest.isLittleEndian){for(;g<f-2;g+=3,l+=4){let y=v[g],E=v[g+1],T=v[g+2];a[l]=y|4278190080,a[l+1]=y>>>24|E<<8|4278190080,a[l+2]=E>>>16|T<<16|4278190080,a[l+3]=T>>>8|4278190080}for(let y=g*4,E=d.length;y<E;y+=3)a[l++]=d[y]|d[y+1]<<8|d[y+2]<<16|4278190080}else{for(;g<f-2;g+=3,l+=4){let y=v[g],E=v[g+1],T=v[g+2];a[l]=y|255,a[l+1]=y<<24|E>>>8|255,a[l+2]=E<<16|T>>>16|255,a[l+3]=T<<8|255}for(let y=g*4,E=d.length;y<E;y+=3)a[l++]=d[y]<<24|d[y+1]<<16|d[y+2]<<8|255}return{srcPos:u,destPos:l}}function c(d,u){if(r.FeatureTest.isLittleEndian)for(let a=0,l=d.length;a<l;a++)u[a]=d[a]*65793|4278190080;else for(let a=0,l=d.length;a<l;a++)u[a]=d[a]*16843008|255}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;let n=Object.create(null);t.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var r=n(1);let i={UNKNOWN:0,DATA:1,ERROR:2},s={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function o(d){switch(d instanceof Error||typeof d=="object"&&d!==null||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),d.name){case"AbortException":return new r.AbortException(d.message);case"MissingPDFException":return new r.MissingPDFException(d.message);case"PasswordException":return new r.PasswordException(d.message,d.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(d.message,d.status);case"UnknownErrorException":return new r.UnknownErrorException(d.message,d.details);default:return new r.UnknownErrorException(d.message,d.toString())}}class c{constructor(u,a,l){this.sourceName=u,this.targetName=a,this.comObj=l,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=h=>{let p=h.data;if(p.targetName!==this.sourceName)return;if(p.stream){this.#t(p);return}if(p.callback){let f=p.callbackId,v=this.callbackCapabilities[f];if(!v)throw new Error(`Cannot resolve callback ${f}`);if(delete this.callbackCapabilities[f],p.callback===i.DATA)v.resolve(p.data);else if(p.callback===i.ERROR)v.reject(o(p.reason));else throw new Error("Unexpected callback case");return}let g=this.actionHandler[p.action];if(!g)throw new Error(`Unknown action from worker: ${p.action}`);if(p.callbackId){let f=this.sourceName,v=p.sourceName;new Promise(function(y){y(g(p.data))}).then(function(y){l.postMessage({sourceName:f,targetName:v,callback:i.DATA,callbackId:p.callbackId,data:y})},function(y){l.postMessage({sourceName:f,targetName:v,callback:i.ERROR,callbackId:p.callbackId,reason:o(y)})});return}if(p.streamId){this.#e(p);return}g(p.data)},l.addEventListener("message",this._onComObjOnMessage)}on(u,a){let l=this.actionHandler;if(l[u])throw new Error(`There is already an actionName called "${u}"`);l[u]=a}send(u,a,l){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,data:a},l)}sendWithPromise(u,a,l){let h=this.callbackId++,p=new r.PromiseCapability;this.callbackCapabilities[h]=p;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,callbackId:h,data:a},l)}catch(g){p.reject(g)}return p.promise}sendWithStream(u,a,l,h){let p=this.streamId++,g=this.sourceName,f=this.targetName,v=this.comObj;return new ReadableStream({start:y=>{let E=new r.PromiseCapability;return this.streamControllers[p]={controller:y,startCall:E,pullCall:null,cancelCall:null,isClosed:!1},v.postMessage({sourceName:g,targetName:f,action:u,streamId:p,data:a,desiredSize:y.desiredSize},h),E.promise},pull:y=>{let E=new r.PromiseCapability;return this.streamControllers[p].pullCall=E,v.postMessage({sourceName:g,targetName:f,stream:s.PULL,streamId:p,desiredSize:y.desiredSize}),E.promise},cancel:y=>{(0,r.assert)(y instanceof Error,"cancel must have a valid reason");let E=new r.PromiseCapability;return this.streamControllers[p].cancelCall=E,this.streamControllers[p].isClosed=!0,v.postMessage({sourceName:g,targetName:f,stream:s.CANCEL,streamId:p,reason:o(y)}),E.promise}},l)}#e(u){let a=u.streamId,l=this.sourceName,h=u.sourceName,p=this.comObj,g=this,f=this.actionHandler[u.action],v={enqueue(y,E=1,T){if(this.isCancelled)return;let M=this.desiredSize;this.desiredSize-=E,M>0&&this.desiredSize<=0&&(this.sinkCapability=new r.PromiseCapability,this.ready=this.sinkCapability.promise),p.postMessage({sourceName:l,targetName:h,stream:s.ENQUEUE,streamId:a,chunk:y},T)},close(){this.isCancelled||(this.isCancelled=!0,p.postMessage({sourceName:l,targetName:h,stream:s.CLOSE,streamId:a}),delete g.streamSinks[a])},error(y){(0,r.assert)(y instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,p.postMessage({sourceName:l,targetName:h,stream:s.ERROR,streamId:a,reason:o(y)}))},sinkCapability:new r.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:u.desiredSize,ready:null};v.sinkCapability.resolve(),v.ready=v.sinkCapability.promise,this.streamSinks[a]=v,new Promise(function(y){y(f(u.data,v))}).then(function(){p.postMessage({sourceName:l,targetName:h,stream:s.START_COMPLETE,streamId:a,success:!0})},function(y){p.postMessage({sourceName:l,targetName:h,stream:s.START_COMPLETE,streamId:a,reason:o(y)})})}#t(u){let a=u.streamId,l=this.sourceName,h=u.sourceName,p=this.comObj,g=this.streamControllers[a],f=this.streamSinks[a];switch(u.stream){case s.START_COMPLETE:u.success?g.startCall.resolve():g.startCall.reject(o(u.reason));break;case s.PULL_COMPLETE:u.success?g.pullCall.resolve():g.pullCall.reject(o(u.reason));break;case s.PULL:if(!f){p.postMessage({sourceName:l,targetName:h,stream:s.PULL_COMPLETE,streamId:a,success:!0});break}f.desiredSize<=0&&u.desiredSize>0&&f.sinkCapability.resolve(),f.desiredSize=u.desiredSize,new Promise(function(v){v(f.onPull?.())}).then(function(){p.postMessage({sourceName:l,targetName:h,stream:s.PULL_COMPLETE,streamId:a,success:!0})},function(v){p.postMessage({sourceName:l,targetName:h,stream:s.PULL_COMPLETE,streamId:a,reason:o(v)})});break;case s.ENQUEUE:if((0,r.assert)(g,"enqueue should have stream controller"),g.isClosed)break;g.controller.enqueue(u.chunk);break;case s.CLOSE:if((0,r.assert)(g,"close should have stream controller"),g.isClosed)break;g.isClosed=!0,g.controller.close(),this.#n(g,a);break;case s.ERROR:(0,r.assert)(g,"error should have stream controller"),g.controller.error(o(u.reason)),this.#n(g,a);break;case s.CANCEL_COMPLETE:u.success?g.cancelCall.resolve():g.cancelCall.reject(o(u.reason)),this.#n(g,a);break;case s.CANCEL:if(!f)break;new Promise(function(v){v(f.onCancel?.(o(u.reason)))}).then(function(){p.postMessage({sourceName:l,targetName:h,stream:s.CANCEL_COMPLETE,streamId:a,success:!0})},function(v){p.postMessage({sourceName:l,targetName:h,stream:s.CANCEL_COMPLETE,streamId:a,reason:o(v)})}),f.sinkCapability.reject(o(u.reason)),f.isCancelled=!0,delete this.streamSinks[a];break;default:throw new Error("Unexpected stream case")}}#n(u,a){return ye(this,null,function*(){yield Promise.allSettled([u.startCall?.promise,u.pullCall?.promise,u.cancelCall?.promise]),delete this.streamControllers[a]})}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}t.MessageHandler=c},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=n(1);class i{#e;#t;constructor({parsedData:o,rawData:c}){this.#e=o,this.#t=c}getRaw(){return this.#t}get(o){return this.#e.get(o)??null}getAll(){return(0,r.objectFromMap)(this.#e)}has(o){return this.#e.has(o)}}t.Metadata=i},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var r=n(1),i=n(8);let s=Symbol("INTERNAL");class o{#e=!0;constructor(u,a){this.name=u,this.intent=a}get visible(){return this.#e}_setVisible(u,a){u!==s&&(0,r.unreachable)("Internal method `_setVisible` called."),this.#e=a}}class c{#e=null;#t=new Map;#n=null;#r=null;constructor(u){if(this.name=null,this.creator=null,u!==null){this.name=u.name,this.creator=u.creator,this.#r=u.order;for(let a of u.groups)this.#t.set(a.id,new o(a.name,a.intent));if(u.baseState==="OFF")for(let a of this.#t.values())a._setVisible(s,!1);for(let a of u.on)this.#t.get(a)._setVisible(s,!0);for(let a of u.off)this.#t.get(a)._setVisible(s,!1);this.#n=this.getHash()}}#a(u){let a=u.length;if(a<2)return!0;let l=u[0];for(let h=1;h<a;h++){let p=u[h],g;if(Array.isArray(p))g=this.#a(p);else if(this.#t.has(p))g=this.#t.get(p).visible;else return(0,r.warn)(`Optional content group not found: ${p}`),!0;switch(l){case"And":if(!g)return!1;break;case"Or":if(g)return!0;break;case"Not":return!g;default:return!0}}return l==="And"}isVisible(u){if(this.#t.size===0)return!0;if(!u)return(0,r.warn)("Optional content group not defined."),!0;if(u.type==="OCG")return this.#t.has(u.id)?this.#t.get(u.id).visible:((0,r.warn)(`Optional content group not found: ${u.id}`),!0);if(u.type==="OCMD"){if(u.expression)return this.#a(u.expression);if(!u.policy||u.policy==="AnyOn"){for(let a of u.ids){if(!this.#t.has(a))return(0,r.warn)(`Optional content group not found: ${a}`),!0;if(this.#t.get(a).visible)return!0}return!1}else if(u.policy==="AllOn"){for(let a of u.ids){if(!this.#t.has(a))return(0,r.warn)(`Optional content group not found: ${a}`),!0;if(!this.#t.get(a).visible)return!1}return!0}else if(u.policy==="AnyOff"){for(let a of u.ids){if(!this.#t.has(a))return(0,r.warn)(`Optional content group not found: ${a}`),!0;if(!this.#t.get(a).visible)return!0}return!1}else if(u.policy==="AllOff"){for(let a of u.ids){if(!this.#t.has(a))return(0,r.warn)(`Optional content group not found: ${a}`),!0;if(this.#t.get(a).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${u.policy}.`),!0}return(0,r.warn)(`Unknown group type ${u.type}.`),!0}setVisibility(u,a=!0){if(!this.#t.has(u)){(0,r.warn)(`Optional content group not found: ${u}`);return}this.#t.get(u)._setVisible(s,!!a),this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#r?this.#r.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,r.objectFromMap)(this.#t):null}getGroup(u){return this.#t.get(u)||null}getHash(){if(this.#e!==null)return this.#e;let u=new i.MurmurHash3_64;for(let[a,l]of this.#t)u.update(`${a}:${l.visible}`);return this.#e=u.hexdigest()}}t.OptionalContentConfig=c},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var r=n(1),i=n(6);class s{constructor({length:u,initialData:a,progressiveDone:l=!1,contentDispositionFilename:h=null,disableRange:p=!1,disableStream:g=!1},f){if((0,r.assert)(f,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=h,a?.length>0){let v=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(v)}this._pdfDataRangeTransport=f,this._isStreamingSupported=!g,this._isRangeSupported=!p,this._contentLength=u,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((v,y)=>{this._onReceiveData({begin:v,chunk:y})}),this._pdfDataRangeTransport.addProgressListener((v,y)=>{this._onProgress({loaded:v,total:y})}),this._pdfDataRangeTransport.addProgressiveReadListener(v=>{this._onReceiveData({chunk:v})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:u,chunk:a}){let l=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;if(u===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(l):this._queuedChunks.push(l);else{let h=this._rangeReaders.some(function(p){return p._begin!==u?!1:(p._enqueue(l),!0)});(0,r.assert)(h,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(u){u.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:u.loaded}):this._fullRequestReader?.onProgress?.({loaded:u.loaded,total:u.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(u){let a=this._rangeReaders.indexOf(u);a>=0&&this._rangeReaders.splice(a,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let u=this._queuedChunks;return this._queuedChunks=null,new o(this,u,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(u,a){if(a<=this._progressiveDataLength)return null;let l=new c(this,u,a);return this._pdfDataRangeTransport.requestDataRange(u,a),this._rangeReaders.push(l),l}cancelAllRequests(u){this._fullRequestReader?.cancel(u);for(let a of this._rangeReaders.slice(0))a.cancel(u);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=s;class o{constructor(u,a,l=!1,h=null){this._stream=u,this._done=l||!1,this._filename=(0,i.isPdfFile)(h)?h:null,this._queuedChunks=a||[],this._loaded=0;for(let p of this._queuedChunks)this._loaded+=p.byteLength;this._requests=[],this._headersReady=Promise.resolve(),u._fullRequestReader=this,this.onProgress=null}_enqueue(u){this._done||(this._requests.length>0?this._requests.shift().resolve({value:u,done:!1}):this._queuedChunks.push(u),this._loaded+=u.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){return ye(this,null,function*(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let u=new r.PromiseCapability;return this._requests.push(u),u.promise})}cancel(u){this._done=!0;for(let a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class c{constructor(u,a,l){this._stream=u,this._begin=a,this._end=l,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(u){if(!this._done){if(this._requests.length===0)this._queuedChunk=u;else{this._requests.shift().resolve({value:u,done:!1});for(let l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){return ye(this,null,function*(){if(this._queuedChunk){let a=this._queuedChunk;return this._queuedChunk=null,{value:a,done:!1}}if(this._done)return{value:void 0,done:!0};let u=new r.PromiseCapability;return this._requests.push(u),u.promise})}cancel(u){this._done=!0;for(let a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var r=n(1),i=n(20);function s(l,h,p){return{method:"GET",headers:l,signal:p.signal,mode:"cors",credentials:h?"include":"same-origin",redirect:"follow"}}function o(l){let h=new Headers;for(let p in l){let g=l[p];g!==void 0&&h.append(p,g)}return h}function c(l){return l instanceof Uint8Array?l.buffer:l instanceof ArrayBuffer?l:((0,r.warn)(`getArrayBuffer - unexpected data format: ${l}`),new Uint8Array(l).buffer)}class d{constructor(h){this.source=h,this.isHttp=/^https?:/i.test(h.url),this.httpHeaders=this.isHttp&&h.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new u(this),this._fullRequestReader}getRangeReader(h,p){if(p<=this._progressiveDataLength)return null;let g=new a(this,h,p);return this._rangeRequestReaders.push(g),g}cancelAllRequests(h){this._fullRequestReader?.cancel(h);for(let p of this._rangeRequestReaders.slice(0))p.cancel(h)}}t.PDFFetchStream=d;class u{constructor(h){this._stream=h,this._reader=null,this._loaded=0,this._filename=null;let p=h.source;this._withCredentials=p.withCredentials||!1,this._contentLength=p.length,this._headersCapability=new r.PromiseCapability,this._disableRange=p.disableRange||!1,this._rangeChunkSize=p.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!p.disableStream,this._isRangeSupported=!p.disableRange,this._headers=o(this._stream.httpHeaders);let g=p.url;fetch(g,s(this._headers,this._withCredentials,this._abortController)).then(f=>{if(!(0,i.validateResponseStatus)(f.status))throw(0,i.createResponseStatusError)(f.status,g);this._reader=f.body.getReader(),this._headersCapability.resolve();let v=T=>f.headers.get(T),{allowRangeRequests:y,suggestedLength:E}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=y,this._contentLength=E||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(v),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return ye(this,null,function*(){yield this._headersCapability.promise;let{value:h,done:p}=yield this._reader.read();return p?{value:h,done:p}:(this._loaded+=h.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:c(h),done:!1})})}cancel(h){this._reader?.cancel(h),this._abortController.abort()}}class a{constructor(h,p,g){this._stream=h,this._reader=null,this._loaded=0;let f=h.source;this._withCredentials=f.withCredentials||!1,this._readCapability=new r.PromiseCapability,this._isStreamingSupported=!f.disableStream,this._abortController=new AbortController,this._headers=o(this._stream.httpHeaders),this._headers.append("Range",`bytes=${p}-${g-1}`);let v=f.url;fetch(v,s(this._headers,this._withCredentials,this._abortController)).then(y=>{if(!(0,i.validateResponseStatus)(y.status))throw(0,i.createResponseStatusError)(y.status,v);this._readCapability.resolve(),this._reader=y.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){return ye(this,null,function*(){yield this._readCapability.promise;let{value:h,done:p}=yield this._reader.read();return p?{value:h,done:p}:(this._loaded+=h.byteLength,this.onProgress?.({loaded:this._loaded}),{value:c(h),done:!1})})}cancel(h){this._reader?.cancel(h),this._abortController.abort()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=d,t.extractFilenameFromHeader=c,t.validateRangeRequestCapabilities=o,t.validateResponseStatus=u;var r=n(1),i=n(21),s=n(6);function o({getResponseHeader:a,isHttp:l,rangeChunkSize:h,disableRange:p}){let g={allowRangeRequests:!1,suggestedLength:void 0},f=parseInt(a("Content-Length"),10);return!Number.isInteger(f)||(g.suggestedLength=f,f<=2*h)||p||!l||a("Accept-Ranges")!=="bytes"||(a("Content-Encoding")||"identity")!=="identity"||(g.allowRangeRequests=!0),g}function c(a){let l=a("Content-Disposition");if(l){let h=(0,i.getFilenameFromContentDispositionHeader)(l);if(h.includes("%"))try{h=decodeURIComponent(h)}catch{}if((0,s.isPdfFile)(h))return h}return null}function d(a,l){return a===404||a===0&&l.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+l+'".'):new r.UnexpectedResponseException(`Unexpected server response (${a}) while retrieving PDF "${l}".`,a)}function u(a){return a===200||a===206}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=i;var r=n(1);function i(s){let o=!0,c=d("filename\\*","i").exec(s);if(c){c=c[1];let f=h(c);return f=unescape(f),f=p(f),f=g(f),a(f)}if(c=l(s),c){let f=g(c);return a(f)}if(c=d("filename","i").exec(s),c){c=c[1];let f=h(c);return f=g(f),a(f)}function d(f,v){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function u(f,v){if(f){if(!/^[\x00-\xFF]+$/.test(v))return v;try{let y=new TextDecoder(f,{fatal:!0}),E=(0,r.stringToBytes)(v);v=y.decode(E),o=!1}catch{}}return v}function a(f){return o&&/[\x80-\xff]/.test(f)&&(f=u("utf-8",f),o&&(f=u("iso-8859-1",f))),f}function l(f){let v=[],y,E=d("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=E.exec(f))!==null;){let[,M,w,C]=y;if(M=parseInt(M,10),M in v){if(M===0)break;continue}v[M]=[w,C]}let T=[];for(let M=0;M<v.length&&M in v;++M){let[w,C]=v[M];C=h(C),w&&(C=unescape(C),M===0&&(C=p(C))),T.push(C)}return T.join("")}function h(f){if(f.startsWith('"')){let v=f.slice(1).split('\\"');for(let y=0;y<v.length;++y){let E=v[y].indexOf('"');E!==-1&&(v[y]=v[y].slice(0,E),v.length=y+1),v[y]=v[y].replaceAll(/\\(.)/g,"$1")}f=v.join('"')}return f}function p(f){let v=f.indexOf("'");if(v===-1)return f;let y=f.slice(0,v),T=f.slice(v+1).replace(/^[^']*'/,"");return u(y,T)}function g(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,y,E,T){if(E==="q"||E==="Q")return T=T.replaceAll("_"," "),T=T.replaceAll(/=([0-9a-fA-F]{2})/g,function(M,w){return String.fromCharCode(parseInt(w,16))}),u(y,T);try{T=atob(T)}catch{}return u(y,T)})}return""}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var r=n(1),i=n(20);let s=200,o=206;function c(h){let p=h.response;return typeof p!="string"?p:(0,r.stringToBytes)(p).buffer}class d{constructor(p,g={}){this.url=p,this.isHttp=/^https?:/i.test(p),this.httpHeaders=this.isHttp&&g.httpHeaders||Object.create(null),this.withCredentials=g.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(p,g,f){let v={begin:p,end:g};for(let y in f)v[y]=f[y];return this.request(v)}requestFull(p){return this.request(p)}request(p){let g=new XMLHttpRequest,f=this.currXhrId++,v=this.pendingRequests[f]={xhr:g};g.open("GET",this.url),g.withCredentials=this.withCredentials;for(let y in this.httpHeaders){let E=this.httpHeaders[y];E!==void 0&&g.setRequestHeader(y,E)}return this.isHttp&&"begin"in p&&"end"in p?(g.setRequestHeader("Range",`bytes=${p.begin}-${p.end-1}`),v.expectedStatus=o):v.expectedStatus=s,g.responseType="arraybuffer",p.onError&&(g.onerror=function(y){p.onError(g.status)}),g.onreadystatechange=this.onStateChange.bind(this,f),g.onprogress=this.onProgress.bind(this,f),v.onHeadersReceived=p.onHeadersReceived,v.onDone=p.onDone,v.onError=p.onError,v.onProgress=p.onProgress,g.send(null),f}onProgress(p,g){let f=this.pendingRequests[p];f&&f.onProgress?.(g)}onStateChange(p,g){let f=this.pendingRequests[p];if(!f)return;let v=f.xhr;if(v.readyState>=2&&f.onHeadersReceived&&(f.onHeadersReceived(),delete f.onHeadersReceived),v.readyState!==4||!(p in this.pendingRequests))return;if(delete this.pendingRequests[p],v.status===0&&this.isHttp){f.onError?.(v.status);return}let y=v.status||s;if(!(y===s&&f.expectedStatus===o)&&y!==f.expectedStatus){f.onError?.(v.status);return}let T=c(v);if(y===o){let M=v.getResponseHeader("Content-Range"),w=/bytes (\d+)-(\d+)\/(\d+)/.exec(M);f.onDone({begin:parseInt(w[1],10),chunk:T})}else T?f.onDone({begin:0,chunk:T}):f.onError?.(v.status)}getRequestXhr(p){return this.pendingRequests[p].xhr}isPendingRequest(p){return p in this.pendingRequests}abortRequest(p){let g=this.pendingRequests[p].xhr;delete this.pendingRequests[p],g.abort()}}class u{constructor(p){this._source=p,this._manager=new d(p.url,{httpHeaders:p.httpHeaders,withCredentials:p.withCredentials}),this._rangeChunkSize=p.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(p){let g=this._rangeRequestReaders.indexOf(p);g>=0&&this._rangeRequestReaders.splice(g,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new a(this._manager,this._source),this._fullRequestReader}getRangeReader(p,g){let f=new l(this._manager,p,g);return f.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(f),f}cancelAllRequests(p){this._fullRequestReader?.cancel(p);for(let g of this._rangeRequestReaders.slice(0))g.cancel(p)}}t.PDFNetworkStream=u;class a{constructor(p,g){this._manager=p;let f={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=g.url,this._fullRequestId=p.requestFull(f),this._headersReceivedCapability=new r.PromiseCapability,this._disableRange=g.disableRange||!1,this._contentLength=g.length,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let p=this._fullRequestId,g=this._manager.getRequestXhr(p),f=E=>g.getResponseHeader(E),{allowRangeRequests:v,suggestedLength:y}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});v&&(this._isRangeSupported=!0),this._contentLength=y||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(f),this._isRangeSupported&&this._manager.abortRequest(p),this._headersReceivedCapability.resolve()}_onDone(p){if(p&&(this._requests.length>0?this._requests.shift().resolve({value:p.chunk,done:!1}):this._cachedChunks.push(p.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(p){this._storedError=(0,i.createResponseStatusError)(p,this._url),this._headersReceivedCapability.reject(this._storedError);for(let g of this._requests)g.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(p){this.onProgress?.({loaded:p.loaded,total:p.lengthComputable?p.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){return ye(this,null,function*(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let p=new r.PromiseCapability;return this._requests.push(p),p.promise})}cancel(p){this._done=!0,this._headersReceivedCapability.reject(p);for(let g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class l{constructor(p,g,f){this._manager=p;let v={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=p.url,this._requestId=p.requestRange(g,f,v),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(p){let g=p.chunk;this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunk=g,this._done=!0;for(let f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(p){this._storedError=(0,i.createResponseStatusError)(p,this._url);for(let g of this._requests)g.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(p){this.isStreamingSupported||this.onProgress?.({loaded:p.loaded})}get isStreamingSupported(){return!1}read(){return ye(this,null,function*(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};let p=new r.PromiseCapability;return this._requests.push(p),p.promise})}cancel(p){this._done=!0;for(let g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var r=n(1),i=n(20);let s=/^file:\/\/\/[a-zA-Z]:\//;function o(f){let v=Bp(),y=v.parse(f);return y.protocol==="file:"||y.host?y:/^[a-z]:[/\\]/i.test(f)?v.parse(`file:///${f}`):(y.host||(y.protocol="file:"),y)}class c{constructor(v){this.source=v,this.url=o(v.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&v.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new p(this):new l(this),this._fullRequestReader}getRangeReader(v,y){if(y<=this._progressiveDataLength)return null;let E=this.isFsUrl?new g(this,v,y):new h(this,v,y);return this._rangeRequestReaders.push(E),E}cancelAllRequests(v){this._fullRequestReader?.cancel(v);for(let y of this._rangeRequestReaders.slice(0))y.cancel(v)}}t.PDFNodeStream=c;class d{constructor(v){this._url=v.url,this._done=!1,this._storedError=null,this.onProgress=null;let y=v.source;this._contentLength=y.length,this._loaded=0,this._filename=null,this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._readableStream=null,this._readCapability=new r.PromiseCapability,this._headersCapability=new r.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return ye(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let v=this._readableStream.read();return v===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=v.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(v).buffer,done:!1})})}cancel(v){if(!this._readableStream){this._error(v);return}this._readableStream.destroy(v)}_error(v){this._storedError=v,this._readCapability.resolve()}_setReadableStream(v){this._readableStream=v,v.on("readable",()=>{this._readCapability.resolve()}),v.on("end",()=>{v.destroy(),this._done=!0,this._readCapability.resolve()}),v.on("error",y=>{this._error(y)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class u{constructor(v){this._url=v.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new r.PromiseCapability;let y=v.source;this._isStreamingSupported=!y.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){return ye(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let v=this._readableStream.read();return v===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=v.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(v).buffer,done:!1})})}cancel(v){if(!this._readableStream){this._error(v);return}this._readableStream.destroy(v)}_error(v){this._storedError=v,this._readCapability.resolve()}_setReadableStream(v){this._readableStream=v,v.on("readable",()=>{this._readCapability.resolve()}),v.on("end",()=>{v.destroy(),this._done=!0,this._readCapability.resolve()}),v.on("error",y=>{this._error(y)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function a(f,v){return{protocol:f.protocol,auth:f.auth,host:f.hostname,port:f.port,path:f.path,method:"GET",headers:v}}class l extends d{constructor(v){super(v);let y=E=>{if(E.statusCode===404){let C=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=C,this._headersCapability.reject(C);return}this._headersCapability.resolve(),this._setReadableStream(E);let T=C=>this._readableStream.headers[C.toLowerCase()],{allowRangeRequests:M,suggestedLength:w}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:T,isHttp:v.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=M,this._contentLength=w||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(T)};if(this._request=null,this._url.protocol==="http:"){let E=Vl();this._request=E.request(a(this._url,v.httpHeaders),y)}else{let E=Hl();this._request=E.request(a(this._url,v.httpHeaders),y)}this._request.on("error",E=>{this._storedError=E,this._headersCapability.reject(E)}),this._request.end()}}class h extends u{constructor(v,y,E){super(v),this._httpHeaders={};for(let M in v.httpHeaders){let w=v.httpHeaders[M];w!==void 0&&(this._httpHeaders[M]=w)}this._httpHeaders.Range=`bytes=${y}-${E-1}`;let T=M=>{if(M.statusCode===404){let w=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=w;return}this._setReadableStream(M)};if(this._request=null,this._url.protocol==="http:"){let M=Vl();this._request=M.request(a(this._url,this._httpHeaders),T)}else{let M=Hl();this._request=M.request(a(this._url,this._httpHeaders),T)}this._request.on("error",M=>{this._storedError=M}),this._request.end()}}class p extends d{constructor(v){super(v);let y=decodeURIComponent(this._url.path);s.test(this._url.href)&&(y=y.replace(/^\//,""));let E=yo();E.lstat(y,(T,M)=>{if(T){T.code==="ENOENT"&&(T=new r.MissingPDFException(`Missing PDF "${y}".`)),this._storedError=T,this._headersCapability.reject(T);return}this._contentLength=M.size,this._setReadableStream(E.createReadStream(y)),this._headersCapability.resolve()})}}class g extends u{constructor(v,y,E){super(v);let T=decodeURIComponent(this._url.path);s.test(this._url.href)&&(T=T.replace(/^\//,""));let M=yo();this._setReadableStream(M.createReadStream(T,{start:y,end:E-1}))}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var r=n(6),i=n(1);let s={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},o="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/1999/xlink",d=["butt","round","square"],u=["miter","round","bevel"],a=function(M,w="",C=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!C)return URL.createObjectURL(new Blob([M],{type:w}));let L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",U=`data:${w};base64,`;for(let F=0,$=M.length;F<$;F+=3){let W=M[F]&255,ne=M[F+1]&255,J=M[F+2]&255,Q=W>>2,ie=(W&3)<<4|ne>>4,Z=F+1<$?(ne&15)<<2|J>>6:64,O=F+2<$?J&63:64;U+=L[Q]+L[ie]+L[Z]+L[O]}return U},l=function(){let M=new Uint8Array([137,80,78,71,13,10,26,10]),w=12,C=new Int32Array(256);for(let J=0;J<256;J++){let Q=J;for(let ie=0;ie<8;ie++)Q=Q&1?3988292384^Q>>1&2147483647:Q>>1&2147483647;C[J]=Q}function L(J,Q,ie){let Z=-1;for(let O=Q;O<ie;O++){let S=(Z^J[O])&255,b=C[S];Z=Z>>>8^b}return Z^-1}function U(J,Q,ie,Z){let O=Z,S=Q.length;ie[O]=S>>24&255,ie[O+1]=S>>16&255,ie[O+2]=S>>8&255,ie[O+3]=S&255,O+=4,ie[O]=J.charCodeAt(0)&255,ie[O+1]=J.charCodeAt(1)&255,ie[O+2]=J.charCodeAt(2)&255,ie[O+3]=J.charCodeAt(3)&255,O+=4,ie.set(Q,O),O+=Q.length;let b=L(ie,Z+4,O);ie[O]=b>>24&255,ie[O+1]=b>>16&255,ie[O+2]=b>>8&255,ie[O+3]=b&255}function F(J,Q,ie){let Z=1,O=0;for(let S=Q;S<ie;++S)Z=(Z+(J[S]&255))%65521,O=(O+Z)%65521;return O<<16|Z}function $(J){if(!i.isNodeJS)return W(J);try{let Q=parseInt(process.versions.node)>=8?J:Buffer.from(J),ie=Up().deflateSync(Q,{level:9});return ie instanceof Uint8Array?ie:new Uint8Array(ie)}catch(Q){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Q)}return W(J)}function W(J){let Q=J.length,ie=65535,Z=Math.ceil(Q/ie),O=new Uint8Array(2+Q+Z*5+4),S=0;O[S++]=120,O[S++]=156;let b=0;for(;Q>ie;)O[S++]=0,O[S++]=255,O[S++]=255,O[S++]=0,O[S++]=0,O.set(J.subarray(b,b+ie),S),S+=ie,b+=ie,Q-=ie;O[S++]=1,O[S++]=Q&255,O[S++]=Q>>8&255,O[S++]=~Q&65535&255,O[S++]=(~Q&65535)>>8&255,O.set(J.subarray(b),S),S+=J.length-b;let _=F(J,0,J.length);return O[S++]=_>>24&255,O[S++]=_>>16&255,O[S++]=_>>8&255,O[S++]=_&255,O}function ne(J,Q,ie,Z){let O=J.width,S=J.height,b,_,A,N=J.data;switch(Q){case i.ImageKind.GRAYSCALE_1BPP:_=0,b=1,A=O+7>>3;break;case i.ImageKind.RGB_24BPP:_=2,b=8,A=O*3;break;case i.ImageKind.RGBA_32BPP:_=6,b=8,A=O*4;break;default:throw new Error("invalid format")}let k=new Uint8Array((1+A)*S),j=0,x=0;for(let B=0;B<S;++B)k[j++]=0,k.set(N.subarray(x,x+A),j),x+=A,j+=A;if(Q===i.ImageKind.GRAYSCALE_1BPP&&Z){j=0;for(let B=0;B<S;B++){j++;for(let V=0;V<A;V++)k[j++]^=255}}let m=new Uint8Array([O>>24&255,O>>16&255,O>>8&255,O&255,S>>24&255,S>>16&255,S>>8&255,S&255,b,_,0,0,0]),D=$(k),I=M.length+w*3+m.length+D.length,R=new Uint8Array(I),P=0;return R.set(M,P),P+=M.length,U("IHDR",m,R,P),P+=w+m.length,U("IDATA",D,R,P),P+=w+D.length,U("IEND",new Uint8Array(0),R,P),a(R,"image/png",ie)}return function(Q,ie,Z){let O=Q.kind===void 0?i.ImageKind.GRAYSCALE_1BPP:Q.kind;return ne(Q,O,ie,Z)}}();class h{constructor(){this.fontSizeScale=1,this.fontWeight=s.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=s.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(w,C){this.x=w,this.y=C}}function p(M){let w=[],C=[];for(let L of M){if(L.fn==="save"){w.push({fnId:92,fn:"group",items:[]}),C.push(w),w=w.at(-1).items;continue}L.fn==="restore"?w=C.pop():w.push(L)}return w}function g(M){if(Number.isInteger(M))return M.toString();let w=M.toFixed(10),C=w.length-1;if(w[C]!=="0")return w;do C--;while(w[C]==="0");return w.substring(0,w[C]==="."?C:C+1)}function f(M){if(M[4]===0&&M[5]===0){if(M[1]===0&&M[2]===0)return M[0]===1&&M[3]===1?"":`scale(${g(M[0])} ${g(M[3])})`;if(M[0]===M[3]&&M[1]===-M[2]){let w=Math.acos(M[0])*180/Math.PI;return`rotate(${g(w)})`}}else if(M[0]===1&&M[1]===0&&M[2]===0&&M[3]===1)return`translate(${g(M[4])} ${g(M[5])})`;return`matrix(${g(M[0])} ${g(M[1])} ${g(M[2])} ${g(M[3])} ${g(M[4])} ${g(M[5])})`}let v=0,y=0,E=0;class T{constructor(w,C,L=!1){(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new h,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=w,this.objs=C,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!L,this._operatorIdMapping=[];for(let U in i.OPS)this._operatorIdMapping[i.OPS[U]]=U}getObject(w,C=null){return typeof w=="string"?w.startsWith("g_")?this.commonObjs.get(w):this.objs.get(w):C}save(){this.transformStack.push(this.transformMatrix);let w=this.current;this.extraStack.push(w),this.current=w.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(w){this.save(),this.executeOpTree(w),this.restore()}loadDependencies(w){let C=w.fnArray,L=w.argsArray;for(let U=0,F=C.length;U<F;U++)if(C[U]===i.OPS.dependency)for(let $ of L[U]){let W=$.startsWith("g_")?this.commonObjs:this.objs,ne=new Promise(J=>{W.get($,J)});this.current.dependencies.push(ne)}return Promise.all(this.current.dependencies)}transform(w,C,L,U,F,$){let W=[w,C,L,U,F,$];this.transformMatrix=i.Util.transform(this.transformMatrix,W),this.tgrp=null}getSVG(w,C){this.viewport=C;let L=this._initialize(C);return this.loadDependencies(w).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(w)),L))}convertOpList(w){let C=this._operatorIdMapping,L=w.argsArray,U=w.fnArray,F=[];for(let $=0,W=U.length;$<W;$++){let ne=U[$];F.push({fnId:ne,fn:C[ne],args:L[$]})}return p(F)}executeOpTree(w){for(let C of w){let L=C.fn,U=C.fnId,F=C.args;switch(U|0){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(F);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(F[0],F[1]);break;case i.OPS.setFont:this.setFont(F);break;case i.OPS.showText:this.showText(F[0]);break;case i.OPS.showSpacedText:this.showText(F[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(F[0],F[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(F[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(F[0]);break;case i.OPS.setHScale:this.setHScale(F[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(F[0],F[1],F[2],F[3],F[4],F[5]);break;case i.OPS.setTextRise:this.setTextRise(F[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(F[0]);break;case i.OPS.setLineWidth:this.setLineWidth(F[0]);break;case i.OPS.setLineJoin:this.setLineJoin(F[0]);break;case i.OPS.setLineCap:this.setLineCap(F[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(F[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(F[0],F[1],F[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(F[0],F[1],F[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(F);break;case i.OPS.setFillColorN:this.setFillColorN(F);break;case i.OPS.shadingFill:this.shadingFill(F[0]);break;case i.OPS.setDash:this.setDash(F[0],F[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(F[0]);break;case i.OPS.setFlatness:this.setFlatness(F[0]);break;case i.OPS.setGState:this.setGState(F[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(F[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(F[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(F[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(F[0],F[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(F[0],F[1],F[2],F[3],F[4],F[5]);break;case i.OPS.constructPath:this.constructPath(F[0],F[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(C.items);break;default:(0,i.warn)(`Unimplemented operator ${L}`);break}}}setWordSpacing(w){this.current.wordSpacing=w}setCharSpacing(w){this.current.charSpacing=w}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(w,C,L,U,F,$){let W=this.current;W.textMatrix=W.lineMatrix=[w,C,L,U,F,$],W.textMatrixScale=Math.hypot(w,C),W.x=W.lineX=0,W.y=W.lineY=0,W.xcoords=[],W.ycoords=[],W.tspan=this.svgFactory.createElement("svg:tspan"),W.tspan.setAttributeNS(null,"font-family",W.fontFamily),W.tspan.setAttributeNS(null,"font-size",`${g(W.fontSize)}px`),W.tspan.setAttributeNS(null,"y",g(-W.y)),W.txtElement=this.svgFactory.createElement("svg:text"),W.txtElement.append(W.tspan)}beginText(){let w=this.current;w.x=w.lineX=0,w.y=w.lineY=0,w.textMatrix=i.IDENTITY_MATRIX,w.lineMatrix=i.IDENTITY_MATRIX,w.textMatrixScale=1,w.tspan=this.svgFactory.createElement("svg:tspan"),w.txtElement=this.svgFactory.createElement("svg:text"),w.txtgrp=this.svgFactory.createElement("svg:g"),w.xcoords=[],w.ycoords=[]}moveText(w,C){let L=this.current;L.x=L.lineX+=w,L.y=L.lineY+=C,L.xcoords=[],L.ycoords=[],L.tspan=this.svgFactory.createElement("svg:tspan"),L.tspan.setAttributeNS(null,"font-family",L.fontFamily),L.tspan.setAttributeNS(null,"font-size",`${g(L.fontSize)}px`),L.tspan.setAttributeNS(null,"y",g(-L.y))}showText(w){let C=this.current,L=C.font,U=C.fontSize;if(U===0)return;let F=C.fontSizeScale,$=C.charSpacing,W=C.wordSpacing,ne=C.fontDirection,J=C.textHScale*ne,Q=L.vertical,ie=Q?1:-1,Z=L.defaultVMetrics,O=U*C.fontMatrix[0],S=0;for(let A of w){if(A===null){S+=ne*W;continue}else if(typeof A=="number"){S+=ie*A*U/1e3;continue}let N=(A.isSpace?W:0)+$,k=A.fontChar,j,x,m=A.width;if(Q){let I,R=A.vmetric||Z;I=A.vmetric?R[1]:m*.5,I=-I*O;let P=R[2]*O;m=R?-R[0]:m,j=I/F,x=(S+P)/F}else j=S/F,x=0;(A.isInFont||L.missingFile)&&(C.xcoords.push(C.x+j),Q&&C.ycoords.push(-C.y+x),C.tspan.textContent+=k);let D=Q?m*O-N*ne:m*O+N*ne;S+=D}C.tspan.setAttributeNS(null,"x",C.xcoords.map(g).join(" ")),Q?C.tspan.setAttributeNS(null,"y",C.ycoords.map(g).join(" ")):C.tspan.setAttributeNS(null,"y",g(-C.y)),Q?C.y-=S:C.x+=S*J,C.tspan.setAttributeNS(null,"font-family",C.fontFamily),C.tspan.setAttributeNS(null,"font-size",`${g(C.fontSize)}px`),C.fontStyle!==s.fontStyle&&C.tspan.setAttributeNS(null,"font-style",C.fontStyle),C.fontWeight!==s.fontWeight&&C.tspan.setAttributeNS(null,"font-weight",C.fontWeight);let b=C.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(b===i.TextRenderingMode.FILL||b===i.TextRenderingMode.FILL_STROKE?(C.fillColor!==s.fillColor&&C.tspan.setAttributeNS(null,"fill",C.fillColor),C.fillAlpha<1&&C.tspan.setAttributeNS(null,"fill-opacity",C.fillAlpha)):C.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?C.tspan.setAttributeNS(null,"fill","transparent"):C.tspan.setAttributeNS(null,"fill","none"),b===i.TextRenderingMode.STROKE||b===i.TextRenderingMode.FILL_STROKE){let A=1/(C.textMatrixScale||1);this._setStrokeAttributes(C.tspan,A)}let _=C.textMatrix;C.textRise!==0&&(_=_.slice(),_[5]+=C.textRise),C.txtElement.setAttributeNS(null,"transform",`${f(_)} scale(${g(J)}, -1)`),C.txtElement.setAttributeNS(o,"xml:space","preserve"),C.txtElement.append(C.tspan),C.txtgrp.append(C.txtElement),this._ensureTransformGroup().append(C.txtElement)}setLeadingMoveText(w,C){this.setLeading(-C),this.moveText(w,C)}addFontStyle(w){if(!w.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));let C=a(w.data,w.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${w.loadedName}"; src: url(${C}); }
`}setFont(w){let C=this.current,L=this.commonObjs.get(w[0]),U=w[1];C.font=L,this.embedFonts&&!L.missingFile&&!this.embeddedFonts[L.loadedName]&&(this.addFontStyle(L),this.embeddedFonts[L.loadedName]=L),C.fontMatrix=L.fontMatrix||i.FONT_IDENTITY_MATRIX;let F="normal";L.black?F="900":L.bold&&(F="bold");let $=L.italic?"italic":"normal";U<0?(U=-U,C.fontDirection=-1):C.fontDirection=1,C.fontSize=U,C.fontFamily=L.loadedName,C.fontWeight=F,C.fontStyle=$,C.tspan=this.svgFactory.createElement("svg:tspan"),C.tspan.setAttributeNS(null,"y",g(-C.y)),C.xcoords=[],C.ycoords=[]}endText(){let w=this.current;w.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&w.txtElement?.hasChildNodes()&&(w.element=w.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(w){w>0&&(this.current.lineWidth=w)}setLineCap(w){this.current.lineCap=d[w]}setLineJoin(w){this.current.lineJoin=u[w]}setMiterLimit(w){this.current.miterLimit=w}setStrokeAlpha(w){this.current.strokeAlpha=w}setStrokeRGBColor(w,C,L){this.current.strokeColor=i.Util.makeHexColor(w,C,L)}setFillAlpha(w){this.current.fillAlpha=w}setFillRGBColor(w,C,L){this.current.fillColor=i.Util.makeHexColor(w,C,L),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(w){this.current.strokeColor=this._makeColorN_Pattern(w)}setFillColorN(w){this.current.fillColor=this._makeColorN_Pattern(w)}shadingFill(w){let{width:C,height:L}=this.viewport,U=i.Util.inverseTransform(this.transformMatrix),[F,$,W,ne]=i.Util.getAxialAlignedBoundingBox([0,0,C,L],U),J=this.svgFactory.createElement("svg:rect");J.setAttributeNS(null,"x",F),J.setAttributeNS(null,"y",$),J.setAttributeNS(null,"width",W-F),J.setAttributeNS(null,"height",ne-$),J.setAttributeNS(null,"fill",this._makeShadingPattern(w)),this.current.fillAlpha<1&&J.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(J)}_makeColorN_Pattern(w){return w[0]==="TilingPattern"?this._makeTilingPattern(w):this._makeShadingPattern(w)}_makeTilingPattern(w){let C=w[1],L=w[2],U=w[3]||i.IDENTITY_MATRIX,[F,$,W,ne]=w[4],J=w[5],Q=w[6],ie=w[7],Z=`shading${E++}`,[O,S,b,_]=i.Util.normalizeRect([...i.Util.applyTransform([F,$],U),...i.Util.applyTransform([W,ne],U)]),[A,N]=i.Util.singularValueDecompose2dScale(U),k=J*A,j=Q*N,x=this.svgFactory.createElement("svg:pattern");x.setAttributeNS(null,"id",Z),x.setAttributeNS(null,"patternUnits","userSpaceOnUse"),x.setAttributeNS(null,"width",k),x.setAttributeNS(null,"height",j),x.setAttributeNS(null,"x",`${O}`),x.setAttributeNS(null,"y",`${S}`);let m=this.svg,D=this.transformMatrix,I=this.current.fillColor,R=this.current.strokeColor,P=this.svgFactory.create(b-O,_-S);if(this.svg=P,this.transformMatrix=U,ie===2){let B=i.Util.makeHexColor(...C);this.current.fillColor=B,this.current.strokeColor=B}return this.executeOpTree(this.convertOpList(L)),this.svg=m,this.transformMatrix=D,this.current.fillColor=I,this.current.strokeColor=R,x.append(P.childNodes[0]),this.defs.append(x),`url(#${Z})`}_makeShadingPattern(w){switch(typeof w=="string"&&(w=this.objs.get(w)),w[0]){case"RadialAxial":let C=`shading${E++}`,L=w[3],U;switch(w[1]){case"axial":let F=w[4],$=w[5];U=this.svgFactory.createElement("svg:linearGradient"),U.setAttributeNS(null,"id",C),U.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),U.setAttributeNS(null,"x1",F[0]),U.setAttributeNS(null,"y1",F[1]),U.setAttributeNS(null,"x2",$[0]),U.setAttributeNS(null,"y2",$[1]);break;case"radial":let W=w[4],ne=w[5],J=w[6],Q=w[7];U=this.svgFactory.createElement("svg:radialGradient"),U.setAttributeNS(null,"id",C),U.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),U.setAttributeNS(null,"cx",ne[0]),U.setAttributeNS(null,"cy",ne[1]),U.setAttributeNS(null,"r",Q),U.setAttributeNS(null,"fx",W[0]),U.setAttributeNS(null,"fy",W[1]),U.setAttributeNS(null,"fr",J);break;default:throw new Error(`Unknown RadialAxial type: ${w[1]}`)}for(let F of L){let $=this.svgFactory.createElement("svg:stop");$.setAttributeNS(null,"offset",F[0]),$.setAttributeNS(null,"stop-color",F[1]),U.append($)}return this.defs.append(U),`url(#${C})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${w[0]}`)}}setDash(w,C){this.current.dashArray=w,this.current.dashPhase=C}constructPath(w,C){let L=this.current,U=L.x,F=L.y,$=[],W=0;for(let ne of w)switch(ne|0){case i.OPS.rectangle:U=C[W++],F=C[W++];let J=C[W++],Q=C[W++],ie=U+J,Z=F+Q;$.push("M",g(U),g(F),"L",g(ie),g(F),"L",g(ie),g(Z),"L",g(U),g(Z),"Z");break;case i.OPS.moveTo:U=C[W++],F=C[W++],$.push("M",g(U),g(F));break;case i.OPS.lineTo:U=C[W++],F=C[W++],$.push("L",g(U),g(F));break;case i.OPS.curveTo:U=C[W+4],F=C[W+5],$.push("C",g(C[W]),g(C[W+1]),g(C[W+2]),g(C[W+3]),g(U),g(F)),W+=6;break;case i.OPS.curveTo2:$.push("C",g(U),g(F),g(C[W]),g(C[W+1]),g(C[W+2]),g(C[W+3])),U=C[W+2],F=C[W+3],W+=4;break;case i.OPS.curveTo3:U=C[W+2],F=C[W+3],$.push("C",g(C[W]),g(C[W+1]),g(U),g(F),g(U),g(F)),W+=4;break;case i.OPS.closePath:$.push("Z");break}$=$.join(" "),L.path&&w.length>0&&w[0]!==i.OPS.rectangle&&w[0]!==i.OPS.moveTo?$=L.path.getAttributeNS(null,"d")+$:(L.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(L.path)),L.path.setAttributeNS(null,"d",$),L.path.setAttributeNS(null,"fill","none"),L.element=L.path,L.setCurrentPoint(U,F)}endPath(){let w=this.current;if(w.path=null,!this.pendingClip)return;if(!w.element){this.pendingClip=null;return}let C=`clippath${v++}`,L=this.svgFactory.createElement("svg:clipPath");L.setAttributeNS(null,"id",C),L.setAttributeNS(null,"transform",f(this.transformMatrix));let U=w.element.cloneNode(!0);if(this.pendingClip==="evenodd"?U.setAttributeNS(null,"clip-rule","evenodd"):U.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,L.append(U),this.defs.append(L),w.activeClipUrl){w.clipGroup=null;for(let F of this.extraStack)F.clipGroup=null;L.setAttributeNS(null,"clip-path",w.activeClipUrl)}w.activeClipUrl=`url(#${C})`,this.tgrp=null}clip(w){this.pendingClip=w}closePath(){let w=this.current;if(w.path){let C=`${w.path.getAttributeNS(null,"d")}Z`;w.path.setAttributeNS(null,"d",C)}}setLeading(w){this.current.leading=-w}setTextRise(w){this.current.textRise=w}setTextRenderingMode(w){this.current.textRenderingMode=w}setHScale(w){this.current.textHScale=w/100}setRenderingIntent(w){}setFlatness(w){}setGState(w){for(let[C,L]of w)switch(C){case"LW":this.setLineWidth(L);break;case"LC":this.setLineCap(L);break;case"LJ":this.setLineJoin(L);break;case"ML":this.setMiterLimit(L);break;case"D":this.setDash(L[0],L[1]);break;case"RI":this.setRenderingIntent(L);break;case"FL":this.setFlatness(L);break;case"Font":this.setFont(L);break;case"CA":this.setStrokeAlpha(L);break;case"ca":this.setFillAlpha(L);break;default:(0,i.warn)(`Unimplemented graphic state operator ${C}`);break}}fill(){let w=this.current;w.element&&(w.element.setAttributeNS(null,"fill",w.fillColor),w.element.setAttributeNS(null,"fill-opacity",w.fillAlpha),this.endPath())}stroke(){let w=this.current;w.element&&(this._setStrokeAttributes(w.element),w.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(w,C=1){let L=this.current,U=L.dashArray;C!==1&&U.length>0&&(U=U.map(function(F){return C*F})),w.setAttributeNS(null,"stroke",L.strokeColor),w.setAttributeNS(null,"stroke-opacity",L.strokeAlpha),w.setAttributeNS(null,"stroke-miterlimit",g(L.miterLimit)),w.setAttributeNS(null,"stroke-linecap",L.lineCap),w.setAttributeNS(null,"stroke-linejoin",L.lineJoin),w.setAttributeNS(null,"stroke-width",g(C*L.lineWidth)+"px"),w.setAttributeNS(null,"stroke-dasharray",U.map(g).join(" ")),w.setAttributeNS(null,"stroke-dashoffset",g(C*L.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){let w=this.svgFactory.createElement("svg:rect");w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y","0"),w.setAttributeNS(null,"width","1px"),w.setAttributeNS(null,"height","1px"),w.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(w)}paintImageXObject(w){let C=this.getObject(w);if(!C){(0,i.warn)(`Dependent image with object ID ${w} is not ready yet`);return}this.paintInlineImageXObject(C)}paintInlineImageXObject(w,C){let L=w.width,U=w.height,F=l(w,this.forceDataSchema,!!C),$=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x","0"),$.setAttributeNS(null,"y","0"),$.setAttributeNS(null,"width",g(L)),$.setAttributeNS(null,"height",g(U)),this.current.element=$,this.clip("nonzero");let W=this.svgFactory.createElement("svg:image");W.setAttributeNS(c,"xlink:href",F),W.setAttributeNS(null,"x","0"),W.setAttributeNS(null,"y",g(-U)),W.setAttributeNS(null,"width",g(L)+"px"),W.setAttributeNS(null,"height",g(U)+"px"),W.setAttributeNS(null,"transform",`scale(${g(1/L)} ${g(-1/U)})`),C?C.append(W):this._ensureTransformGroup().append(W)}paintImageMaskXObject(w){let C=this.getObject(w.data,w);if(C.bitmap){(0,i.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}let L=this.current,U=C.width,F=C.height,$=L.fillColor;L.maskId=`mask${y++}`;let W=this.svgFactory.createElement("svg:mask");W.setAttributeNS(null,"id",L.maskId);let ne=this.svgFactory.createElement("svg:rect");ne.setAttributeNS(null,"x","0"),ne.setAttributeNS(null,"y","0"),ne.setAttributeNS(null,"width",g(U)),ne.setAttributeNS(null,"height",g(F)),ne.setAttributeNS(null,"fill",$),ne.setAttributeNS(null,"mask",`url(#${L.maskId})`),this.defs.append(W),this._ensureTransformGroup().append(ne),this.paintInlineImageXObject(C,W)}paintFormXObjectBegin(w,C){if(Array.isArray(w)&&w.length===6&&this.transform(w[0],w[1],w[2],w[3],w[4],w[5]),C){let L=C[2]-C[0],U=C[3]-C[1],F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x",C[0]),F.setAttributeNS(null,"y",C[1]),F.setAttributeNS(null,"width",g(L)),F.setAttributeNS(null,"height",g(U)),this.current.element=F,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(w){let C=this.svgFactory.create(w.width,w.height),L=this.svgFactory.createElement("svg:defs");C.append(L),this.defs=L;let U=this.svgFactory.createElement("svg:g");return U.setAttributeNS(null,"transform",f(w.transform)),C.append(U),this.svg=U,C}_ensureClipGroup(){if(!this.current.clipGroup){let w=this.svgFactory.createElement("svg:g");w.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(w),this.current.clipGroup=w}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",f(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}t.SVGGraphics=T},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class n{static textContent(i){let s=[],o={items:s,styles:Object.create(null)};function c(d){if(!d)return;let u=null,a=d.name;if(a==="#text")u=d.value;else if(n.shouldBuildText(a))d?.attributes?.textContent?u=d.attributes.textContent:d.value&&(u=d.value);else return;if(u!==null&&s.push({str:u}),!!d.children)for(let l of d.children)c(l)}return c(i),o}static shouldBuildText(i){return!(i==="textarea"||i==="input"||i==="option"||i==="select")}}t.XfaText=n},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=f,t.updateTextLayer=v;var r=n(1),i=n(6);let s=1e5,o=30,c=.8,d=new Map;function u(y,E){let T;if(E&&r.FeatureTest.isOffscreenCanvasSupported)T=new OffscreenCanvas(y,y).getContext("2d",{alpha:!1});else{let M=document.createElement("canvas");M.width=M.height=y,T=M.getContext("2d",{alpha:!1})}return T}function a(y,E){let T=d.get(y);if(T)return T;let M=u(o,E);M.font=`${o}px ${y}`;let w=M.measureText(""),C=w.fontBoundingBoxAscent,L=Math.abs(w.fontBoundingBoxDescent);if(C){let F=C/(C+L);return d.set(y,F),M.canvas.width=M.canvas.height=0,F}M.strokeStyle="red",M.clearRect(0,0,o,o),M.strokeText("g",0,0);let U=M.getImageData(0,0,o,o).data;L=0;for(let F=U.length-1-3;F>=0;F-=4)if(U[F]>0){L=Math.ceil(F/4/o);break}M.clearRect(0,0,o,o),M.strokeText("A",0,o),U=M.getImageData(0,0,o,o).data,C=0;for(let F=0,$=U.length;F<$;F+=4)if(U[F]>0){C=o-Math.floor(F/4/o);break}if(M.canvas.width=M.canvas.height=0,C){let F=C/(C+L);return d.set(y,F),F}return d.set(y,c),c}function l(y,E,T){let M=document.createElement("span"),w={angle:0,canvasWidth:0,hasText:E.str!=="",hasEOL:E.hasEOL,fontSize:0};y._textDivs.push(M);let C=r.Util.transform(y._transform,E.transform),L=Math.atan2(C[1],C[0]),U=T[E.fontName];U.vertical&&(L+=Math.PI/2);let F=Math.hypot(C[2],C[3]),$=F*a(U.fontFamily,y._isOffscreenCanvasSupported),W,ne;L===0?(W=C[4],ne=C[5]-$):(W=C[4]+$*Math.sin(L),ne=C[5]-$*Math.cos(L));let J="calc(var(--scale-factor)*",Q=M.style;y._container===y._rootContainer?(Q.left=`${(100*W/y._pageWidth).toFixed(2)}%`,Q.top=`${(100*ne/y._pageHeight).toFixed(2)}%`):(Q.left=`${J}${W.toFixed(2)}px)`,Q.top=`${J}${ne.toFixed(2)}px)`),Q.fontSize=`${J}${F.toFixed(2)}px)`,Q.fontFamily=U.fontFamily,w.fontSize=F,M.setAttribute("role","presentation"),M.textContent=E.str,M.dir=E.dir,y._fontInspectorEnabled&&(M.dataset.fontName=E.fontName),L!==0&&(w.angle=L*(180/Math.PI));let ie=!1;if(E.str.length>1)ie=!0;else if(E.str!==" "&&E.transform[0]!==E.transform[3]){let Z=Math.abs(E.transform[0]),O=Math.abs(E.transform[3]);Z!==O&&Math.max(Z,O)/Math.min(Z,O)>1.5&&(ie=!0)}ie&&(w.canvasWidth=U.vertical?E.height:E.width),y._textDivProperties.set(M,w),y._isReadableStream&&y._layoutText(M)}function h(y){let{div:E,scale:T,properties:M,ctx:w,prevFontSize:C,prevFontFamily:L}=y,{style:U}=E,F="";if(M.canvasWidth!==0&&M.hasText){let{fontFamily:$}=U,{canvasWidth:W,fontSize:ne}=M;(C!==ne||L!==$)&&(w.font=`${ne*T}px ${$}`,y.prevFontSize=ne,y.prevFontFamily=$);let{width:J}=w.measureText(E.textContent);J>0&&(F=`scaleX(${W*T/J})`)}M.angle!==0&&(F=`rotate(${M.angle}deg) ${F}`),F.length>0&&(U.transform=F)}function p(y){if(y._canceled)return;let E=y._textDivs,T=y._capability;if(E.length>s){T.resolve();return}if(!y._isReadableStream)for(let w of E)y._layoutText(w);T.resolve()}class g{constructor({textContentSource:E,container:T,viewport:M,textDivs:w,textDivProperties:C,textContentItemsStr:L,isOffscreenCanvasSupported:U}){this._textContentSource=E,this._isReadableStream=E instanceof ReadableStream,this._container=this._rootContainer=T,this._textDivs=w||[],this._textContentItemsStr=L||[],this._isOffscreenCanvasSupported=U,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=C||new WeakMap,this._canceled=!1,this._capability=new r.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:M.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:u(0,U)};let{pageWidth:F,pageHeight:$,pageX:W,pageY:ne}=M.rawDims;this._transform=[1,0,0,-1,-W,ne+$],this._pageWidth=F,this._pageHeight=$,(0,i.setLayerDimensions)(T,M),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new r.AbortException("TextLayer task cancelled."))}_processItems(E,T){for(let M of E){if(M.str===void 0){if(M.type==="beginMarkedContentProps"||M.type==="beginMarkedContent"){let w=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),M.id!==null&&this._container.setAttribute("id",`${M.id}`),w.append(this._container)}else M.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(M.str),l(this,M,T)}}_layoutText(E){let T=this._layoutTextParams.properties=this._textDivProperties.get(E);if(this._layoutTextParams.div=E,h(this._layoutTextParams),T.hasText&&this._container.append(E),T.hasEOL){let M=document.createElement("br");M.setAttribute("role","presentation"),this._container.append(M)}}_render(){let E=new r.PromiseCapability,T=Object.create(null);if(this._isReadableStream){let M=()=>{this._reader.read().then(({value:w,done:C})=>{if(C){E.resolve();return}Object.assign(T,w.styles),this._processItems(w.items,T),M()},E.reject)};this._reader=this._textContentSource.getReader(),M()}else if(this._textContentSource){let{items:M,styles:w}=this._textContentSource;this._processItems(M,w),E.resolve()}else throw new Error('No "textContentSource" parameter specified.');E.promise.then(()=>{T=null,p(this)},this._capability.reject)}}t.TextLayerRenderTask=g;function f(y){!y.textContentSource&&(y.textContent||y.textContentStream)&&((0,i.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),y.textContentSource=y.textContent||y.textContentStream);let{container:E,viewport:T}=y,M=getComputedStyle(E),w=M.getPropertyValue("visibility"),C=parseFloat(M.getPropertyValue("--scale-factor"));w==="visible"&&(!C||Math.abs(C-T.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");let L=new g(y);return L._render(),L}function v({container:y,viewport:E,textDivs:T,textDivProperties:M,isOffscreenCanvasSupported:w,mustRotate:C=!0,mustRescale:L=!0}){if(C&&(0,i.setLayerDimensions)(y,{rotation:E.rotation}),L){let U=u(0,w),$={prevFontSize:null,prevFontFamily:null,div:null,scale:E.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:U};for(let W of T)$.properties=M.get(W),$.div=W,h($)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var r=n(1),i=n(4),s=n(28),o=n(33),c=n(6),d=n(34);let u=(()=>{class a{#e;#t=!1;#n=null;#r=this.pointerup.bind(this);#a=this.pointerdown.bind(this);#o=new Map;#s=!1;#c=!1;#l=!1;#i;static _initialized=!1;constructor({uiManager:h,pageIndex:p,div:g,accessibilityManager:f,annotationLayer:v,viewport:y,l10n:E}){let T=[s.FreeTextEditor,o.InkEditor,d.StampEditor];if(!a._initialized){a._initialized=!0;for(let M of T)M.initialize(E)}h.registerEditorTypes(T),this.#i=h,this.pageIndex=p,this.div=g,this.#e=f,this.#n=v,this.viewport=y,this.#i.addLayer(this)}get isEmpty(){return this.#o.size===0}updateToolbar(h){this.#i.updateToolbar(h)}updateMode(h=this.#i.getMode()){this.#p(),h===r.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),h!==r.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",h===r.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",h===r.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",h===r.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(h){if(!h&&this.#i.getMode()!==r.AnnotationEditorType.INK)return;if(!h){for(let g of this.#o.values())if(g.isEmpty()){g.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(h){this.#i.setEditingState(h)}addCommands(h){this.#i.addCommands(h)}enable(){this.div.style.pointerEvents="auto";let h=new Set;for(let g of this.#o.values())g.enableEditing(),g.annotationElementId&&h.add(g.annotationElementId);if(!this.#n)return;let p=this.#n.getEditableAnnotations();for(let g of p){if(g.hide(),this.#i.isDeletedAnnotationElement(g.data.id)||h.has(g.data.id))continue;let f=this.deserialize(g);f&&(this.addOrRebuild(f),f.enableEditing())}}disable(){this.#l=!0,this.div.style.pointerEvents="none";let h=new Set;for(let p of this.#o.values()){if(p.disableEditing(),!p.annotationElementId||p.serialize()!==null){h.add(p.annotationElementId);continue}this.getEditableAnnotation(p.annotationElementId)?.show(),p.remove()}if(this.#n){let p=this.#n.getEditableAnnotations();for(let g of p){let{id:f}=g.data;h.has(f)||this.#i.isDeletedAnnotationElement(f)||g.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#l=!1}getEditableAnnotation(h){return this.#n?.getEditableAnnotation(h)||null}setActiveEditor(h){this.#i.getActive()!==h&&this.#i.setActiveEditor(h)}enableClick(){this.div.addEventListener("pointerdown",this.#a),this.div.addEventListener("pointerup",this.#r)}disableClick(){this.div.removeEventListener("pointerdown",this.#a),this.div.removeEventListener("pointerup",this.#r)}attach(h){this.#o.set(h.id,h);let{annotationElementId:p}=h;p&&this.#i.isDeletedAnnotationElement(p)&&this.#i.removeDeletedAnnotationElement(h)}detach(h){this.#o.delete(h.id),this.#e?.removePointerInTextLayer(h.contentDiv),!this.#l&&h.annotationElementId&&this.#i.addDeletedAnnotationElement(h)}remove(h){this.detach(h),this.#i.removeEditor(h),h.div.contains(document.activeElement)&&setTimeout(()=>{this.#i.focusMainContainer()},0),h.div.remove(),h.isAttachedToDOM=!1,this.#c||this.addInkEditorIfNeeded(!1)}changeParent(h){h.parent!==this&&(h.annotationElementId&&(this.#i.addDeletedAnnotationElement(h.annotationElementId),i.AnnotationEditor.deleteAnnotationElement(h),h.annotationElementId=null),this.attach(h),h.parent?.detach(h),h.setParent(this),h.div&&h.isAttachedToDOM&&(h.div.remove(),this.div.append(h.div)))}add(h){if(this.changeParent(h),this.#i.addEditor(h),this.attach(h),!h.isAttachedToDOM){let p=h.render();this.div.append(p),h.isAttachedToDOM=!0}h.fixAndSetPosition(),h.onceAdded(),this.#i.addToAnnotationStorage(h)}moveEditorInDOM(h){if(!h.isAttachedToDOM)return;let{activeElement:p}=document;h.div.contains(p)&&(h._focusEventsAllowed=!1,setTimeout(()=>{h.div.contains(document.activeElement)?h._focusEventsAllowed=!0:(h.div.addEventListener("focusin",()=>{h._focusEventsAllowed=!0},{once:!0}),p.focus())},0)),h._structTreeParentId=this.#e?.moveElementInDOM(this.div,h.div,h.contentDiv,!0)}addOrRebuild(h){h.needsToBeRebuilt()?h.rebuild():this.add(h)}addUndoableEditor(h){let p=()=>h._uiManager.rebuild(h),g=()=>{h.remove()};this.addCommands({cmd:p,undo:g,mustExec:!1})}getNextId(){return this.#i.getId()}#f(h){switch(this.#i.getMode()){case r.AnnotationEditorType.FREETEXT:return new s.FreeTextEditor(h);case r.AnnotationEditorType.INK:return new o.InkEditor(h);case r.AnnotationEditorType.STAMP:return new d.StampEditor(h)}return null}pasteEditor(h,p){this.#i.updateToolbar(h),this.#i.updateMode(h);let{offsetX:g,offsetY:f}=this.#h(),v=this.getNextId(),y=this.#f(ce({parent:this,id:v,x:g,y:f,uiManager:this.#i,isCentered:!0},p));y&&this.add(y)}deserialize(h){switch(h.annotationType??h.annotationEditorType){case r.AnnotationEditorType.FREETEXT:return s.FreeTextEditor.deserialize(h,this,this.#i);case r.AnnotationEditorType.INK:return o.InkEditor.deserialize(h,this,this.#i);case r.AnnotationEditorType.STAMP:return d.StampEditor.deserialize(h,this,this.#i)}return null}#d(h,p){let g=this.getNextId(),f=this.#f({parent:this,id:g,x:h.offsetX,y:h.offsetY,uiManager:this.#i,isCentered:p});return f&&this.add(f),f}#h(){let{x:h,y:p,width:g,height:f}=this.div.getBoundingClientRect(),v=Math.max(0,h),y=Math.max(0,p),E=Math.min(window.innerWidth,h+g),T=Math.min(window.innerHeight,p+f),M=(v+E)/2-h,w=(y+T)/2-p,[C,L]=this.viewport.rotation%180===0?[M,w]:[w,M];return{offsetX:C,offsetY:L}}addNewEditor(){this.#d(this.#h(),!0)}setSelected(h){this.#i.setSelected(h)}toggleSelected(h){this.#i.toggleSelected(h)}isSelected(h){return this.#i.isSelected(h)}unselect(h){this.#i.unselect(h)}pointerup(h){let{isMac:p}=r.FeatureTest.platform;if(!(h.button!==0||h.ctrlKey&&p)&&h.target===this.div&&this.#s){if(this.#s=!1,!this.#t){this.#t=!0;return}if(this.#i.getMode()===r.AnnotationEditorType.STAMP){this.#i.unselectAll();return}this.#d(h,!1)}}pointerdown(h){if(this.#s){this.#s=!1;return}let{isMac:p}=r.FeatureTest.platform;if(h.button!==0||h.ctrlKey&&p||h.target!==this.div)return;this.#s=!0;let g=this.#i.getActive();this.#t=!g||g.isEmpty()}findNewParent(h,p,g){let f=this.#i.findParent(p,g);return f===null||f===this?!1:(f.changeParent(h),!0)}destroy(){this.#i.getActive()?.parent===this&&(this.#i.commitOrRemove(),this.#i.setActiveEditor(null));for(let h of this.#o.values())this.#e?.removePointerInTextLayer(h.contentDiv),h.setParent(null),h.isAttachedToDOM=!1,h.div.remove();this.div=null,this.#o.clear(),this.#i.removeLayer(this)}#p(){this.#c=!0;for(let h of this.#o.values())h.isEmpty()&&h.remove();this.#c=!1}render({viewport:h}){this.viewport=h,(0,c.setLayerDimensions)(this.div,h);for(let p of this.#i.getEditors(this.pageIndex))this.add(p);this.updateMode()}update({viewport:h}){this.#i.commitOrRemove(),this.viewport=h,(0,c.setLayerDimensions)(this.div,{rotation:h.rotation}),this.updateMode()}get pageDimensions(){let{pageWidth:h,pageHeight:p}=this.viewport.rawDims;return[h,p]}}return a})();t.AnnotationEditorLayer=u},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var r=n(1),i=n(5),s=n(4),o=n(29);let c=(()=>{class d extends s.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#r=this.editorDivKeydown.bind(this);#a;#o="";#s=`${this.id}-editor`;#c;#l=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let a=d.prototype,l=g=>g.isEmpty(),h=i.AnnotationEditorUIManager.TRANSLATE_SMALL,p=i.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new i.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],a.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],a.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],a._translateEmpty,{args:[-h,0],checker:l}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],a._translateEmpty,{args:[-p,0],checker:l}],[["ArrowRight","mac+ArrowRight"],a._translateEmpty,{args:[h,0],checker:l}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],a._translateEmpty,{args:[p,0],checker:l}],[["ArrowUp","mac+ArrowUp"],a._translateEmpty,{args:[0,-h],checker:l}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],a._translateEmpty,{args:[0,-p],checker:l}],[["ArrowDown","mac+ArrowDown"],a._translateEmpty,{args:[0,h],checker:l}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],a._translateEmpty,{args:[0,p],checker:l}]]))}static _type="freetext";constructor(a){super(ke(ce({},a),{name:"freeTextEditor"})),this.#a=a.color||d._defaultColor||s.AnnotationEditor._defaultLineColor,this.#c=a.fontSize||d._defaultFontSize}static initialize(a){s.AnnotationEditor.initialize(a,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});let l=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(l.getPropertyValue("--freetext-padding"))}static updateDefaultParams(a,l){switch(a){case r.AnnotationEditorParamsType.FREETEXT_SIZE:d._defaultFontSize=l;break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:d._defaultColor=l;break}}updateParams(a,l){switch(a){case r.AnnotationEditorParamsType.FREETEXT_SIZE:this.#i(l);break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(l);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,d._defaultFontSize],[r.AnnotationEditorParamsType.FREETEXT_COLOR,d._defaultColor||s.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,this.#c],[r.AnnotationEditorParamsType.FREETEXT_COLOR,this.#a]]}#i(a){let l=p=>{this.editorDiv.style.fontSize=`calc(${p}px * var(--scale-factor))`,this.translate(0,-(p-this.#c)*this.parentScale),this.#c=p,this.#h()},h=this.#c;this.addCommands({cmd:()=>{l(a)},undo:()=>{l(h)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(a){let l=this.#a;this.addCommands({cmd:()=>{this.#a=this.editorDiv.style.color=a},undo:()=>{this.#a=this.editorDiv.style.color=l},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(a,l){this._uiManager.translateSelectedEditors(a,l,!0)}getInitialTranslation(){let a=this.parentScale;return[-d._internalPadding*a,-(d._internalPadding+this.#c)*a]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(r.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#r),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#s),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#r),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(a){this._focusEventsAllowed&&(super.focusin(a),a.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#m();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){let a=this.editorDiv.getElementsByTagName("div");if(a.length===0)return this.editorDiv.innerText;let l=[];for(let h of a)l.push(h.innerText.replace(/\r\n?|\n/,""));return l.join(`
`)}#h(){let[a,l]=this.parentDimensions,h;if(this.isAttachedToDOM)h=this.div.getBoundingClientRect();else{let{currentLayer:p,div:g}=this,f=g.style.display;g.style.display="hidden",p.div.append(this.div),h=g.getBoundingClientRect(),g.remove(),g.style.display=f}this.rotation%180===this.parentRotation%180?(this.width=h.width/a,this.height=h.height/l):(this.width=h.height/a,this.height=h.width/l),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let a=this.#o,l=this.#o=this.#d().trimEnd();if(a===l)return;let h=p=>{if(this.#o=p,!p){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{h(l)},undo:()=>{h(a)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(a){this.enterInEditMode()}keydown(a){a.target===this.div&&a.key==="Enter"&&(this.enterInEditMode(),a.preventDefault())}editorDivKeydown(a){d._keyboardManager.exec(this,a)}editorDivFocus(a){this.isEditing=!0}editorDivBlur(a){this.isEditing=!1}editorDivInput(a){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let a,l;this.width&&(a=this.x,l=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#s),this.enableEditing(),s.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(p=>this.editorDiv?.setAttribute("aria-label",p)),s.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(p=>this.editorDiv?.setAttribute("default-content",p)),this.editorDiv.contentEditable=!0;let{style:h}=this.editorDiv;if(h.fontSize=`calc(${this.#c}px * var(--scale-factor))`,h.color=this.#a,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){let[p,g]=this.parentDimensions;if(this.annotationElementId){let{position:f}=this.#l,[v,y]=this.getInitialTranslation();[v,y]=this.pageTranslationToScreen(v,y);let[E,T]=this.pageDimensions,[M,w]=this.pageTranslation,C,L;switch(this.rotation){case 0:C=a+(f[0]-M)/E,L=l+this.height-(f[1]-w)/T;break;case 90:C=a+(f[0]-M)/E,L=l-(f[1]-w)/T,[v,y]=[y,-v];break;case 180:C=a-this.width+(f[0]-M)/E,L=l-(f[1]-w)/T,[v,y]=[-v,-y];break;case 270:C=a+(f[0]-M-this.height*T)/E,L=l+(f[1]-w-this.width*E)/T,[v,y]=[-y,v];break}this.setAt(C*p,L*g,v,y)}else this.setAt(a*p,l*g,this.width*p,this.height*g);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#o)for(let a of this.#o.split(`
`)){let l=document.createElement("div");l.append(a?document.createTextNode(a):document.createElement("br")),this.editorDiv.append(l)}}get contentDiv(){return this.editorDiv}static deserialize(a,l,h){let p=null;if(a instanceof o.FreeTextAnnotationElement){let{data:{defaultAppearanceData:{fontSize:f,fontColor:v},rect:y,rotation:E,id:T},textContent:M,textPosition:w,parent:{page:{pageNumber:C}}}=a;if(!M||M.length===0)return null;p=a={annotationType:r.AnnotationEditorType.FREETEXT,color:Array.from(v),fontSize:f,value:M.join(`
`),position:w,pageIndex:C-1,rect:y,rotation:E,id:T,deleted:!1}}let g=super.deserialize(a,l,h);return g.#c=a.fontSize,g.#a=r.Util.makeHexColor(...a.color),g.#o=a.value,g.annotationElementId=a.id||null,g.#l=p,g}serialize(a=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};let l=d._internalPadding*this.parentScale,h=this.getRect(l,l),p=s.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#a),g={annotationType:r.AnnotationEditorType.FREETEXT,color:p,fontSize:this.#c,value:this.#o,pageIndex:this.pageIndex,rect:h,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return a?g:this.annotationElementId&&!this.#v(g)?null:(g.id=this.annotationElementId,g)}#v(a){let{value:l,fontSize:h,color:p,rect:g,pageIndex:f}=this.#l;return a.value!==l||a.fontSize!==h||a.rect.some((v,y)=>Math.abs(v-g[y])>=1)||a.color.some((v,y)=>v!==p[y])||a.pageIndex!==f}#m(a=!1){if(!this.annotationElementId)return;if(this.#h(),!a&&(this.width===0||this.height===0)){setTimeout(()=>this.#m(!0),0);return}let l=d._internalPadding*this.parentScale;this.#l.rect=this.getRect(l,l)}}return d})();t.FreeTextEditor=c},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var r=n(1),i=n(6),s=n(3),o=n(30),c=n(31),d=n(32);let u=1e3,a=9,l=new WeakSet;function h(x){return{width:x[2]-x[0],height:x[3]-x[1]}}class p{static create(m){switch(m.data.annotationType){case r.AnnotationType.LINK:return new f(m);case r.AnnotationType.TEXT:return new v(m);case r.AnnotationType.WIDGET:switch(m.data.fieldType){case"Tx":return new E(m);case"Btn":return m.data.radioButton?new w(m):m.data.checkBox?new M(m):new C(m);case"Ch":return new L(m);case"Sig":return new T(m)}return new y(m);case r.AnnotationType.POPUP:return new U(m);case r.AnnotationType.FREETEXT:return new $(m);case r.AnnotationType.LINE:return new W(m);case r.AnnotationType.SQUARE:return new ne(m);case r.AnnotationType.CIRCLE:return new J(m);case r.AnnotationType.POLYLINE:return new Q(m);case r.AnnotationType.CARET:return new Z(m);case r.AnnotationType.INK:return new O(m);case r.AnnotationType.POLYGON:return new ie(m);case r.AnnotationType.HIGHLIGHT:return new S(m);case r.AnnotationType.UNDERLINE:return new b(m);case r.AnnotationType.SQUIGGLY:return new _(m);case r.AnnotationType.STRIKEOUT:return new A(m);case r.AnnotationType.STAMP:return new N(m);case r.AnnotationType.FILEATTACHMENT:return new k(m);default:return new g(m)}}}class g{#e=!1;constructor(m,{isRenderable:D=!1,ignoreBorder:I=!1,createQuadrilaterals:R=!1}={}){this.isRenderable=D,this.data=m.data,this.layer=m.layer,this.linkService=m.linkService,this.downloadManager=m.downloadManager,this.imageResourcesPath=m.imageResourcesPath,this.renderForms=m.renderForms,this.svgFactory=m.svgFactory,this.annotationStorage=m.annotationStorage,this.enableScripting=m.enableScripting,this.hasJSActions=m.hasJSActions,this._fieldObjects=m.fieldObjects,this.parent=m.parent,D&&(this.container=this._createContainer(I)),R&&this._createQuadrilaterals()}static _hasPopupData({titleObj:m,contentsObj:D,richText:I}){return!!(m?.str||D?.str||I?.str)}get hasPopupData(){return g._hasPopupData(this.data)}_createContainer(m){let{data:D,parent:{page:I,viewport:R}}=this,P=document.createElement("section");P.setAttribute("data-annotation-id",D.id),this instanceof y||(P.tabIndex=u),P.style.zIndex=this.parent.zIndex++,this.data.popupRef&&P.setAttribute("aria-haspopup","dialog"),D.noRotate&&P.classList.add("norotate");let{pageWidth:B,pageHeight:V,pageX:G,pageY:re}=R.rawDims;if(!D.rect||this instanceof U){let{rotation:ee}=D;return!D.hasOwnCanvas&&ee!==0&&this.setRotation(ee,P),P}let{width:q,height:Y}=h(D.rect),X=r.Util.normalizeRect([D.rect[0],I.view[3]-D.rect[1]+I.view[1],D.rect[2],I.view[3]-D.rect[3]+I.view[1]]);if(!m&&D.borderStyle.width>0){P.style.borderWidth=`${D.borderStyle.width}px`;let ee=D.borderStyle.horizontalCornerRadius,se=D.borderStyle.verticalCornerRadius;if(ee>0||se>0){let ue=`calc(${ee}px * var(--scale-factor)) / calc(${se}px * var(--scale-factor))`;P.style.borderRadius=ue}else if(this instanceof w){let ue=`calc(${q}px * var(--scale-factor)) / calc(${Y}px * var(--scale-factor))`;P.style.borderRadius=ue}switch(D.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:P.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:P.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:P.style.borderBottomStyle="solid";break;default:break}let le=D.borderColor||null;le?(this.#e=!0,P.style.borderColor=r.Util.makeHexColor(le[0]|0,le[1]|0,le[2]|0)):P.style.borderWidth=0}P.style.left=`${100*(X[0]-G)/B}%`,P.style.top=`${100*(X[1]-re)/V}%`;let{rotation:K}=D;return D.hasOwnCanvas||K===0?(P.style.width=`${100*q/B}%`,P.style.height=`${100*Y/V}%`):this.setRotation(K,P),P}setRotation(m,D=this.container){if(!this.data.rect)return;let{pageWidth:I,pageHeight:R}=this.parent.viewport.rawDims,{width:P,height:B}=h(this.data.rect),V,G;m%180===0?(V=100*P/I,G=100*B/R):(V=100*B/I,G=100*P/R),D.style.width=`${V}%`,D.style.height=`${G}%`,D.setAttribute("data-main-rotation",(360-m)%360)}get _commonActions(){let m=(D,I,R)=>{let P=R.detail[D],B=P[0],V=P.slice(1);R.target.style[I]=o.ColorConverters[`${B}_HTML`](V),this.annotationStorage.setValue(this.data.id,{[I]:o.ColorConverters[`${B}_rgb`](V)})};return(0,r.shadow)(this,"_commonActions",{display:D=>{let{display:I}=D.detail,R=I%2===1;this.container.style.visibility=R?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:R,noPrint:I===1||I===2})},print:D=>{this.annotationStorage.setValue(this.data.id,{noPrint:!D.detail.print})},hidden:D=>{let{hidden:I}=D.detail;this.container.style.visibility=I?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:I,noView:I})},focus:D=>{setTimeout(()=>D.target.focus({preventScroll:!1}),0)},userName:D=>{D.target.title=D.detail.userName},readonly:D=>{D.target.disabled=D.detail.readonly},required:D=>{this._setRequired(D.target,D.detail.required)},bgColor:D=>{m("bgColor","backgroundColor",D)},fillColor:D=>{m("fillColor","backgroundColor",D)},fgColor:D=>{m("fgColor","color",D)},textColor:D=>{m("textColor","color",D)},borderColor:D=>{m("borderColor","borderColor",D)},strokeColor:D=>{m("strokeColor","borderColor",D)},rotation:D=>{let I=D.detail.rotation;this.setRotation(I),this.annotationStorage.setValue(this.data.id,{rotation:I})}})}_dispatchEventFromSandbox(m,D){let I=this._commonActions;for(let R of Object.keys(D.detail))(m[R]||I[R])?.(D)}_setDefaultPropertiesFromJS(m){if(!this.enableScripting)return;let D=this.annotationStorage.getRawValue(this.data.id);if(!D)return;let I=this._commonActions;for(let[R,P]of Object.entries(D)){let B=I[R];if(B){let V={detail:{[R]:P},target:m};B(V),delete D[R]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:m}=this.data;if(!m)return;let[D,I,R,P]=this.data.rect;if(m.length===1){let[,{x:se,y:le},{x:ue,y:fe}]=m[0];if(R===se&&P===le&&D===ue&&I===fe)return}let{style:B}=this.container,V;if(this.#e){let{borderColor:se,borderWidth:le}=B;B.borderWidth=0,V=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${se}" stroke-width="${le}">`],this.container.classList.add("hasBorder")}let G=R-D,re=P-I,{svgFactory:q}=this,Y=q.createElement("svg");Y.classList.add("quadrilateralsContainer"),Y.setAttribute("width",0),Y.setAttribute("height",0);let X=q.createElement("defs");Y.append(X);let K=q.createElement("clipPath"),ee=`clippath_${this.data.id}`;K.setAttribute("id",ee),K.setAttribute("clipPathUnits","objectBoundingBox"),X.append(K);for(let[,{x:se,y:le},{x:ue,y:fe}]of m){let De=q.createElement("rect"),Pe=(ue-D)/G,st=(P-le)/re,Ze=(se-ue)/G,Bn=(le-fe)/re;De.setAttribute("x",Pe),De.setAttribute("y",st),De.setAttribute("width",Ze),De.setAttribute("height",Bn),K.append(De),V?.push(`<rect vector-effect="non-scaling-stroke" x="${Pe}" y="${st}" width="${Ze}" height="${Bn}"/>`)}this.#e&&(V.push("</g></svg>')"),B.backgroundImage=V.join("")),this.container.append(Y),this.container.style.clipPath=`url(#${ee})`}_createPopup(){let{container:m,data:D}=this;m.setAttribute("aria-haspopup","dialog");let I=new U({data:{color:D.color,titleObj:D.titleObj,modificationDate:D.modificationDate,contentsObj:D.contentsObj,richText:D.richText,parentRect:D.rect,borderStyle:0,id:`popup_${D.id}`,rotation:D.rotation},parent:this.parent,elements:[this]});this.parent.div.append(I.render())}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(m,D=null){let I=[];if(this._fieldObjects){let R=this._fieldObjects[m];if(R)for(let{page:P,id:B,exportValues:V}of R){if(P===-1||B===D)continue;let G=typeof V=="string"?V:null,re=document.querySelector(`[data-element-id="${B}"]`);if(re&&!l.has(re)){(0,r.warn)(`_getElementsByName - element not allowed: ${B}`);continue}I.push({id:B,exportValue:G,domElement:re})}return I}for(let R of document.getElementsByName(m)){let{exportValue:P}=R,B=R.getAttribute("data-element-id");B!==D&&l.has(R)&&I.push({id:B,exportValue:P,domElement:R})}return I}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let m=this.getElementsToTriggerPopup();if(Array.isArray(m))for(let D of m)D.classList.add("highlightArea");else m.classList.add("highlightArea")}_editOnDoubleClick(){let{annotationEditorType:m,data:{id:D}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:m,editId:D})})}}class f extends g{constructor(m,D=null){super(m,{isRenderable:!0,ignoreBorder:!!D?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=m.data.isTooltipOnly}render(){let{data:m,linkService:D}=this,I=document.createElement("a");I.setAttribute("data-element-id",m.id);let R=!1;return m.url?(D.addLinkAttributes(I,m.url,m.newWindow),R=!0):m.action?(this._bindNamedAction(I,m.action),R=!0):m.attachment?(this._bindAttachment(I,m.attachment),R=!0):m.setOCGState?(this.#t(I,m.setOCGState),R=!0):m.dest?(this._bindLink(I,m.dest),R=!0):(m.actions&&(m.actions.Action||m.actions["Mouse Up"]||m.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(I,m),R=!0),m.resetForm?(this._bindResetFormAction(I,m.resetForm),R=!0):this.isTooltipOnly&&!R&&(this._bindLink(I,""),R=!0)),this.container.classList.add("linkAnnotation"),R&&this.container.append(I),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(m,D){m.href=this.linkService.getDestinationHash(D),m.onclick=()=>(D&&this.linkService.goToDestination(D),!1),(D||D==="")&&this.#e()}_bindNamedAction(m,D){m.href=this.linkService.getAnchorUrl(""),m.onclick=()=>(this.linkService.executeNamedAction(D),!1),this.#e()}_bindAttachment(m,D){m.href=this.linkService.getAnchorUrl(""),m.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,D.content,D.filename),!1),this.#e()}#t(m,D){m.href=this.linkService.getAnchorUrl(""),m.onclick=()=>(this.linkService.executeSetOCGState(D),!1),this.#e()}_bindJSAction(m,D){m.href=this.linkService.getAnchorUrl("");let I=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let R of Object.keys(D.actions)){let P=I.get(R);P&&(m[P]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D.id,name:R}}),!1))}m.onclick||(m.onclick=()=>!1),this.#e()}_bindResetFormAction(m,D){let I=m.onclick;if(I||(m.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),I||(m.onclick=()=>!1);return}m.onclick=()=>{I?.();let{fields:R,refs:P,include:B}=D,V=[];if(R.length!==0||P.length!==0){let q=new Set(P);for(let Y of R){let X=this._fieldObjects[Y]||[];for(let{id:K}of X)q.add(K)}for(let Y of Object.values(this._fieldObjects))for(let X of Y)q.has(X.id)===B&&V.push(X)}else for(let q of Object.values(this._fieldObjects))V.push(...q);let G=this.annotationStorage,re=[];for(let q of V){let{id:Y}=q;switch(re.push(Y),q.type){case"text":{let K=q.defaultValue||"";G.setValue(Y,{value:K});break}case"checkbox":case"radiobutton":{let K=q.defaultValue===q.exportValues;G.setValue(Y,{value:K});break}case"combobox":case"listbox":{let K=q.defaultValue||"";G.setValue(Y,{value:K});break}default:continue}let X=document.querySelector(`[data-element-id="${Y}"]`);if(X){if(!l.has(X)){(0,r.warn)(`_bindResetFormAction - element not allowed: ${Y}`);continue}}else continue;X.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:re,name:"ResetForm"}}),!1}}}class v extends g{constructor(m){super(m,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let m=document.createElement("img");return m.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",m.alt="[{{type}} Annotation]",m.dataset.l10nId="text_annotation_type",m.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(m),this.container}}class y extends g{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(m){this.data.hasOwnCanvas&&(m.previousSibling?.nodeName==="CANVAS"&&(m.previousSibling.hidden=!0),m.hidden=!1)}_getKeyModifier(m){let{isWin:D,isMac:I}=r.FeatureTest.platform;return D&&m.ctrlKey||I&&m.metaKey}_setEventListener(m,D,I,R,P){I.includes("mouse")?m.addEventListener(I,B=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:R,value:P(B),shift:B.shiftKey,modifier:this._getKeyModifier(B)}})}):m.addEventListener(I,B=>{if(I==="blur"){if(!D.focused||!B.relatedTarget)return;D.focused=!1}else if(I==="focus"){if(D.focused)return;D.focused=!0}P&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:R,value:P(B)}})})}_setEventListeners(m,D,I,R){for(let[P,B]of I)(B==="Action"||this.data.actions?.[B])&&((B==="Focus"||B==="Blur")&&(D||={focused:!1}),this._setEventListener(m,D,P,B,R),B==="Focus"&&!this.data.actions?.Blur?this._setEventListener(m,D,"blur","Blur",null):B==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(m,D,"focus","Focus",null))}_setBackgroundColor(m){let D=this.data.backgroundColor||null;m.style.backgroundColor=D===null?"transparent":r.Util.makeHexColor(D[0],D[1],D[2])}_setTextStyle(m){let D=["left","center","right"],{fontColor:I}=this.data.defaultAppearanceData,R=this.data.defaultAppearanceData.fontSize||a,P=m.style,B,V=2,G=re=>Math.round(10*re)/10;if(this.data.multiLine){let re=Math.abs(this.data.rect[3]-this.data.rect[1]-V),q=Math.round(re/(r.LINE_FACTOR*R))||1,Y=re/q;B=Math.min(R,G(Y/r.LINE_FACTOR))}else{let re=Math.abs(this.data.rect[3]-this.data.rect[1]-V);B=Math.min(R,G(re/r.LINE_FACTOR))}P.fontSize=`calc(${B}px * var(--scale-factor))`,P.color=r.Util.makeHexColor(I[0],I[1],I[2]),this.data.textAlignment!==null&&(P.textAlign=D[this.data.textAlignment])}_setRequired(m,D){D?m.setAttribute("required",!0):m.removeAttribute("required"),m.setAttribute("aria-required",D)}}class E extends y{constructor(m){let D=m.renderForms||!m.data.hasAppearance&&!!m.data.fieldValue;super(m,{isRenderable:D})}setPropertyOnSiblings(m,D,I,R){let P=this.annotationStorage;for(let B of this._getElementsByName(m.name,m.id))B.domElement&&(B.domElement[D]=I),P.setValue(B.id,{[R]:I})}render(){let m=this.annotationStorage,D=this.data.id;this.container.classList.add("textWidgetAnnotation");let I=null;if(this.renderForms){let R=m.getValue(D,{value:this.data.fieldValue}),P=R.value||"",B=m.getValue(D,{charLimit:this.data.maxLen}).charLimit;B&&P.length>B&&(P=P.slice(0,B));let V=R.formattedValue||this.data.textContent?.join(`
`)||null;V&&this.data.comb&&(V=V.replaceAll(/\s+/g,""));let G={userValue:P,formattedValue:V,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(I=document.createElement("textarea"),I.textContent=V??P,this.data.doNotScroll&&(I.style.overflowY="hidden")):(I=document.createElement("input"),I.type="text",I.setAttribute("value",V??P),this.data.doNotScroll&&(I.style.overflowX="hidden")),this.data.hasOwnCanvas&&(I.hidden=!0),l.add(I),I.setAttribute("data-element-id",D),I.disabled=this.data.readOnly,I.name=this.data.fieldName,I.tabIndex=u,this._setRequired(I,this.data.required),B&&(I.maxLength=B),I.addEventListener("input",q=>{m.setValue(D,{value:q.target.value}),this.setPropertyOnSiblings(I,"value",q.target.value,"value"),G.formattedValue=null}),I.addEventListener("resetform",q=>{let Y=this.data.defaultFieldValue??"";I.value=G.userValue=Y,G.formattedValue=null});let re=q=>{let{formattedValue:Y}=G;Y!=null&&(q.target.value=Y),q.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){I.addEventListener("focus",Y=>{if(G.focused)return;let{target:X}=Y;G.userValue&&(X.value=G.userValue),G.lastCommittedValue=X.value,G.commitKey=1,G.focused=!0}),I.addEventListener("updatefromsandbox",Y=>{this.showElementAndHideCanvas(Y.target);let X={value(K){G.userValue=K.detail.value??"",m.setValue(D,{value:G.userValue.toString()}),K.target.value=G.userValue},formattedValue(K){let{formattedValue:ee}=K.detail;G.formattedValue=ee,ee!=null&&K.target!==document.activeElement&&(K.target.value=ee),m.setValue(D,{formattedValue:ee})},selRange(K){K.target.setSelectionRange(...K.detail.selRange)},charLimit:K=>{let{charLimit:ee}=K.detail,{target:se}=K;if(ee===0){se.removeAttribute("maxLength");return}se.setAttribute("maxLength",ee);let le=G.userValue;!le||le.length<=ee||(le=le.slice(0,ee),se.value=G.userValue=le,m.setValue(D,{value:le}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D,name:"Keystroke",value:le,willCommit:!0,commitKey:1,selStart:se.selectionStart,selEnd:se.selectionEnd}}))}};this._dispatchEventFromSandbox(X,Y)}),I.addEventListener("keydown",Y=>{G.commitKey=1;let X=-1;if(Y.key==="Escape"?X=0:Y.key==="Enter"&&!this.data.multiLine?X=2:Y.key==="Tab"&&(G.commitKey=3),X===-1)return;let{value:K}=Y.target;G.lastCommittedValue!==K&&(G.lastCommittedValue=K,G.userValue=K,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D,name:"Keystroke",value:K,willCommit:!0,commitKey:X,selStart:Y.target.selectionStart,selEnd:Y.target.selectionEnd}}))});let q=re;re=null,I.addEventListener("blur",Y=>{if(!G.focused||!Y.relatedTarget)return;G.focused=!1;let{value:X}=Y.target;G.userValue=X,G.lastCommittedValue!==X&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D,name:"Keystroke",value:X,willCommit:!0,commitKey:G.commitKey,selStart:Y.target.selectionStart,selEnd:Y.target.selectionEnd}}),q(Y)}),this.data.actions?.Keystroke&&I.addEventListener("beforeinput",Y=>{G.lastCommittedValue=null;let{data:X,target:K}=Y,{value:ee,selectionStart:se,selectionEnd:le}=K,ue=se,fe=le;switch(Y.inputType){case"deleteWordBackward":{let De=ee.substring(0,se).match(/\w*[^\w]*$/);De&&(ue-=De[0].length);break}case"deleteWordForward":{let De=ee.substring(se).match(/^[^\w]*\w*/);De&&(fe+=De[0].length);break}case"deleteContentBackward":se===le&&(ue-=1);break;case"deleteContentForward":se===le&&(fe+=1);break}Y.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D,name:"Keystroke",value:ee,change:X||"",willCommit:!1,selStart:ue,selEnd:fe}})}),this._setEventListeners(I,G,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Y=>Y.target.value)}if(re&&I.addEventListener("blur",re),this.data.comb){let Y=(this.data.rect[2]-this.data.rect[0])/B;I.classList.add("comb"),I.style.letterSpacing=`calc(${Y}px * var(--scale-factor) - 1ch)`}}else I=document.createElement("div"),I.textContent=this.data.fieldValue,I.style.verticalAlign="middle",I.style.display="table-cell";return this._setTextStyle(I),this._setBackgroundColor(I),this._setDefaultPropertiesFromJS(I),this.container.append(I),this.container}}class T extends y{constructor(m){super(m,{isRenderable:!!m.data.hasOwnCanvas})}}class M extends y{constructor(m){super(m,{isRenderable:m.renderForms})}render(){let m=this.annotationStorage,D=this.data,I=D.id,R=m.getValue(I,{value:D.exportValue===D.fieldValue}).value;typeof R=="string"&&(R=R!=="Off",m.setValue(I,{value:R})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let P=document.createElement("input");return l.add(P),P.setAttribute("data-element-id",I),P.disabled=D.readOnly,this._setRequired(P,this.data.required),P.type="checkbox",P.name=D.fieldName,R&&P.setAttribute("checked",!0),P.setAttribute("exportValue",D.exportValue),P.tabIndex=u,P.addEventListener("change",B=>{let{name:V,checked:G}=B.target;for(let re of this._getElementsByName(V,I)){let q=G&&re.exportValue===D.exportValue;re.domElement&&(re.domElement.checked=q),m.setValue(re.id,{value:q})}m.setValue(I,{value:G})}),P.addEventListener("resetform",B=>{let V=D.defaultFieldValue||"Off";B.target.checked=V===D.exportValue}),this.enableScripting&&this.hasJSActions&&(P.addEventListener("updatefromsandbox",B=>{let V={value(G){G.target.checked=G.detail.value!=="Off",m.setValue(I,{value:G.target.checked})}};this._dispatchEventFromSandbox(V,B)}),this._setEventListeners(P,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],B=>B.target.checked)),this._setBackgroundColor(P),this._setDefaultPropertiesFromJS(P),this.container.append(P),this.container}}class w extends y{constructor(m){super(m,{isRenderable:m.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let m=this.annotationStorage,D=this.data,I=D.id,R=m.getValue(I,{value:D.fieldValue===D.buttonValue}).value;typeof R=="string"&&(R=R!==D.buttonValue,m.setValue(I,{value:R}));let P=document.createElement("input");if(l.add(P),P.setAttribute("data-element-id",I),P.disabled=D.readOnly,this._setRequired(P,this.data.required),P.type="radio",P.name=D.fieldName,R&&P.setAttribute("checked",!0),P.tabIndex=u,P.addEventListener("change",B=>{let{name:V,checked:G}=B.target;for(let re of this._getElementsByName(V,I))m.setValue(re.id,{value:!1});m.setValue(I,{value:G})}),P.addEventListener("resetform",B=>{let V=D.defaultFieldValue;B.target.checked=V!=null&&V===D.buttonValue}),this.enableScripting&&this.hasJSActions){let B=D.buttonValue;P.addEventListener("updatefromsandbox",V=>{let G={value:re=>{let q=B===re.detail.value;for(let Y of this._getElementsByName(re.target.name)){let X=q&&Y.id===I;Y.domElement&&(Y.domElement.checked=X),m.setValue(Y.id,{value:X})}}};this._dispatchEventFromSandbox(G,V)}),this._setEventListeners(P,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],V=>V.target.checked)}return this._setBackgroundColor(P),this._setDefaultPropertiesFromJS(P),this.container.append(P),this.container}}class C extends f{constructor(m){super(m,{ignoreBorder:m.data.hasAppearance})}render(){let m=super.render();m.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(m.title=this.data.alternativeText);let D=m.lastChild;return this.enableScripting&&this.hasJSActions&&D&&(this._setDefaultPropertiesFromJS(D),D.addEventListener("updatefromsandbox",I=>{this._dispatchEventFromSandbox({},I)})),m}}class L extends y{constructor(m){super(m,{isRenderable:m.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let m=this.annotationStorage,D=this.data.id,I=m.getValue(D,{value:this.data.fieldValue}),R=document.createElement("select");l.add(R),R.setAttribute("data-element-id",D),R.disabled=this.data.readOnly,this._setRequired(R,this.data.required),R.name=this.data.fieldName,R.tabIndex=u;let P=this.data.combo&&this.data.options.length>0;this.data.combo||(R.size=this.data.options.length,this.data.multiSelect&&(R.multiple=!0)),R.addEventListener("resetform",q=>{let Y=this.data.defaultFieldValue;for(let X of R.options)X.selected=X.value===Y});for(let q of this.data.options){let Y=document.createElement("option");Y.textContent=q.displayValue,Y.value=q.exportValue,I.value.includes(q.exportValue)&&(Y.setAttribute("selected",!0),P=!1),R.append(Y)}let B=null;if(P){let q=document.createElement("option");q.value=" ",q.setAttribute("hidden",!0),q.setAttribute("selected",!0),R.prepend(q),B=()=>{q.remove(),R.removeEventListener("input",B),B=null},R.addEventListener("input",B)}let V=q=>{let Y=q?"value":"textContent",{options:X,multiple:K}=R;return K?Array.prototype.filter.call(X,ee=>ee.selected).map(ee=>ee[Y]):X.selectedIndex===-1?null:X[X.selectedIndex][Y]},G=V(!1),re=q=>{let Y=q.target.options;return Array.prototype.map.call(Y,X=>({displayValue:X.textContent,exportValue:X.value}))};return this.enableScripting&&this.hasJSActions?(R.addEventListener("updatefromsandbox",q=>{let Y={value(X){B?.();let K=X.detail.value,ee=new Set(Array.isArray(K)?K:[K]);for(let se of R.options)se.selected=ee.has(se.value);m.setValue(D,{value:V(!0)}),G=V(!1)},multipleSelection(X){R.multiple=!0},remove(X){let K=R.options,ee=X.detail.remove;K[ee].selected=!1,R.remove(ee),K.length>0&&Array.prototype.findIndex.call(K,le=>le.selected)===-1&&(K[0].selected=!0),m.setValue(D,{value:V(!0),items:re(X)}),G=V(!1)},clear(X){for(;R.length!==0;)R.remove(0);m.setValue(D,{value:null,items:[]}),G=V(!1)},insert(X){let{index:K,displayValue:ee,exportValue:se}=X.detail.insert,le=R.children[K],ue=document.createElement("option");ue.textContent=ee,ue.value=se,le?le.before(ue):R.append(ue),m.setValue(D,{value:V(!0),items:re(X)}),G=V(!1)},items(X){let{items:K}=X.detail;for(;R.length!==0;)R.remove(0);for(let ee of K){let{displayValue:se,exportValue:le}=ee,ue=document.createElement("option");ue.textContent=se,ue.value=le,R.append(ue)}R.options.length>0&&(R.options[0].selected=!0),m.setValue(D,{value:V(!0),items:re(X)}),G=V(!1)},indices(X){let K=new Set(X.detail.indices);for(let ee of X.target.options)ee.selected=K.has(ee.index);m.setValue(D,{value:V(!0)}),G=V(!1)},editable(X){X.target.disabled=!X.detail.editable}};this._dispatchEventFromSandbox(Y,q)}),R.addEventListener("input",q=>{let Y=V(!0);m.setValue(D,{value:Y}),q.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D,name:"Keystroke",value:G,changeEx:Y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(R,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],q=>q.target.value)):R.addEventListener("input",function(q){m.setValue(D,{value:V(!0)})}),this.data.combo&&this._setTextStyle(R),this._setBackgroundColor(R),this._setDefaultPropertiesFromJS(R),this.container.append(R),this.container}}class U extends g{constructor(m){let{data:D,elements:I}=m;super(m,{isRenderable:g._hasPopupData(D)}),this.elements=I}render(){this.container.classList.add("popupAnnotation");let m=new F({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),D=[];for(let I of this.elements)I.popup=m,D.push(I.data.id),I.addHighlightArea();return this.container.setAttribute("aria-controls",D.map(I=>`${r.AnnotationPrefix}${I}`).join(",")),this.container}}class F{#e=null;#t=this.#u.bind(this);#n=this.#E.bind(this);#r=this.#D.bind(this);#a=this.#y.bind(this);#o=null;#s=null;#c=null;#l=null;#i=null;#f=null;#d=!1;#h=null;#p=null;#v=null;#m=null;#g=!1;constructor({container:m,color:D,elements:I,titleObj:R,modificationDate:P,contentsObj:B,richText:V,parent:G,rect:re,parentRect:q,open:Y}){this.#s=m,this.#m=R,this.#c=B,this.#v=V,this.#i=G,this.#o=D,this.#p=re,this.#f=q,this.#l=I;let X=i.PDFDateString.toDateObject(P);X&&(this.#e=G.l10n.get("annotation_date_string",{date:X.toLocaleDateString(),time:X.toLocaleTimeString()})),this.trigger=I.flatMap(K=>K.getElementsToTriggerPopup());for(let K of this.trigger)K.addEventListener("click",this.#a),K.addEventListener("mouseenter",this.#r),K.addEventListener("mouseleave",this.#n),K.classList.add("popupTriggerArea");for(let K of I)K.container?.addEventListener("keydown",this.#t);this.#s.hidden=!0,Y&&this.#y()}render(){if(this.#h)return;let{page:{view:m},viewport:{rawDims:{pageWidth:D,pageHeight:I,pageX:R,pageY:P}}}=this.#i,B=this.#h=document.createElement("div");if(B.className="popup",this.#o){let De=B.style.outlineColor=r.Util.makeHexColor(...this.#o);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?B.style.backgroundColor=`color-mix(in srgb, ${De} 30%, white)`:B.style.backgroundColor=r.Util.makeHexColor(...this.#o.map(st=>Math.floor(.7*(255-st)+st)))}let V=document.createElement("span");V.className="header";let G=document.createElement("h1");if(V.append(G),{dir:G.dir,str:G.textContent}=this.#m,B.append(V),this.#e){let De=document.createElement("span");De.classList.add("popupDate"),this.#e.then(Pe=>{De.textContent=Pe}),V.append(De)}let re=this.#c,q=this.#v;if(q?.str&&(!re?.str||re.str===q.str))d.XfaLayer.render({xfaHtml:q.html,intent:"richText",div:B}),B.lastChild.classList.add("richText","popupContent");else{let De=this._formatContents(re);B.append(De)}let Y=!!this.#f,X=Y?this.#f:this.#p;for(let De of this.#l)if(!X||r.Util.intersect(De.data.rect,X)!==null){X=De.data.rect,Y=!0;break}let K=r.Util.normalizeRect([X[0],m[3]-X[1]+m[1],X[2],m[3]-X[3]+m[1]]),se=Y?X[2]-X[0]+5:0,le=K[0]+se,ue=K[1],{style:fe}=this.#s;fe.left=`${100*(le-R)/D}%`,fe.top=`${100*(ue-P)/I}%`,this.#s.append(B)}_formatContents({str:m,dir:D}){let I=document.createElement("p");I.classList.add("popupContent"),I.dir=D;let R=m.split(/(?:\r\n?|\n)/);for(let P=0,B=R.length;P<B;++P){let V=R[P];I.append(document.createTextNode(V)),P<B-1&&I.append(document.createElement("br"))}return I}#u(m){m.altKey||m.shiftKey||m.ctrlKey||m.metaKey||(m.key==="Enter"||m.key==="Escape"&&this.#d)&&this.#y()}#y(){this.#d=!this.#d,this.#d?(this.#D(),this.#s.addEventListener("click",this.#a),this.#s.addEventListener("keydown",this.#t)):(this.#E(),this.#s.removeEventListener("click",this.#a),this.#s.removeEventListener("keydown",this.#t))}#D(){this.#h||this.render(),this.isVisible?this.#d&&this.#s.classList.add("focused"):(this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#E(){this.#s.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#g=this.isVisible,this.#g&&(this.#s.hidden=!0)}maybeShow(){this.#g&&(this.#g=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class $ extends g{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0}),this.textContent=m.data.textContent,this.textPosition=m.data.textPosition,this.annotationEditorType=r.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let m=document.createElement("div");m.classList.add("annotationTextContent"),m.setAttribute("role","comment");for(let D of this.textContent){let I=document.createElement("span");I.textContent=D,m.append(I)}this.container.append(m)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=$;class W extends g{#e=null;constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let m=this.data,{width:D,height:I}=h(m.rect),R=this.svgFactory.create(D,I,!0),P=this.#e=this.svgFactory.createElement("svg:line");return P.setAttribute("x1",m.rect[2]-m.lineCoordinates[0]),P.setAttribute("y1",m.rect[3]-m.lineCoordinates[1]),P.setAttribute("x2",m.rect[2]-m.lineCoordinates[2]),P.setAttribute("y2",m.rect[3]-m.lineCoordinates[3]),P.setAttribute("stroke-width",m.borderStyle.width||1),P.setAttribute("stroke","transparent"),P.setAttribute("fill","transparent"),R.append(P),this.container.append(R),!m.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class ne extends g{#e=null;constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let m=this.data,{width:D,height:I}=h(m.rect),R=this.svgFactory.create(D,I,!0),P=m.borderStyle.width,B=this.#e=this.svgFactory.createElement("svg:rect");return B.setAttribute("x",P/2),B.setAttribute("y",P/2),B.setAttribute("width",D-P),B.setAttribute("height",I-P),B.setAttribute("stroke-width",P||1),B.setAttribute("stroke","transparent"),B.setAttribute("fill","transparent"),R.append(B),this.container.append(R),!m.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class J extends g{#e=null;constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let m=this.data,{width:D,height:I}=h(m.rect),R=this.svgFactory.create(D,I,!0),P=m.borderStyle.width,B=this.#e=this.svgFactory.createElement("svg:ellipse");return B.setAttribute("cx",D/2),B.setAttribute("cy",I/2),B.setAttribute("rx",D/2-P/2),B.setAttribute("ry",I/2-P/2),B.setAttribute("stroke-width",P||1),B.setAttribute("stroke","transparent"),B.setAttribute("fill","transparent"),R.append(B),this.container.append(R),!m.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Q extends g{#e=null;constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let m=this.data,{width:D,height:I}=h(m.rect),R=this.svgFactory.create(D,I,!0),P=[];for(let V of m.vertices){let G=V.x-m.rect[0],re=m.rect[3]-V.y;P.push(G+","+re)}P=P.join(" ");let B=this.#e=this.svgFactory.createElement(this.svgElementName);return B.setAttribute("points",P),B.setAttribute("stroke-width",m.borderStyle.width||1),B.setAttribute("stroke","transparent"),B.setAttribute("fill","transparent"),R.append(B),this.container.append(R),!m.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class ie extends Q{constructor(m){super(m),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Z extends g{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class O extends g{#e=[];constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=r.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);let m=this.data,{width:D,height:I}=h(m.rect),R=this.svgFactory.create(D,I,!0);for(let P of m.inkLists){let B=[];for(let G of P){let re=G.x-m.rect[0],q=m.rect[3]-G.y;B.push(`${re},${q}`)}B=B.join(" ");let V=this.svgFactory.createElement(this.svgElementName);this.#e.push(V),V.setAttribute("points",B),V.setAttribute("stroke-width",m.borderStyle.width||1),V.setAttribute("stroke","transparent"),V.setAttribute("fill","transparent"),!m.popupRef&&this.hasPopupData&&this._createPopup(),R.append(V)}return this.container.append(R),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}t.InkAnnotationElement=O;class S extends g{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class b extends g{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class _ extends g{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class A extends g{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class N extends g{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=N;class k extends g{#e=null;constructor(m){super(m,{isRenderable:!0});let{filename:D,content:I}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(D,!0),this.content=I,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:D,content:I})}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:m,data:D}=this,I;D.hasAppearance||D.fillAlpha===0?I=document.createElement("div"):(I=document.createElement("img"),I.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(D.name)?"paperclip":"pushpin"}.svg`,D.fillAlpha&&D.fillAlpha<1&&(I.style=`filter: opacity(${Math.round(D.fillAlpha*100)}%);`)),I.addEventListener("dblclick",this.#t.bind(this)),this.#e=I;let{isMac:R}=r.FeatureTest.platform;return m.addEventListener("keydown",P=>{P.key==="Enter"&&(R?P.metaKey:P.ctrlKey)&&this.#t()}),!D.popupRef&&this.hasPopupData?this._createPopup():I.classList.add("popupTriggerArea"),m.append(I),m}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class j{#e=null;#t=null;#n=new Map;constructor({div:m,accessibilityManager:D,annotationCanvasMap:I,l10n:R,page:P,viewport:B}){this.div=m,this.#e=D,this.#t=I,this.l10n=R,this.page=P,this.viewport=B,this.zIndex=0,this.l10n||=c.NullL10n}#r(m,D){let I=m.firstChild||m;I.id=`${r.AnnotationPrefix}${D}`,this.div.append(m),this.#e?.moveElementInDOM(this.div,m,I,!1)}render(m){return ye(this,null,function*(){let{annotations:D}=m,I=this.div;(0,i.setLayerDimensions)(I,this.viewport);let R=new Map,P={data:null,layer:I,linkService:m.linkService,downloadManager:m.downloadManager,imageResourcesPath:m.imageResourcesPath||"",renderForms:m.renderForms!==!1,svgFactory:new i.DOMSVGFactory,annotationStorage:m.annotationStorage||new s.AnnotationStorage,enableScripting:m.enableScripting===!0,hasJSActions:m.hasJSActions,fieldObjects:m.fieldObjects,parent:this,elements:null};for(let B of D){if(B.noHTML)continue;let V=B.annotationType===r.AnnotationType.POPUP;if(V){let q=R.get(B.id);if(!q)continue;P.elements=q}else{let{width:q,height:Y}=h(B.rect);if(q<=0||Y<=0)continue}P.data=B;let G=p.create(P);if(!G.isRenderable)continue;if(!V&&B.popupRef){let q=R.get(B.popupRef);q?q.push(G):R.set(B.popupRef,[G])}G.annotationEditorType>0&&this.#n.set(G.data.id,G);let re=G.render();B.hidden&&(re.style.visibility="hidden"),this.#r(re,B.id)}this.#a(),yield this.l10n.translate(I)})}update({viewport:m}){let D=this.div;this.viewport=m,(0,i.setLayerDimensions)(D,{rotation:m.rotation}),this.#a(),D.hidden=!1}#a(){if(!this.#t)return;let m=this.div;for(let[D,I]of this.#t){let R=m.querySelector(`[data-annotation-id="${D}"]`);if(!R)continue;let{firstChild:P}=R;P?P.nodeName==="CANVAS"?P.replaceWith(I):P.before(I):R.append(I)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(m){return this.#n.get(m)}}t.AnnotationLayer=j},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function n(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function r(s){return Math.max(0,Math.min(255,255*s))}class i{static CMYK_G([o,c,d,u]){return["G",1-Math.min(1,.3*o+.59*d+.11*c+u)]}static G_CMYK([o]){return["CMYK",0,0,0,1-o]}static G_RGB([o]){return["RGB",o,o,o]}static G_rgb([o]){return o=r(o),[o,o,o]}static G_HTML([o]){let c=n(o);return`#${c}${c}${c}`}static RGB_G([o,c,d]){return["G",.3*o+.59*c+.11*d]}static RGB_rgb(o){return o.map(r)}static RGB_HTML(o){return`#${o.map(n).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([o,c,d,u]){return["RGB",1-Math.min(1,o+u),1-Math.min(1,d+u),1-Math.min(1,c+u)]}static CMYK_rgb([o,c,d,u]){return[r(1-Math.min(1,o+u)),r(1-Math.min(1,d+u)),r(1-Math.min(1,c+u))]}static CMYK_HTML(o){let c=this.CMYK_RGB(o).slice(1);return this.RGB_HTML(c)}static RGB_CMYK([o,c,d]){let u=1-o,a=1-c,l=1-d,h=Math.min(u,a,l);return["CMYK",u,a,l,h]}}t.ColorConverters=i},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=r;let n={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xD7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xD7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing\u2026",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};n.print_progress_percent="{{progress}}%";function r(c,d){switch(c){case"find_match_count":c=`find_match_count[${d.total===1?"one":"other"}]`;break;case"find_match_count_limit":c=`find_match_count_limit[${d.limit===1?"one":"other"}]`;break}return n[c]||""}function i(c,d){return d?c.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(u,a)=>a in d?d[a]:"{{"+a+"}}"):c}let s={getLanguage(){return ye(this,null,function*(){return"en-us"})},getDirection(){return ye(this,null,function*(){return"ltr"})},get(a){return ye(this,arguments,function*(c,d=null,u=r(c,d)){return i(u,d)})},translate(c){return ye(this,null,function*(){})}};t.NullL10n=s},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var r=n(25);class i{static setupStorage(o,c,d,u,a){let l=u.getValue(c,{value:null});switch(d.name){case"textarea":if(l.value!==null&&(o.textContent=l.value),a==="print")break;o.addEventListener("input",h=>{u.setValue(c,{value:h.target.value})});break;case"input":if(d.attributes.type==="radio"||d.attributes.type==="checkbox"){if(l.value===d.attributes.xfaOn?o.setAttribute("checked",!0):l.value===d.attributes.xfaOff&&o.removeAttribute("checked"),a==="print")break;o.addEventListener("change",h=>{u.setValue(c,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&o.setAttribute("value",l.value),a==="print")break;o.addEventListener("input",h=>{u.setValue(c,{value:h.target.value})})}break;case"select":if(l.value!==null){o.setAttribute("value",l.value);for(let h of d.children)h.attributes.value===l.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}o.addEventListener("input",h=>{let p=h.target.options,g=p.selectedIndex===-1?"":p[p.selectedIndex].value;u.setValue(c,{value:g})});break}}static setAttributes({html:o,element:c,storage:d=null,intent:u,linkService:a}){let{attributes:l}=c,h=o instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${u}`);for(let[p,g]of Object.entries(l))if(g!=null)switch(p){case"class":g.length&&o.setAttribute(p,g.join(" "));break;case"dataId":break;case"id":o.setAttribute("data-element-id",g);break;case"style":Object.assign(o.style,g);break;case"textContent":o.textContent=g;break;default:(!h||p!=="href"&&p!=="newWindow")&&o.setAttribute(p,g)}h&&a.addLinkAttributes(o,l.href,l.newWindow),d&&l.dataId&&this.setupStorage(o,l.dataId,c,d)}static render(o){let c=o.annotationStorage,d=o.linkService,u=o.xfaHtml,a=o.intent||"display",l=document.createElement(u.name);u.attributes&&this.setAttributes({html:l,element:u,intent:a,linkService:d});let h=[[u,-1,l]],p=o.div;if(p.append(l),o.viewport){let f=`matrix(${o.viewport.transform.join(",")})`;p.style.transform=f}a!=="richText"&&p.setAttribute("class","xfaLayer xfaFont");let g=[];for(;h.length>0;){let[f,v,y]=h.at(-1);if(v+1===f.children.length){h.pop();continue}let E=f.children[++h.at(-1)[1]];if(E===null)continue;let{name:T}=E;if(T==="#text"){let w=document.createTextNode(E.value);g.push(w),y.append(w);continue}let M=E?.attributes?.xmlns?document.createElementNS(E.attributes.xmlns,T):document.createElement(T);if(y.append(M),E.attributes&&this.setAttributes({html:M,element:E,storage:c,intent:a,linkService:d}),E.children&&E.children.length>0)h.push([E,-1,M]);else if(E.value){let w=document.createTextNode(E.value);r.XfaText.shouldBuildText(T)&&g.push(w),M.append(w)}}for(let f of p.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:g}}static update(o){let c=`matrix(${o.viewport.transform.join(",")})`;o.div.style.transform=c,o.div.hidden=!1}}t.XfaLayer=i},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var r=n(1),i=n(4),s=n(29),o=n(6),c=n(5);let d=(()=>{class u extends i.AnnotationEditor{#e=0;#t=0;#n=this.canvasPointermove.bind(this);#r=this.canvasPointerleave.bind(this);#a=this.canvasPointerup.bind(this);#o=this.canvasPointerdown.bind(this);#s=new Path2D;#c=!1;#l=!1;#i=!1;#f=null;#d=0;#h=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(l){super(ke(ce({},l),{name:"inkEditor"})),this.color=l.color||null,this.thickness=l.thickness||null,this.opacity=l.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(l){i.AnnotationEditor.initialize(l,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(l,h){switch(l){case r.AnnotationEditorParamsType.INK_THICKNESS:u._defaultThickness=h;break;case r.AnnotationEditorParamsType.INK_COLOR:u._defaultColor=h;break;case r.AnnotationEditorParamsType.INK_OPACITY:u._defaultOpacity=h/100;break}}updateParams(l,h){switch(l){case r.AnnotationEditorParamsType.INK_THICKNESS:this.#v(h);break;case r.AnnotationEditorParamsType.INK_COLOR:this.#m(h);break;case r.AnnotationEditorParamsType.INK_OPACITY:this.#g(h);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,u._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,u._defaultColor||i.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(u._defaultOpacity*100)]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||u._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,this.color||u._defaultColor||i.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??u._defaultOpacity))]]}#v(l){let h=this.thickness;this.addCommands({cmd:()=>{this.thickness=l,this.#S()},undo:()=>{this.thickness=h,this.#S()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(l){let h=this.color;this.addCommands({cmd:()=>{this.color=l,this.#b()},undo:()=>{this.color=h,this.#b()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(l){l/=100;let h=this.opacity;this.addCommands({cmd:()=>{this.opacity=l,this.#b()},undo:()=>{this.opacity=h,this.#b()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#T(),this.#x()),this.isAttachedToDOM||(this.parent.add(this),this.#_()),this.#S()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(l){!this.parent&&l?this._uiManager.removeShouldRescale(this):this.parent&&l===null&&this._uiManager.addShouldRescale(this),super.setParent(l)}onScaleChanging(){let[l,h]=this.parentDimensions,p=this.width*l,g=this.height*h;this.setDimensions(p,g)}enableEditMode(){this.#c||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#o))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#o))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#u(){let{parentRotation:l,parentDimensions:[h,p]}=this;switch(l){case 90:return[0,p,p,h];case 180:return[h,p,h,p];case 270:return[h,0,p,h];default:return[0,0,h,p]}}#y(){let{ctx:l,color:h,opacity:p,thickness:g,parentScale:f,scaleFactor:v}=this;l.lineWidth=g*f/v,l.lineCap="round",l.lineJoin="round",l.miterLimit=10,l.strokeStyle=`${h}${(0,c.opacityToHex)(p)}`}#D(l,h){this.canvas.addEventListener("contextmenu",o.noContextMenu),this.canvas.addEventListener("pointerleave",this.#r),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#a),this.canvas.removeEventListener("pointerdown",this.#o),this.isEditing=!0,this.#i||(this.#i=!0,this.#_(),this.thickness||=u._defaultThickness,this.color||=u._defaultColor||i.AnnotationEditor._defaultLineColor,this.opacity??=u._defaultOpacity),this.currentPath.push([l,h]),this.#l=!1,this.#y(),this.#p=()=>{this.#k(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#E(l,h){let[p,g]=this.currentPath.at(-1);if(this.currentPath.length>1&&l===p&&h===g)return;let f=this.currentPath,v=this.#s;if(f.push([l,h]),this.#l=!0,f.length<=2){v.moveTo(...f[0]),v.lineTo(l,h);return}f.length===3&&(this.#s=v=new Path2D,v.moveTo(...f[0])),this.#O(v,...f.at(-3),...f.at(-2),l,h)}#A(){if(this.currentPath.length===0)return;let l=this.currentPath.at(-1);this.#s.lineTo(...l)}#M(l,h){this.#p=null,l=Math.min(Math.max(l,0),this.canvas.width),h=Math.min(Math.max(h,0),this.canvas.height),this.#E(l,h),this.#A();let p;if(this.currentPath.length!==1)p=this.#F();else{let E=[l,h];p=[[E,E.slice(),E.slice(),E]]}let g=this.#s,f=this.currentPath;this.currentPath=[],this.#s=new Path2D;let v=()=>{this.allRawPaths.push(f),this.paths.push(p),this.bezierPath2D.push(g),this.rebuild()},y=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#T(),this.#x()),this.#S())};this.addCommands({cmd:v,undo:y,mustExec:!0})}#k(){if(!this.#l)return;this.#l=!1;let l=Math.ceil(this.thickness*this.parentScale),h=this.currentPath.slice(-3),p=h.map(M=>M[0]),g=h.map(M=>M[1]),f=Math.min(...p)-l,v=Math.max(...p)+l,y=Math.min(...g)-l,E=Math.max(...g)+l,{ctx:T}=this;T.save(),T.clearRect(0,0,this.canvas.width,this.canvas.height);for(let M of this.bezierPath2D)T.stroke(M);T.stroke(this.#s),T.restore()}#O(l,h,p,g,f,v,y){let E=(h+g)/2,T=(p+f)/2,M=(g+v)/2,w=(f+y)/2;l.bezierCurveTo(E+2*(g-E)/3,T+2*(f-T)/3,M+2*(g-M)/3,w+2*(f-w)/3,M,w)}#F(){let l=this.currentPath;if(l.length<=2)return[[l[0],l[0],l.at(-1),l.at(-1)]];let h=[],p,[g,f]=l[0];for(p=1;p<l.length-2;p++){let[C,L]=l[p],[U,F]=l[p+1],$=(C+U)/2,W=(L+F)/2,ne=[g+2*(C-g)/3,f+2*(L-f)/3],J=[$+2*(C-$)/3,W+2*(L-W)/3];h.push([[g,f],ne,J,[$,W]]),[g,f]=[$,W]}let[v,y]=l[p],[E,T]=l[p+1],M=[g+2*(v-g)/3,f+2*(y-f)/3],w=[E+2*(v-E)/3,T+2*(y-T)/3];return h.push([[g,f],M,w,[E,T]]),h}#b(){if(this.isEmpty()){this.#C();return}this.#y();let{canvas:l,ctx:h}=this;h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,l.width,l.height),this.#C();for(let p of this.bezierPath2D)h.stroke(p)}commit(){this.#c||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#c=!0,this.div.classList.add("disabled"),this.#S(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(l){this._focusEventsAllowed&&(super.focusin(l),this.enableEditMode())}canvasPointerdown(l){l.button!==0||!this.isInEditMode()||this.#c||(this.setInForeground(),l.preventDefault(),l.type!=="mouse"&&this.div.focus(),this.#D(l.offsetX,l.offsetY))}canvasPointermove(l){l.preventDefault(),this.#E(l.offsetX,l.offsetY)}canvasPointerup(l){l.preventDefault(),this.#N(l)}canvasPointerleave(l){this.#N(l)}#N(l){this.canvas.removeEventListener("pointerleave",this.#r),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#a),this.canvas.addEventListener("pointerdown",this.#o),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",o.noContextMenu)},10),this.#M(l.offsetX,l.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#T(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",i.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(l=>this.canvas?.setAttribute("aria-label",l)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#x(){this.#f=new ResizeObserver(l=>{let h=l[0].contentRect;h.width&&h.height&&this.setDimensions(h.width,h.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#c}render(){if(this.div)return this.div;let l,h;this.width&&(l=this.x,h=this.y),super.render(),i.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(y=>this.div?.setAttribute("aria-label",y));let[p,g,f,v]=this.#u();if(this.setAt(p,g,0,0),this.setDims(f,v),this.#T(),this.width){let[y,E]=this.parentDimensions;this.setAspectRatio(this.width*y,this.height*E),this.setAt(l*y,h*E,this.width*y,this.height*E),this.#i=!0,this.#_(),this.setDims(this.width*y,this.height*E),this.#b(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#x(),this.div}#_(){if(!this.#i)return;let[l,h]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*l),this.canvas.height=Math.ceil(this.height*h),this.#C()}setDimensions(l,h){let p=Math.round(l),g=Math.round(h);if(this.#d===p&&this.#h===g)return;this.#d=p,this.#h=g,this.canvas.style.visibility="hidden";let[f,v]=this.parentDimensions;this.width=l/f,this.height=h/v,this.fixAndSetPosition(),this.#c&&this.#I(l,h),this.#_(),this.#b(),this.canvas.style.visibility="visible",this.fixDims()}#I(l,h){let p=this.#P(),g=(l-p)/this.#t,f=(h-p)/this.#e;this.scaleFactor=Math.min(g,f)}#C(){let l=this.#P()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+l,this.translationY*this.scaleFactor+l)}static#L(l){let h=new Path2D;for(let p=0,g=l.length;p<g;p++){let[f,v,y,E]=l[p];p===0&&h.moveTo(...f),h.bezierCurveTo(v[0],v[1],y[0],y[1],E[0],E[1])}return h}static#j(l,h,p){let[g,f,v,y]=h;switch(p){case 0:for(let E=0,T=l.length;E<T;E+=2)l[E]+=g,l[E+1]=y-l[E+1];break;case 90:for(let E=0,T=l.length;E<T;E+=2){let M=l[E];l[E]=l[E+1]+g,l[E+1]=M+f}break;case 180:for(let E=0,T=l.length;E<T;E+=2)l[E]=v-l[E],l[E+1]+=f;break;case 270:for(let E=0,T=l.length;E<T;E+=2){let M=l[E];l[E]=v-l[E+1],l[E+1]=y-M}break;default:throw new Error("Invalid rotation")}return l}static#B(l,h,p){let[g,f,v,y]=h;switch(p){case 0:for(let E=0,T=l.length;E<T;E+=2)l[E]-=g,l[E+1]=y-l[E+1];break;case 90:for(let E=0,T=l.length;E<T;E+=2){let M=l[E];l[E]=l[E+1]-f,l[E+1]=M-g}break;case 180:for(let E=0,T=l.length;E<T;E+=2)l[E]=v-l[E],l[E+1]-=f;break;case 270:for(let E=0,T=l.length;E<T;E+=2){let M=l[E];l[E]=y-l[E+1],l[E+1]=v-M}break;default:throw new Error("Invalid rotation")}return l}#U(l,h,p,g){let f=[],v=this.thickness/2,y=l*h+v,E=l*p+v;for(let T of this.paths){let M=[],w=[];for(let C=0,L=T.length;C<L;C++){let[U,F,$,W]=T[C],ne=l*U[0]+y,J=l*U[1]+E,Q=l*F[0]+y,ie=l*F[1]+E,Z=l*$[0]+y,O=l*$[1]+E,S=l*W[0]+y,b=l*W[1]+E;C===0&&(M.push(ne,J),w.push(ne,J)),M.push(Q,ie,Z,O,S,b),w.push(Q,ie),C===L-1&&w.push(S,b)}f.push({bezier:u.#j(M,g,this.rotation),points:u.#j(w,g,this.rotation)})}return f}#R(){let l=1/0,h=-1/0,p=1/0,g=-1/0;for(let f of this.paths)for(let[v,y,E,T]of f){let M=r.Util.bezierBoundingBox(...v,...y,...E,...T);l=Math.min(l,M[0]),p=Math.min(p,M[1]),h=Math.max(h,M[2]),g=Math.max(g,M[3])}return[l,p,h,g]}#P(){return this.#c?Math.ceil(this.thickness*this.parentScale):0}#S(l=!1){if(this.isEmpty())return;if(!this.#c){this.#b();return}let h=this.#R(),p=this.#P();this.#t=Math.max(i.AnnotationEditor.MIN_SIZE,h[2]-h[0]),this.#e=Math.max(i.AnnotationEditor.MIN_SIZE,h[3]-h[1]);let g=Math.ceil(p+this.#t*this.scaleFactor),f=Math.ceil(p+this.#e*this.scaleFactor),[v,y]=this.parentDimensions;this.width=g/v,this.height=f/y,this.setAspectRatio(g,f);let E=this.translationX,T=this.translationY;this.translationX=-h[0],this.translationY=-h[1],this.#_(),this.#b(),this.#d=g,this.#h=f,this.setDims(g,f);let M=l?p/this.scaleFactor/2:0;this.translate(E-this.translationX-M,T-this.translationY-M)}static deserialize(l,h,p){if(l instanceof s.InkAnnotationElement)return null;let g=super.deserialize(l,h,p);g.thickness=l.thickness,g.color=r.Util.makeHexColor(...l.color),g.opacity=l.opacity;let[f,v]=g.pageDimensions,y=g.width*f,E=g.height*v,T=g.parentScale,M=l.thickness/2;g.#c=!0,g.#d=Math.round(y),g.#h=Math.round(E);let{paths:w,rect:C,rotation:L}=l;for(let{bezier:F}of w){F=u.#B(F,C,L);let $=[];g.paths.push($);let W=T*(F[0]-M),ne=T*(F[1]-M);for(let Q=2,ie=F.length;Q<ie;Q+=6){let Z=T*(F[Q]-M),O=T*(F[Q+1]-M),S=T*(F[Q+2]-M),b=T*(F[Q+3]-M),_=T*(F[Q+4]-M),A=T*(F[Q+5]-M);$.push([[W,ne],[Z,O],[S,b],[_,A]]),W=_,ne=A}let J=this.#L($);g.bezierPath2D.push(J)}let U=g.#R();return g.#t=Math.max(i.AnnotationEditor.MIN_SIZE,U[2]-U[0]),g.#e=Math.max(i.AnnotationEditor.MIN_SIZE,U[3]-U[1]),g.#I(y,E),g}serialize(){if(this.isEmpty())return null;let l=this.getRect(0,0),h=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:r.AnnotationEditorType.INK,color:h,thickness:this.thickness,opacity:this.opacity,paths:this.#U(this.scaleFactor/this.parentScale,this.translationX,this.translationY,l),pageIndex:this.pageIndex,rect:l,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}return u})();t.InkEditor=d},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var r=n(1),i=n(4),s=n(6),o=n(29);let c=(()=>{class d extends i.AnnotationEditor{#e=null;#t=null;#n=null;#r=null;#a=null;#o=null;#s=null;#c=null;#l=!1;#i=!1;static _type="stamp";constructor(a){super(ke(ce({},a),{name:"stampEditor"})),this.#r=a.bitmapUrl,this.#a=a.bitmapFile}static initialize(a){i.AnnotationEditor.initialize(a)}static get supportedTypes(){let a=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,r.shadow)(this,"supportedTypes",a.map(l=>`image/${l}`))}static get supportedTypesStr(){return(0,r.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(a){return this.supportedTypes.includes(a)}static paste(a,l){l.pasteEditor(r.AnnotationEditorType.STAMP,{bitmapFile:a.getAsFile()})}#f(a,l=!1){if(!a){this.remove();return}this.#e=a.bitmap,l||(this.#t=a.id,this.#l=a.isSvg),this.#p()}#d(){this.#n=null,this._uiManager.enableWaiting(!1),this.#o&&this.div.focus()}#h(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(l=>this.#f(l,!0)).finally(()=>this.#d());return}if(this.#r){let l=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(l).then(h=>this.#f(h)).finally(()=>this.#d());return}if(this.#a){let l=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(l).then(h=>this.#f(h)).finally(()=>this.#d());return}let a=document.createElement("input");a.type="file",a.accept=d.supportedTypesStr,this.#n=new Promise(l=>{a.addEventListener("change",()=>ye(this,null,function*(){if(!a.files||a.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let h=yield this._uiManager.imageManager.getFromFile(a.files[0]);this.#f(h)}l()})),a.addEventListener("cancel",()=>{this.remove(),l()})}).finally(()=>this.#d()),a.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#o?.remove(),this.#o=null,this.#s?.disconnect(),this.#s=null),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#h();return}super.rebuild(),this.div!==null&&(this.#t&&this.#h(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#r||this.#a)}get isResizable(){return!0}render(){if(this.div)return this.div;let a,l;if(this.width&&(a=this.x,l=this.y),super.render(),this.div.hidden=!0,this.#e?this.#p():this.#h(),this.width){let[h,p]=this.parentDimensions;this.setAt(a*h,l*p,this.width*h,this.height*p)}return this.div}#p(){let{div:a}=this,{width:l,height:h}=this.#e,[p,g]=this.pageDimensions,f=.75;if(this.width)l=this.width*p,h=this.height*g;else if(l>f*p||h>f*g){let T=Math.min(f*p/l,f*g/h);l*=T,h*=T}let[v,y]=this.parentDimensions;this.setDims(l*v/p,h*y/g),this._uiManager.enableWaiting(!1);let E=this.#o=document.createElement("canvas");a.append(E),a.hidden=!1,this.#g(l,h),this.#y(),this.#i||(this.parent.addUndoableEditor(this),this.#i=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#v(a,l){let[h,p]=this.parentDimensions;this.width=a/h,this.height=l/p,this.setDims(a,l),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#c!==null&&clearTimeout(this.#c);let g=200;this.#c=setTimeout(()=>{this.#c=null,this.#g(a,l)},g)}#m(a,l){let{width:h,height:p}=this.#e,g=h,f=p,v=this.#e;for(;g>2*a||f>2*l;){let y=g,E=f;g>2*a&&(g=g>=16384?Math.floor(g/2)-1:Math.ceil(g/2)),f>2*l&&(f=f>=16384?Math.floor(f/2)-1:Math.ceil(f/2));let T=new OffscreenCanvas(g,f);T.getContext("2d").drawImage(v,0,0,y,E,0,0,g,f),v=T.transferToImageBitmap()}return v}#g(a,l){a=Math.ceil(a),l=Math.ceil(l);let h=this.#o;if(!h||h.width===a&&h.height===l)return;h.width=a,h.height=l;let p=this.#l?this.#e:this.#m(a,l),g=h.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(p,0,0,p.width,p.height,0,0,a,l)}#u(a){if(a){if(this.#l){let p=this._uiManager.imageManager.getSvgUrl(this.#t);if(p)return p}let l=document.createElement("canvas");return{width:l.width,height:l.height}=this.#e,l.getContext("2d").drawImage(this.#e,0,0),l.toDataURL()}if(this.#l){let[l,h]=this.pageDimensions,p=Math.round(this.width*l*s.PixelsPerInch.PDF_TO_CSS_UNITS),g=Math.round(this.height*h*s.PixelsPerInch.PDF_TO_CSS_UNITS),f=new OffscreenCanvas(p,g);return f.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,p,g),f.transferToImageBitmap()}return structuredClone(this.#e)}#y(){this.#s=new ResizeObserver(a=>{let l=a[0].contentRect;l.width&&l.height&&this.#v(l.width,l.height)}),this.#s.observe(this.div)}static deserialize(a,l,h){if(a instanceof o.StampAnnotationElement)return null;let p=super.deserialize(a,l,h),{rect:g,bitmapUrl:f,bitmapId:v,isSvg:y,accessibilityData:E}=a;v&&h.imageManager.isValidId(v)?p.#t=v:p.#r=f,p.#l=y;let[T,M]=p.pageDimensions;return p.width=(g[2]-g[0])/T,p.height=(g[3]-g[1])/M,E&&(p.altTextData=E),p}serialize(a=!1,l=null){if(this.isEmpty())return null;let h={annotationType:r.AnnotationEditorType.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#l,structTreeParentId:this._structTreeParentId};if(a)return h.bitmapUrl=this.#u(!0),h.accessibilityData=this.altTextData,h;let{decorative:p,altText:g}=this.altTextData;if(!p&&g&&(h.accessibilityData={type:"Figure",alt:g}),l===null)return h;l.stamps||=new Map;let f=this.#l?(h.rect[2]-h.rect[0])*(h.rect[3]-h.rect[1]):null;if(!l.stamps.has(this.#t))l.stamps.set(this.#t,{area:f,serialized:h}),h.bitmap=this.#u(!1);else if(this.#l){let v=l.stamps.get(this.#t);f>v.area&&(v.area=f,v.serialized.bitmap.close(),v.serialized.bitmap=this.#u(!1))}return h}}return d})();t.StampEditor=c}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return s.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return o.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return c.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"DOMSVGFactory",{enumerable:!0,get:function(){return r.DOMSVGFactory}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return d.GlobalWorkerOptions}}),Object.defineProperty(e,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return n.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return u.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return r.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(e,"noContextMenu",{enumerable:!0,get:function(){return r.noContextMenu}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return i.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return r.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return i.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return n.version}});var t=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),r=__w_pdfjs_require__(6),i=__w_pdfjs_require__(26),s=__w_pdfjs_require__(27),o=__w_pdfjs_require__(5),c=__w_pdfjs_require__(29),d=__w_pdfjs_require__(14),u=__w_pdfjs_require__(32);let a="3.11.174",l="ce8716743"})(),__webpack_exports__})())});var Ao=null;var So=1,$l=Symbol("SIGNAL");function Me(e){let t=Ao;return Ao=e,t}function zl(){return Ao}var Io={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Gp(e){if(!(Po(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===So)){if(!e.producerMustRecompute(e)&&!To(e)){e.dirty=!1,e.lastCleanEpoch=So;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=So}}function Mo(e){return e&&(e.nextProducerIndex=0),Me(e)}function Wl(e,t){if(Me(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Po(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Ro(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function To(e){No(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Gp(n),r!==n.version))return!0}return!1}function xo(e){if(No(e),Po(e))for(let t=0;t<e.producerNode.length;t++)Ro(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Ro(e,t){if(qp(e),e.liveConsumerNode.length===1&&Yp(e))for(let r=0;r<e.producerNode.length;r++)Ro(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];No(i),i.producerIndexOfThis[r]=t}}function Po(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function No(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function qp(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Yp(e){return e.producerNode!==void 0}function Xp(){throw new Error}var Kp=Xp;function Gl(e){Kp=e}function ge(e){return typeof e=="function"}function $n(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Pi=$n(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Or(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Fe=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ge(r))try{r()}catch(s){t=s instanceof Pi?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{ql(s)}catch(o){t=t??[],o instanceof Pi?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Pi(t)}}add(t){var n;if(t&&t!==this)if(this.closed)ql(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Or(n,t)}remove(t){let{_finalizers:n}=this;n&&Or(n,t),t instanceof e&&t._removeParent(this)}};Fe.EMPTY=(()=>{let e=new Fe;return e.closed=!0,e})();var ko=Fe.EMPTY;function Ni(e){return e instanceof Fe||e&&"closed"in e&&ge(e.remove)&&ge(e.add)&&ge(e.unsubscribe)}function ql(e){ge(e)?e():e.unsubscribe()}var bt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var zn={setTimeout(e,t,...n){let{delegate:r}=zn;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=zn;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function ki(e){zn.setTimeout(()=>{let{onUnhandledError:t}=bt;if(t)t(e);else throw e})}function Fr(){}var Yl=Oo("C",void 0,void 0);function Xl(e){return Oo("E",void 0,e)}function Kl(e){return Oo("N",e,void 0)}function Oo(e,t,n){return{kind:e,value:t,error:n}}var gn=null;function Wn(e){if(bt.useDeprecatedSynchronousErrorHandling){let t=!gn;if(t&&(gn={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=gn;if(gn=null,n)throw r}}else e()}function Zl(e){bt.useDeprecatedSynchronousErrorHandling&&gn&&(gn.errorThrown=!0,gn.error=e)}var mn=class extends Fe{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Ni(t)&&t.add(this)):this.destination=Jp}static create(t,n,r){return new Gn(t,n,r)}next(t){this.isStopped?Lo(Kl(t),this):this._next(t)}error(t){this.isStopped?Lo(Xl(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Lo(Yl,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Zp=Function.prototype.bind;function Fo(e,t){return Zp.call(e,t)}var jo=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Oi(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Oi(r)}else Oi(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Oi(n)}}},Gn=class extends mn{constructor(t,n,r){super();let i;if(ge(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&bt.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Fo(t.next,s),error:t.error&&Fo(t.error,s),complete:t.complete&&Fo(t.complete,s)}):i=t}this.destination=new jo(i)}};function Oi(e){bt.useDeprecatedSynchronousErrorHandling?Zl(e):ki(e)}function Qp(e){throw e}function Lo(e,t){let{onStoppedNotification:n}=bt;n&&zn.setTimeout(()=>n(e,t))}var Jp={closed:!0,next:Fr,error:Qp,complete:Fr};var qn=typeof Symbol=="function"&&Symbol.observable||"@@observable";function at(e){return e}function Bo(...e){return Uo(e)}function Uo(e){return e.length===0?at:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var Re=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=tg(n)?n:new Gn(n,r,i);return Wn(()=>{let{operator:o,source:c}=this;s.add(o?o.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Ql(r),new r((i,s)=>{let o=new Gn({next:c=>{try{n(c)}catch(d){s(d),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[qn](){return this}pipe(...n){return Uo(n)(this)}toPromise(n){return n=Ql(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return e.create=t=>new e(t),e})();function Ql(e){var t;return(t=e??bt.Promise)!==null&&t!==void 0?t:Promise}function eg(e){return e&&ge(e.next)&&ge(e.error)&&ge(e.complete)}function tg(e){return e&&e instanceof mn||eg(e)&&Ni(e)}function Vo(e){return ge(e?.lift)}function Ae(e){return t=>{if(Vo(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ie(e,t,n,r,i){return new Ho(e,t,n,r,i)}var Ho=class extends mn{constructor(t,n,r,i,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(c){try{n(c)}catch(d){t.error(d)}}:super._next,this._error=i?function(c){try{i(c)}catch(d){t.error(d)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Yn(){return Ae((e,t)=>{let n=null;e._refCount++;let r=Ie(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var Xn=class extends Re{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Vo(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Fe;let n=this.getSubject();t.add(this.source.subscribe(Ie(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Fe.EMPTY)}return t}refCount(){return Yn()(this)}};var Jl=$n(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Je=(()=>{class e extends Re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Fi(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Jl}next(n){Wn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Wn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Wn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ko:(this.currentObservers=null,s.push(n),new Fe(()=>{this.currentObservers=null,Or(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new Re;return n.source=this,n}}return e.create=(t,n)=>new Fi(t,n),e})(),Fi=class extends Je{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:ko}};var We=class extends Je{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var ct=new Re(e=>e.complete());function eu(e){return e&&ge(e.schedule)}function tu(e){return e[e.length-1]}function nu(e){return ge(tu(e))?e.pop():void 0}function tn(e){return eu(tu(e))?e.pop():void 0}function iu(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function c(a){try{u(r.next(a))}catch(l){o(l)}}function d(a){try{u(r.throw(a))}catch(l){o(l)}}function u(a){a.done?s(a.value):i(a.value).then(c,d)}u((r=r.apply(e,t||[])).next())})}function ru(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function vn(e){return this instanceof vn?(this.v=e,this):new vn(e)}function su(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(g){return Promise.resolve(g).then(p,l)}}function c(p,g){r[p]&&(i[p]=function(f){return new Promise(function(v,y){s.push([p,f,v,y])>1||d(p,f)})},g&&(i[p]=g(i[p])))}function d(p,g){try{u(r[p](g))}catch(f){h(s[0][3],f)}}function u(p){p.value instanceof vn?Promise.resolve(p.value.v).then(a,l):h(s[0][2],p)}function a(p){d("next",p)}function l(p){d("throw",p)}function h(p,g){p(g),s.shift(),s.length&&d(s[0][0],s[0][1])}}function ou(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof ru=="function"?ru(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(c,d){o=e[s](o),i(c,d,o.done,o.value)})}}function i(s,o,c,d){Promise.resolve(d).then(function(u){s({value:u,done:c})},o)}}var Li=e=>e&&typeof e.length=="number"&&typeof e!="function";function ji(e){return ge(e?.then)}function Bi(e){return ge(e[qn])}function Ui(e){return Symbol.asyncIterator&&ge(e?.[Symbol.asyncIterator])}function Vi(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function ng(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Hi=ng();function $i(e){return ge(e?.[Hi])}function zi(e){return su(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield vn(n.read());if(i)return yield vn(void 0);yield yield vn(r)}}finally{n.releaseLock()}})}function Wi(e){return ge(e?.getReader)}function Ve(e){if(e instanceof Re)return e;if(e!=null){if(Bi(e))return rg(e);if(Li(e))return ig(e);if(ji(e))return sg(e);if(Ui(e))return au(e);if($i(e))return og(e);if(Wi(e))return ag(e)}throw Vi(e)}function rg(e){return new Re(t=>{let n=e[qn]();if(ge(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ig(e){return new Re(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function sg(e){return new Re(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,ki)})}function og(e){return new Re(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function au(e){return new Re(t=>{cg(e,t).catch(n=>t.error(n))})}function ag(e){return au(zi(e))}function cg(e,t){var n,r,i,s;return iu(this,void 0,void 0,function*(){try{for(n=ou(e);r=yield n.next(),!r.done;){let o=r.value;if(t.next(o),t.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}t.complete()})}function rt(e,t,n,r=0,i=!1){let s=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function Gi(e,t=0){return Ae((n,r)=>{n.subscribe(Ie(r,i=>rt(r,e,()=>r.next(i),t),()=>rt(r,e,()=>r.complete(),t),i=>rt(r,e,()=>r.error(i),t)))})}function qi(e,t=0){return Ae((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function cu(e,t){return Ve(e).pipe(qi(t),Gi(t))}function lu(e,t){return Ve(e).pipe(qi(t),Gi(t))}function uu(e,t){return new Re(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function du(e,t){return new Re(n=>{let r;return rt(n,t,()=>{r=e[Hi](),rt(n,t,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>ge(r?.return)&&r.return()})}function Yi(e,t){if(!e)throw new Error("Iterable cannot be null");return new Re(n=>{rt(n,t,()=>{let r=e[Symbol.asyncIterator]();rt(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function hu(e,t){return Yi(zi(e),t)}function fu(e,t){if(e!=null){if(Bi(e))return cu(e,t);if(Li(e))return uu(e,t);if(ji(e))return lu(e,t);if(Ui(e))return Yi(e,t);if($i(e))return du(e,t);if(Wi(e))return hu(e,t)}throw Vi(e)}function je(e,t){return t?fu(e,t):Ve(e)}function me(...e){let t=tn(e);return je(e,t)}function Kn(e,t){let n=ge(e)?e:()=>e,r=i=>i.error(n());return new Re(t?i=>t.schedule(r,0,i):r)}function $o(e){return!!e&&(e instanceof Re||ge(e.lift)&&ge(e.subscribe))}var $t=$n(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Ce(e,t){return Ae((n,r)=>{let i=0;n.subscribe(Ie(r,s=>{r.next(e.call(t,s,i++))}))})}var{isArray:lg}=Array;function ug(e,t){return lg(t)?e(...t):e(t)}function pu(e){return Ce(t=>ug(e,t))}var{isArray:dg}=Array,{getPrototypeOf:hg,prototype:fg,keys:pg}=Object;function gu(e){if(e.length===1){let t=e[0];if(dg(t))return{args:t,keys:null};if(gg(t)){let n=pg(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function gg(e){return e&&typeof e=="object"&&hg(e)===fg}function mu(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function Xi(...e){let t=tn(e),n=nu(e),{args:r,keys:i}=gu(e);if(r.length===0)return je([],t);let s=new Re(mg(r,t,i?o=>mu(i,o):at));return n?s.pipe(pu(n)):s}function mg(e,t,n=at){return r=>{vu(t,()=>{let{length:i}=e,s=new Array(i),o=i,c=i;for(let d=0;d<i;d++)vu(t,()=>{let u=je(e[d],t),a=!1;u.subscribe(Ie(r,l=>{s[d]=l,a||(a=!0,c--),c||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function vu(e,t,n){e?rt(n,e,t):t()}function yu(e,t,n,r,i,s,o,c){let d=[],u=0,a=0,l=!1,h=()=>{l&&!d.length&&!u&&t.complete()},p=f=>u<r?g(f):d.push(f),g=f=>{s&&t.next(f),u++;let v=!1;Ve(n(f,a++)).subscribe(Ie(t,y=>{i?.(y),s?p(y):t.next(y)},()=>{v=!0},void 0,()=>{if(v)try{for(u--;d.length&&u<r;){let y=d.shift();o?rt(t,o,()=>g(y)):g(y)}h()}catch(y){t.error(y)}}))};return e.subscribe(Ie(t,p,()=>{l=!0,h()})),()=>{c?.()}}function Be(e,t,n=1/0){return ge(t)?Be((r,i)=>Ce((s,o)=>t(r,s,i,o))(Ve(e(r,i))),n):(typeof t=="number"&&(n=t),Ae((r,i)=>yu(r,i,e,n)))}function zo(e=1/0){return Be(at,e)}function bu(){return zo(1)}function Zn(...e){return bu()(je(e,tn(e)))}function Ki(e){return new Re(t=>{Ve(e()).subscribe(t)})}function _t(e,t){return Ae((n,r)=>{let i=0;n.subscribe(Ie(r,s=>e.call(t,s,i++)&&r.next(s)))})}function nn(e){return Ae((t,n)=>{let r=null,i=!1,s;r=t.subscribe(Ie(n,void 0,void 0,o=>{s=Ve(e(o,nn(e)(t))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function _u(e,t,n,r,i){return(s,o)=>{let c=n,d=t,u=0;s.subscribe(Ie(o,a=>{let l=u++;d=c?e(d,a,l):(c=!0,a),r&&o.next(d)},i&&(()=>{c&&o.next(d),o.complete()})))}}function Qn(e,t){return ge(t)?Be(e,t,1):Be(e,1)}function rn(e){return Ae((t,n)=>{let r=!1;t.subscribe(Ie(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function zt(e){return e<=0?()=>ct:Ae((t,n)=>{let r=0;t.subscribe(Ie(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Wo(e){return Ce(()=>e)}function Zi(e=vg){return Ae((t,n)=>{let r=!1;t.subscribe(Ie(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function vg(){return new $t}function Lr(e){return Ae((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Rt(e,t){let n=arguments.length>=2;return r=>r.pipe(e?_t((i,s)=>e(i,s,r)):at,zt(1),n?rn(t):Zi(()=>new $t))}function Jn(e){return e<=0?()=>ct:Ae((t,n)=>{let r=[];t.subscribe(Ie(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Go(e,t){let n=arguments.length>=2;return r=>r.pipe(e?_t((i,s)=>e(i,s,r)):at,Jn(1),n?rn(t):Zi(()=>new $t))}function qo(e,t){return Ae(_u(e,t,arguments.length>=2,!0))}function Yo(...e){let t=tn(e);return Ae((n,r)=>{(t?Zn(e,n,t):Zn(e,n)).subscribe(r)})}function wt(e,t){return Ae((n,r)=>{let i=null,s=0,o=!1,c=()=>o&&!i&&r.complete();n.subscribe(Ie(r,d=>{i?.unsubscribe();let u=0,a=s++;Ve(e(d,a)).subscribe(i=Ie(r,l=>r.next(t?t(d,l,a,u++):l),()=>{i=null,c()}))},()=>{o=!0,c()}))})}function Xo(e){return Ae((t,n)=>{Ve(e).subscribe(Ie(n,()=>n.complete(),Fr)),!n.closed&&t.subscribe(n)})}function Ge(e,t,n){let r=ge(e)||t||n?{next:e,error:t,complete:n}:e;return r?Ae((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let c=!0;i.subscribe(Ie(s,d=>{var u;(u=r.next)===null||u===void 0||u.call(r,d),s.next(d)},()=>{var d;c=!1,(d=r.complete)===null||d===void 0||d.call(r),s.complete()},d=>{var u;c=!1,(u=r.error)===null||u===void 0||u.call(r,d),s.error(d)},()=>{var d,u;c&&((d=r.unsubscribe)===null||d===void 0||d.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):at}var od="https://g.co/ng/security#xss",de=class extends Error{constructor(t,n){super(ec(t,n)),this.code=t}};function ec(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function Zr(e){return{toString:e}.toString()}var Qi="__parameters__";function yg(e){return function(...n){if(e){let r=e(...n);for(let i in r)this[i]=r[i]}}}function ad(e,t,n){return Zr(()=>{let r=yg(t);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return c.annotation=o,c;function c(d,u,a){let l=d.hasOwnProperty(Qi)?d[Qi]:Object.defineProperty(d,Qi,{value:[]})[Qi];for(;l.length<=a;)l.push(null);return(l[a]=l[a]||[]).push(o),d}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}function Ne(e){for(let t in e)if(e[t]===Ne)return t;throw Error("Could not find renamed property on target object.")}function et(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(et).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function wu(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var bg=Ne({__forward_ref__:Ne});function cd(e){return e.__forward_ref__=cd,e.toString=function(){return et(this())},e}function ft(e){return ld(e)?e():e}function ld(e){return typeof e=="function"&&e.hasOwnProperty(bg)&&e.__forward_ref__===cd}function pe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ts(e){return{providers:e.providers||[],imports:e.imports||[]}}function xs(e){return Eu(e,dd)||Eu(e,hd)}function ud(e){return xs(e)!==null}function Eu(e,t){return e.hasOwnProperty(t)?e[t]:null}function _g(e){let t=e&&(e[dd]||e[hd]);return t||null}function Du(e){return e&&(e.hasOwnProperty(Cu)||e.hasOwnProperty(wg))?e[Cu]:null}var dd=Ne({\u0275prov:Ne}),Cu=Ne({\u0275inj:Ne}),hd=Ne({ngInjectableDef:Ne}),wg=Ne({ngInjectorDef:Ne}),be=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=pe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function fd(e){return e&&!!e.\u0275providers}var Eg=Ne({\u0275cmp:Ne}),Dg=Ne({\u0275dir:Ne}),Cg=Ne({\u0275pipe:Ne}),Sg=Ne({\u0275mod:Ne}),as=Ne({\u0275fac:Ne}),Ur=Ne({__NG_ELEMENT_ID__:Ne}),Su=Ne({__NG_ENV_ID__:Ne});function Vr(e){return typeof e=="string"?e:e==null?"":String(e)}function Ag(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Vr(e)}function Ig(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new de(-200,e)}function tc(e,t){throw new de(-201,!1)}var _e=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(_e||{}),aa;function pd(){return aa}function ht(e){let t=aa;return aa=e,t}function gd(e,t,n){let r=xs(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&_e.Optional)return null;if(t!==void 0)return t;tc(e,"Injector")}var Mg={},Hr=Mg,ca="__NG_DI_FLAG__",cs="ngTempTokenPath",Tg="ngTokenPath",xg=/\n/gm,Rg="\u0275",Au="__source",rr;function Pg(){return rr}function sn(e){let t=rr;return rr=e,t}function Ng(e,t=_e.Default){if(rr===void 0)throw new de(-203,!1);return rr===null?gd(e,void 0,t):rr.get(e,t&_e.Optional?null:void 0,t)}function Se(e,t=_e.Default){return(pd()||Ng)(ft(e),t)}function oe(e,t=_e.Default){return Se(e,Rs(t))}function Rs(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function la(e){let t=[];for(let n=0;n<e.length;n++){let r=ft(e[n]);if(Array.isArray(r)){if(r.length===0)throw new de(900,!1);let i,s=_e.Default;for(let o=0;o<r.length;o++){let c=r[o],d=kg(c);typeof d=="number"?d===-1?i=c.token:s|=d:i=c}t.push(Se(i,s))}else t.push(Se(r))}return t}function md(e,t){return e[ca]=t,e.prototype[ca]=t,e}function kg(e){return e[ca]}function Og(e,t,n,r){let i=e[cs];throw t[Au]&&i.unshift(t[Au]),e.message=Fg(`
`+e.message,i,n,r),e[Tg]=i,e[cs]=null,e}function Fg(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==Rg?e.slice(2):e;let i=et(t);if(Array.isArray(t))i=t.map(et).join(" -> ");else if(typeof t=="object"){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let c=t[o];s.push(o+":"+(typeof c=="string"?JSON.stringify(c):et(c)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(xg,`
  `)}`}var nc=md(ad("Optional"),8);var vd=md(ad("SkipSelf"),4);function sr(e,t){let n=e.hasOwnProperty(as);return n?e[as]:null}function Lg(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function jg(e){return e.flat(Number.POSITIVE_INFINITY)}function rc(e,t){e.forEach(n=>Array.isArray(n)?rc(n,t):t(n))}function yd(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function ls(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Bg(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let s=i-2;e[i]=e[s],i--}e[t]=n,e[t+1]=r}}function Ug(e,t,n){let r=Qr(e,t);return r>=0?e[r|1]=n:(r=~r,Bg(e,r,t,n)),r}function Ko(e,t){let n=Qr(e,t);if(n>=0)return e[n|1]}function Qr(e,t){return Vg(e,t,1)}function Vg(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=e[s<<n];if(t===o)return s<<n;o>t?i=s:r=s+1}return~(i<<n)}var $r={},Dt=[],or=new be(""),bd=new be("",-1),_d=new be(""),us=class{get(t,n=Hr){if(n===Hr){let r=new Error(`NullInjectorError: No provider for ${et(t)}!`);throw r.name="NullInjectorError",r}return n}},wd=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(wd||{}),kt=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(kt||{}),an=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(an||{});function Hg(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let s=t.length;if(i+s===r||e.charCodeAt(i+s)<=32)return i}n=i+1}}function ua(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],c=n[r++];e.setAttribute(t,o,c,s)}else{let s=i,o=n[++r];zg(s)?e.setProperty(t,s,o):e.setAttribute(t,s,o),r++}}return r}function $g(e){return e===3||e===4||e===6}function zg(e){return e.charCodeAt(0)===64}function ic(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Iu(e,n,i,null,t[++r]):Iu(e,n,i,null,null))}}return e}function Iu(e,t,n,r,i){let s=0,o=e.length;if(t===-1)o=-1;else for(;s<e.length;){let c=e[s++];if(typeof c=="number"){if(c===t){o=-1;break}else if(c>t){o=s-1;break}}}for(;s<e.length;){let c=e[s];if(typeof c=="number")break;if(c===n){if(r===null){i!==null&&(e[s+1]=i);return}else if(r===e[s+1]){e[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),r!==null&&e.splice(s++,0,r),i!==null&&e.splice(s++,0,i)}var Ed="ng-template";function Wg(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&Hg(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(sc(e))return!1;if(i=t.indexOf(1,i),i>-1){let s;for(;++i<t.length&&typeof(s=t[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function sc(e){return e.type===4&&e.value!==Ed}function Gg(e,t,n){let r=e.type===4&&!n?Ed:e.value;return t===r}function qg(e,t,n){let r=4,i=e.attrs,s=i!==null?Kg(i):0,o=!1;for(let c=0;c<t.length;c++){let d=t[c];if(typeof d=="number"){if(!o&&!Et(r)&&!Et(d))return!1;if(o&&Et(d))continue;o=!1,r=d|r&1;continue}if(!o)if(r&4){if(r=2|r&1,d!==""&&!Gg(e,d,n)||d===""&&t.length===1){if(Et(r))return!1;o=!0}}else if(r&8){if(i===null||!Wg(e,i,d,n)){if(Et(r))return!1;o=!0}}else{let u=t[++c],a=Yg(d,i,sc(e),n);if(a===-1){if(Et(r))return!1;o=!0;continue}if(u!==""){let l;if(a>s?l="":l=i[a+1].toLowerCase(),r&2&&u!==l){if(Et(r))return!1;o=!0}}}}return Et(r)||o}function Et(e){return(e&1)===0}function Yg(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<t.length;){let o=t[i];if(o===e)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let c=t[++i];for(;typeof c=="string";)c=t[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return Zg(t,e)}function Xg(e,t,n=!1){for(let r=0;r<t.length;r++)if(qg(e,t[r],n))return!0;return!1}function Kg(e){for(let t=0;t<e.length;t++){let n=e[t];if($g(n))return t}return e.length}function Zg(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function Mu(e,t){return e?":not("+t.trim()+")":t}function Qg(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if(typeof o=="string")if(r&2){let c=e[++n];i+="["+o+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Et(o)&&(t+=Mu(s,i),i=""),r=o,s=s||!Et(r);n++}return i!==""&&(t+=Mu(s,i)),t}function Jg(e){return e.map(Qg).join(",")}function em(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let s=e[r];if(typeof s=="string")i===2?s!==""&&t.push(s,e[++r]):i===8&&n.push(s);else{if(!Et(i))break;i=s}r++}return{attrs:t,classes:n}}function Ps(e){return Zr(()=>{let t=Id(e),n=ke(ce({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===wd.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||kt.Emulated,styles:e.styles||Dt,_:null,schemas:e.schemas||null,tView:null,id:""});Md(n);let r=e.dependencies;return n.directiveDefs=xu(r,!1),n.pipeDefs=xu(r,!0),n.id=rm(n),n})}function tm(e){return _n(e)||Dd(e)}function nm(e){return e!==null}function Ns(e){return Zr(()=>({type:e.type,bootstrap:e.bootstrap||Dt,declarations:e.declarations||Dt,imports:e.imports||Dt,exports:e.exports||Dt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Tu(e,t){if(e==null)return $r;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],s,o,c=an.None;Array.isArray(i)?(c=i[0],s=i[1],o=i[2]??s):(s=i,o=i),t?(n[s]=c!==an.None?[r,c]:r,t[s]=o):n[s]=r}return n}function Jr(e){return Zr(()=>{let t=Id(e);return Md(t),t})}function _n(e){return e[Eg]||null}function Dd(e){return e[Dg]||null}function Cd(e){return e[Cg]||null}function Sd(e){let t=_n(e)||Dd(e)||Cd(e);return t!==null?t.standalone:!1}function Ad(e,t){let n=e[Sg]||null;if(!n&&t===!0)throw new Error(`Type ${et(e)} does not have '\u0275mod' property.`);return n}function Id(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||$r,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Dt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Tu(e.inputs,t),outputs:Tu(e.outputs),debugInfo:null}}function Md(e){e.features?.forEach(t=>t(e))}function xu(e,t){if(!e)return null;let n=t?Cd:tm;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(nm)}function rm(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function ks(e){return{\u0275providers:e}}function im(...e){return{\u0275providers:Td(!0,e),\u0275fromNgModule:!0}}function Td(e,...t){let n=[],r=new Set,i,s=o=>{n.push(o)};return rc(t,o=>{let c=o;da(c,s,[],r)&&(i||=[],i.push(c))}),i!==void 0&&xd(i,s),n}function xd(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];oc(i,s=>{t(s,r)})}}function da(e,t,n,r){if(e=ft(e),!e)return!1;let i=null,s=Du(e),o=!s&&_n(e);if(!s&&!o){let d=e.ngModule;if(s=Du(d),s)i=d;else return!1}else{if(o&&!o.standalone)return!1;i=e}let c=r.has(i);if(o){if(c)return!1;if(r.add(i),o.dependencies){let d=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of d)da(u,t,n,r)}}else if(s){if(s.imports!=null&&!c){r.add(i);let u;try{rc(s.imports,a=>{da(a,t,n,r)&&(u||=[],u.push(a))})}finally{}u!==void 0&&xd(u,t)}if(!c){let u=sr(i)||(()=>new i);t({provide:i,useFactory:u,deps:Dt},i),t({provide:_d,useValue:i,multi:!0},i),t({provide:or,useValue:()=>Se(i),multi:!0},i)}let d=s.providers;if(d!=null&&!c){let u=e;oc(d,a=>{t(a,u)})}}else return!1;return i!==e&&e.providers!==void 0}function oc(e,t){for(let n of e)fd(n)&&(n=n.\u0275providers),Array.isArray(n)?oc(n,t):t(n)}var sm=Ne({provide:String,useValue:Ne});function Rd(e){return e!==null&&typeof e=="object"&&sm in e}function om(e){return!!(e&&e.useExisting)}function am(e){return!!(e&&e.useFactory)}function ha(e){return typeof e=="function"}var Os=new be(""),ts={},cm={},Zo;function ac(){return Zo===void 0&&(Zo=new us),Zo}var gt=class{},zr=class extends gt{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,pa(t,o=>this.processProvider(o)),this.records.set(bd,er(void 0,this)),i.has("environment")&&this.records.set(gt,er(void 0,this));let s=this.records.get(Os);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(_d,Dt,_e.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=Me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Me(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=sn(this),r=ht(void 0),i;try{return t()}finally{sn(n),ht(r)}}get(t,n=Hr,r=_e.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(Su))return t[Su](this);r=Rs(r);let i,s=sn(this),o=ht(void 0);try{if(!(r&_e.SkipSelf)){let d=this.records.get(t);if(d===void 0){let u=pm(t)&&xs(t);u&&this.injectableDefInScope(u)?d=er(fa(t),ts):d=null,this.records.set(t,d)}if(d!=null)return this.hydrate(t,d)}let c=r&_e.Self?ac():this.parent;return n=r&_e.Optional&&n===Hr?null:n,c.get(t,n)}catch(c){if(c.name==="NullInjectorError"){if((c[cs]=c[cs]||[]).unshift(et(t)),s)throw c;return Og(c,t,"R3InjectorError",this.source)}else throw c}finally{ht(o),sn(s)}}resolveInjectorInitializers(){let t=Me(null),n=sn(this),r=ht(void 0),i;try{let s=this.get(or,Dt,_e.Self);for(let o of s)o()}finally{sn(n),ht(r),Me(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(et(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(t){t=ft(t);let n=ha(t)?t:ft(t&&t.provide),r=um(t);if(!ha(t)&&t.multi===!0){let i=this.records.get(n);i||(i=er(void 0,ts,!0),i.factory=()=>la(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=Me(null);try{return n.value===ts&&(n.value=cm,n.value=n.factory()),typeof n.value=="object"&&n.value&&fm(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Me(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=ft(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function fa(e){let t=xs(e),n=t!==null?t.factory:sr(e);if(n!==null)return n;if(e instanceof be)throw new de(204,!1);if(e instanceof Function)return lm(e);throw new de(204,!1)}function lm(e){if(e.length>0)throw new de(204,!1);let n=_g(e);return n!==null?()=>n.factory(e):()=>new e}function um(e){if(Rd(e))return er(void 0,e.useValue);{let t=dm(e);return er(t,ts)}}function dm(e,t,n){let r;if(ha(e)){let i=ft(e);return sr(i)||fa(i)}else if(Rd(e))r=()=>ft(e.useValue);else if(am(e))r=()=>e.useFactory(...la(e.deps||[]));else if(om(e))r=()=>Se(ft(e.useExisting));else{let i=ft(e&&(e.useClass||e.provide));if(hm(e))r=()=>new i(...la(e.deps));else return sr(i)||fa(i)}return r}function er(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function hm(e){return!!e.deps}function fm(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function pm(e){return typeof e=="function"||typeof e=="object"&&e instanceof be}function pa(e,t){for(let n of e)Array.isArray(n)?pa(n,t):n&&fd(n)?pa(n.\u0275providers,t):t(n)}function Yt(e,t){e instanceof zr&&e.assertNotDestroyed();let n,r=sn(e),i=ht(void 0);try{return t()}finally{sn(r),ht(i)}}function gm(){return pd()!==void 0||Pg()!=null}function mm(e){return typeof e=="function"}var Xt=0,we=1,he=2,Ke=3,Ct=4,At=5,ds=6,hs=7,St=8,ar=9,Ot=10,tt=11,Wr=12,Ru=13,pr=14,Ft=15,wn=16,tr=17,Wt=18,Fs=19,Pd=20,on=21,Qo=22,pt=23,cn=25,Nd=1;var En=7,fs=8,cr=9,lt=10,ps=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(ps||{});function yn(e){return Array.isArray(e)&&typeof e[Nd]=="object"}function Kt(e){return Array.isArray(e)&&e[Nd]===!0}function kd(e){return(e.flags&4)!==0}function Ls(e){return e.componentOffset>-1}function cc(e){return(e.flags&1)===1}function ei(e){return!!e.template}function ga(e){return(e[he]&512)!==0}var ma=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Od(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function js(){return Fd}function Fd(e){return e.type.prototype.ngOnChanges&&(e.setInput=ym),vm}js.ngInherit=!0;function vm(){let e=jd(this),t=e?.current;if(t){let n=e.previous;if(n===$r)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function ym(e,t,n,r,i){let s=this.declaredInputs[r],o=jd(e)||bm(e,{previous:$r,current:null}),c=o.current||(o.current={}),d=o.previous,u=d[s];c[s]=new ma(u&&u.currentValue,n,d===$r),Od(e,t,i,n)}var Ld="__ngSimpleChanges__";function jd(e){return e[Ld]||null}function bm(e,t){return e[Ld]=t}var Pu=null;var Pt=function(e,t,n){Pu?.(e,t,n)},_m="svg",wm="math";function Lt(e){for(;Array.isArray(e);)e=e[Xt];return e}function Bd(e,t){return Lt(t[e])}function It(e,t){return Lt(t[e.index])}function Ud(e,t){return e.data[t]}function xn(e,t){let n=t[e];return yn(n)?n:n[Xt]}function Em(e){return(e[he]&4)===4}function lc(e){return(e[he]&128)===128}function Dm(e){return Kt(e[Ke])}function gs(e,t){return t==null?null:e[t]}function Vd(e){e[tr]=0}function Hd(e){e[he]&1024||(e[he]|=1024,lc(e)&&Us(e))}function Cm(e,t){for(;e>0;)t=t[pr],e--;return t}function Bs(e){return!!(e[he]&9216||e[pt]?.dirty)}function va(e){e[Ot].changeDetectionScheduler?.notify(8),e[he]&64&&(e[he]|=1024),Bs(e)&&Us(e)}function Us(e){e[Ot].changeDetectionScheduler?.notify(0);let t=Dn(e);for(;t!==null&&!(t[he]&8192||(t[he]|=8192,!lc(t)));)t=Dn(t)}function $d(e,t){if((e[he]&256)===256)throw new de(911,!1);e[on]===null&&(e[on]=[]),e[on].push(t)}function Sm(e,t){if(e[on]===null)return;let n=e[on].indexOf(t);n!==-1&&e[on].splice(n,1)}function Dn(e){let t=e[Ke];return Kt(t)?t[Ke]:t}var Ee={lFrame:eh(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var zd=!1;function Am(){return Ee.lFrame.elementDepthCount}function Im(){Ee.lFrame.elementDepthCount++}function Mm(){Ee.lFrame.elementDepthCount--}function Wd(){return Ee.bindingsEnabled}function Tm(){return Ee.skipHydrationRootTNode!==null}function xm(e){return Ee.skipHydrationRootTNode===e}function Rm(){Ee.skipHydrationRootTNode=null}function Oe(){return Ee.lFrame.lView}function jt(){return Ee.lFrame.tView}function gr(e){return Ee.lFrame.contextLView=e,e[St]}function mr(e){return Ee.lFrame.contextLView=null,e}function Mt(){let e=Gd();for(;e!==null&&e.type===64;)e=e.parent;return e}function Gd(){return Ee.lFrame.currentTNode}function Pm(){let e=Ee.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function ti(e,t){let n=Ee.lFrame;n.currentTNode=e,n.isParent=t}function qd(){return Ee.lFrame.isParent}function Nm(){Ee.lFrame.isParent=!1}function Yd(){return zd}function Nu(e){zd=e}function km(){return Ee.lFrame.bindingIndex}function Om(e){return Ee.lFrame.bindingIndex=e}function Xd(){return Ee.lFrame.bindingIndex++}function Kd(e){let t=Ee.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Fm(){return Ee.lFrame.inI18n}function Lm(e,t){let n=Ee.lFrame;n.bindingIndex=n.bindingRootIndex=e,ya(t)}function jm(){return Ee.lFrame.currentDirectiveIndex}function ya(e){Ee.lFrame.currentDirectiveIndex=e}function Bm(e){let t=Ee.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function Zd(){return Ee.lFrame.currentQueryIndex}function uc(e){Ee.lFrame.currentQueryIndex=e}function Um(e){let t=e[we];return t.type===2?t.declTNode:t.type===1?e[At]:null}function Qd(e,t,n){if(n&_e.SkipSelf){let i=t,s=e;for(;i=i.parent,i===null&&!(n&_e.Host);)if(i=Um(s),i===null||(s=s[pr],i.type&10))break;if(i===null)return!1;t=i,e=s}let r=Ee.lFrame=Jd();return r.currentTNode=t,r.lView=e,!0}function dc(e){let t=Jd(),n=e[we];Ee.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Jd(){let e=Ee.lFrame,t=e===null?null:e.child;return t===null?eh(e):t}function eh(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function th(){let e=Ee.lFrame;return Ee.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var nh=th;function hc(){let e=th();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Vm(e){return(Ee.lFrame.contextLView=Cm(e,Ee.lFrame.contextLView))[St]}function Rn(){return Ee.lFrame.selectedIndex}function Cn(e){Ee.lFrame.selectedIndex=e}function Hm(){let e=Ee.lFrame;return Ud(e.tView,e.selectedIndex)}function $m(){return Ee.lFrame.currentNamespace}var rh=!0;function fc(){return rh}function pc(e){rh=e}function zm(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){let o=Fd(t);(n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o)}i&&(n.preOrderHooks??=[]).push(0-e,i),s&&((n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s))}function gc(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let s=e.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:c,ngAfterViewInit:d,ngAfterViewChecked:u,ngOnDestroy:a}=s;o&&(e.contentHooks??=[]).push(-n,o),c&&((e.contentHooks??=[]).push(n,c),(e.contentCheckHooks??=[]).push(n,c)),d&&(e.viewHooks??=[]).push(-n,d),u&&((e.viewHooks??=[]).push(n,u),(e.viewCheckHooks??=[]).push(n,u)),a!=null&&(e.destroyHooks??=[]).push(n,a)}}function ns(e,t,n){ih(e,t,3,n)}function rs(e,t,n,r){(e[he]&3)===n&&ih(e,t,n,r)}function Jo(e,t){let n=e[he];(n&3)===t&&(n&=16383,n+=1,e[he]=n)}function ih(e,t,n,r){let i=r!==void 0?e[tr]&65535:0,s=r??-1,o=t.length-1,c=0;for(let d=i;d<o;d++)if(typeof t[d+1]=="number"){if(c=t[d],r!=null&&c>=r)break}else t[d]<0&&(e[tr]+=65536),(c<s||s==-1)&&(Wm(e,n,t,d),e[tr]=(e[tr]&4294901760)+d+2),d++}function ku(e,t){Pt(4,e,t);let n=Me(null);try{t.call(e)}finally{Me(n),Pt(5,e,t)}}function Wm(e,t,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],c=e[o];i?e[he]>>14<e[tr]>>16&&(e[he]&3)===t&&(e[he]+=16384,ku(c,s)):ku(c,s)}var ir=-1,Gr=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Gm(e){return e instanceof Gr}function qm(e){return(e.flags&8)!==0}function Ym(e){return(e.flags&16)!==0}var ea={},ba=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Rs(r);let i=this.injector.get(t,ea,r);return i!==ea||n===ea?i:this.parentInjector.get(t,n,r)}};function sh(e){return e!==ir}function ms(e){return e&32767}function Xm(e){return e>>16}function vs(e,t){let n=Xm(e),r=t;for(;n>0;)r=r[pr],n--;return r}var _a=!0;function Ou(e){let t=_a;return _a=e,t}var Km=256,oh=Km-1,ah=5,Zm=0,Nt={};function Qm(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ur)&&(r=n[Ur]),r==null&&(r=n[Ur]=Zm++);let i=r&oh,s=1<<i;t.data[e+(i>>ah)]|=s}function ch(e,t){let n=lh(e,t);if(n!==-1)return n;let r=t[we];r.firstCreatePass&&(e.injectorIndex=t.length,ta(r.data,e),ta(t,null),ta(r.blueprint,null));let i=mc(e,t),s=e.injectorIndex;if(sh(i)){let o=ms(i),c=vs(i,t),d=c[we].data;for(let u=0;u<8;u++)t[s+u]=c[o+u]|d[o+u]}return t[s+8]=i,s}function ta(e,t){e.push(0,0,0,0,0,0,0,0,t)}function lh(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function mc(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=ph(i),r===null)return ir;if(n++,i=i[pr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ir}function Jm(e,t,n){Qm(e,t,n)}function uh(e,t,n){if(n&_e.Optional||e!==void 0)return e;tc(t,"NodeInjector")}function dh(e,t,n,r){if(n&_e.Optional&&r===void 0&&(r=null),!(n&(_e.Self|_e.Host))){let i=e[ar],s=ht(void 0);try{return i?i.get(t,r,n&_e.Optional):gd(t,r,n&_e.Optional)}finally{ht(s)}}return uh(r,t,n)}function hh(e,t,n,r=_e.Default,i){if(e!==null){if(t[he]&2048&&!(r&_e.Self)){let o=rv(e,t,n,r,Nt);if(o!==Nt)return o}let s=fh(e,t,n,r,Nt);if(s!==Nt)return s}return dh(t,n,r,i)}function fh(e,t,n,r,i){let s=tv(n);if(typeof s=="function"){if(!Qd(t,e,r))return r&_e.Host?uh(i,n,r):dh(t,n,r,i);try{let o;if(o=s(r),o==null&&!(r&_e.Optional))tc(n);else return o}finally{nh()}}else if(typeof s=="number"){let o=null,c=lh(e,t),d=ir,u=r&_e.Host?t[Ft][At]:null;for((c===-1||r&_e.SkipSelf)&&(d=c===-1?mc(e,t):t[c+8],d===ir||!Lu(r,!1)?c=-1:(o=t[we],c=ms(d),t=vs(d,t)));c!==-1;){let a=t[we];if(Fu(s,c,a.data)){let l=ev(c,t,n,o,r,u);if(l!==Nt)return l}d=t[c+8],d!==ir&&Lu(r,t[we].data[c+8]===u)&&Fu(s,c,t)?(o=a,c=ms(d),t=vs(d,t)):c=-1}}return i}function ev(e,t,n,r,i,s){let o=t[we],c=o.data[e+8],d=r==null?Ls(c)&&_a:r!=o&&(c.type&3)!==0,u=i&_e.Host&&s===c,a=is(c,o,n,d,u);return a!==null?lr(t,o,a,c):Nt}function is(e,t,n,r,i){let s=e.providerIndexes,o=t.data,c=s&1048575,d=e.directiveStart,u=e.directiveEnd,a=s>>20,l=r?c:c+a,h=i?c+a:u;for(let p=l;p<h;p++){let g=o[p];if(p<d&&n===g||p>=d&&g.type===n)return p}if(i){let p=o[d];if(p&&ei(p)&&p.type===n)return d}return null}function lr(e,t,n,r){let i=e[n],s=t.data;if(Gm(i)){let o=i;o.resolving&&Ig(Ag(s[n]));let c=Ou(o.canSeeViewProviders);o.resolving=!0;let d,u=o.injectImpl?ht(o.injectImpl):null,a=Qd(e,r,_e.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&zm(n,s[n],t)}finally{u!==null&&ht(u),Ou(c),o.resolving=!1,nh()}}return i}function tv(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Ur)?e[Ur]:void 0;return typeof t=="number"?t>=0?t&oh:nv:t}function Fu(e,t,n){let r=1<<e;return!!(n[t+(e>>ah)]&r)}function Lu(e,t){return!(e&_e.Self)&&!(e&_e.Host&&t)}var bn=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return hh(this._tNode,this._lView,t,Rs(r),n)}};function nv(){return new bn(Mt(),Oe())}function vc(e){return Zr(()=>{let t=e.prototype.constructor,n=t[as]||wa(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let s=i[as]||wa(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function wa(e){return ld(e)?()=>{let t=wa(ft(e));return t&&t()}:sr(e)}function rv(e,t,n,r,i){let s=e,o=t;for(;s!==null&&o!==null&&o[he]&2048&&!(o[he]&512);){let c=fh(s,o,n,r|_e.Self,Nt);if(c!==Nt)return c;let d=s.parent;if(!d){let u=o[Pd];if(u){let a=u.get(n,Nt,r);if(a!==Nt)return a}d=ph(o),o=o[pr]}s=d}return i}function ph(e){let t=e[we],n=t.type;return n===2?t.declTNode:n===1?e[At]:null}function ju(e,t=null,n=null,r){let i=gh(e,t,n,r);return i.resolveInjectorInitializers(),i}function gh(e,t=null,n=null,r,i=new Set){let s=[n||Dt,im(e)];return r=r||(typeof e=="object"?void 0:et(e)),new zr(s,t||ac(),r||null,i)}var Sn=class e{static{this.THROW_IF_NOT_FOUND=Hr}static{this.NULL=new us}static create(t,n){if(Array.isArray(t))return ju({name:""},n,t,"");{let r=t.name??"";return ju({name:r},t.parent,t.providers,r)}}static{this.\u0275prov=pe({token:e,providedIn:"any",factory:()=>Se(bd)})}static{this.__NG_ELEMENT_ID__=-1}};var iv=new be("");iv.__NG_ELEMENT_ID__=e=>{let t=Mt();if(t===null)throw new de(204,!1);if(t.type&2)return t.value;if(e&_e.Optional)return null;throw new de(204,!1)};var sv="ngOriginalError";function na(e){return e[sv]}var mh=!0,vh=(()=>{class e{static{this.__NG_ELEMENT_ID__=ov}static{this.__NG_ENV_ID__=n=>n}}return e})(),Ea=class extends vh{constructor(t){super(),this._lView=t}onDestroy(t){return $d(this._lView,t),()=>Sm(this._lView,t)}};function ov(){return new Ea(Oe())}var vr=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new We(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=pe({token:e,providedIn:"root",factory:()=>new e})}}return e})();var Da=class extends Je{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,gm()&&(this.destroyRef=oe(vh,{optional:!0})??void 0,this.pendingTasks=oe(vr,{optional:!0})??void 0)}emit(t){let n=Me(null);try{super.next(t)}finally{Me(n)}}subscribe(t,n,r){let i=t,s=n||(()=>null),o=r;if(t&&typeof t=="object"){let d=t;i=d.next?.bind(d),s=d.error?.bind(d),o=d.complete?.bind(d)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let c=super.subscribe({next:i,error:s,complete:o});return t instanceof Fe&&t.add(c),c}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Xe=Da;function ys(...e){}function yh(e){let t,n;function r(){e=ys;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function Bu(e){return queueMicrotask(()=>e()),()=>{e=ys}}var yc="isAngularZone",bs=yc+"_ID",av=0,Le=class e{constructor(t){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xe(!1),this.onMicrotaskEmpty=new Xe(!1),this.onStable=new Xe(!1),this.onError=new Xe(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=mh}=t;if(typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,uv(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(yc)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new de(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,t,cv,ys,ys);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},cv={};function bc(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function lv(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){yh(()=>{e.callbackScheduled=!1,Ca(e),e.isCheckStableRunning=!0,bc(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Ca(e)}function uv(e){let t=()=>{lv(e)},n=av++;e._inner=e._inner.fork({name:"angular",properties:{[yc]:!0,[bs]:n,[bs+n]:!0},onInvokeTask:(r,i,s,o,c,d)=>{if(dv(d))return r.invokeTask(s,o,c,d);try{return Uu(e),r.invokeTask(s,o,c,d)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),Vu(e)}},onInvoke:(r,i,s,o,c,d,u)=>{try{return Uu(e),r.invoke(s,o,c,d,u)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!hv(d)&&t(),Vu(e)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,Ca(e),bc(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function Ca(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Uu(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Vu(e){e._nesting--,bc(e)}var Sa=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe,this.onMicrotaskEmpty=new Xe,this.onStable=new Xe,this.onError=new Xe}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function dv(e){return bh(e,"__ignore_ng_zone__")}function hv(e){return bh(e,"__scheduler_tick__")}function bh(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Gt=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&na(t);for(;n&&na(n);)n=na(n);return n||null}},fv=new be("",{providedIn:"root",factory:()=>{let e=oe(Le),t=oe(Gt);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function pv(){return yr(Mt(),Oe())}function yr(e,t){return new Pn(It(e,t))}var Pn=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=pv}}return e})();function gv(e){return e instanceof Pn?e.nativeElement:e}function mv(){return this._results[Symbol.iterator]()}var Aa=class e{get changes(){return this._changes??=new Xe}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=mv)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=jg(t);(this._changesDetected=!Lg(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function _h(e){return(e.flags&128)===128}var wh=new Map,vv=0;function yv(){return vv++}function bv(e){wh.set(e[Fs],e)}function Ia(e){wh.delete(e[Fs])}var Hu="__ngContext__";function An(e,t){yn(t)?(e[Hu]=t[Fs],bv(t)):e[Hu]=t}function Eh(e){return Ch(e[Wr])}function Dh(e){return Ch(e[Ct])}function Ch(e){for(;e!==null&&!Kt(e);)e=e[Ct];return e}var Ma;function Sh(e){Ma=e}function _v(){if(Ma!==void 0)return Ma;if(typeof document<"u")return document;throw new de(210,!1)}var _c=new be("",{providedIn:"root",factory:()=>wv}),wv="ng",wc=new be(""),br=new be("",{providedIn:"platform",factory:()=>"unknown"});var Ec=new be("",{providedIn:"root",factory:()=>_v().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Ev="h",Dv="b";var Cv=()=>null;function Dc(e,t,n=!1){return Cv(e,t,n)}var Ah=!1,Sv=new be("",{providedIn:"root",factory:()=>Ah});var _s=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${od})`}};function Vs(e){return e instanceof _s?e.changingThisBreaksApplicationSecurity:e}function Ih(e,t){let n=Av(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${od})`)}return n===t}function Av(e){return e instanceof _s&&e.getTypeName()||null}var Iv=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Mh(e){return e=String(e),e.match(Iv)?e:"unsafe:"+e}var Cc=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Cc||{});function Th(e){let t=Mv();return t?t.sanitize(Cc.URL,e)||"":Ih(e,"URL")?Vs(e):Mh(Vr(e))}function Mv(){let e=Oe();return e&&e[Ot].sanitizer}function xh(e){return e instanceof Function?e():e}var qt=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(qt||{}),Tv;function Sc(e,t){return Tv(e,t)}function nr(e,t,n,r,i){if(r!=null){let s,o=!1;Kt(r)?s=r:yn(r)&&(o=!0,r=r[Xt]);let c=Lt(r);e===0&&n!==null?i==null?Oh(t,n,c):ws(t,n,c,i||null,!0):e===1&&n!==null?ws(t,n,c,i||null,!0):e===2?zv(t,c,o):e===3&&t.destroyNode(c),s!=null&&Gv(t,e,s,n,i)}}function xv(e,t){return e.createText(t)}function Rv(e,t,n){e.setValue(t,n)}function Rh(e,t,n){return e.createElement(t,n)}function Pv(e,t){Ph(e,t),t[Xt]=null,t[At]=null}function Nv(e,t,n,r,i,s){r[Xt]=i,r[At]=t,Hs(e,r,n,1,i,s)}function Ph(e,t){t[Ot].changeDetectionScheduler?.notify(9),Hs(e,t,t[tt],2,null,null)}function kv(e){let t=e[Wr];if(!t)return ra(e[we],e);for(;t;){let n=null;if(yn(t))n=t[Wr];else{let r=t[lt];r&&(n=r)}if(!n){for(;t&&!t[Ct]&&t!==e;)yn(t)&&ra(t[we],t),t=t[Ke];t===null&&(t=e),yn(t)&&ra(t[we],t),n=t&&t[Ct]}t=n}}function Ov(e,t,n,r){let i=lt+r,s=n.length;r>0&&(n[i-1][Ct]=t),r<s-lt?(t[Ct]=n[i],yd(n,lt+r,t)):(n.push(t),t[Ct]=null),t[Ke]=n;let o=t[wn];o!==null&&n!==o&&Nh(o,t);let c=t[Wt];c!==null&&c.insertView(e),va(t),t[he]|=128}function Nh(e,t){let n=e[cr],r=t[Ke];if(yn(r))e[he]|=ps.HasTransplantedViews;else{let i=r[Ke][Ft];t[Ft]!==i&&(e[he]|=ps.HasTransplantedViews)}n===null?e[cr]=[t]:n.push(t)}function Ac(e,t){let n=e[cr],r=n.indexOf(t);n.splice(r,1)}function Ta(e,t){if(e.length<=lt)return;let n=lt+t,r=e[n];if(r){let i=r[wn];i!==null&&i!==e&&Ac(i,r),t>0&&(e[n-1][Ct]=r[Ct]);let s=ls(e,lt+t);Pv(r[we],r);let o=s[Wt];o!==null&&o.detachView(s[we]),r[Ke]=null,r[Ct]=null,r[he]&=-129}return r}function kh(e,t){if(!(t[he]&256)){let n=t[tt];n.destroyNode&&Hs(e,t,n,3,null,null),kv(t)}}function ra(e,t){if(t[he]&256)return;let n=Me(null);try{t[he]&=-129,t[he]|=256,t[pt]&&xo(t[pt]),Lv(e,t),Fv(e,t),t[we].type===1&&t[tt].destroy();let r=t[wn];if(r!==null&&Kt(t[Ke])){r!==t[Ke]&&Ac(r,t);let i=t[Wt];i!==null&&i.detachView(e)}Ia(t)}finally{Me(n)}}function Fv(e,t){let n=e.cleanup,r=t[hs];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(t[hs]=null);let i=t[on];if(i!==null){t[on]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function Lv(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof Gr)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let c=i[s[o]],d=s[o+1];Pt(4,c,d);try{d.call(c)}finally{Pt(5,c,d)}}else{Pt(4,i,s);try{s.call(i)}finally{Pt(5,i,s)}}}}}function jv(e,t,n){return Bv(e,t.parent,n)}function Bv(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[Xt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=e.data[r.directiveStart+i];if(s===kt.None||s===kt.Emulated)return null}return It(r,n)}}function ws(e,t,n,r,i){e.insertBefore(t,n,r,i)}function Oh(e,t,n){e.appendChild(t,n)}function $u(e,t,n,r,i){r!==null?ws(e,t,n,r,i):Oh(e,t,n)}function Fh(e,t){return e.parentNode(t)}function Uv(e,t){return e.nextSibling(t)}function Vv(e,t,n){return $v(e,t,n)}function Hv(e,t,n){return e.type&40?It(e,n):null}var $v=Hv,zu;function Ic(e,t,n,r){let i=jv(e,r,t),s=t[tt],o=r.parent||t[At],c=Vv(o,r,t);if(i!=null)if(Array.isArray(n))for(let d=0;d<n.length;d++)$u(s,i,n[d],c,!1);else $u(s,i,n,c,!1);zu!==void 0&&zu(s,r,t,n,i)}function jr(e,t){if(t!==null){let n=t.type;if(n&3)return It(t,e);if(n&4)return xa(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return jr(e,r);{let i=e[t.index];return Kt(i)?xa(-1,i):Lt(i)}}else{if(n&128)return jr(e,t.next);if(n&32)return Sc(t,e)()||Lt(e[t.index]);{let r=Lh(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Dn(e[Ft]);return jr(i,r)}else return jr(e,t.next)}}}return null}function Lh(e,t){if(t!==null){let r=e[Ft][At],i=t.projection;return r.projection[i]}return null}function xa(e,t){let n=lt+e+1;if(n<t.length){let r=t[n],i=r[we].firstChild;if(i!==null)return jr(r,i)}return t[En]}function zv(e,t,n){e.removeChild(null,t,n)}function Mc(e,t,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let c=r[n.index],d=n.type;if(o&&t===0&&(c&&An(Lt(c),r),n.flags|=2),(n.flags&32)!==32)if(d&8)Mc(e,t,n.child,r,i,s,!1),nr(t,e,i,c,s);else if(d&32){let u=Sc(n,r),a;for(;a=u();)nr(t,e,i,a,s);nr(t,e,i,c,s)}else d&16?Wv(e,t,r,n,i,s):nr(t,e,i,c,s);n=o?n.projectionNext:n.next}}function Hs(e,t,n,r,i,s){Mc(n,r,e.firstChild,t,i,s,!1)}function Wv(e,t,n,r,i,s){let o=n[Ft],d=o[At].projection[r.projection];if(Array.isArray(d))for(let u=0;u<d.length;u++){let a=d[u];nr(t,e,i,a,s)}else{let u=d,a=o[Ke];_h(r)&&(u.flags|=128),Mc(e,t,u,a,i,s,!0)}}function Gv(e,t,n,r,i){let s=n[En],o=Lt(n);s!==o&&nr(t,e,r,s,i);for(let c=lt;c<n.length;c++){let d=n[c];Hs(d[we],d,e,t,r,s)}}function qv(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:qt.DashCase;i==null?e.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=qt.Important),e.setStyle(n,r,i,s))}}function Yv(e,t,n){e.setAttribute(t,"style",n)}function jh(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Bh(e,t,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&ua(e,t,r),i!==null&&jh(e,t,i),s!==null&&Yv(e,t,s)}var un={};function it(e=1){Uh(jt(),Oe(),Rn()+e,!1)}function Uh(e,t,n,r){if(!r)if((t[he]&3)===3){let s=e.preOrderCheckHooks;s!==null&&ns(t,s,n)}else{let s=e.preOrderHooks;s!==null&&rs(t,s,0,n)}Cn(n)}function dn(e,t=_e.Default){let n=Oe();if(n===null)return Se(e,t);let r=Mt();return hh(r,n,ft(e),t)}function Vh(e,t,n,r,i,s){let o=Me(null);try{let c=null;i&an.SignalBased&&(c=t[r][$l]),c!==null&&c.transformFn!==void 0&&(s=c.transformFn(s)),i&an.HasDecoratorInputTransform&&(s=e.inputTransforms[r].call(t,s)),e.setInput!==null?e.setInput(t,c,s,n,r):Od(t,c,r,s)}finally{Me(o)}}function Xv(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Cn(~i);else{let s=i,o=n[++r],c=n[++r];Lm(o,s);let d=t[s];c(2,d)}}}finally{Cn(-1)}}function $s(e,t,n,r,i,s,o,c,d,u,a){let l=t.blueprint.slice();return l[Xt]=i,l[he]=r|4|128|8|64,(u!==null||e&&e[he]&2048)&&(l[he]|=2048),Vd(l),l[Ke]=l[pr]=e,l[St]=n,l[Ot]=o||e&&e[Ot],l[tt]=c||e&&e[tt],l[ar]=d||e&&e[ar]||null,l[At]=s,l[Fs]=yv(),l[ds]=a,l[Pd]=u,l[Ft]=t.type==2?e[Ft]:l,l}function zs(e,t,n,r,i){let s=e.data[t];if(s===null)s=Kv(e,t,n,r,i),Fm()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=Pm();s.injectorIndex=o===null?-1:o.injectorIndex}return ti(s,!0),s}function Kv(e,t,n,r,i){let s=Gd(),o=qd(),c=o?s:s&&s.parent,d=e.data[t]=ny(e,c,n,t,r,i);return e.firstChild===null&&(e.firstChild=d),s!==null&&(o?s.child==null&&d.parent!==null&&(s.child=d):s.next===null&&(s.next=d,d.prev=s)),d}function Hh(e,t,n,r){if(n===0)return-1;let i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function $h(e,t,n,r,i){let s=Rn(),o=r&2;try{Cn(-1),o&&t.length>cn&&Uh(e,t,cn,!1),Pt(o?2:0,i),n(r,i)}finally{Cn(s),Pt(o?3:1,i)}}function zh(e,t,n){if(kd(t)){let r=Me(null);try{let i=t.directiveStart,s=t.directiveEnd;for(let o=i;o<s;o++){let c=e.data[o];if(c.contentQueries){let d=n[o];c.contentQueries(1,d,o)}}}finally{Me(r)}}}function Wh(e,t,n){Wd()&&(ly(e,t,n,It(n,t)),(n.flags&64)===64&&Kh(e,t,n))}function Gh(e,t,n=It){let r=t.localNames;if(r!==null){let i=t.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],c=o===-1?n(t,e):e[o];e[i++]=c}}}function qh(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Tc(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Tc(e,t,n,r,i,s,o,c,d,u,a){let l=cn+r,h=l+i,p=Zv(l,h),g=typeof u=="function"?u():u;return p[we]={type:e,blueprint:p,template:n,queries:null,viewQuery:c,declTNode:t,data:p.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:d,consts:g,incompleteFirstPass:!1,ssrId:a}}function Zv(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:un);return n}function Qv(e,t,n,r){let s=r.get(Sv,Ah)||n===kt.ShadowDom,o=e.selectRootElement(t,s);return Jv(o),o}function Jv(e){ey(e)}var ey=()=>null;function ty(e,t,n,r){let i=Jh(t);i.push(n),e.firstCreatePass&&ef(e).push(r,i.length-1)}function ny(e,t,n,r,i,s){let o=t?t.injectorIndex:-1,c=0;return Tm()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Wu(e,t,n,r,i){for(let s in t){if(!t.hasOwnProperty(s))continue;let o=t[s];if(o===void 0)continue;r??={};let c,d=an.None;Array.isArray(o)?(c=o[0],d=o[1]):c=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}e===0?Gu(r,n,u,c,d):Gu(r,n,u,c)}return r}function Gu(e,t,n,r,i){let s;e.hasOwnProperty(n)?(s=e[n]).push(t,r):s=e[n]=[t,r],i!==void 0&&s.push(i)}function ry(e,t,n){let r=t.directiveStart,i=t.directiveEnd,s=e.data,o=t.attrs,c=[],d=null,u=null;for(let a=r;a<i;a++){let l=s[a],h=n?n.get(l):null,p=h?h.inputs:null,g=h?h.outputs:null;d=Wu(0,l.inputs,a,d,p),u=Wu(1,l.outputs,a,u,g);let f=d!==null&&o!==null&&!sc(t)?yy(d,a,o):null;c.push(f)}d!==null&&(d.hasOwnProperty("class")&&(t.flags|=8),d.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=c,t.inputs=d,t.outputs=u}function iy(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function sy(e,t,n,r,i,s,o,c){let d=It(t,n),u=t.inputs,a;!c&&u!=null&&(a=u[r])?(xc(e,n,a,r,i),Ls(t)&&oy(n,t.index)):t.type&3?(r=iy(r),i=o!=null?o(i,t.value||"",r):i,s.setProperty(d,r,i)):t.type&12}function oy(e,t){let n=xn(t,e);n[he]&16||(n[he]|=64)}function Yh(e,t,n,r){if(Wd()){let i=r===null?null:{"":-1},s=dy(e,n),o,c;s===null?o=c=null:[o,c]=s,o!==null&&Xh(e,t,n,o,i,c),i&&hy(n,r,i)}n.mergedAttrs=ic(n.mergedAttrs,n.attrs)}function Xh(e,t,n,r,i,s){for(let u=0;u<r.length;u++)Jm(ch(n,t),e,r[u].type);py(n,e.data.length,r.length);for(let u=0;u<r.length;u++){let a=r[u];a.providersResolver&&a.providersResolver(a)}let o=!1,c=!1,d=Hh(e,t,r.length,null);for(let u=0;u<r.length;u++){let a=r[u];n.mergedAttrs=ic(n.mergedAttrs,a.hostAttrs),gy(e,n,t,d,a),fy(d,a,i),a.contentQueries!==null&&(n.flags|=4),(a.hostBindings!==null||a.hostAttrs!==null||a.hostVars!==0)&&(n.flags|=64);let l=a.type.prototype;!o&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),o=!0),!c&&(l.ngOnChanges||l.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),c=!0),d++}ry(e,n,s)}function ay(e,t,n,r,i){let s=i.hostBindings;if(s){let o=e.hostBindingOpCodes;o===null&&(o=e.hostBindingOpCodes=[]);let c=~t.index;cy(o)!=c&&o.push(c),o.push(n,r,s)}}function cy(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function ly(e,t,n,r){let i=n.directiveStart,s=n.directiveEnd;Ls(n)&&my(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||ch(n,t),An(r,t);let o=n.initialInputs;for(let c=i;c<s;c++){let d=e.data[c],u=lr(t,e,c,n);if(An(u,t),o!==null&&vy(t,c-i,u,d,n,o),ei(d)){let a=xn(n.index,t);a[St]=lr(t,e,c,n)}}}function Kh(e,t,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=jm();try{Cn(s);for(let c=r;c<i;c++){let d=e.data[c],u=t[c];ya(c),(d.hostBindings!==null||d.hostVars!==0||d.hostAttrs!==null)&&uy(d,u)}}finally{Cn(-1),ya(o)}}function uy(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function dy(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(Xg(t,o.selectors,!1))if(r||(r=[]),ei(o))if(o.findHostDirectiveDefs!==null){let c=[];i=i||new Map,o.findHostDirectiveDefs(o,c,i),r.unshift(...c,o);let d=c.length;Ra(e,t,d)}else r.unshift(o),Ra(e,t,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Ra(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function hy(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let s=n[t[i+1]];if(s==null)throw new de(-301,!1);r.push(t[i],s)}}}function fy(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;ei(t)&&(n[""]=e)}}function py(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function gy(e,t,n,r,i){e.data[r]=i;let s=i.factory||(i.factory=sr(i.type,!0)),o=new Gr(s,ei(i),dn);e.blueprint[r]=o,n[r]=o,ay(e,t,r,Hh(e,n,i.hostVars,un),i)}function my(e,t,n){let r=It(t,e),i=qh(n),s=e[Ot].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let c=Ws(e,$s(e,i,null,o,r,t,null,s.createRenderer(r,n),null,null,null));e[t.index]=c}function vy(e,t,n,r,i,s){let o=s[t];if(o!==null)for(let c=0;c<o.length;){let d=o[c++],u=o[c++],a=o[c++],l=o[c++];Vh(r,n,d,u,a,l)}}function yy(e,t,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(e.hasOwnProperty(s)){r===null&&(r=[]);let o=e[s];for(let c=0;c<o.length;c+=3)if(o[c]===t){r.push(s,o[c+1],o[c+2],n[i+1]);break}}i+=2}return r}function Zh(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function Qh(e,t){let n=e.contentQueries;if(n!==null){let r=Me(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let c=e.data[o];uc(s),c.contentQueries(2,t[o],o)}}}finally{Me(r)}}}function Ws(e,t){return e[Wr]?e[Ru][Ct]=t:e[Wr]=t,e[Ru]=t,t}function Pa(e,t,n){uc(0);let r=Me(null);try{t(e,n)}finally{Me(r)}}function Jh(e){return e[hs]??=[]}function ef(e){return e.cleanup??=[]}function tf(e,t){let n=e[ar],r=n?n.get(Gt,null):null;r&&r.handleError(t)}function xc(e,t,n,r,i){for(let s=0;s<n.length;){let o=n[s++],c=n[s++],d=n[s++],u=t[o],a=e.data[o];Vh(a,u,r,c,d,i)}}function nf(e,t,n){let r=Bd(t,e);Rv(e[tt],r,n)}function by(e,t){let n=xn(t,e),r=n[we];_y(r,n);let i=n[Xt];i!==null&&n[ds]===null&&(n[ds]=Dc(i,n[ar])),Rc(r,n,n[St])}function _y(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Rc(e,t,n){dc(t);try{let r=e.viewQuery;r!==null&&Pa(1,r,n);let i=e.template;i!==null&&$h(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Wt]?.finishViewCreation(e),e.staticContentQueries&&Qh(e,t),e.staticViewQueries&&Pa(2,e.viewQuery,n);let s=e.components;s!==null&&wy(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[he]&=-5,hc()}}function wy(e,t){for(let n=0;n<t.length;n++)by(e,t[n])}function Ey(e,t,n,r){let i=Me(null);try{let s=t.tView,c=e[he]&4096?4096:16,d=$s(e,s,n,c,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=e[t.index];d[wn]=u;let a=e[Wt];return a!==null&&(d[Wt]=a.createEmbeddedView(s)),Rc(s,d,n),d}finally{Me(i)}}function qu(e,t){return!t||t.firstChild===null||_h(e)}function Dy(e,t,n,r=!0){let i=t[we];if(Ov(i,t,e,n),r){let o=xa(n,e),c=t[tt],d=Fh(c,e[En]);d!==null&&Nv(i,e[At],c,t,d,o)}let s=t[ds];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Es(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=t[n.index];s!==null&&r.push(Lt(s)),Kt(s)&&Cy(s,r);let o=n.type;if(o&8)Es(e,t,n.child,r);else if(o&32){let c=Sc(n,t),d;for(;d=c();)r.push(d)}else if(o&16){let c=Lh(t,n);if(Array.isArray(c))r.push(...c);else{let d=Dn(t[Ft]);Es(d[we],d,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function Cy(e,t){for(let n=lt;n<e.length;n++){let r=e[n],i=r[we].firstChild;i!==null&&Es(r[we],r,i,t)}e[En]!==e[Xt]&&t.push(e[En])}var rf=[];function Sy(e){return e[pt]??Ay(e)}function Ay(e){let t=rf.pop()??Object.create(My);return t.lView=e,t}function Iy(e){e.lView[pt]!==e&&(e.lView=null,rf.push(e))}var My=ke(ce({},Io),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Us(e.lView)},consumerOnSignalRead(){this.lView[pt]=this}});function Ty(e){let t=e[pt]??Object.create(xy);return t.lView=e,t}var xy=ke(ce({},Io),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=Dn(e.lView);for(;t&&!sf(t[we]);)t=Dn(t);t&&Hd(t)},consumerOnSignalRead(){this.lView[pt]=this}});function sf(e){return e.type!==2}var Ry=100;function of(e,t=!0,n=0){let r=e[Ot],i=r.rendererFactory,s=!1;s||i.begin?.();try{Py(e,n)}catch(o){throw t&&tf(e,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function Py(e,t){let n=Yd();try{Nu(!0),Na(e,t);let r=0;for(;Bs(e);){if(r===Ry)throw new de(103,!1);r++,Na(e,1)}}finally{Nu(n)}}function Ny(e,t,n,r){let i=t[he];if((i&256)===256)return;let s=!1,o=!1;!s&&t[Ot].inlineEffectRunner?.flush(),dc(t);let c=!0,d=null,u=null;s||(sf(e)?(u=Sy(t),d=Mo(u)):zl()===null?(c=!1,u=Ty(t),d=Mo(u)):t[pt]&&(xo(t[pt]),t[pt]=null));try{Vd(t),Om(e.bindingStartIndex),n!==null&&$h(e,t,n,2,r);let a=(i&3)===3;if(!s)if(a){let p=e.preOrderCheckHooks;p!==null&&ns(t,p,null)}else{let p=e.preOrderHooks;p!==null&&rs(t,p,0,null),Jo(t,0)}if(o||ky(t),af(t,0),e.contentQueries!==null&&Qh(e,t),!s)if(a){let p=e.contentCheckHooks;p!==null&&ns(t,p)}else{let p=e.contentHooks;p!==null&&rs(t,p,1),Jo(t,1)}Xv(e,t);let l=e.components;l!==null&&lf(t,l,0);let h=e.viewQuery;if(h!==null&&Pa(2,h,r),!s)if(a){let p=e.viewCheckHooks;p!==null&&ns(t,p)}else{let p=e.viewHooks;p!==null&&rs(t,p,2),Jo(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Qo]){for(let p of t[Qo])p();t[Qo]=null}s||(t[he]&=-73)}catch(a){throw s||Us(t),a}finally{u!==null&&(Wl(u,d),c&&Iy(u)),hc()}}function af(e,t){for(let n=Eh(e);n!==null;n=Dh(n))for(let r=lt;r<n.length;r++){let i=n[r];cf(i,t)}}function ky(e){for(let t=Eh(e);t!==null;t=Dh(t)){if(!(t[he]&ps.HasTransplantedViews))continue;let n=t[cr];for(let r=0;r<n.length;r++){let i=n[r];Hd(i)}}}function Oy(e,t,n){let r=xn(t,e);cf(r,n)}function cf(e,t){lc(e)&&Na(e,t)}function Na(e,t){let r=e[we],i=e[he],s=e[pt],o=!!(t===0&&i&16);if(o||=!!(i&64&&t===0),o||=!!(i&1024),o||=!!(s?.dirty&&To(s)),o||=!1,s&&(s.dirty=!1),e[he]&=-9217,o)Ny(r,e,r.template,e[St]);else if(i&8192){af(e,1);let c=r.components;c!==null&&lf(e,c,1)}}function lf(e,t,n){for(let r=0;r<t.length;r++)Oy(e,t[r],n)}function Pc(e,t){let n=Yd()?64:1088;for(e[Ot].changeDetectionScheduler?.notify(t);e;){e[he]|=n;let r=Dn(e);if(ga(e)&&!r)return e;e=r}return null}var In=class{get rootNodes(){let t=this._lView,n=t[we];return Es(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[St]}set context(t){this._lView[St]=t}get destroyed(){return(this._lView[he]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Ke];if(Kt(t)){let n=t[fs],r=n?n.indexOf(this):-1;r>-1&&(Ta(t,r),ls(n,r))}this._attachedToViewContainer=!1}kh(this._lView[we],this._lView)}onDestroy(t){$d(this._lView,t)}markForCheck(){Pc(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[he]&=-129}reattach(){va(this._lView),this._lView[he]|=128}detectChanges(){this._lView[he]|=1024,of(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=ga(this._lView),n=this._lView[wn];n!==null&&!t&&Ac(n,this._lView),Ph(this._lView[we],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=t;let n=ga(this._lView),r=this._lView[wn];r!==null&&!n&&Nh(r,this._lView),va(this._lView)}},Mn=(()=>{class e{static{this.__NG_ELEMENT_ID__=jy}}return e})(),Fy=Mn,Ly=class extends Fy{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=Ey(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new In(i)}};function jy(){return Nc(Mt(),Oe())}function Nc(e,t){return e.type&4?new Ly(t,e,yr(e,t)):null}var LI=new RegExp(`^(\\d+)*(${Dv}|${Ev})*(.*)`);var By=()=>null;function Yu(e,t){return By(e,t)}var ur=class{},Gs=new be("",{providedIn:"root",factory:()=>!1});var uf=new be(""),df=new be(""),ka=class{},Ds=class{};function Uy(e){let t=Error(`No component factory found for ${et(e)}.`);return t[Vy]=e,t}var Vy="ngComponent";var Oa=class{resolveComponentFactory(t){throw Uy(t)}},dr=class{static{this.NULL=new Oa}},hr=class{};var Hy=(()=>{class e{static{this.\u0275prov=pe({token:e,providedIn:"root",factory:()=>null})}}return e})();function Fa(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(t!==null)for(let o=0;o<t.length;o++){let c=t[o];if(typeof c=="number")s=c;else if(s==1)i=wu(i,c);else if(s==2){let d=c,u=t[++o];r=wu(r,d+": "+u+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var Cs=class extends dr{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=_n(t);return new qr(n,this.ngModule)}};function Xu(e,t){let n=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let i=e[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,c=s?i[1]:an.None;t?n.push({propName:o,templateName:r,isSignal:(c&an.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function $y(e){let t=e.toLowerCase();return t==="svg"?_m:t==="math"?wm:null}var qr=class extends Ds{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=Xu(t.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Xu(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=Jg(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let s=Me(null);try{i=i||this.ngModule;let o=i instanceof gt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let c=o?new ba(t,o):t,d=c.get(hr,null);if(d===null)throw new de(407,!1);let u=c.get(Hy,null),a=c.get(ur,null),l={rendererFactory:d,sanitizer:u,inlineEffectRunner:null,changeDetectionScheduler:a},h=d.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",g=r?Qv(h,r,this.componentDef.encapsulation,c):Rh(h,p,$y(p)),f=512;this.componentDef.signals?f|=4096:this.componentDef.onPush||(f|=16);let v=null;g!==null&&(v=Dc(g,c,!0));let y=Tc(0,null,null,1,0,null,null,null,null,null,null),E=$s(null,y,null,f,null,null,l,h,c,null,v);dc(E);let T,M,w=null;try{let C=this.componentDef,L,U=null;C.findHostDirectiveDefs?(L=[],U=new Map,C.findHostDirectiveDefs(C,L,U),L.push(C)):L=[C];let F=zy(E,g);w=Wy(F,g,C,L,E,l,h),M=Ud(y,cn),g&&Yy(h,C,g,r),n!==void 0&&Xy(M,this.ngContentSelectors,n),T=qy(w,C,L,U,E,[Ky]),Rc(y,E,null)}catch(C){throw w!==null&&Ia(w),Ia(E),C}finally{hc()}return new La(this.componentType,T,yr(M,E),E,M)}finally{Me(s)}}},La=class extends ka{constructor(t,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new In(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let s=this._rootLView;xc(s[we],s,i,t,n),this.previousInputValues.set(t,n);let o=xn(this._tNode.index,s);Pc(o,1)}}get injector(){return new bn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function zy(e,t){let n=e[we],r=cn;return e[r]=t,zs(n,r,2,"#host",null)}function Wy(e,t,n,r,i,s,o){let c=i[we];Gy(r,e,t,o);let d=null;t!==null&&(d=Dc(t,i[ar]));let u=s.rendererFactory.createRenderer(t,n),a=16;n.signals?a=4096:n.onPush&&(a=64);let l=$s(i,qh(n),null,a,i[e.index],e,s,u,null,null,d);return c.firstCreatePass&&Ra(c,e,r.length-1),Ws(i,l),i[e.index]=l}function Gy(e,t,n,r){for(let i of e)t.mergedAttrs=ic(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(Fa(t,t.mergedAttrs,!0),n!==null&&Bh(r,n,t))}function qy(e,t,n,r,i,s){let o=Mt(),c=i[we],d=It(o,i);Xh(c,i,o,n,null,r);for(let a=0;a<n.length;a++){let l=o.directiveStart+a,h=lr(i,c,l,o);An(h,i)}Kh(c,i,o),d&&An(d,i);let u=lr(i,c,o.directiveStart+o.componentOffset,o);if(e[St]=i[St]=u,s!==null)for(let a of s)a(u,t);return zh(c,o,i),u}function Yy(e,t,n,r){if(r)ua(e,n,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=em(t.selectors[0]);i&&ua(e,n,i),s&&s.length>0&&jh(e,n,s.join(" "))}}function Xy(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function Ky(){let e=Mt();gc(Oe()[we],e)}var hn=(()=>{class e{static{this.__NG_ELEMENT_ID__=Zy}}return e})();function Zy(){let e=Mt();return ff(e,Oe())}var Qy=hn,hf=class extends Qy{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return yr(this._hostTNode,this._hostLView)}get injector(){return new bn(this._hostTNode,this._hostLView)}get parentInjector(){let t=mc(this._hostTNode,this._hostLView);if(sh(t)){let n=vs(t,this._hostLView),r=ms(t),i=n[we].data[r+8];return new bn(i,n)}else return new bn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Ku(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-lt}createEmbeddedView(t,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Yu(this._lContainer,t.ssrId),c=t.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(c,i,qu(this._hostTNode,o)),c}createComponent(t,n,r,i,s){let o=t&&!mm(t),c;if(o)c=n;else{let g=n||{};c=g.index,r=g.injector,i=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}let d=o?t:new qr(_n(t)),u=r||this.parentInjector;if(!s&&d.ngModule==null){let f=(o?u:this.parentInjector).get(gt,null);f&&(s=f)}let a=_n(d.componentType??{}),l=Yu(this._lContainer,a?.id??null),h=l?.firstChild??null,p=d.create(u,i,h,s);return this.insertImpl(p.hostView,c,qu(this._hostTNode,l)),p}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(Dm(i)){let c=this.indexOf(t);if(c!==-1)this.detach(c);else{let d=i[Ke],u=new hf(d,d[At],d[Ke]);u.detach(u.indexOf(t))}}let s=this._adjustIndex(n),o=this._lContainer;return Dy(o,i,s,r),t.attachToViewContainerRef(),yd(ia(o),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Ku(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Ta(this._lContainer,n);r&&(ls(ia(this._lContainer),n),kh(r[we],r))}detach(t){let n=this._adjustIndex(t,-1),r=Ta(this._lContainer,n);return r&&ls(ia(this._lContainer),n)!=null?new In(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Ku(e){return e[fs]}function ia(e){return e[fs]||(e[fs]=[])}function ff(e,t){let n,r=t[e.index];return Kt(r)?n=r:(n=Zh(r,t,null,e),t[e.index]=n,Ws(t,n)),eb(n,t,e,r),new hf(n,e,t)}function Jy(e,t){let n=e[tt],r=n.createComment(""),i=It(t,e),s=Fh(n,i);return ws(n,s,r,Uv(n,i),!1),r}var eb=rb,tb=()=>!1;function nb(e,t,n){return tb(e,t,n)}function rb(e,t,n,r){if(e[En])return;let i;n.type&8?i=Lt(r):i=Jy(t,n),e[En]=i}var ja=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},Ba=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),c=this.queries[o.indexInDeclarationView];i.push(c.clone())}return new e(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)kc(t,n).matches!==null&&this.queries[n].setDirty()}},Ua=class{constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=db(t):this.predicate=t}},Va=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(t,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},Ha=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(t,n,ib(n,s)),this.matchTNodeWithReadOption(t,n,is(n,t,s,!1,!1))}else r===Mn?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,is(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Pn||i===hn||i===Mn&&n.type&4)this.addMatch(n.index,-2);else{let s=is(n,t,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function ib(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function sb(e,t){return e.type&11?yr(e,t):e.type&4?Nc(e,t):null}function ob(e,t,n,r){return n===-1?sb(t,e):n===-2?ab(e,t,r):lr(e,e[we],n,t)}function ab(e,t,n){if(n===Pn)return yr(t,e);if(n===Mn)return Nc(t,e);if(n===hn)return ff(t,e)}function pf(e,t,n,r){let i=t[Wt].queries[r];if(i.matches===null){let s=e.data,o=n.matches,c=[];for(let d=0;o!==null&&d<o.length;d+=2){let u=o[d];if(u<0)c.push(null);else{let a=s[u];c.push(ob(t,a,o[d+1],n.metadata.read))}}i.matches=c}return i.matches}function $a(e,t,n,r){let i=e.queries.getByIndex(n),s=i.matches;if(s!==null){let o=pf(e,t,i,n);for(let c=0;c<s.length;c+=2){let d=s[c];if(d>0)r.push(o[c/2]);else{let u=s[c+1],a=t[-d];for(let l=lt;l<a.length;l++){let h=a[l];h[wn]===h[Ke]&&$a(h[we],h,u,r)}if(a[cr]!==null){let l=a[cr];for(let h=0;h<l.length;h++){let p=l[h];$a(p[we],p,u,r)}}}}}return r}function cb(e,t){return e[Wt].queries[t].queryList}function lb(e,t,n){let r=new Aa((n&4)===4);return ty(e,t,r,r.destroy),(t[Wt]??=new Ba).queries.push(new ja(r))-1}function ub(e,t,n){let r=jt();return r.firstCreatePass&&(hb(r,new Ua(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),lb(r,Oe(),t)}function db(e){return e.split(",").map(t=>t.trim())}function hb(e,t,n){e.queries===null&&(e.queries=new Va),e.queries.track(new Ha(t,n))}function kc(e,t){return e.queries.getByIndex(t)}function fb(e,t){let n=e[we],r=kc(n,t);return r.crossesNgTemplate?$a(n,e,t,[]):pf(n,e,r,t)}var Zu=new Set;function Oc(e){Zu.has(e)||(Zu.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var ln=class{},Yr=class{};var za=class extends ln{constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Cs(this);let s=Ad(t);this._bootstrapComponents=xh(s.bootstrap),this._r3Injector=gh(t,n,[{provide:ln,useValue:this},{provide:dr,useValue:this.componentFactoryResolver},...r],et(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Wa=class extends Yr{constructor(t){super(),this.moduleType=t}create(t){return new za(this.moduleType,t,[])}};var Ss=class extends ln{constructor(t){super(),this.componentFactoryResolver=new Cs(this),this.instance=null;let n=new zr([...t.providers,{provide:ln,useValue:this},{provide:dr,useValue:this.componentFactoryResolver}],t.parent||ac(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Fc(e,t,n=null){return new Ss({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}function gf(e){return gb(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function pb(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function gb(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function Xr(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function mb(e,t,n,r){let i=Xr(e,t,n);return Xr(e,t+1,r)||i}function vb(e){return(e.flags&32)===32}function yb(e,t,n,r,i,s,o,c,d){let u=t.consts,a=zs(t,e,4,o||null,c||null);Yh(t,n,a,gs(u,d)),gc(t,a);let l=a.tView=Tc(2,a,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u,null);return t.queries!==null&&(t.queries.template(t,a),l.queries=t.queries.embeddedTView(a)),a}function bb(e,t,n,r,i,s,o,c,d,u){let a=n+cn,l=t.firstCreatePass?yb(a,t,e,r,i,s,o,c,d):t.data[a];ti(l,!1);let h=_b(t,e,l,n);fc()&&Ic(t,e,h,l),An(h,e);let p=Zh(h,e,h,l);return e[a]=p,Ws(e,p),nb(p,l,e),cc(l)&&Wh(t,e,l),d!=null&&Gh(e,l,u),l}function _r(e,t,n,r,i,s,o,c){let d=Oe(),u=jt(),a=gs(u.consts,s);return bb(d,u,e,t,n,r,i,a,o,c),_r}var _b=wb;function wb(e,t,n,r){return pc(!0),t[tt].createComment("")}var Br=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(Br||{}),Eb=(()=>{class e{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=pe({token:e,providedIn:"root",factory:()=>new e})}}return e})(),Qu=class e{constructor(){this.ngZone=oe(Le),this.scheduler=oe(ur),this.errorHandler=oe(Gt,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Br.EarlyRead,Br.Write,Br.MixedReadWrite,Br.Read]}execute(){this.executing=!0;for(let t of e.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[t]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[t](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(6))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}static{this.\u0275prov=pe({token:e,providedIn:"root",factory:()=>new e})}};function Db(e,t,n,r){return Xr(e,Xd(),n)?t+Vr(n)+r:un}function Cb(e,t,n,r,i,s){let o=km(),c=mb(e,o,n,i);return Kd(2),c?t+Vr(n)+r+Vr(i)+s:un}function Ji(e,t){return e<<17|t<<2}function Tn(e){return e>>17&32767}function Sb(e){return(e&2)==2}function Ab(e,t){return e&131071|t<<17}function Ga(e){return e|2}function fr(e){return(e&131068)>>2}function sa(e,t){return e&-131069|t<<2}function Ib(e){return(e&1)===1}function qa(e){return e|1}function Mb(e,t,n,r,i,s){let o=s?t.classBindings:t.styleBindings,c=Tn(o),d=fr(o);e[r]=n;let u=!1,a;if(Array.isArray(n)){let l=n;a=l[1],(a===null||Qr(l,a)>0)&&(u=!0)}else a=n;if(i)if(d!==0){let h=Tn(e[c+1]);e[r+1]=Ji(h,c),h!==0&&(e[h+1]=sa(e[h+1],r)),e[c+1]=Ab(e[c+1],r)}else e[r+1]=Ji(c,0),c!==0&&(e[c+1]=sa(e[c+1],r)),c=r;else e[r+1]=Ji(d,0),c===0?c=r:e[d+1]=sa(e[d+1],r),d=r;u&&(e[r+1]=Ga(e[r+1])),Ju(e,a,r,!0),Ju(e,a,r,!1),Tb(t,a,e,r,s),o=Ji(c,d),s?t.classBindings=o:t.styleBindings=o}function Tb(e,t,n,r,i){let s=i?e.residualClasses:e.residualStyles;s!=null&&typeof t=="string"&&Qr(s,t)>=0&&(n[r+1]=qa(n[r+1]))}function Ju(e,t,n,r){let i=e[n+1],s=t===null,o=r?Tn(i):fr(i),c=!1;for(;o!==0&&(c===!1||s);){let d=e[o],u=e[o+1];xb(d,t)&&(c=!0,e[o+1]=r?qa(u):Ga(u)),o=r?Tn(u):fr(u)}c&&(e[n+1]=r?Ga(i):qa(i))}function xb(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Qr(e,t)>=0:!1}function mt(e,t,n){let r=Oe(),i=Xd();if(Xr(r,i,t)){let s=jt(),o=Hm();sy(s,o,r,e,t,r[tt],n,!1)}return mt}function ed(e,t,n,r,i){let s=t.inputs,o=i?"class":"style";xc(e,n,s[o],o,r)}function ni(e,t,n){return Rb(e,t,n,!1),ni}function Rb(e,t,n,r){let i=Oe(),s=jt(),o=Kd(2);if(s.firstUpdatePass&&Nb(s,e,o,r),t!==un&&Xr(i,o,t)){let c=s.data[Rn()];jb(s,c,i,i[tt],e,i[o+1]=Bb(t,n),r,o)}}function Pb(e,t){return t>=e.expandoStartIndex}function Nb(e,t,n,r){let i=e.data;if(i[n+1]===null){let s=i[Rn()],o=Pb(e,n);Ub(s,r)&&t===null&&!o&&(t=!1),t=kb(i,s,t,r),Mb(i,s,t,n,o,r)}}function kb(e,t,n,r){let i=Bm(e),s=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=oa(null,e,t,n,r),n=Kr(n,t.attrs,r),s=null);else{let o=t.directiveStylingLast;if(o===-1||e[o]!==i)if(n=oa(i,e,t,n,r),s===null){let d=Ob(e,t,r);d!==void 0&&Array.isArray(d)&&(d=oa(null,e,t,d[1],r),d=Kr(d,t.attrs,r),Fb(e,t,r,d))}else s=Lb(e,t,r)}return s!==void 0&&(r?t.residualClasses=s:t.residualStyles=s),n}function Ob(e,t,n){let r=n?t.classBindings:t.styleBindings;if(fr(r)!==0)return e[Tn(r)]}function Fb(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[Tn(i)]=r}function Lb(e,t,n){let r,i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++){let o=e[s].hostAttrs;r=Kr(r,o,n)}return Kr(r,t.attrs,n)}function oa(e,t,n,r,i){let s=null,o=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<o&&(s=t[c],r=Kr(r,s.hostAttrs,i),s!==e);)c++;return e!==null&&(n.directiveStylingLast=c),r}function Kr(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let s=0;s<t.length;s++){let o=t[s];typeof o=="number"?i=o:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Ug(e,o,n?!0:t[++s]))}return e===void 0?null:e}function jb(e,t,n,r,i,s,o,c){if(!(t.type&3))return;let d=e.data,u=d[c+1],a=Ib(u)?td(d,t,n,i,fr(u),o):void 0;if(!As(a)){As(s)||Sb(u)&&(s=td(d,null,n,i,c,o));let l=Bd(Rn(),n);qv(r,o,l,i,s)}}function td(e,t,n,r,i,s){let o=t===null,c;for(;i>0;){let d=e[i],u=Array.isArray(d),a=u?d[1]:d,l=a===null,h=n[i+1];h===un&&(h=l?Dt:void 0);let p=l?Ko(h,r):a===r?h:void 0;if(u&&!As(p)&&(p=Ko(d,r)),As(p)&&(c=p,o))return c;let g=e[i+1];i=o?Tn(g):fr(g)}if(t!==null){let d=s?t.residualClasses:t.residualStyles;d!=null&&(c=Ko(d,r))}return c}function As(e){return e!==void 0}function Bb(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=et(Vs(e)))),e}function Ub(e,t){return(e.flags&(t?8:16))!==0}function Vb(e,t,n,r,i,s){let o=t.consts,c=gs(o,i),d=zs(t,e,2,r,c);return Yh(t,n,d,gs(o,s)),d.attrs!==null&&Fa(d,d.attrs,!1),d.mergedAttrs!==null&&Fa(d,d.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,d),d}function qe(e,t,n,r){let i=Oe(),s=jt(),o=cn+e,c=i[tt],d=s.firstCreatePass?Vb(o,s,i,t,n,r):s.data[o],u=Hb(s,i,d,c,t,e);i[o]=u;let a=cc(d);return ti(d,!0),Bh(c,u,d),!vb(d)&&fc()&&Ic(s,i,u,d),Am()===0&&An(u,i),Im(),a&&(Wh(s,i,d),zh(s,d,i)),r!==null&&Gh(i,d),qe}function He(){let e=Mt();qd()?Nm():(e=e.parent,ti(e,!1));let t=e;xm(t)&&Rm(),Mm();let n=jt();return n.firstCreatePass&&(gc(n,e),kd(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&qm(t)&&ed(n,t,Oe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Ym(t)&&ed(n,t,Oe(),t.stylesWithoutHost,!1),He}function wr(e,t,n,r){return qe(e,t,n,r),He(),wr}var Hb=(e,t,n,r,i,s)=>(pc(!0),Rh(r,i,$m()));function mf(){return Oe()}var Is="en-US";var $b=Is;function zb(e){typeof e=="string"&&($b=e.toLowerCase().replace(/_/g,"-"))}var Wb=(e,t,n)=>{};function Bt(e,t,n,r){let i=Oe(),s=jt(),o=Mt();return qb(s,i,i[tt],o,e,t,r),Bt}function Gb(e,t,n,r){let i=e.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let c=t[hs],d=i[s+2];return c.length>d?c[d]:null}typeof o=="string"&&(s+=2)}return null}function qb(e,t,n,r,i,s,o){let c=cc(r),u=e.firstCreatePass&&ef(e),a=t[St],l=Jh(t),h=!0;if(r.type&3||o){let f=It(r,t),v=o?o(f):f,y=l.length,E=o?M=>o(Lt(M[r.index])):r.index,T=null;if(!o&&c&&(T=Gb(e,t,i,r.index)),T!==null){let M=T.__ngLastListenerFn__||T;M.__ngNextListenerFn__=s,T.__ngLastListenerFn__=s,h=!1}else{s=rd(r,t,a,s),Wb(f,i,s);let M=n.listen(v,i,s);l.push(s,M),u&&u.push(i,E,y,y+1)}}else s=rd(r,t,a,s);let p=r.outputs,g;if(h&&p!==null&&(g=p[i])){let f=g.length;if(f)for(let v=0;v<f;v+=2){let y=g[v],E=g[v+1],w=t[y][E].subscribe(s),C=l.length;l.push(s,w),u&&u.push(i,r.index,C,-(C+1))}}}function nd(e,t,n,r){let i=Me(null);try{return Pt(6,t,n),n(r)!==!1}catch(s){return tf(e,s),!1}finally{Pt(7,t,n),Me(i)}}function rd(e,t,n,r){return function i(s){if(s===Function)return r;let o=e.componentOffset>-1?xn(e.index,t):t;Pc(o,5);let c=nd(t,n,r,s),d=i.__ngNextListenerFn__;for(;d;)c=nd(t,n,d,s)&&c,d=d.__ngNextListenerFn__;return c}}function Ut(e=1){return Vm(e)}function vf(e,t,n){ub(e,t,n)}function Lc(e){let t=Oe(),n=jt(),r=Zd();uc(r+1);let i=kc(n,r);if(e.dirty&&Em(t)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let s=fb(t,r);e.reset(s,gv),e.notifyOnChanges()}return!0}return!1}function jc(){return cb(Oe(),Zd())}function Tt(e,t=""){let n=Oe(),r=jt(),i=e+cn,s=r.firstCreatePass?zs(r,i,1,t,null):r.data[i],o=Yb(r,n,s,t,e);n[i]=o,fc()&&Ic(r,n,o,s),ti(s,!1)}var Yb=(e,t,n,r,i)=>(pc(!0),xv(t[tt],r));function Bc(e,t,n){let r=Oe(),i=Db(r,e,t,n);return i!==un&&nf(r,Rn(),i),Bc}function Uc(e,t,n,r,i){let s=Oe(),o=Cb(s,e,t,n,r,i);return o!==un&&nf(s,Rn(),o),Uc}var Xb=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Td(!1,n.type),i=r.length>0?Fc([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=pe({token:e,providedIn:"environment",factory:()=>new e(Se(gt))})}}return e})();function qs(e){Oc("NgStandalone"),e.getStandaloneInjector=t=>t.get(Xb).getOrCreateStandaloneInjector(e)}var Ys=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var yf=new be("");function ri(e){return!!e&&typeof e.then=="function"}function bf(e){return!!e&&typeof e.subscribe=="function"}var _f=new be(""),wf=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=oe(_f,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(ri(s))n.push(s);else if(bf(s)){let o=new Promise((c,d)=>{s.subscribe({complete:c,error:d})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Vc=new be("");function Kb(){Gl(()=>{throw new de(600,!1)})}function Zb(e){return e.isBoundToModule}var Qb=10;function Jb(e,t,n){try{let r=n();return ri(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var Nn=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=oe(fv),this.afterRenderManager=oe(Eb),this.zonelessEnabled=oe(Gs),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Je,this.afterTick=new Je,this.componentTypes=[],this.components=[],this.isStable=oe(vr).hasPendingTasks.pipe(Ce(n=>!n)),this._injector=oe(gt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Ds;if(!this._injector.get(wf).done){let h=!i&&Sd(n),p=!1;throw new de(405,p)}let o;i?o=n:o=this._injector.get(dr).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let c=Zb(o)?void 0:this._injector.get(ln),d=r||o.selector,u=o.create(Sn.NULL,[],d,c),a=u.location.nativeElement,l=u.injector.get(yf,null);return l?.registerApplication(a),u.onDestroy(()=>{this.detachView(u.hostView),ss(this.components,u),l?.unregisterApplication(a)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new de(101,!1);let n=Me(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Me(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(hr,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<Qb;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)e0(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Bs(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ss(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(Vc,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ss(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new de(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function ss(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function e0(e,t,n,r){if(!n&&!Bs(e))return;of(e,t,n&&!r?0:1)}var Ya=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Hc=(()=>{class e{compileModuleSync(n){return new Wa(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Ad(n),s=xh(i.declarations).reduce((o,c)=>{let d=_n(c);return d&&o.push(new qr(d)),o},[]);return new Ya(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var t0=(()=>{class e{constructor(){this.zone=oe(Le),this.changeDetectionScheduler=oe(ur),this.applicationRef=oe(Nn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),n0=new be("",{factory:()=>!1});function Ef({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new Le(ke(ce({},Cf()),{scheduleInRootZone:n})),[{provide:Le,useFactory:e},{provide:or,multi:!0,useFactory:()=>{let r=oe(t0,{optional:!0});return()=>r.initialize()}},{provide:or,multi:!0,useFactory:()=>{let r=oe(r0);return()=>{r.initialize()}}},t===!0?{provide:uf,useValue:!0}:[],{provide:df,useValue:n??mh}]}function Df(e){let t=e?.ignoreChangesOutsideZone,n=e?.scheduleInRootZone,r=Ef({ngZoneFactory:()=>{let i=Cf(e);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Oc("NgZone_CoalesceEvent"),new Le(i)},ignoreChangesOutsideZone:t,scheduleInRootZone:n});return ks([{provide:n0,useValue:!0},{provide:Gs,useValue:!1},r])}function Cf(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var r0=(()=>{class e{constructor(){this.subscription=new Fe,this.initialized=!1,this.zone=oe(Le),this.pendingTasks=oe(vr)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Le.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Le.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var i0=(()=>{class e{constructor(){this.appRef=oe(Nn),this.taskService=oe(vr),this.ngZone=oe(Le),this.zonelessEnabled=oe(Gs),this.disableScheduling=oe(uf,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Fe,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(bs):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(oe(df,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Sa||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Bu:yh;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(bs+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Bu(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function s0(){return typeof $localize<"u"&&$localize.locale||Is}var $c=new be("",{providedIn:"root",factory:()=>oe($c,_e.Optional|_e.SkipSelf)||s0()});var Xa=new be("");function es(e){return!e.moduleRef}function o0(e){let t=es(e)?e.r3Injector:e.moduleRef.injector,n=t.get(Le);return n.run(()=>{es(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(Gt,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),es(e)){let s=()=>t.destroy(),o=e.platformInjector.get(Xa);o.add(s),t.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>e.moduleRef.destroy(),o=e.platformInjector.get(Xa);o.add(s),e.moduleRef.onDestroy(()=>{ss(e.allPlatformModules,e.moduleRef),i.unsubscribe(),o.delete(s)})}return Jb(r,n,()=>{let s=t.get(wf);return s.runInitializers(),s.donePromise.then(()=>{let o=t.get($c,Is);if(zb(o||Is),es(e)){let c=t.get(Nn);return e.rootComponent!==void 0&&c.bootstrap(e.rootComponent),c}else return a0(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function a0(e,t){let n=e.injector.get(Nn);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new de(-403,!1);t.push(e)}var os=null;function c0(e=[],t){return Sn.create({name:t,providers:[{provide:Os,useValue:"platform"},{provide:Xa,useValue:new Set([()=>os=null])},...e]})}function l0(e=[]){if(os)return os;let t=c0(e);return os=t,Kb(),u0(t),t}function u0(e){e.get(wc,null)?.forEach(n=>n())}var ii=(()=>{class e{static{this.__NG_ELEMENT_ID__=d0}}return e})();function d0(e){return h0(Mt(),Oe(),(e&16)===16)}function h0(e,t,n){if(Ls(e)&&!n){let r=xn(e.index,t);return new In(r,r)}else if(e.type&175){let r=t[Ft];return new In(r,t)}return null}var Ka=class{constructor(){}supports(t){return gf(t)}create(t){return new Za(t)}},f0=(e,t)=>t,Za=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||f0}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<id(r,i,s)?n:r,c=id(o,i,s),d=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let u=c-i,a=d-i;if(u!=a){for(let h=0;h<u;h++){let p=h<s.length?s[h]:s[h]=0,g=p+h;a<=g&&g<u&&(s[h]=p+1)}let l=o.previousIndex;s[l]=a-u}}c!==d&&t(o,c,d)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!gf(t))throw new de(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(t)){this.length=t.length;for(let c=0;c<this.length;c++)s=t[c],o=this._trackByFn(c,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,c),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,c)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,pb(t,c=>{o=this._trackByFn(i,c),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,c,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,c,o,i)),Object.is(n.item,c)||this._addIdentityChange(n,c)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let s;return t===null?s=this._itTail:(s=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,s,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,s,i)):t=this._addAfter(new Qa(n,r),s,i)),t}_verifyReinsertion(t,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?t=this._reinsertAfter(s,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,s=t._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Ms),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ms),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Qa=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Ja=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Ms=class{constructor(){this.map=new Map}put(t){let n=t.trackById,r=this.map.get(n);r||(r=new Ja,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function id(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function sd(){return new zc([new Ka])}var zc=(()=>{class e{static{this.\u0275prov=pe({token:e,providedIn:"root",factory:sd})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||sd()),deps:[[e,new vd,new nc]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new de(901,!1)}}return e})();function Sf(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,i=l0(r),s=[Ef({}),{provide:ur,useExisting:i0},...n||[]],o=new Ss({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return o0({r3Injector:o.injector,platformInjector:i,rootComponent:t})}catch(t){return Promise.reject(t)}}var Pf=null;function Er(){return Pf}function Nf(e){Pf??=e}var Ks=class{};var vt=new be(""),kf=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>oe(v0),providedIn:"platform"})}}return e})();var v0=(()=>{class e extends kf{constructor(){super(),this._doc=oe(vt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Er().getBaseHref(this._doc)}onPopState(n){let r=Er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function Of(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function Af(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function kn(e){return e&&e[0]!=="?"?"?"+e:e}var Qs=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>oe(Ff),providedIn:"root"})}}return e})(),y0=new be(""),Ff=(()=>{class e extends Qs{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??oe(vt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Of(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+kn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+kn(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+kn(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(Se(kf),Se(y0,8))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var si=(()=>{class e{constructor(n){this._subject=new Xe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=w0(Af(If(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+kn(r))}normalize(n){return e.stripTrailingSlash(_0(this._basePath,If(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+kn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+kn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=kn}static{this.joinWithSlash=Of}static{this.stripTrailingSlash=Af}static{this.\u0275fac=function(r){return new(r||e)(Se(Qs))}}static{this.\u0275prov=pe({token:e,factory:()=>b0(),providedIn:"root"})}}return e})();function b0(){return new si(Se(Qs))}function _0(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function If(e){return e.replace(/\/index.html$/,"")}function w0(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function Lf(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}var Wc=class{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},jf=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Wc(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let c=r.get(s);r.move(c,o),Mf(c,i)}});for(let i=0,s=r.length;i<s;i++){let c=r.get(i).context;c.index=i,c.count=s,c.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);Mf(s,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(dn(hn),dn(Mn),dn(zc))}}static{this.\u0275dir=Jr({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return e})();function Mf(e,t){e.context.$implicit=t.item}var Bf=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new Gc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Tf("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Tf("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(dn(hn),dn(Mn))}}static{this.\u0275dir=Jr({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})(),Gc=class{constructor(){this.$implicit=null,this.ngIf=null}};function Tf(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${et(t)}'.`)}var qc=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ns({type:e})}static{this.\u0275inj=Ts({})}}return e})(),Uf="browser",E0="server";function Yc(e){return e===E0}var Zs=class{};var Zc=class extends Ks{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Qc=class e extends Zc{static makeCurrent(){Nf(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=C0();return n==null?null:S0(n)}resetBaseElement(){oi=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Lf(document.cookie,t)}},oi=null;function C0(){return oi=oi||document.querySelector("base"),oi?oi.getAttribute("href"):null}function S0(e){return new URL(e,document.baseURI).pathname}var A0=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})(),Jc=new be(""),zf=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new de(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||e)(Se(Jc),Se(Le))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})(),Js=class{constructor(t){this._doc=t}},Xc="ng-app-id",Wf=(()=>{class e{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Yc(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Xc}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Xc),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Xc,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(Se(vt),Se(_c),Se(Ec,8),Se(br))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})(),Kc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},tl=/%COMP%/g,Gf="%COMP%",I0=`_nghost-${Gf}`,M0=`_ngcontent-${Gf}`,T0=!0,x0=new be("",{providedIn:"root",factory:()=>T0});function R0(e){return M0.replace(tl,e)}function P0(e){return I0.replace(tl,e)}function qf(e,t){return t.map(n=>n.replace(tl,e))}var Vf=(()=>{class e{constructor(n,r,i,s,o,c,d,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=d,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Yc(c),this.defaultRenderer=new ai(n,o,d,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===kt.ShadowDom&&(r=ke(ce({},r),{encapsulation:kt.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof eo?i.applyToHost(n):i instanceof ci&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,c=this.ngZone,d=this.eventManager,u=this.sharedStylesHost,a=this.removeStylesOnCompDestroy,l=this.platformIsServer;switch(r.encapsulation){case kt.Emulated:s=new eo(d,u,r,this.appId,a,o,c,l);break;case kt.ShadowDom:return new el(d,u,n,r,o,c,this.nonce,l);default:s=new ci(d,u,r,a,o,c,l);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(Se(zf),Se(Wf),Se(_c),Se(x0),Se(vt),Se(br),Se(Le),Se(Ec))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})(),ai=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Kc[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(Hf(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(Hf(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new de(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let s=Kc[i];s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=Kc[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(qt.DashCase|qt.Important)?t.style.setProperty(n,r,i&qt.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&qt.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=Er().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function Hf(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var el=class extends ai{constructor(t,n,r,i,s,o,c,d){super(t,s,o,d),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=qf(i.id,i.styles);for(let a of u){let l=document.createElement("style");c&&l.setAttribute("nonce",c),l.textContent=a,this.shadowRoot.appendChild(l)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ci=class extends ai{constructor(t,n,r,i,s,o,c,d){super(t,s,o,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=d?qf(d,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},eo=class extends ci{constructor(t,n,r,i,s,o,c,d){let u=i+"-"+r.id;super(t,n,r,s,o,c,d,u),this.contentAttr=R0(u),this.hostAttr=P0(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},N0=(()=>{class e extends Js{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(Se(vt))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})(),$f=["alt","control","meta","shift"],k0={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},O0={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},F0=(()=>{class e extends Js{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i){let s=e.parseEventName(r),o=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Er().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=e._normalizeKey(r.pop()),o="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),o="code."),$f.forEach(u=>{let a=r.indexOf(u);a>-1&&(r.splice(a,1),o+=u+".")}),o+=s,r.length!=0||s.length===0)return null;let d={};return d.domEventName=i,d.fullKey=o,d}static matchEventFullKeyCode(n,r){let i=k0[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),$f.forEach(o=>{if(o!==i){let c=O0[o];c(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{e.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||e)(Se(vt))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})();function Yf(e,t){return Sf(ce({rootComponent:e},L0(t)))}function L0(e){return{appProviders:[...H0,...e?.providers??[]],platformProviders:V0}}function j0(){Qc.makeCurrent()}function B0(){return new Gt}function U0(){return Sh(document),document}var V0=[{provide:br,useValue:Uf},{provide:wc,useValue:j0,multi:!0},{provide:vt,useFactory:U0,deps:[]}];var H0=[{provide:Os,useValue:"root"},{provide:Gt,useFactory:B0,deps:[]},{provide:Jc,useClass:N0,multi:!0,deps:[vt,Le,br]},{provide:Jc,useClass:F0,multi:!0,deps:[vt]},Vf,Wf,zf,{provide:hr,useExisting:Vf},{provide:Zs,useClass:A0,deps:[]},[]];var Xf=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||e)(Se(vt))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ve="primary",Si=Symbol("RouteTitle"),ol=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Mr(e){return new ol(e)}function z0(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],c=e[s];if(o[0]===":")i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function W0(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Vt(e[n],t[n]))return!1;return!0}function Vt(e,t){let n=e?al(e):void 0,r=t?al(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!rp(e[i],t[i]))return!1;return!0}function al(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function rp(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,s)=>r[s]===i)}else return e===t}function ip(e){return e.length>0?e[e.length-1]:null}function fn(e){return $o(e)?e:ri(e)?je(Promise.resolve(e)):me(e)}var G0={exact:op,subset:ap},sp={exact:q0,subset:Y0,ignored:()=>!0};function Kf(e,t,n){return G0[n.paths](e.root,t.root,n.matrixParams)&&sp[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function q0(e,t){return Vt(e,t)}function op(e,t,n){if(!Fn(e.segments,t.segments)||!ro(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!op(e.children[r],t.children[r],n))return!1;return!0}function Y0(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>rp(e[n],t[n]))}function ap(e,t,n){return cp(e,t,t.segments,n)}function cp(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!Fn(i,n)||t.hasChildren()||!ro(i,n,r))}else if(e.segments.length===n.length){if(!Fn(e.segments,n)||!ro(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!ap(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!Fn(e.segments,i)||!ro(e.segments,i,r)||!e.children[ve]?!1:cp(e.children[ve],t,s,r)}}function ro(e,t,n){return t.every((r,i)=>sp[n](e[i].parameters,r.parameters))}var Qt=class{constructor(t=new Te([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Mr(this.queryParams),this._queryParamMap}toString(){return Z0.serialize(this)}},Te=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return io(this)}},On=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Mr(this.parameters),this._parameterMap}toString(){return up(this)}};function X0(e,t){return Fn(e,t)&&e.every((n,r)=>Vt(n.parameters,t[r].parameters))}function Fn(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function K0(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===ve&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==ve&&(n=n.concat(t(i,r)))}),n}var Nl=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>new gi,providedIn:"root"})}}return e})(),gi=class{parse(t){let n=new ll(t);return new Qt(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${li(t.root,!0)}`,r=e_(t.queryParams),i=typeof t.fragment=="string"?`#${Q0(t.fragment)}`:"";return`${n}${r}${i}`}},Z0=new gi;function io(e){return e.segments.map(t=>up(t)).join("/")}function li(e,t){if(!e.hasChildren())return io(e);if(t){let n=e.children[ve]?li(e.children[ve],!1):"",r=[];return Object.entries(e.children).forEach(([i,s])=>{i!==ve&&r.push(`${i}:${li(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=K0(e,(r,i)=>i===ve?[li(e.children[ve],!1)]:[`${i}:${li(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[ve]!=null?`${io(e)}/${n[0]}`:`${io(e)}/(${n.join("//")})`}}function lp(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function to(e){return lp(e).replace(/%3B/gi,";")}function Q0(e){return encodeURI(e)}function cl(e){return lp(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function so(e){return decodeURIComponent(e)}function Zf(e){return so(e.replace(/\+/g,"%20"))}function up(e){return`${cl(e.path)}${J0(e.parameters)}`}function J0(e){return Object.entries(e).map(([t,n])=>`;${cl(t)}=${cl(n)}`).join("")}function e_(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${to(n)}=${to(i)}`).join("&"):`${to(n)}=${to(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var t_=/^[^\/()?;#]+/;function nl(e){let t=e.match(t_);return t?t[0]:""}var n_=/^[^\/()?;=#]+/;function r_(e){let t=e.match(n_);return t?t[0]:""}var i_=/^[^=?&#]+/;function s_(e){let t=e.match(i_);return t?t[0]:""}var o_=/^[^&#]+/;function a_(e){let t=e.match(o_);return t?t[0]:""}var ll=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Te([],{}):new Te([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[ve]=new Te(t,n)),r}parseSegment(){let t=nl(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new de(4009,!1);return this.capture(t),new On(so(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=r_(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=nl(this.remaining);i&&(r=i,this.capture(r))}t[so(n)]=so(r)}parseQueryParam(t){let n=s_(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=a_(this.remaining);o&&(r=o,this.capture(r))}let i=Zf(n),s=Zf(r);if(t.hasOwnProperty(i)){let o=t[i];Array.isArray(o)||(o=[o],t[i]=o),o.push(s)}else t[i]=s}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=nl(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new de(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=ve);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ve]:new Te([],o),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new de(4011,!1)}};function dp(e){return e.segments.length>0?new Te([],{[ve]:e}):e}function hp(e){let t={};for(let[r,i]of Object.entries(e.children)){let s=hp(i);if(r===ve&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))t[o]=c;else(s.segments.length>0||s.hasChildren())&&(t[r]=s)}let n=new Te(e.segments,t);return c_(n)}function c_(e){if(e.numberOfChildren===1&&e.children[ve]){let t=e.children[ve];return new Te(e.segments.concat(t.segments),t.children)}return e}function mi(e){return e instanceof Qt}function l_(e,t,n=null,r=null){let i=fp(e);return pp(i,t,n,r)}function fp(e){let t;function n(s){let o={};for(let d of s.children){let u=n(d);o[d.outlet]=u}let c=new Te(s.url,o);return s===e&&(t=c),c}let r=n(e.root),i=dp(r);return t??i}function pp(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return rl(i,i,i,n,r);let s=u_(t);if(s.toRoot())return rl(i,i,new Te([],{}),n,r);let o=d_(s,i,e),c=o.processChildren?hi(o.segmentGroup,o.index,s.commands):mp(o.segmentGroup,o.index,s.commands);return rl(i,o.segmentGroup,c,n,r)}function oo(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function vi(e){return typeof e=="object"&&e!=null&&e.outlets}function rl(e,t,n,r,i){let s={};r&&Object.entries(r).forEach(([d,u])=>{s[d]=Array.isArray(u)?u.map(a=>`${a}`):`${u}`});let o;e===t?o=n:o=gp(e,t,n);let c=dp(hp(o));return new Qt(c,s,i)}function gp(e,t,n){let r={};return Object.entries(e.children).forEach(([i,s])=>{s===t?r[i]=n:r[i]=gp(s,t,n)}),new Te(e.segments,r)}var ao=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&oo(r[0]))throw new de(4003,!1);let i=r.find(vi);if(i&&i!==ip(r))throw new de(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function u_(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new ao(!0,0,e);let t=0,n=!1,r=e.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([d,u])=>{c[d]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((c,d)=>{d==0&&c==="."||(d==0&&c===""?n=!0:c===".."?t++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new ao(n,t,r)}var Sr=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function d_(e,t,n){if(e.isAbsolute)return new Sr(t,!0,0);if(!n)return new Sr(t,!1,NaN);if(n.parent===null)return new Sr(n,!0,0);let r=oo(e.commands[0])?0:1,i=n.segments.length-1+r;return h_(n,i,e.numberOfDoubleDots)}function h_(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new de(4005,!1);i=r.segments.length}return new Sr(r,!1,i-s)}function f_(e){return vi(e[0])?e[0].outlets:{[ve]:e}}function mp(e,t,n){if(e??=new Te([],{}),e.segments.length===0&&e.hasChildren())return hi(e,t,n);let r=p_(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let s=new Te(e.segments.slice(0,r.pathIndex),{});return s.children[ve]=new Te(e.segments.slice(r.pathIndex),e.children),hi(s,0,i)}else return r.match&&i.length===0?new Te(e.segments,{}):r.match&&!e.hasChildren()?ul(e,t,n):r.match?hi(e,0,i):ul(e,t,n)}function hi(e,t,n){if(n.length===0)return new Te(e.segments,{});{let r=f_(n),i={};if(Object.keys(r).some(s=>s!==ve)&&e.children[ve]&&e.numberOfChildren===1&&e.children[ve].segments.length===0){let s=hi(e.children[ve],t,n);return new Te(e.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=mp(e.children[s],t,o))}),Object.entries(e.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Te(e.segments,i)}}function p_(e,t,n){let r=0,i=t,s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;let o=e.segments[i],c=n[r];if(vi(c))break;let d=`${c}`,u=r<n.length-1?n[r+1]:null;if(i>0&&d===void 0)break;if(d&&u&&typeof u=="object"&&u.outlets===void 0){if(!Jf(d,u,o))return s;r+=2}else{if(!Jf(d,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ul(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let s=n[i];if(vi(s)){let d=g_(s.outlets);return new Te(r,d)}if(i===0&&oo(n[0])){let d=e.segments[t];r.push(new On(d.path,Qf(n[0]))),i++;continue}let o=vi(s)?s.outlets[ve]:`${s}`,c=i<n.length-1?n[i+1]:null;o&&c&&oo(c)?(r.push(new On(o,Qf(c))),i+=2):(r.push(new On(o,{})),i++)}return new Te(r,{})}function g_(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=ul(new Te([],{}),0,r))}),t}function Qf(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function Jf(e,t,n){return e==n.path&&Vt(t,n.parameters)}var fi="imperative",Ye=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Ye||{}),yt=class{constructor(t,n){this.id=t,this.url=n}},yi=class extends yt{constructor(t,n,r="imperative",i=null){super(t,n),this.type=Ye.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ln=class extends yt{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=Ye.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},dt=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(dt||{}),dl=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(dl||{}),Zt=class extends yt{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Ye.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},jn=class extends yt{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Ye.NavigationSkipped}},bi=class extends yt{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=Ye.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},co=class extends yt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Ye.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hl=class extends yt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Ye.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fl=class extends yt{constructor(t,n,r,i,s){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ye.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},pl=class extends yt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Ye.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gl=class extends yt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Ye.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ml=class{constructor(t){this.route=t,this.type=Ye.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},vl=class{constructor(t){this.route=t,this.type=Ye.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},yl=class{constructor(t){this.snapshot=t,this.type=Ye.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bl=class{constructor(t){this.snapshot=t,this.type=Ye.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_l=class{constructor(t){this.snapshot=t,this.type=Ye.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wl=class{constructor(t){this.snapshot=t,this.type=Ye.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var _i=class{},Tr=class{constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function m_(e,t){return e.providers&&!e._injector&&(e._injector=Fc(e.providers,t,`Route: ${e.path}`)),e._injector??t}function xt(e){return e.outlet||ve}function v_(e,t){let n=e.filter(r=>xt(r)===t);return n.push(...e.filter(r=>xt(r)!==t)),n}function Ai(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var El=class{get injector(){return Ai(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new mo(this.rootInjector),this.attachRef=null}},mo=(()=>{class e{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new El(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||e)(Se(gt))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),lo=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=Dl(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=Dl(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=Cl(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Cl(t,this._root).map(n=>n.value)}};function Dl(e,t){if(e===t.value)return t;for(let n of t.children){let r=Dl(e,n);if(r)return r}return null}function Cl(e,t){if(e===t.value)return[t];for(let n of t.children){let r=Cl(e,n);if(r.length)return r.unshift(t),r}return[]}var ut=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Cr(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var uo=class extends lo{constructor(t,n){super(t),this.snapshot=n,kl(this,t)}toString(){return this.snapshot.toString()}};function vp(e){let t=y_(e),n=new We([new On("",{})]),r=new We({}),i=new We({}),s=new We({}),o=new We(""),c=new xr(n,r,s,o,i,ve,e,t.root);return c.snapshot=t.root,new uo(new ut(c,[]),t)}function y_(e){let t={},n={},r={},i="",s=new Ar([],t,r,i,n,ve,e,null,{});return new fo("",new ut(s,[]))}var xr=class{constructor(t,n,r,i,s,o,c,d){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=d,this.title=this.dataSubject?.pipe(Ce(u=>u[Si]))??me(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ce(t=>Mr(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ce(t=>Mr(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ho(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:ce(ce({},t.params),e.params),data:ce(ce({},t.data),e.data),resolve:ce(ce(ce(ce({},e.data),t.data),i?.data),e._resolvedData)}:r={params:ce({},e.params),data:ce({},e.data),resolve:ce(ce({},e.data),e._resolvedData??{})},i&&bp(i)&&(r.resolve[Si]=i.title),r}var Ar=class{get title(){return this.data?.[Si]}constructor(t,n,r,i,s,o,c,d,u){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.routeConfig=d,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Mr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Mr(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},fo=class extends lo{constructor(t,n){super(n),this.url=t,kl(this,n)}toString(){return yp(this._root)}};function kl(e,t){t.value._routerState=e,t.children.forEach(n=>kl(e,n))}function yp(e){let t=e.children.length>0?` { ${e.children.map(yp).join(", ")} } `:"";return`${e.value}${t}`}function il(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Vt(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Vt(t.params,n.params)||e.paramsSubject.next(n.params),W0(t.url,n.url)||e.urlSubject.next(n.url),Vt(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Sl(e,t){let n=Vt(e.params,t.params)&&X0(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Sl(e.parent,t.parent))}function bp(e){return typeof e.title=="string"||e.title===null}var b_=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ve,this.activateEvents=new Xe,this.deactivateEvents=new Xe,this.attachEvents=new Xe,this.detachEvents=new Xe,this.parentContexts=oe(mo),this.location=oe(hn),this.changeDetector=oe(ii),this.inputBinder=oe(Ol,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new de(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new de(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new de(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new de(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,d=new Al(n,c,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:d,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=Jr({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[js]})}}return e})(),Al=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===xr?this.route:t===mo?this.childContexts:this.parent.get(t,n)}},Ol=new be("");function __(e,t,n){let r=wi(e,t._root,n?n._root:void 0);return new uo(r,t)}function wi(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=w_(e,t,n);return new ut(r,i)}else{if(e.shouldAttach(t.value)){let s=e.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(c=>wi(e,c)),o}}let r=E_(t.value),i=t.children.map(s=>wi(e,s));return new ut(r,i)}}function w_(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return wi(e,r,i);return wi(e,r)})}function E_(e){return new xr(new We(e.url),new We(e.params),new We(e.queryParams),new We(e.fragment),new We(e.data),e.outlet,e.component,e)}var Ei=class{constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},_p="ngNavigationCancelingError";function po(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=mi(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=wp(!1,dt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function wp(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[_p]=!0,n.cancellationCode=t,n}function D_(e){return Ep(e)&&mi(e.url)}function Ep(e){return!!e&&e[_p]}var C_=(e,t,n,r)=>Ce(i=>(new Il(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),Il=class{constructor(t,n,r,i,s){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),il(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=Cr(n);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,n,r){let i=t.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(t,n,o.children)}else this.deactivateChildRoutes(t,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=Cr(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:c})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=Cr(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=Cr(n);t.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new wl(s.value.snapshot))}),t.children.length&&this.forwardEvent(new bl(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,s=n?n.value:null;if(il(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,o.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),il(c.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,r)}},go=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Ir=class{constructor(t,n){this.component=t,this.route=n}};function S_(e,t,n){let r=e._root,i=t?t._root:null;return ui(r,i,n,[r.value])}function A_(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Pr(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!ud(e)?e:t.get(e):r}function ui(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Cr(t);return e.children.forEach(o=>{I_(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>pi(c,n.getContext(o),i)),i}function I_(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=e.value,o=t?t.value:null,c=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let d=M_(o,s,s.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new go(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ui(e,t,c?c.children:null,r,i):ui(e,t,n,r,i),d&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Ir(c.outlet.component,o))}else o&&pi(t,c,i),i.canActivateChecks.push(new go(r)),s.component?ui(e,null,c?c.children:null,r,i):ui(e,null,n,r,i);return i}function M_(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Fn(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Fn(e.url,t.url)||!Vt(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Sl(e,t)||!Vt(e.queryParams,t.queryParams);case"paramsChange":default:return!Sl(e,t)}}function pi(e,t,n){let r=Cr(e),i=e.value;Object.entries(r).forEach(([s,o])=>{i.component?t?pi(o,t.children.getContext(s),n):pi(o,null,n):pi(o,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Ir(t.outlet.component,i)):n.canDeactivateChecks.push(new Ir(null,i)):n.canDeactivateChecks.push(new Ir(null,i))}function Ii(e){return typeof e=="function"}function T_(e){return typeof e=="boolean"}function x_(e){return e&&Ii(e.canLoad)}function R_(e){return e&&Ii(e.canActivate)}function P_(e){return e&&Ii(e.canActivateChild)}function N_(e){return e&&Ii(e.canDeactivate)}function k_(e){return e&&Ii(e.canMatch)}function Dp(e){return e instanceof $t||e?.name==="EmptyError"}var no=Symbol("INITIAL_VALUE");function Rr(){return wt(e=>Xi(e.map(t=>t.pipe(zt(1),Yo(no)))).pipe(Ce(t=>{for(let n of t)if(n!==!0){if(n===no)return no;if(n===!1||O_(n))return n}return!0}),_t(t=>t!==no),zt(1)))}function O_(e){return mi(e)||e instanceof Ei}function F_(e,t){return Be(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?me(ke(ce({},n),{guardsResult:!0})):L_(o,r,i,e).pipe(Be(c=>c&&T_(c)?j_(r,s,e,t):me(c)),Ce(c=>ke(ce({},n),{guardsResult:c})))})}function L_(e,t,n,r){return je(e).pipe(Be(i=>$_(i.component,i.route,n,t,r)),Rt(i=>i!==!0,!0))}function j_(e,t,n,r){return je(t).pipe(Qn(i=>Zn(U_(i.route.parent,r),B_(i.route,r),H_(e,i.path,n),V_(e,i.route,n))),Rt(i=>i!==!0,!0))}function B_(e,t){return e!==null&&t&&t(new _l(e)),me(!0)}function U_(e,t){return e!==null&&t&&t(new yl(e)),me(!0)}function V_(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return me(!0);let i=r.map(s=>Ki(()=>{let o=Ai(t)??n,c=Pr(s,o),d=R_(c)?c.canActivate(t,e):Yt(o,()=>c(t,e));return fn(d).pipe(Rt())}));return me(i).pipe(Rr())}function H_(e,t,n){let r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>A_(o)).filter(o=>o!==null).map(o=>Ki(()=>{let c=o.guards.map(d=>{let u=Ai(o.node)??n,a=Pr(d,u),l=P_(a)?a.canActivateChild(r,e):Yt(u,()=>a(r,e));return fn(l).pipe(Rt())});return me(c).pipe(Rr())}));return me(s).pipe(Rr())}function $_(e,t,n,r,i){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return me(!0);let o=s.map(c=>{let d=Ai(t)??i,u=Pr(c,d),a=N_(u)?u.canDeactivate(e,t,n,r):Yt(d,()=>u(e,t,n,r));return fn(a).pipe(Rt())});return me(o).pipe(Rr())}function z_(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return me(!0);let s=i.map(o=>{let c=Pr(o,e),d=x_(c)?c.canLoad(t,n):Yt(e,()=>c(t,n));return fn(d)});return me(s).pipe(Rr(),Cp(r))}function Cp(e){return Bo(Ge(t=>{if(typeof t!="boolean")throw po(e,t)}),Ce(t=>t===!0))}function W_(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return me(!0);let s=i.map(o=>{let c=Pr(o,e),d=k_(c)?c.canMatch(t,n):Yt(e,()=>c(t,n));return fn(d)});return me(s).pipe(Rr(),Cp(r))}var Di=class{constructor(t){this.segmentGroup=t||null}},Ci=class extends Error{constructor(t){super(),this.urlTree=t}};function Dr(e){return Kn(new Di(e))}function G_(e){return Kn(new de(4e3,!1))}function q_(e){return Kn(wp(!1,dt.GuardRejected))}var Ml=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return me(r);if(i.numberOfChildren>1||!i.children[ve])return G_(`${t.redirectTo}`);i=i.children[ve]}}applyRedirectCommands(t,n,r,i,s){if(typeof n!="string"){let c=n,{queryParams:d,fragment:u,routeConfig:a,url:l,outlet:h,params:p,data:g,title:f}=i,v=Yt(s,()=>c({params:p,data:g,queryParams:d,fragment:u,routeConfig:a,url:l,outlet:h,title:f}));if(v instanceof Qt)throw new Ci(v);n=v}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n[0]==="/")throw new Ci(o);return o}applyRedirectCreateUrlTree(t,n,r,i){let s=this.createSegmentGroup(t,n.root,r,i);return new Qt(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=n[c]}else r[i]=s}),r}createSegmentGroup(t,n,r,i){let s=this.createSegments(t,n.segments,r,i),o={};return Object.entries(n.children).forEach(([c,d])=>{o[c]=this.createSegmentGroup(t,d,r,i)}),new Te(s,o)}createSegments(t,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(t,s,i):this.findOrReturn(s,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new de(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},Tl={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Y_(e,t,n,r,i){let s=Sp(e,t,n);return s.matched?(r=m_(t,r),W_(r,t,n,i).pipe(Ce(o=>o===!0?s:ce({},Tl)))):me(s)}function Sp(e,t,n){if(t.path==="**")return X_(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?ce({},Tl):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||z0)(n,e,t);if(!i)return ce({},Tl);let s={};Object.entries(i.posParams??{}).forEach(([c,d])=>{s[c]=d.path});let o=i.consumed.length>0?ce(ce({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function X_(e){return{matched:!0,parameters:e.length>0?ip(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function ep(e,t,n,r){return n.length>0&&Q_(e,n,r)?{segmentGroup:new Te(t,Z_(r,new Te(n,e.children))),slicedSegments:[]}:n.length===0&&J_(e,n,r)?{segmentGroup:new Te(e.segments,K_(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new Te(e.segments,e.children),slicedSegments:n}}function K_(e,t,n,r){let i={};for(let s of n)if(vo(e,t,s)&&!r[xt(s)]){let o=new Te([],{});i[xt(s)]=o}return ce(ce({},r),i)}function Z_(e,t){let n={};n[ve]=t;for(let r of e)if(r.path===""&&xt(r)!==ve){let i=new Te([],{});n[xt(r)]=i}return n}function Q_(e,t,n){return n.some(r=>vo(e,t,r)&&xt(r)!==ve)}function J_(e,t,n){return n.some(r=>vo(e,t,r))}function vo(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function ew(e,t,n){return t.length===0&&!e.children[n]}var xl=class{};function tw(e,t,n,r,i,s,o="emptyOnly"){return new Rl(e,t,n,r,i,o,s).recognize()}var nw=31,Rl=class{constructor(t,n,r,i,s,o,c){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new Ml(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new de(4002,`'${t.segmentGroup}'`)}recognize(){let t=ep(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Ce(({children:n,rootSnapshot:r})=>{let i=new ut(r,n),s=new fo("",i),o=l_(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let n=new Ar([],Object.freeze({}),Object.freeze(ce({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ve,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,ve,n).pipe(Ce(r=>({children:r,rootSnapshot:n})),nn(r=>{if(r instanceof Ci)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Di?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,s):this.processSegment(t,n,r,r.segments,i,!0,s).pipe(Ce(o=>o instanceof ut?[o]:[]))}processChildren(t,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return je(s).pipe(Qn(o=>{let c=r.children[o],d=v_(n,o);return this.processSegmentGroup(t,d,c,o,i)}),qo((o,c)=>(o.push(...c),o)),rn(null),Go(),Be(o=>{if(o===null)return Dr(r);let c=Ap(o);return rw(c),me(c)}))}processSegment(t,n,r,i,s,o,c){return je(n).pipe(Qn(d=>this.processSegmentAgainstRoute(d._injector??t,n,d,r,i,s,o,c).pipe(nn(u=>{if(u instanceof Di)return me(null);throw u}))),Rt(d=>!!d),nn(d=>{if(Dp(d))return ew(r,i,s)?me(new xl):Dr(r);throw d}))}processSegmentAgainstRoute(t,n,r,i,s,o,c,d){return xt(r)!==o&&(o===ve||!vo(i,s,r))?Dr(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,s,o,d):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,s,o,d):Dr(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,s,o,c){let{matched:d,parameters:u,consumedSegments:a,positionalParamSegments:l,remainingSegments:h}=Sp(n,i,s);if(!d)return Dr(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>nw&&(this.allowRedirects=!1));let p=new Ar(s,u,Object.freeze(ce({},this.urlTree.queryParams)),this.urlTree.fragment,tp(i),xt(i),i.component??i._loadedComponent??null,i,np(i)),g=ho(p,c,this.paramsInheritanceStrategy);p.params=Object.freeze(g.params),p.data=Object.freeze(g.data);let f=this.applyRedirects.applyRedirectCommands(a,i.redirectTo,l,p,t);return this.applyRedirects.lineralizeSegments(i,f).pipe(Be(v=>this.processSegment(t,r,n,v.concat(h),o,!1,c)))}matchSegmentAgainstRoute(t,n,r,i,s,o){let c=Y_(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),c.pipe(wt(d=>d.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(wt(({routes:u})=>{let a=r._loadedInjector??t,{parameters:l,consumedSegments:h,remainingSegments:p}=d,g=new Ar(h,l,Object.freeze(ce({},this.urlTree.queryParams)),this.urlTree.fragment,tp(r),xt(r),r.component??r._loadedComponent??null,r,np(r)),f=ho(g,o,this.paramsInheritanceStrategy);g.params=Object.freeze(f.params),g.data=Object.freeze(f.data);let{segmentGroup:v,slicedSegments:y}=ep(n,h,p,u);if(y.length===0&&v.hasChildren())return this.processChildren(a,u,v,g).pipe(Ce(T=>new ut(g,T)));if(u.length===0&&y.length===0)return me(new ut(g,[]));let E=xt(r)===s;return this.processSegment(a,u,v,y,E?ve:s,!0,g).pipe(Ce(T=>new ut(g,T instanceof ut?[T]:[])))}))):Dr(n)))}getChildConfig(t,n,r){return n.children?me({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?me({routes:n._loadedRoutes,injector:n._loadedInjector}):z_(t,n,r,this.urlSerializer).pipe(Be(i=>i?this.configLoader.loadChildren(t,n).pipe(Ge(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):q_(n))):me({routes:[],injector:t})}};function rw(e){e.sort((t,n)=>t.value.outlet===ve?-1:n.value.outlet===ve?1:t.value.outlet.localeCompare(n.value.outlet))}function iw(e){let t=e.value.routeConfig;return t&&t.path===""}function Ap(e){let t=[],n=new Set;for(let r of e){if(!iw(r)){t.push(r);continue}let i=t.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=Ap(r.children);t.push(new ut(r.value,i))}return t.filter(r=>!n.has(r))}function tp(e){return e.data||{}}function np(e){return e.resolve||{}}function sw(e,t,n,r,i,s){return Be(o=>tw(e,t,n,r,o.extractedUrl,i,s).pipe(Ce(({state:c,tree:d})=>ke(ce({},o),{targetSnapshot:c,urlAfterRedirects:d}))))}function ow(e,t){return Be(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return me(n);let s=new Set(i.map(d=>d.route)),o=new Set;for(let d of s)if(!o.has(d))for(let u of Ip(d))o.add(u);let c=0;return je(o).pipe(Qn(d=>s.has(d)?aw(d,r,e,t):(d.data=ho(d,d.parent,e).resolve,me(void 0))),Ge(()=>c++),Jn(1),Be(d=>c===o.size?me(n):ct))})}function Ip(e){let t=e.children.map(n=>Ip(n)).flat();return[e,...t]}function aw(e,t,n,r){let i=e.routeConfig,s=e._resolve;return i?.title!==void 0&&!bp(i)&&(s[Si]=i.title),cw(s,e,t,r).pipe(Ce(o=>(e._resolvedData=o,e.data=ho(e,e.parent,n).resolve,null)))}function cw(e,t,n,r){let i=al(e);if(i.length===0)return me({});let s={};return je(i).pipe(Be(o=>lw(e[o],t,n,r).pipe(Rt(),Ge(c=>{if(c instanceof Ei)throw po(new gi,c);s[o]=c}))),Jn(1),Wo(s),nn(o=>Dp(o)?ct:Kn(o)))}function lw(e,t,n,r){let i=Ai(t)??r,s=Pr(e,i),o=s.resolve?s.resolve(t,n):Yt(i,()=>s(t,n));return fn(o)}function sl(e){return wt(t=>{let n=e(t);return n?je(n).pipe(Ce(()=>t)):me(t)})}var Mp=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ve);return r}getResolvedTitleForRoute(n){return n.data[Si]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>oe(uw),providedIn:"root"})}}return e})(),uw=(()=>{class e extends Mp{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||e)(Se(Xf))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Fl=new be("",{providedIn:"root",factory:()=>({})}),dw=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=Ps({type:e,selectors:[["ng-component"]],standalone:!0,features:[qs],decls:1,vars:0,template:function(r,i){r&1&&wr(0,"router-outlet")},dependencies:[b_],encapsulation:2})}}return e})();function Ll(e){let t=e.children&&e.children.map(Ll),n=t?ke(ce({},e),{children:t}):ce({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==ve&&(n.component=dw),n}var jl=new be(""),hw=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=oe(Hc)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return me(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=fn(n.loadComponent()).pipe(Ce(Tp),Ge(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Lr(()=>{this.componentLoaders.delete(n)})),i=new Xn(r,()=>new Je).pipe(Yn());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return me({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=fw(r,this.compiler,n,this.onLoadEndListener).pipe(Lr(()=>{this.childrenLoaders.delete(r)})),o=new Xn(s,()=>new Je).pipe(Yn());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function fw(e,t,n,r){return fn(e.loadChildren()).pipe(Ce(Tp),Be(i=>i instanceof Yr||Array.isArray(i)?me(i):je(t.compileModuleAsync(i))),Ce(i=>{r&&r(e);let s,o,c=!1;return Array.isArray(i)?(o=i,c=!0):(s=i.create(n).injector,o=s.get(jl,[],{optional:!0,self:!0}).flat()),{routes:o.map(Ll),injector:s}}))}function pw(e){return e&&typeof e=="object"&&"default"in e}function Tp(e){return pw(e)?e.default:e}var Bl=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>oe(gw),providedIn:"root"})}}return e})(),gw=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),mw=new be("");var vw=new be(""),yw=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Je,this.transitionAbortSubject=new Je,this.configLoader=oe(hw),this.environmentInjector=oe(gt),this.urlSerializer=oe(Nl),this.rootContexts=oe(mo),this.location=oe(si),this.inputBindingEnabled=oe(Ol,{optional:!0})!==null,this.titleStrategy=oe(Mp),this.options=oe(Fl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=oe(Bl),this.createViewTransition=oe(mw,{optional:!0}),this.navigationErrorHandler=oe(vw,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>me(void 0),this.rootComponentType=null;let n=i=>this.events.next(new ml(i)),r=i=>this.events.next(new vl(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(ke(ce(ce({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new We({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:fi,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_t(s=>s.id!==0),Ce(s=>ke(ce({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),wt(s=>{let o=!1,c=!1;return me(s).pipe(wt(d=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",dt.SupersededByNewNavigation),ct;this.currentTransition=s,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,targetBrowserUrl:typeof d.extras.browserUrl=="string"?this.urlSerializer.parse(d.extras.browserUrl):d.extras.browserUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?ke(ce({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=d.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!u&&a!=="reload"){let l="";return this.events.next(new jn(d.id,this.urlSerializer.serialize(d.rawUrl),l,dl.IgnoredSameUrlNavigation)),d.resolve(!1),ct}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return me(d).pipe(wt(l=>{let h=this.transitions?.getValue();return this.events.next(new yi(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),h!==this.transitions?.getValue()?ct:Promise.resolve(l)}),sw(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ge(l=>{s.targetSnapshot=l.targetSnapshot,s.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=ke(ce({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let h=new co(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:l,extractedUrl:h,source:p,restoredState:g,extras:f}=d,v=new yi(l,this.urlSerializer.serialize(h),p,g);this.events.next(v);let y=vp(this.rootComponentType).snapshot;return this.currentTransition=s=ke(ce({},d),{targetSnapshot:y,urlAfterRedirects:h,extras:ke(ce({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,me(s)}else{let l="";return this.events.next(new jn(d.id,this.urlSerializer.serialize(d.extractedUrl),l,dl.IgnoredByUrlHandlingStrategy)),d.resolve(!1),ct}}),Ge(d=>{let u=new hl(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}),Ce(d=>(this.currentTransition=s=ke(ce({},d),{guards:S_(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),s)),F_(this.environmentInjector,d=>this.events.next(d)),Ge(d=>{if(s.guardsResult=d.guardsResult,d.guardsResult&&typeof d.guardsResult!="boolean")throw po(this.urlSerializer,d.guardsResult);let u=new fl(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(u)}),_t(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",dt.GuardRejected),!1)),sl(d=>{if(d.guards.canActivateChecks.length)return me(d).pipe(Ge(u=>{let a=new pl(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(a)}),wt(u=>{let a=!1;return me(u).pipe(ow(this.paramsInheritanceStrategy,this.environmentInjector),Ge({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(u,"",dt.NoDataFromResolver)}}))}),Ge(u=>{let a=new gl(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(a)}))}),sl(d=>{let u=a=>{let l=[];a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(a.routeConfig).pipe(Ge(h=>{a.component=h}),Ce(()=>{})));for(let h of a.children)l.push(...u(h));return l};return Xi(u(d.targetSnapshot.root)).pipe(rn(null),zt(1))}),sl(()=>this.afterPreactivation()),wt(()=>{let{currentSnapshot:d,targetSnapshot:u}=s,a=this.createViewTransition?.(this.environmentInjector,d.root,u.root);return a?je(a).pipe(Ce(()=>s)):me(s)}),Ce(d=>{let u=__(n.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=s=ke(ce({},d),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),Ge(()=>{this.events.next(new _i)}),C_(this.rootContexts,n.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),zt(1),Ge({next:d=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ln(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{o=!0}}),Xo(this.transitionAbortSubject.pipe(Ge(d=>{throw d}))),Lr(()=>{!o&&!c&&this.cancelNavigationTransition(s,"",dt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),nn(d=>{if(c=!0,Ep(d))this.events.next(new Zt(s.id,this.urlSerializer.serialize(s.extractedUrl),d.message,d.cancellationCode)),D_(d)?this.events.next(new Tr(d.url,d.navigationBehaviorOptions)):s.resolve(!1);else{let u=new bi(s.id,this.urlSerializer.serialize(s.extractedUrl),d,s.targetSnapshot??void 0);try{let a=Yt(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(a instanceof Ei){let{message:l,cancellationCode:h}=po(this.urlSerializer,a);this.events.next(new Zt(s.id,this.urlSerializer.serialize(s.extractedUrl),l,h)),this.events.next(new Tr(a.redirectTo,a.navigationBehaviorOptions))}else{this.events.next(u);let l=n.errorHandler(d);s.resolve(!!l)}}catch(a){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(a)}}return ct}))}))}cancelNavigationTransition(n,r,i){let s=new Zt(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function bw(e){return e!==fi}var _w=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>oe(ww),providedIn:"root"})}}return e})(),Pl=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},ww=(()=>{class e extends Pl{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=vc(e)))(i||e)}})()}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),xp=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>oe(Ew),providedIn:"root"})}}return e})(),Ew=(()=>{class e extends xp{constructor(){super(...arguments),this.location=oe(si),this.urlSerializer=oe(Nl),this.options=oe(Fl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=oe(Bl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Qt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=vp(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof yi)this.stateMemento=this.createStateMemento();else if(n instanceof jn)this.rawUrlTree=r.initialUrl;else if(n instanceof co){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof _i?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Zt&&(n.code===dt.GuardRejected||n.code===dt.NoDataFromResolver)?this.restoreHistory(r):n instanceof bi?this.restoreHistory(r,!0):n instanceof Ln&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Qt?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=ce(ce({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=ce(ce({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=vc(e)))(i||e)}})()}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),di=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(di||{});function Dw(e,t){e.events.pipe(_t(n=>n instanceof Ln||n instanceof Zt||n instanceof bi||n instanceof jn),Ce(n=>n instanceof Ln||n instanceof jn?di.COMPLETE:(n instanceof Zt?n.code===dt.Redirect||n.code===dt.SupersededByNewNavigation:!1)?di.REDIRECTING:di.FAILED),_t(n=>n!==di.REDIRECTING),zt(1)).subscribe(()=>{t()})}function Cw(e){throw e}var Sw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Aw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Rp=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=oe(Ys),this.stateManager=oe(xp),this.options=oe(Fl,{optional:!0})||{},this.pendingTasks=oe(vr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=oe(yw),this.urlSerializer=oe(Nl),this.location=oe(si),this.urlHandlingStrategy=oe(Bl),this._events=new Je,this.errorHandler=this.options.errorHandler||Cw,this.navigated=!1,this.routeReuseStrategy=oe(_w),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=oe(jl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!oe(Ol,{optional:!0}),this.eventsSubscription=new Fe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Zt&&r.code!==dt.Redirect&&r.code!==dt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ln)this.navigated=!0;else if(r instanceof Tr){let o=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),d=ce({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||bw(i.source)},o);this.scheduleNavigation(c,fi,null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Mw(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let d=ce({},i);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(s.state=d)}let c=this.parseUrl(n);this.scheduleNavigation(c,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Ll),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:d}=r,u=d?this.currentUrlTree.fragment:o,a=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":a=ce(ce({},this.currentUrlTree.queryParams),s);break;case"preserve":a=this.currentUrlTree.queryParams;break;default:a=s||null}a!==null&&(a=this.removeEmptyProps(a));let l;try{let h=i?i.snapshot:this.routerState.snapshot.root;l=fp(h)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),l=this.currentUrlTree.root}return pp(l,n,a,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=mi(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,fi,null,r)}navigate(n,r={skipLocationChange:!1}){return Iw(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=ce({},Sw):r===!1?i=ce({},Aw):i=r,mi(n))return Kf(this.currentUrlTree,n,i);let s=this.parseUrl(n);return Kf(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let c,d,u;o?(c=o.resolve,d=o.reject,u=o.promise):u=new Promise((l,h)=>{c=l,d=h});let a=this.pendingTasks.add();return Dw(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(a))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:c,reject:d,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(l=>Promise.reject(l))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Iw(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new de(4008,!1)}function Mw(e){return!(e instanceof _i)&&!(e instanceof Tr)}var Tw=new be("");function Pp(e,...t){return ks([{provide:jl,multi:!0,useValue:e},[],{provide:xr,useFactory:xw,deps:[Rp]},{provide:Vc,multi:!0,useFactory:Rw},t.map(n=>n.\u0275providers)])}function xw(e){return e.routerState.root}function Rw(){let e=oe(Sn);return t=>{let n=e.get(Nn);if(t!==n.components[0])return;let r=e.get(Rp),i=e.get(Pw);e.get(Nw)===1&&r.initialNavigation(),e.get(kw,null,_e.Optional)?.setUpPreloading(),e.get(Tw,null,_e.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Pw=new be("",{factory:()=>new Je}),Nw=new be("",{providedIn:"root",factory:()=>1});var kw=new be("");var Np=[];var kp={providers:[Df({eventCoalescing:!0}),Pp(Np)]};var bo=Wp(Vp());var qw=["pdfViewer"];function Yw(e,t){e&1&&(qe(0,"div",9)(1,"div",10)(2,"div",11)(3,"h2"),Tt(4,"Upload a PDF"),He(),qe(5,"p"),Tt(6,"Tap \u{1F4CB} to load the sample"),He(),qe(7,"div",12),Tt(8,"\u{1F4C4} \u270F\uFE0F"),He()()()())}function Xw(e,t){if(e&1&&(qe(0,"span",21),Tt(1),He()),e&2){let n=Ut().index,r=Ut(2);it(),Bc(" ",r.getSignaturesForPage(n+1).length," \u270D\uFE0F ")}}function Kw(e,t){if(e&1){let n=mf();qe(0,"div",22),Bt("mousedown",function(i){let s=gr(n).$implicit,o=Ut(3);return mr(o.startDrag(s,i))})("touchstart",function(i){let s=gr(n).$implicit,o=Ut(3);return mr(o.startDrag(s,i))}),wr(1,"img",23),qe(2,"button",24),Bt("click",function(){let i=gr(n).$implicit,s=Ut(3);return mr(s.removeSignature(i.id))}),Tt(3,"\xD7"),He(),qe(4,"div",25)(5,"div",26),Bt("mousedown",function(i){let s=gr(n).$implicit,o=Ut(3);return mr(o.startResize(s,i))})("touchstart",function(i){let s=gr(n).$implicit,o=Ut(3);return mr(o.startResize(s,i))}),He()()()}if(e&2){let n=t.$implicit;ni("left",n.x,"px")("top",n.y,"px")("width",n.width,"px")("height",n.height,"px"),it(),mt("src",n.imageData,Th)}}function Zw(e,t){if(e&1&&(qe(0,"div",15)(1,"div",16)(2,"span"),Tt(3),He(),_r(4,Xw,2,1,"span",17),He(),qe(5,"div",18),wr(6,"canvas",19),_r(7,Kw,6,9,"div",20),He()()),e&2){let n=t.$implicit,r=t.index,i=Ut(2);it(3),Uc("Page ",r+1," / ",i.pdfPages.length,""),it(),mt("ngIf",i.getSignaturesForPage(r+1).length>0),it(),ni("width",n.width,"px")("height",n.height,"px"),it(),mt("width",n.width)("height",n.height),it(),mt("ngForOf",i.getSignaturesForPage(r+1))}}function Qw(e,t){if(e&1&&(qe(0,"div",9)(1,"div",13,0),_r(3,Zw,8,10,"div",14),He()()),e&2){let n=Ut();it(3),mt("ngForOf",n.pdfPages)}}var Hp=(()=>{class e{constructor(){this.pdfLoaded=!1,this.pdfDocument=null,this.pdfPages=[],this.signatures=[],this.currentSignature=null,this.draggedSignature=null,this.resizingSignature=null,this.dragOffset={x:0,y:0},this.resizeOffset={x:0,y:0}}ngOnInit(){bo.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",this.loadDefaultSignature()}loadDefaultSignature(){let n=new Image;n.onload=()=>{let r=document.createElement("canvas"),i=r.getContext("2d");r.width=n.width,r.height=n.height,i.drawImage(n,0,0),this.currentSignature=r.toDataURL()},n.src="assets/signature.png"}loadTestPDF(){return ye(this,null,function*(){try{let r=yield(yield fetch("assets/test.pdf")).arrayBuffer();this.pdfDocument=yield bo.getDocument(r).promise,yield this.renderPDF(),this.pdfLoaded=!0,this.signatures=[]}catch(n){console.error("Error loading test PDF:",n),alert("Error loading test PDF file")}})}renderPDF(){return ye(this,null,function*(){this.pdfPages=[];let n=1.5,r=window.innerWidth<=600?window.innerWidth*.9:1200,i=Math.min(n,r/595);for(let s=1;s<=this.pdfDocument.numPages;s++){let c=(yield this.pdfDocument.getPage(s)).getViewport({scale:i});this.pdfPages.push({width:Math.round(c.width),height:Math.round(c.height),scale:i})}setTimeout(()=>this.renderAllPages(),100)})}renderAllPages(){return ye(this,null,function*(){let n=document.querySelectorAll("canvas");for(let r=0;r<this.pdfDocument.numPages;r++){let i=yield this.pdfDocument.getPage(r+1),s=n[r],o=s.getContext("2d"),c=i.getViewport({scale:this.pdfPages[r].scale});s.width=this.pdfPages[r].width,s.height=this.pdfPages[r].height,this.pdfPages[r].width=s.width,this.pdfPages[r].height=s.height,this.pdfPages[r].canvas=s,yield i.render({canvasContext:o,viewport:c}).promise,console.log(`Page ${r+1}: Canvas width=${s.width}, height=${s.height}, Container width=${this.pdfPages[r].width}, height=${this.pdfPages[r].height}`)}})}addSignature(){if(!this.currentSignature||!this.pdfLoaded)return;let r=this.pdfViewer.nativeElement.scrollTop,i=1,s=0;for(let c=0;c<this.pdfPages.length;c++)if(s+=this.pdfPages[c].height+120,r<s){i=c+1;break}let o={id:Date.now().toString(),x:50,y:50,width:100,height:50,page:i,imageData:this.currentSignature};this.signatures.push(o)}startDrag(n,r){r.preventDefault(),this.draggedSignature=n;let i=0,s=0;r instanceof MouseEvent?(i=r.clientX,s=r.clientY):(i=r.touches[0].clientX,s=r.touches[0].clientY);let o=r.currentTarget.getBoundingClientRect();this.dragOffset.x=i-o.left,this.dragOffset.y=s-o.top;let c=u=>this.onDragMove(u),d=()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",d),document.removeEventListener("touchmove",c),document.removeEventListener("touchend",d),this.draggedSignature=null};document.addEventListener("mousemove",c),document.addEventListener("mouseup",d),document.addEventListener("touchmove",c,{passive:!1}),document.addEventListener("touchend",d)}onDragMove(n){if(!this.draggedSignature)return;let r=0,i=0;n instanceof MouseEvent?(r=n.clientX,i=n.clientY):(r=n.touches[0].clientX,i=n.touches[0].clientY);let s=this.draggedSignature.page-1,o=document.querySelector(`[style*="width: ${this.pdfPages[s].width}px"]`);if(!o)return;let c=o.getBoundingClientRect(),d=o.offsetWidth/this.pdfPages[s].width,u=o.offsetHeight/this.pdfPages[s].height,a=(r-c.left-this.dragOffset.x)/d,l=(i-c.top-this.dragOffset.y)/u;this.draggedSignature.x=Math.max(0,Math.min(a,this.pdfPages[s].width-this.draggedSignature.width)),this.draggedSignature.y=Math.max(0,Math.min(l,this.pdfPages[s].height-this.draggedSignature.height))}startResize(n,r){r.preventDefault(),r.stopPropagation(),this.resizingSignature=n;let i=0,s=0;r instanceof MouseEvent?(i=r.clientX,s=r.clientY):(i=r.touches[0].clientX,s=r.touches[0].clientY);let o=r.currentTarget.getBoundingClientRect();this.resizeOffset.x=i-o.left,this.resizeOffset.y=s-o.top;let c=u=>this.onResizeMove(u),d=()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",d),document.removeEventListener("touchmove",c),document.removeEventListener("touchend",d),this.resizingSignature=null};document.addEventListener("mousemove",c),document.addEventListener("mouseup",d),document.addEventListener("touchmove",c,{passive:!1}),document.addEventListener("touchend",d)}onResizeMove(n){if(!this.resizingSignature)return;let r=0,i=0;n instanceof MouseEvent?(r=n.clientX,i=n.clientY):(r=n.touches[0].clientX,i=n.touches[0].clientY);let s=this.resizingSignature.page-1,o=document.querySelector(`[style*="width: ${this.pdfPages[s].width}px"]`);if(!o)return;let c=o.getBoundingClientRect(),d=o.offsetWidth/this.pdfPages[s].width,u=o.offsetHeight/this.pdfPages[s].height,a=Math.max(50,(r-c.left-this.resizingSignature.x)/d),l=Math.max(25,(i-c.top-this.resizingSignature.y)/u);this.resizingSignature.width=Math.min(a,this.pdfPages[s].width-this.resizingSignature.x),this.resizingSignature.height=Math.min(l,this.pdfPages[s].height-this.resizingSignature.y)}getSignaturesForPage(n){return this.signatures.filter(r=>r.page===n)}removeSignature(n){this.signatures=this.signatures.filter(r=>r.id!==n)}clearSignatures(){this.signatures=[]}dataURLToBytes(n){let r=n.split(",")[1],i=atob(r),s=new Uint8Array(i.length);for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return s}savePDF(){return ye(this,null,function*(){if(!(!this.pdfDocument||this.signatures.length===0))try{let{PDFDocument:n}=yield import("./chunk-3BHOQIX5.js"),r=yield this.pdfDocument.getData(),i=yield n.load(r),s=new Map;this.signatures.forEach(a=>{s.has(a.page)||s.set(a.page,[]),s.get(a.page).push(a)});for(let[a,l]of s){let h=i.getPage(a-1),{width:p,height:g}=h.getSize(),f=this.pdfPages[a-1].scale;for(let v of l)try{let y=this.dataURLToBytes(v.imageData),E=v.imageData.includes("data:image/png")?yield i.embedPng(y):yield i.embedJpg(y),T=v.x/f,M=v.y/f,w=v.width/f,C=v.height/f,L=g-M-C;h.drawImage(E,{x:T,y:L,width:w,height:C})}catch(y){console.error("Error adding signature to page:",y)}}let o=yield i.save(),c=new Blob([o],{type:"application/pdf"}),d=URL.createObjectURL(c),u=document.createElement("a");u.href=d,u.download="signed-document.pdf",document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(d)}catch(n){console.error("Error saving PDF:",n),alert("Error saving PDF. Please try again.")}})}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=Ps({type:e,selectors:[["app-root"]],viewQuery:function(r,i){if(r&1&&vf(qw,5),r&2){let s;Lc(s=jc())&&(i.pdfViewer=s.first)}},standalone:!0,features:[qs],decls:13,vars:5,consts:[["pdfViewer",""],[1,"app-container"],[1,"header"],[1,"controls"],["title","Load Test PDF",1,"btn","btn-info",3,"click"],["title","Add Signature",1,"btn","btn-secondary",3,"click","disabled"],["title","Save PDF",1,"btn","btn-success",3,"click","disabled"],["title","Clear All",1,"btn","btn-warning",3,"click","disabled"],["class","main-content",4,"ngIf"],[1,"main-content"],[1,"upload-area"],[1,"upload-message"],[1,"upload-icons"],[1,"pdf-viewer"],["class","page-container",4,"ngFor","ngForOf"],[1,"page-container"],[1,"page-header"],["class","signature-count",4,"ngIf"],[1,"page-canvas-container"],[3,"width","height"],["class","placed-signature","style","touch-action: none;",3,"left","top","width","height","mousedown","touchstart",4,"ngFor","ngForOf"],[1,"signature-count"],[1,"placed-signature",2,"touch-action","none",3,"mousedown","touchstart"],["alt","Signature",1,"signature-image",3,"src"],["title","Delete",1,"delete-signature",3,"click"],[1,"resize-handles"],[1,"resize-handle","resize-se",2,"touch-action","none",3,"mousedown","touchstart"]],template:function(r,i){r&1&&(qe(0,"div",1)(1,"header",2)(2,"div",3)(3,"button",4),Bt("click",function(){return i.loadTestPDF()}),Tt(4,"\u{1F4CB}"),He(),qe(5,"button",5),Bt("click",function(){return i.addSignature()}),Tt(6,"\u2795"),He(),qe(7,"button",6),Bt("click",function(){return i.savePDF()}),Tt(8,"\u{1F4BE}"),He(),qe(9,"button",7),Bt("click",function(){return i.clearSignatures()}),Tt(10,"\u{1F5D1}\uFE0F"),He()()(),_r(11,Yw,9,0,"div",8)(12,Qw,4,1,"div",8),He()),r&2&&(it(5),mt("disabled",!i.pdfLoaded||!i.currentSignature),it(2),mt("disabled",!i.pdfLoaded||i.signatures.length===0),it(2),mt("disabled",i.signatures.length===0),it(2),mt("ngIf",!i.pdfLoaded),it(),mt("ngIf",i.pdfLoaded))},dependencies:[qc,jf,Bf],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}.app-container[_ngcontent-%COMP%]{min-height:100vh;background:#f9f9f9;font-family:Segoe UI,sans-serif;color:#333}.header[_ngcontent-%COMP%]{background:#fff;padding:.5rem 1rem;border-bottom:1px solid #ddd;position:sticky;top:0;z-index:100}.controls[_ngcontent-%COMP%]{display:flex;justify-content:space-around;gap:.25rem}.btn[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1.2rem;border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer}.btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.btn-info[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-success[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn-warning[_ngcontent-%COMP%]{background:#ffc107;color:#212529}.main-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100vh - 60px)}.upload-area[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;text-align:center;padding:1rem}.upload-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:.5rem}.upload-icons[_ngcontent-%COMP%]{font-size:2rem;margin-top:1rem;opacity:.3}.pdf-viewer[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:0}.page-container[_ngcontent-%COMP%]{margin-bottom:1rem;background:#fff;border-radius:8px;box-shadow:0 2px 6px #00000014}.page-header[_ngcontent-%COMP%]{padding:.5rem;font-size:.9rem;display:flex;justify-content:space-between;background:#f1f3f5}.signature-count[_ngcontent-%COMP%]{color:#28a745;font-weight:600}.page-canvas-container[_ngcontent-%COMP%]{position:relative;margin:0 auto;max-width:100%;background:#fff;overflow:hidden}canvas[_ngcontent-%COMP%]{width:100%!important;height:auto!important;display:block}.placed-signature[_ngcontent-%COMP%]{position:absolute;border:1px solid transparent}.signature-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:fill}.delete-signature[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-6px;width:18px;height:18px;border:none;border-radius:50%;background:#dc3545;color:#fff;font-size:12px;display:none}.placed-signature[_ngcontent-%COMP%]:hover   .delete-signature[_ngcontent-%COMP%]{display:block}.resize-handle[_ngcontent-%COMP%]{position:absolute;width:10px;height:10px;background:#007bff;bottom:-5px;right:-5px;cursor:se-resize}@media (max-width: 600px){.controls[_ngcontent-%COMP%]{justify-content:space-between;gap:.2rem}.btn[_ngcontent-%COMP%]{width:36px;height:36px;font-size:1rem}.page-container[_ngcontent-%COMP%]{margin-bottom:0}.page-header[_ngcontent-%COMP%]{padding:.25rem}.page-canvas-container[_ngcontent-%COMP%]{height:auto;line-height:0}canvas[_ngcontent-%COMP%]{max-height:100%}.pdf-viewer[_ngcontent-%COMP%]{padding:0}}"]})}}return e})();Yf(Hp,kp).catch(e=>console.error(e));
