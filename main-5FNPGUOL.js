import{a as ce,b as ke,c as Io,d as sn,e as Xp,f as ye}from"./chunk-4IDNTCH7.js";var wo=sn(()=>{"use strict"});var Vp=sn((TM,Up)=>{"use strict";var Vw="bold|bolder|lighter|[1-9]00",Hw="italic|oblique",$w="small-caps",zw="ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded",Ww="px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q",Bp=`'([^']+)'|"([^"]+)"|[\\w\\s-]+`,Gw=new RegExp(`(${Vw}) +`,"i"),qw=new RegExp(`(${Hw}) +`,"i"),Yw=new RegExp(`(${$w}) +`,"i"),Xw=new RegExp(`(${zw}) +`,"i"),Kw=new RegExp(`([\\d\\.]+)(${Ww}) *((?:${Bp})( *, *(?:${Bp}))*)`),$l={},Zw=16;Up.exports=e=>{if($l[e])return $l[e];let t=Kw.exec(e);if(!t)return;let n={weight:"normal",style:"normal",stretch:"normal",variant:"normal",size:parseFloat(t[1]),unit:t[2],family:t[3].replace(/["']/g,"").replace(/ *, */g,",")},r,i,s,o,l=e.substring(0,t.index);switch((r=Gw.exec(l))&&(n.weight=r[1]),(i=qw.exec(l))&&(n.style=i[1]),(s=Yw.exec(l))&&(n.variant=s[1]),(o=Xw.exec(l))&&(n.stretch=o[1]),n.unit){case"pt":n.size/=.75;break;case"pc":n.size*=16;break;case"in":n.size*=96;break;case"cm":n.size*=96/2.54;break;case"mm":n.size*=96/25.4;break;case"%":break;case"em":case"rem":n.size*=Zw/.75;break;case"q":n.size*=96/25.4/4;break}return $l[e]=n}});var Hp=sn(Mi=>{"use strict";var Qw=Vp();Mi.parseFont=Qw;Mi.createCanvas=function(e,t){return Object.assign(document.createElement("canvas"),{width:e,height:t})};Mi.createImageData=function(e,t,n){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(e);case 2:return new ImageData(e,t);default:return new ImageData(e,t,n)}};Mi.loadImage=function(e,t){return new Promise(function(n,r){let i=Object.assign(document.createElement("img"),t);function s(){i.onload=null,i.onerror=null}i.onload=function(){s(),n(i)},i.onerror=function(){s(),r(new Error('Failed to load the image "'+e+'"'))},i.src=e})}});var $p=sn(()=>{"use strict"});var zl=sn(()=>{"use strict"});var Wl=sn(()=>{"use strict"});var zp=sn(()=>{"use strict"});var Wp=sn((exports,module)=>{"use strict";(function(t,n){typeof exports=="object"&&typeof module=="object"?module.exports=t.pdfjsLib=n():typeof define=="function"&&define.amd?define("pdfjs-dist/build/pdf",[],()=>t.pdfjsLib=n()):typeof exports=="object"?exports["pdfjs-dist/build/pdf"]=t.pdfjsLib=n():t["pdfjs-dist/build/pdf"]=t.pdfjsLib=n()})(globalThis,()=>(()=>{"use strict";var __webpack_modules__=[,(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=b,t.bytesToString=B,t.createValidAbsoluteUrl=A,t.getModificationDate=tt,t.getUuid=qp,t.getVerbosityLevel=ie,t.info=Z,t.isArrayBuffer=Pe,t.isArrayEqual=ct,t.isNodeJS=void 0,t.normalizeUnicode=Do,t.objectFromMap=q,t.objectSize=re,t.setVerbosityLevel=Q,t.shadow=N,t.string32=G,t.stringToBytes=V,t.stringToPDFString=ue,t.stringToUTF8String=fe,t.unreachable=S,t.utf8StringToString=De,t.warn=O;let n=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=n;let r=[1,0,0,1,0,0];t.IDENTITY_MATRIX=r;let i=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=i;let s=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=s;let o=1.35;t.LINE_FACTOR=o;let l=.35;t.LINE_DESCENT_FACTOR=l;let d=l/o;t.BASELINE_FACTOR=d;let u={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=u;let a={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=a;let c="pdfjs_internal_editor_";t.AnnotationEditorPrefix=c;let h={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorType=h;let p={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.AnnotationEditorParamsType=p;let g={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=g;let f={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=f;let v={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=v;let y={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=y;let E={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=E;let M={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=M;let T={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=T;let w={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=w;let C={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=C;let L={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=L;let U={O:"PageOpen",C:"PageClose"};t.PageActionEventType=U;let F={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=F;let $={NONE:0,BINARY:1};t.CMapCompressionType=$;let W={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=W;let ne={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=ne;let J=F.WARNINGS;function Q(te){Number.isInteger(te)&&(J=te)}function ie(){return J}function Z(te){J>=F.INFOS&&console.log(`Info: ${te}`)}function O(te){J>=F.WARNINGS&&console.log(`Warning: ${te}`)}function S(te){throw new Error(te)}function b(te,z){te||S(z)}function _(te){switch(te?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function A(te,z=null,H=null){if(!te)return null;try{if(H&&typeof te=="string"&&(H.addDefaultProtocol&&te.startsWith("www.")&&te.match(/\./g)?.length>=2&&(te=`http://${te}`),H.tryConvertEncoding))try{te=fe(te)}catch{}let ae=z?new URL(te,z):new URL(te);if(_(ae))return ae}catch{}return null}function N(te,z,H,ae=!1){return Object.defineProperty(te,z,{value:H,enumerable:!ae,configurable:!0,writable:!1}),H}let k=function(){function z(H,ae){this.constructor===z&&S("Cannot initialize BaseException."),this.message=H,this.name=ae}return z.prototype=new Error,z.constructor=z,z}();t.BaseException=k;class j extends k{constructor(z,H){super(z,"PasswordException"),this.code=H}}t.PasswordException=j;class x extends k{constructor(z,H){super(z,"UnknownErrorException"),this.details=H}}t.UnknownErrorException=x;class m extends k{constructor(z){super(z,"InvalidPDFException")}}t.InvalidPDFException=m;class D extends k{constructor(z){super(z,"MissingPDFException")}}t.MissingPDFException=D;class I extends k{constructor(z,H){super(z,"UnexpectedResponseException"),this.status=H}}t.UnexpectedResponseException=I;class R extends k{constructor(z){super(z,"FormatError")}}t.FormatError=R;class P extends k{constructor(z){super(z,"AbortException")}}t.AbortException=P;function B(te){(typeof te!="object"||te?.length===void 0)&&S("Invalid argument for bytesToString");let z=te.length,H=8192;if(z<H)return String.fromCharCode.apply(null,te);let ae=[];for(let xe=0;xe<z;xe+=H){let Ge=Math.min(xe+H,z),qe=te.subarray(xe,Ge);ae.push(String.fromCharCode.apply(null,qe))}return ae.join("")}function V(te){typeof te!="string"&&S("Invalid argument for stringToBytes");let z=te.length,H=new Uint8Array(z);for(let ae=0;ae<z;++ae)H[ae]=te.charCodeAt(ae)&255;return H}function G(te){return String.fromCharCode(te>>24&255,te>>16&255,te>>8&255,te&255)}function re(te){return Object.keys(te).length}function q(te){let z=Object.create(null);for(let[H,ae]of te)z[H]=ae;return z}function Y(){let te=new Uint8Array(4);return te[0]=1,new Uint32Array(te.buffer,0,1)[0]===1}function X(){try{return new Function(""),!0}catch{return!1}}class K{static get isLittleEndian(){return N(this,"isLittleEndian",Y())}static get isEvalSupported(){return N(this,"isEvalSupported",X())}static get isOffscreenCanvasSupported(){return N(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?N(this,"platform",{isWin:!1,isMac:!1}):N(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return N(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}t.FeatureTest=K;let ee=[...Array(256).keys()].map(te=>te.toString(16).padStart(2,"0"));class se{static makeHexColor(z,H,ae){return`#${ee[z]}${ee[H]}${ee[ae]}`}static scaleMinMax(z,H){let ae;z[0]?(z[0]<0&&(ae=H[0],H[0]=H[1],H[1]=ae),H[0]*=z[0],H[1]*=z[0],z[3]<0&&(ae=H[2],H[2]=H[3],H[3]=ae),H[2]*=z[3],H[3]*=z[3]):(ae=H[0],H[0]=H[2],H[2]=ae,ae=H[1],H[1]=H[3],H[3]=ae,z[1]<0&&(ae=H[2],H[2]=H[3],H[3]=ae),H[2]*=z[1],H[3]*=z[1],z[2]<0&&(ae=H[0],H[0]=H[1],H[1]=ae),H[0]*=z[2],H[1]*=z[2]),H[0]+=z[4],H[1]+=z[4],H[2]+=z[5],H[3]+=z[5]}static transform(z,H){return[z[0]*H[0]+z[2]*H[1],z[1]*H[0]+z[3]*H[1],z[0]*H[2]+z[2]*H[3],z[1]*H[2]+z[3]*H[3],z[0]*H[4]+z[2]*H[5]+z[4],z[1]*H[4]+z[3]*H[5]+z[5]]}static applyTransform(z,H){let ae=z[0]*H[0]+z[1]*H[2]+H[4],xe=z[0]*H[1]+z[1]*H[3]+H[5];return[ae,xe]}static applyInverseTransform(z,H){let ae=H[0]*H[3]-H[1]*H[2],xe=(z[0]*H[3]-z[1]*H[2]+H[2]*H[5]-H[4]*H[3])/ae,Ge=(-z[0]*H[1]+z[1]*H[0]+H[4]*H[1]-H[5]*H[0])/ae;return[xe,Ge]}static getAxialAlignedBoundingBox(z,H){let ae=this.applyTransform(z,H),xe=this.applyTransform(z.slice(2,4),H),Ge=this.applyTransform([z[0],z[3]],H),qe=this.applyTransform([z[2],z[1]],H);return[Math.min(ae[0],xe[0],Ge[0],qe[0]),Math.min(ae[1],xe[1],Ge[1],qe[1]),Math.max(ae[0],xe[0],Ge[0],qe[0]),Math.max(ae[1],xe[1],Ge[1],qe[1])]}static inverseTransform(z){let H=z[0]*z[3]-z[1]*z[2];return[z[3]/H,-z[1]/H,-z[2]/H,z[0]/H,(z[2]*z[5]-z[4]*z[3])/H,(z[4]*z[1]-z[5]*z[0])/H]}static singularValueDecompose2dScale(z){let H=[z[0],z[2],z[1],z[3]],ae=z[0]*H[0]+z[1]*H[2],xe=z[0]*H[1]+z[1]*H[3],Ge=z[2]*H[0]+z[3]*H[2],qe=z[2]*H[1]+z[3]*H[3],$n=(ae+qe)/2,zn=Math.sqrt((ae+qe)**2-4*(ae*qe-Ge*xe))/2,vn=$n+zn||1,ot=$n-zn||1;return[Math.sqrt(vn),Math.sqrt(ot)]}static normalizeRect(z){let H=z.slice(0);return z[0]>z[2]&&(H[0]=z[2],H[2]=z[0]),z[1]>z[3]&&(H[1]=z[3],H[3]=z[1]),H}static intersect(z,H){let ae=Math.max(Math.min(z[0],z[2]),Math.min(H[0],H[2])),xe=Math.min(Math.max(z[0],z[2]),Math.max(H[0],H[2]));if(ae>xe)return null;let Ge=Math.max(Math.min(z[1],z[3]),Math.min(H[1],H[3])),qe=Math.min(Math.max(z[1],z[3]),Math.max(H[1],H[3]));return Ge>qe?null:[ae,Ge,xe,qe]}static bezierBoundingBox(z,H,ae,xe,Ge,qe,$n,zn){let vn=[],ot=[[],[]],Wn,rn,xi,ze,Ri,Pi,Co,So;for(let Ao=0;Ao<2;++Ao){if(Ao===0?(rn=6*z-12*ae+6*Ge,Wn=-3*z+9*ae-9*Ge+3*$n,xi=3*ae-3*z):(rn=6*H-12*xe+6*qe,Wn=-3*H+9*xe-9*qe+3*zn,xi=3*xe-3*H),Math.abs(Wn)<1e-12){if(Math.abs(rn)<1e-12)continue;ze=-xi/rn,0<ze&&ze<1&&vn.push(ze);continue}Co=rn*rn-4*xi*Wn,So=Math.sqrt(Co),!(Co<0)&&(Ri=(-rn+So)/(2*Wn),0<Ri&&Ri<1&&vn.push(Ri),Pi=(-rn-So)/(2*Wn),0<Pi&&Pi<1&&vn.push(Pi))}let kr=vn.length,lt,Or=kr;for(;kr--;)ze=vn[kr],lt=1-ze,ot[0][kr]=lt*lt*lt*z+3*lt*lt*ze*ae+3*lt*ze*ze*Ge+ze*ze*ze*$n,ot[1][kr]=lt*lt*lt*H+3*lt*lt*ze*xe+3*lt*ze*ze*qe+ze*ze*ze*zn;return ot[0][Or]=z,ot[1][Or]=H,ot[0][Or+1]=$n,ot[1][Or+1]=zn,ot[0].length=ot[1].length=Or+2,[Math.min(...ot[0]),Math.min(...ot[1]),Math.max(...ot[0]),Math.max(...ot[1])]}}t.Util=se;let le=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ue(te){if(te[0]>="\xEF"){let H;if(te[0]==="\xFE"&&te[1]==="\xFF"?H="utf-16be":te[0]==="\xFF"&&te[1]==="\xFE"?H="utf-16le":te[0]==="\xEF"&&te[1]==="\xBB"&&te[2]==="\xBF"&&(H="utf-8"),H)try{let ae=new TextDecoder(H,{fatal:!0}),xe=V(te);return ae.decode(xe)}catch(ae){O(`stringToPDFString: "${ae}".`)}}let z=[];for(let H=0,ae=te.length;H<ae;H++){let xe=le[te.charCodeAt(H)];z.push(xe?String.fromCharCode(xe):te.charAt(H))}return z.join("")}function fe(te){return decodeURIComponent(escape(te))}function De(te){return unescape(encodeURIComponent(te))}function Pe(te){return typeof te=="object"&&te?.byteLength!==void 0}function ct(te,z){if(te.length!==z.length)return!1;for(let H=0,ae=te.length;H<ae;H++)if(te[H]!==z[H])return!1;return!0}function tt(te=new Date){return[te.getUTCFullYear().toString(),(te.getUTCMonth()+1).toString().padStart(2,"0"),te.getUTCDate().toString().padStart(2,"0"),te.getUTCHours().toString().padStart(2,"0"),te.getUTCMinutes().toString().padStart(2,"0"),te.getUTCSeconds().toString().padStart(2,"0")].join("")}class Hn{#e=!1;constructor(){this.promise=new Promise((z,H)=>{this.resolve=ae=>{this.#e=!0,z(ae)},this.reject=ae=>{this.#e=!0,H(ae)}})}get settled(){return this.#e}}t.PromiseCapability=Hn;let nt=null,Ht=null;function Do(te){return nt||(nt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ht=new Map([["\uFB05","\u017Ft"]])),te.replaceAll(nt,(z,H,ae)=>H?H.normalize("NFKC"):Ht.get(ae))}function qp(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();let te=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(te);else for(let z=0;z<32;z++)te[z]=Math.floor(Math.random()*255);return B(te)}let Yp="pdfjs_internal_id_";t.AnnotationPrefix=Yp},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);let DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(e){if(typeof e=="string"||e instanceof URL?e={url:e}:(0,_util.isArrayBuffer)(e)&&(e={data:e}),typeof e!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");let t=new PDFDocumentLoadingTask,{docId:n}=t,r=e.url?getUrlProp(e.url):null,i=e.data?getDataProp(e.data):null,s=e.httpHeaders||null,o=e.withCredentials===!0,l=e.password??null,d=e.range instanceof PDFDataRangeTransport?e.range:null,u=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE,a=e.worker instanceof PDFWorker?e.worker:null,c=e.verbosity,h=typeof e.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(e.docBaseUrl)?e.docBaseUrl:null,p=typeof e.cMapUrl=="string"?e.cMapUrl:null,g=e.cMapPacked!==!1,f=e.CMapReaderFactory||DefaultCMapReaderFactory,v=typeof e.standardFontDataUrl=="string"?e.standardFontDataUrl:null,y=e.StandardFontDataFactory||DefaultStandardFontDataFactory,E=e.stopAtErrors!==!0,M=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,T=e.isEvalSupported!==!1,w=typeof e.isOffscreenCanvasSupported=="boolean"?e.isOffscreenCanvasSupported:!_util.isNodeJS,C=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,L=typeof e.disableFontFace=="boolean"?e.disableFontFace:_util.isNodeJS,U=e.fontExtraProperties===!0,F=e.enableXfa===!0,$=e.ownerDocument||globalThis.document,W=e.disableRange===!0,ne=e.disableStream===!0,J=e.disableAutoFetch===!0,Q=e.pdfBug===!0,ie=d?d.length:e.length??NaN,Z=typeof e.useSystemFonts=="boolean"?e.useSystemFonts:!_util.isNodeJS&&!L,O=typeof e.useWorkerFetch=="boolean"?e.useWorkerFetch:f===_display_utils.DOMCMapReaderFactory&&y===_display_utils.DOMStandardFontDataFactory&&p&&v&&(0,_display_utils.isValidFetchUrl)(p,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(v,document.baseURI),S=e.canvasFactory||new DefaultCanvasFactory({ownerDocument:$}),b=e.filterFactory||new DefaultFilterFactory({docId:n,ownerDocument:$}),_=null;(0,_util.setVerbosityLevel)(c);let A={canvasFactory:S,filterFactory:b};if(O||(A.cMapReaderFactory=new f({baseUrl:p,isCompressed:g}),A.standardFontDataFactory=new y({baseUrl:v})),!a){let j={verbosity:c,port:_worker_options.GlobalWorkerOptions.workerPort};a=j.port?PDFWorker.fromPort(j):new PDFWorker(j),t._worker=a}let N={docId:n,apiVersion:"3.11.174",data:i,password:l,disableAutoFetch:J,rangeChunkSize:u,length:ie,docBaseUrl:h,enableXfa:F,evaluatorOptions:{maxImageSize:M,disableFontFace:L,ignoreErrors:E,isEvalSupported:T,isOffscreenCanvasSupported:w,canvasMaxAreaInBytes:C,fontExtraProperties:U,useSystemFonts:Z,cMapUrl:O?p:null,standardFontDataUrl:O?v:null}},k={ignoreErrors:E,isEvalSupported:T,disableFontFace:L,fontExtraProperties:U,enableXfa:F,ownerDocument:$,disableAutoFetch:J,pdfBug:Q,styleElement:_};return a.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");let j=_fetchDocument(a,N),x=new Promise(function(m){let D;d?D=new _transport_stream.PDFDataTransportStream({length:ie,initialData:d.initialData,progressiveDone:d.progressiveDone,contentDispositionFilename:d.contentDispositionFilename,disableRange:W,disableStream:ne},d):i||(D=(R=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(R):(0,_display_utils.isValidFetchUrl)(R.url)?new _displayFetch_stream.PDFFetchStream(R):new _displayNetwork.PDFNetworkStream(R))({url:r,length:ie,httpHeaders:s,withCredentials:o,rangeChunkSize:u,disableRange:W,disableStream:ne})),m(D)});return Promise.all([j,x]).then(function([m,D]){if(t.destroyed)throw new Error("Loading aborted");let I=new _message_handler.MessageHandler(n,m,a.port),R=new WorkerTransport(I,t,D,k,A);t._transport=R,I.send("Ready",null)})}).catch(t._capability.reject),t}function _fetchDocument(e,t){return ye(this,null,function*(){if(e.destroyed)throw new Error("Worker was destroyed");let n=yield e.messageHandler.sendWithPromise("GetDocRequest",t,t.data?[t.data.buffer]:null);if(e.destroyed)throw new Error("Worker was destroyed");return n})}function getUrlProp(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch{if(_util.isNodeJS&&typeof e=="string")return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(e){if(_util.isNodeJS&&typeof Buffer<"u"&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if(typeof e=="string")return(0,_util.stringToBytes)(e);if(typeof e=="object"&&!isNaN(e?.length)||(0,_util.isArrayBuffer)(e))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){return ye(this,null,function*(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),yield this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(t,n,r=!1,i=null){this.length=t,this.initialData=n,this.progressiveDone=r,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,n){for(let r of this._rangeListeners)r(t,n)}onDataProgress(t,n){this._readyCapability.promise.then(()=>{for(let r of this._progressListeners)r(t,n)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(let n of this._progressiveReadListeners)n(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,n){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,n){this._pdfInfo=t,this._transport=n,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(r=>{if(!r)return r;let i=[];for(let s in r)i.push(...r[s]);return i}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#e=null;#t=!1;constructor(t,n,r,i=!1){this._pageIndex=t,this._pageInfo=n,this._transport=r,this._stats=i?new _display_utils.StatTimer:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:n=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:s=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:n,offsetX:r,offsetY:i,dontFlip:s})}getAnnotations({intent:t="display"}={}){let n=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,n.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){return ye(this,null,function*(){return this._transport._htmlForXfa?.children[this._pageIndex]||null})}render({canvasContext:t,viewport:n,intent:r="display",annotationMode:i=_util.AnnotationMode.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:d=null,pageColors:u=null,printAnnotationStorage:a=null}){this._stats?.time("Overall");let c=this._transport.getRenderingIntent(r,i,a);this.#t=!1,this.#r(),l||(l=this._transport.getOptionalContentConfig());let h=this._intentStates.get(c.cacheKey);h||(h=Object.create(null),this._intentStates.set(c.cacheKey,h)),h.streamReaderCancelTimeout&&(clearTimeout(h.streamReaderCancelTimeout),h.streamReaderCancelTimeout=null);let p=!!(c.renderingIntent&_util.RenderingIntentFlag.PRINT);h.displayReadyCapability||(h.displayReadyCapability=new _util.PromiseCapability,h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c));let g=y=>{h.renderTasks.delete(f),(this._maybeCleanupAfterRender||p)&&(this.#t=!0),this.#n(!p),y?(f.capability.reject(y),this._abortOperatorList({intentState:h,reason:y instanceof Error?y:new Error(y)})):f.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},f=new InternalRenderTask({callback:g,params:{canvasContext:t,viewport:n,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:h.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!p,pdfBug:this._pdfBug,pageColors:u});(h.renderTasks||=new Set).add(f);let v=f.task;return Promise.all([h.displayReadyCapability.promise,l]).then(([y,E])=>{if(this.destroyed){g();return}this._stats?.time("Rendering"),f.initializeGraphics({transparency:y,optionalContentConfig:E}),f.operatorListChanged()}).catch(g),v}getOperatorList({intent:t="display",annotationMode:n=_util.AnnotationMode.ENABLE,printAnnotationStorage:r=null}={}){function i(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}let s=this._transport.getRenderingIntent(t,n,r,!0),o=this._intentStates.get(s.cacheKey);o||(o=Object.create(null),this._intentStates.set(s.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=i,o.opListReadCapability=new _util.PromiseCapability,(o.renderTasks||=new Set).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(s)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:n===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>_xfa_text.XfaText.textContent(r));let n=this.streamTextContent(t);return new Promise(function(r,i){function s(){o.read().then(function({value:d,done:u}){if(u){r(l);return}Object.assign(l.styles,d.styles),l.items.push(...d.items),s()},i)}let o=n.getReader(),l={items:[],styles:Object.create(null)};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let t=[];for(let n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(let r of n.renderTasks)t.push(r.completed),r.cancel();return this.objs.clear(),this.#t=!1,this.#r(),Promise.all(t)}cleanup(t=!1){this.#t=!0;let n=this.#n(!1);return t&&n&&(this._stats&&=new _display_utils.StatTimer),n}#n(t=!1){if(this.#r(),!this.#t||this.destroyed)return!1;if(t)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(let{renderTasks:n,operatorList:r}of this._intentStates.values())if(n.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#r(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(t,n){let r=this._intentStates.get(n);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(t))}_renderPageChunk(t,n){for(let r=0,i=t.length;r<i;r++)n.operatorList.fnArray.push(t.fnArray[r]),n.operatorList.argsArray.push(t.argsArray[r]);n.operatorList.lastChunk=t.lastChunk,n.operatorList.separateAnnots=t.separateAnnots;for(let r of n.renderTasks)r.operatorListChanged();t.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:n,annotationStorageSerializable:r}){let{map:i,transfers:s}=r,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:i},s).getReader(),d=this._intentStates.get(n);d.streamReader=l;let u=()=>{l.read().then(({value:a,done:c})=>{if(c){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(a,d),u())},a=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(let c of d.renderTasks)c.operatorListChanged();this.#n(!0)}if(d.displayReadyCapability)d.displayReadyCapability.reject(a);else if(d.opListReadCapability)d.opListReadCapability.reject(a);else throw a}})};u()}_abortOperatorList({intentState:t,reason:n,force:r=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!r){if(t.renderTasks.size>0)return;if(n instanceof _display_utils.RenderingCancelledException){let i=RENDERING_CANCELLED_TIMEOUT;n.extraDelay>0&&n.extraDelay<1e3&&(i+=n.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},i);return}}if(t.streamReader.cancel(new _util.AbortException(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(let[i,s]of this._intentStates)if(s===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#e=new Set;#t=Promise.resolve();postMessage(t,n){let r={data:structuredClone(t,n?{transfer:n}:null)};this.#t.then(()=>{for(let i of this.#e)i.call(this,r)})}addEventListener(t,n){this.#e.add(n)}removeEventListener(t,n){this.#e.delete(n)}terminate(){this.#e.clear()}}exports.LoopbackPort=LoopbackPort;let PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof Io=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){let e=document?.currentScript?.src;e&&(PDFWorkerUtil.fallbackWorkerSrc=e.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(e,t){let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}let r=new URL(t,n);return n.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(e){let t=`importScripts("${e}");`;return URL.createObjectURL(new Blob([t]))}}class PDFWorker{static#workerPorts;constructor({name:e=null,port:t=null,verbosity:n=(0,_util.getVerbosityLevel)()}={}){if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,t){if(PDFWorker.#workerPorts?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:e}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,e)||(e=PDFWorkerUtil.createCDNWrapper(new URL(e,window.location).href));let t=new Worker(e),n=new _message_handler.MessageHandler("main","worker",t),r=()=>{t.removeEventListener("error",i),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=()=>{this._webWorker||r()};t.addEventListener("error",i),n.on("test",o=>{if(t.removeEventListener("error",i),this.destroyed){r();return}o?(this._messageHandler=n,this._port=t,this._webWorker=t,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),t.terminate())}),n.on("ready",o=>{if(t.removeEventListener("error",i),this.destroyed){r();return}try{s()}catch{this._setupFakeWorker()}});let s=()=>{let o=new Uint8Array;n.send("test",o,[o.buffer])};s();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}let t=new LoopbackPort;this._port=t;let n=`fake${PDFWorkerUtil.fakeWorkerId++}`,r=new _message_handler.MessageHandler(n+"_worker",n,t);e.setup(r,t);let i=new _message_handler.MessageHandler(n,n+"_worker",t);this._messageHandler=i,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");let t=this.#workerPorts?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new PDFWorker(e)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){let loader=()=>ye(this,null,function*(){let mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof Io=="function"){let worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#e=new Map;#t=new Map;#n=new Map;#r=null;constructor(t,n,r,i,s){this.messageHandler=t,this.loadingTask=n,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#a(t,n=null){let r=this.#e.get(t);if(r)return r;let i=this.messageHandler.sendWithPromise(t,n);return this.#e.set(t,i),i}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(t,n=_util.AnnotationMode.ENABLE,r=null,i=!1){let s=_util.RenderingIntentFlag.DISPLAY,o=_annotation_storage.SerializableEmpty;switch(t){case"any":s=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":s=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${t}`)}switch(n){case _util.AnnotationMode.DISABLE:s+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:s+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:s+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,o=(s&_util.RenderingIntentFlag.PRINT&&r instanceof _annotation_storage.PrintAnnotationStorage?r:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${n}`)}return i&&(s+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:s,cacheKey:`${s}_${o.hash}`,annotationStorageSerializable:o}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));let t=[];for(let r of this.#t.values())t.push(r._destroy());this.#t.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:t,loadingTask:n}=this;t.on("GetReader",(r,i)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){i.close();return}(0,_util.assert)(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",r=>{let i=new _util.PromiseCapability,s=this._fullReader;return s.headersReady.then(()=>{(!s.isStreamingSupported||!s.isRangeSupported)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),s.onProgress=o=>{n.onProgress?.({loaded:o.loaded,total:o.total})}),i.resolve({isStreamingSupported:s.isStreamingSupported,isRangeSupported:s.isRangeSupported,contentLength:s.contentLength})},i.reject),i.promise}),t.on("GetRangeReader",(r,i)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let s=this._networkStream.getRangeReader(r.begin,r.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:o,done:l}){if(l){i.close();return}(0,_util.assert)(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{s.cancel(o),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,n._capability.resolve(new PDFDocumentProxy(r,this))}),t.on("DocException",function(r){let i;switch(r.name){case"PasswordException":i=new _util.PasswordException(r.message,r.code);break;case"InvalidPDFException":i=new _util.InvalidPDFException(r.message);break;case"MissingPDFException":i=new _util.MissingPDFException(r.message);break;case"UnexpectedResponseException":i=new _util.UnexpectedResponseException(r.message,r.status);break;case"UnknownErrorException":i=new _util.UnknownErrorException(r.message,r.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}n._capability.reject(i)}),t.on("PasswordRequest",r=>{if(this.#r=new _util.PromiseCapability,n.onPassword){let i=s=>{s instanceof Error?this.#r.reject(s):this.#r.resolve({password:s})};try{n.onPassword(i,r.code)}catch(s){this.#r.reject(s)}}else this.#r.reject(new _util.PasswordException(r.message,r.code));return this.#r.promise}),t.on("DataLoaded",r=>{n.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),t.on("StartRenderPage",r=>{if(this.destroyed)return;this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),t.on("commonobj",([r,i,s])=>{if(!this.destroyed&&!this.commonObjs.has(r))switch(i){case"Font":let o=this._params;if("error"in s){let u=s.error;(0,_util.warn)(`Error during font loading: ${u}`),this.commonObjs.resolve(r,u);break}let l=o.pdfBug&&globalThis.FontInspector?.enabled?(u,a)=>globalThis.FontInspector.fontAdded(u,a):null,d=new _font_loader.FontFaceObject(s,{isEvalSupported:o.isEvalSupported,disableFontFace:o.disableFontFace,ignoreErrors:o.ignoreErrors,inspectFont:l});this.fontLoader.bind(d).catch(u=>t.sendWithPromise("FontFallback",{id:r})).finally(()=>{!o.fontExtraProperties&&d.data&&(d.data=null),this.commonObjs.resolve(r,d)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,s);break;default:throw new Error(`Got unknown common object type ${i}`)}}),t.on("obj",([r,i,s,o])=>{if(this.destroyed)return;let l=this.#t.get(i);if(!l.objs.has(r))switch(s){case"Image":if(l.objs.resolve(r,o),o){let d;if(o.bitmap){let{width:u,height:a}=o;d=u*a*4}else d=o.data?.length||0;d>_util.MAX_IMAGE_SIZE_TO_CACHE&&(l._maybeCleanupAfterRender=!0)}break;case"Pattern":l.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${s}`)}}),t.on("DocProgress",r=>{this.destroyed||n.onProgress?.({loaded:r.loaded,total:r.total})}),t.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:t,transfers:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));let n=t-1,r=this.#n.get(n);if(r)return r;let i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");let o=new PDFPageProxy(n,s,this,this._params.pdfBug);return this.#t.set(n,o),o});return this.#n.set(n,i),i}getPageIndex(t){return typeof t!="object"||t===null||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:n})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(t=>new _optional_content_config.OptionalContentConfig(t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let t="GetMetadata",n=this.#e.get(t);if(n)return n;let r=this.messageHandler.sendWithPromise(t,null).then(i=>({info:i[0],metadata:i[1]?new _metadata.Metadata(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(t,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(t=!1){return ye(this,null,function*(){if(!this.destroyed){yield this.messageHandler.sendWithPromise("Cleanup",null);for(let n of this.#t.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0)}})}get loadingParams(){let{disableAutoFetch:t,enableXfa:n}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t,enableXfa:n})}}class PDFObjects{#e=Object.create(null);#t(t){return this.#e[t]||={capability:new _util.PromiseCapability,data:null}}get(t,n=null){if(n){let i=this.#t(t);return i.capability.promise.then(()=>n(i.data)),null}let r=this.#e[t];if(!r?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return r.data}has(t){return this.#e[t]?.capability.settled||!1}resolve(t,n=null){let r=this.#t(t);r.data=n,r.capability.resolve()}clear(){for(let t in this.#e){let{data:n}=this.#e[t];n?.bitmap?.close()}this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(t){this.#e=t,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(t=0){this.#e.cancel(null,t)}get separateAnnots(){let{separateAnnots:t}=this.#e.operatorList;if(!t)return!1;let{annotationCanvasMap:n}=this.#e;return t.form||t.canvas&&n?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:t,params:n,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:o,pageIndex:l,canvasFactory:d,filterFactory:u,useRequestAnimationFrame:a=!1,pdfBug:c=!1,pageColors:h=null}){this.callback=t,this.params=n,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=d,this.filterFactory=u,this._pdfBug=c,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=a===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:r,viewport:i,transform:s,background:o}=this.params;this.gfx=new _canvas.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:i,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,n))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){return ye(this,null,function*(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback())))})}}let version="3.11.174";exports.version=version;let build="ce8716743";exports.build=build},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var r=n(1),i=n(4),s=n(8);let o=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=o;class l{#e=!1;#t=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(a,c){let h=this.#t.get(a);return h===void 0?c:Object.assign(c,h)}getRawValue(a){return this.#t.get(a)}remove(a){if(this.#t.delete(a),this.#t.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(let c of this.#t.values())if(c instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(a,c){let h=this.#t.get(a),p=!1;if(h!==void 0)for(let[g,f]of Object.entries(c))h[g]!==f&&(p=!0,h[g]=f);else p=!0,this.#t.set(a,c);p&&this.#n(),c instanceof i.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(c.constructor._type)}has(a){return this.#t.has(a)}getAll(){return this.#t.size>0?(0,r.objectFromMap)(this.#t):null}setAll(a){for(let[c,h]of Object.entries(a))this.setValue(c,h)}get size(){return this.#t.size}#n(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new d(this)}get serializable(){if(this.#t.size===0)return o;let a=new Map,c=new s.MurmurHash3_64,h=[],p=Object.create(null),g=!1;for(let[f,v]of this.#t){let y=v instanceof i.AnnotationEditor?v.serialize(!1,p):v;y&&(a.set(f,y),c.update(`${f}:${JSON.stringify(y)}`),g||=!!y.bitmap)}if(g)for(let f of a.values())f.bitmap&&h.push(f.bitmap);return a.size>0?{map:a,hash:c.hexdigest(),transfers:h}:o}}t.AnnotationStorage=l;class d extends l{#e;constructor(a){super();let{map:c,hash:h,transfers:p}=a.serializable,g=structuredClone(c,p?{transfer:p}:null);this.#e={map:g,hash:h,transfers:p}}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}t.PrintAnnotationStorage=d},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var r=n(5),i=n(1),s=n(6);class o{#e="";#t=!1;#n=null;#r=null;#a=null;#o=!1;#s=null;#c=this.focusin.bind(this);#l=this.focusout.bind(this);#i=!1;#f=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#h=!1;#p=o._zIndex++;static _borderLineWidth=-1;static _colorManager=new r.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(u){this.constructor===o&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=u.parent,this.id=u.id,this.width=this.height=null,this.pageIndex=u.parent.pageIndex,this.name=u.name,this.div=null,this._uiManager=u.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=u.isCentered,this._structTreeParentId=null;let{rotation:a,rawDims:{pageWidth:c,pageHeight:h,pageX:p,pageY:g}}=this.parent.viewport;this.rotation=a,this.pageRotation=(360+a-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[c,h],this.pageTranslation=[p,g];let[f,v]=this.parentDimensions;this.x=u.x/f,this.y=u.y/v,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(u){let a=new l({id:u.parent.getNextId(),parent:u.parent,uiManager:u._uiManager});a.annotationElementId=u.annotationElementId,a.deleted=!0,a._uiManager.addToAnnotationStorage(a)}static initialize(u,a=null){if(o._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(h=>[h,u.get(h)])),a?.strings)for(let h of a.strings)o._l10nPromise.set(h,u.get(h));if(o._borderLineWidth!==-1)return;let c=getComputedStyle(document.documentElement);o._borderLineWidth=parseFloat(c.getPropertyValue("--outline-width"))||0}static updateDefaultParams(u,a){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(u){return!1}static paste(u,a){(0,i.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#h}set _isDraggable(u){this.#h=u,this.div?.classList.toggle("draggable",u)}center(){let[u,a]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*a/(u*2),this.y+=this.width*u/(a*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*a/(u*2),this.y-=this.width*u/(a*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(u){this._uiManager.addCommands(u)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(u){u!==null&&(this.pageIndex=u.pageIndex,this.pageDimensions=u.pageDimensions),this.parent=u}focusin(u){this._focusEventsAllowed&&(this.#i?this.#i=!1:this.parent.setSelected(this))}focusout(u){!this._focusEventsAllowed||!this.isAttachedToDOM||u.relatedTarget?.closest(`#${this.id}`)||(u.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(u,a,c,h){let[p,g]=this.parentDimensions;[c,h]=this.screenToPageTranslation(c,h),this.x=(u+c)/p,this.y=(a+h)/g,this.fixAndSetPosition()}#v([u,a],c,h){[c,h]=this.screenToPageTranslation(c,h),this.x+=c/u,this.y+=h/a,this.fixAndSetPosition()}translate(u,a){this.#v(this.parentDimensions,u,a)}translateInPage(u,a){this.#v(this.pageDimensions,u,a),this.div.scrollIntoView({block:"nearest"})}drag(u,a){let[c,h]=this.parentDimensions;if(this.x+=u/c,this.y+=a/h,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:y,y:E}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,E)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:p,y:g}=this,[f,v]=this.#m();p+=f,g+=v,this.div.style.left=`${(100*p).toFixed(2)}%`,this.div.style.top=`${(100*g).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#m(){let[u,a]=this.parentDimensions,{_borderLineWidth:c}=o,h=c/u,p=c/a;switch(this.rotation){case 90:return[-h,p];case 180:return[h,p];case 270:return[h,-p];default:return[-h,-p]}}fixAndSetPosition(){let[u,a]=this.pageDimensions,{x:c,y:h,width:p,height:g}=this;switch(p*=u,g*=a,c*=u,h*=a,this.rotation){case 0:c=Math.max(0,Math.min(u-p,c)),h=Math.max(0,Math.min(a-g,h));break;case 90:c=Math.max(0,Math.min(u-g,c)),h=Math.min(a,Math.max(p,h));break;case 180:c=Math.min(u,Math.max(p,c)),h=Math.min(a,Math.max(g,h));break;case 270:c=Math.min(u,Math.max(g,c)),h=Math.max(0,Math.min(a-p,h));break}this.x=c/=u,this.y=h/=a;let[f,v]=this.#m();c+=f,h+=v;let{style:y}=this.div;y.left=`${(100*c).toFixed(2)}%`,y.top=`${(100*h).toFixed(2)}%`,this.moveInDOM()}static#g(u,a,c){switch(c){case 90:return[a,-u];case 180:return[-u,-a];case 270:return[-a,u];default:return[u,a]}}screenToPageTranslation(u,a){return o.#g(u,a,this.parentRotation)}pageTranslationToScreen(u,a){return o.#g(u,a,360-this.parentRotation)}#u(u){switch(u){case 90:{let[a,c]=this.pageDimensions;return[0,-a/c,c/a,0]}case 180:return[-1,0,0,-1];case 270:{let[a,c]=this.pageDimensions;return[0,a/c,-c/a,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:u,pageDimensions:[a,c]}=this,h=a*u,p=c*u;return i.FeatureTest.isCSSRoundSupported?[Math.round(h),Math.round(p)]:[h,p]}setDims(u,a){let[c,h]=this.parentDimensions;this.div.style.width=`${(100*u/c).toFixed(2)}%`,this.#o||(this.div.style.height=`${(100*a/h).toFixed(2)}%`),this.#n?.classList.toggle("small",u<o.SMALL_EDITOR_SIZE||a<o.SMALL_EDITOR_SIZE)}fixDims(){let{style:u}=this.div,{height:a,width:c}=u,h=c.endsWith("%"),p=!this.#o&&a.endsWith("%");if(h&&p)return;let[g,f]=this.parentDimensions;h||(u.width=`${(100*parseFloat(c)/g).toFixed(2)}%`),!this.#o&&!p&&(u.height=`${(100*parseFloat(a)/f).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#y(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");let u=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||u.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(let a of u){let c=document.createElement("div");this.#s.append(c),c.classList.add("resizer",a),c.addEventListener("pointerdown",this.#D.bind(this,a)),c.addEventListener("contextmenu",s.noContextMenu)}this.div.prepend(this.#s)}#D(u,a){a.preventDefault();let{isMac:c}=i.FeatureTest.platform;if(a.button!==0||a.ctrlKey&&c)return;let h=this.#E.bind(this,u),p=this._isDraggable;this._isDraggable=!1;let g={passive:!0,capture:!0};window.addEventListener("pointermove",h,g);let f=this.x,v=this.y,y=this.width,E=this.height,M=this.parent.div.style.cursor,T=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(a.target).cursor;let w=()=>{this._isDraggable=p,window.removeEventListener("pointerup",w),window.removeEventListener("blur",w),window.removeEventListener("pointermove",h,g),this.parent.div.style.cursor=M,this.div.style.cursor=T;let C=this.x,L=this.y,U=this.width,F=this.height;C===f&&L===v&&U===y&&F===E||this.addCommands({cmd:()=>{this.width=U,this.height=F,this.x=C,this.y=L;let[$,W]=this.parentDimensions;this.setDims($*U,W*F),this.fixAndSetPosition()},undo:()=>{this.width=y,this.height=E,this.x=f,this.y=v;let[$,W]=this.parentDimensions;this.setDims($*y,W*E),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",w),window.addEventListener("blur",w)}#E(u,a){let[c,h]=this.parentDimensions,p=this.x,g=this.y,f=this.width,v=this.height,y=o.MIN_SIZE/c,E=o.MIN_SIZE/h,M=x=>Math.round(x*1e4)/1e4,T=this.#u(this.rotation),w=(x,m)=>[T[0]*x+T[2]*m,T[1]*x+T[3]*m],C=this.#u(360-this.rotation),L=(x,m)=>[C[0]*x+C[2]*m,C[1]*x+C[3]*m],U,F,$=!1,W=!1;switch(u){case"topLeft":$=!0,U=(x,m)=>[0,0],F=(x,m)=>[x,m];break;case"topMiddle":U=(x,m)=>[x/2,0],F=(x,m)=>[x/2,m];break;case"topRight":$=!0,U=(x,m)=>[x,0],F=(x,m)=>[0,m];break;case"middleRight":W=!0,U=(x,m)=>[x,m/2],F=(x,m)=>[0,m/2];break;case"bottomRight":$=!0,U=(x,m)=>[x,m],F=(x,m)=>[0,0];break;case"bottomMiddle":U=(x,m)=>[x/2,m],F=(x,m)=>[x/2,0];break;case"bottomLeft":$=!0,U=(x,m)=>[0,m],F=(x,m)=>[x,0];break;case"middleLeft":W=!0,U=(x,m)=>[0,m/2],F=(x,m)=>[x,m/2];break}let ne=U(f,v),J=F(f,v),Q=w(...J),ie=M(p+Q[0]),Z=M(g+Q[1]),O=1,S=1,[b,_]=this.screenToPageTranslation(a.movementX,a.movementY);if([b,_]=L(b/c,_/h),$){let x=Math.hypot(f,v);O=S=Math.max(Math.min(Math.hypot(J[0]-ne[0]-b,J[1]-ne[1]-_)/x,1/f,1/v),y/f,E/v)}else W?O=Math.max(y,Math.min(1,Math.abs(J[0]-ne[0]-b)))/f:S=Math.max(E,Math.min(1,Math.abs(J[1]-ne[1]-_)))/v;let A=M(f*O),N=M(v*S);Q=w(...F(A,N));let k=ie-Q[0],j=Z-Q[1];this.width=A,this.height=N,this.x=k,this.y=j,this.setDims(c*A,h*N),this.fixAndSetPosition()}addAltTextButton(){return ye(this,null,function*(){if(this.#n)return;let u=this.#n=document.createElement("button");u.className="altText";let a=yield o._l10nPromise.get("editor_alt_text_button_label");u.textContent=a,u.setAttribute("aria-label",a),u.tabIndex="0",u.addEventListener("contextmenu",s.noContextMenu),u.addEventListener("pointerdown",c=>c.stopPropagation()),u.addEventListener("click",c=>{c.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),u.addEventListener("keydown",c=>{c.target===u&&c.key==="Enter"&&(c.preventDefault(),this._uiManager.editAltText(this))}),this.#A(),this.div.append(u),o.SMALL_EDITOR_SIZE||(o.SMALL_EDITOR_SIZE=Math.min(128,Math.round(u.getBoundingClientRect().width*1.4)))})}#A(){return ye(this,null,function*(){let u=this.#n;if(!u)return;if(!this.#e&&!this.#t){u.classList.remove("done"),this.#r?.remove();return}o._l10nPromise.get("editor_alt_text_edit_button_label").then(c=>{u.setAttribute("aria-label",c)});let a=this.#r;if(!a){this.#r=a=document.createElement("span"),a.className="tooltip",a.setAttribute("role","tooltip");let c=a.id=`alt-text-tooltip-${this.id}`;u.setAttribute("aria-describedby",c);let h=100;u.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#r.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},h)}),u.addEventListener("mouseleave",()=>{clearTimeout(this.#a),this.#a=null,this.#r?.classList.remove("show")})}u.classList.add("done"),a.innerText=this.#t?yield o._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#e,a.parentNode||u.append(a)})}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#e,decorative:this.#t}}set altTextData({altText:u,decorative:a}){this.#e===u&&this.#t===a||(this.#e=u,this.#t=a,this.#A())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#c),this.div.addEventListener("focusout",this.#l);let[u,a]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*a/u).toFixed(2)}%`,this.div.style.maxHeight=`${(100*u/a).toFixed(2)}%`);let[c,h]=this.getInitialTranslation();return this.translate(c,h),(0,r.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(u){let{isMac:a}=i.FeatureTest.platform;if(u.button!==0||u.ctrlKey&&a){u.preventDefault();return}this.#i=!0,this.#T(u)}#T(u){if(!this._isDraggable)return;let a=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let c,h;a&&(c={passive:!0,capture:!0},h=g=>{let[f,v]=this.screenToPageTranslation(g.movementX,g.movementY);this._uiManager.dragSelectedEditors(f,v)},window.addEventListener("pointermove",h,c));let p=()=>{if(window.removeEventListener("pointerup",p),window.removeEventListener("blur",p),a&&window.removeEventListener("pointermove",h,c),this.#i=!1,!this._uiManager.endDragSession()){let{isMac:g}=i.FeatureTest.platform;u.ctrlKey&&!g||u.shiftKey||u.metaKey&&g?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",p),window.addEventListener("blur",p)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(u,a,c){u.changeParent(this),this.x=a,this.y=c,this.fixAndSetPosition()}getRect(u,a){let c=this.parentScale,[h,p]=this.pageDimensions,[g,f]=this.pageTranslation,v=u/c,y=a/c,E=this.x*h,M=this.y*p,T=this.width*h,w=this.height*p;switch(this.rotation){case 0:return[E+v+g,p-M-y-w+f,E+v+T+g,p-M-y+f];case 90:return[E+y+g,p-M+v+f,E+y+w+g,p-M+v+T+f];case 180:return[E-v-T+g,p-M+y+f,E-v+g,p-M+y+w+f];case 270:return[E-y-w+g,p-M-v-T+f,E-y+g,p-M-v+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(u,a){let[c,h,p,g]=u,f=p-c,v=g-h;switch(this.rotation){case 0:return[c,a-g,f,v];case 90:return[c,a-h,v,f];case 180:return[p,a-h,f,v];case 270:return[p,a-g,v,f];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#c),this.div?.addEventListener("focusout",this.#l)}serialize(u=!1,a=null){(0,i.unreachable)("An editor must be serializable")}static deserialize(u,a,c){let h=new this.prototype.constructor({parent:a,id:a.getNextId(),uiManager:c});h.rotation=u.rotation;let[p,g]=h.pageDimensions,[f,v,y,E]=h.getRectInCurrentCoords(u.rect,g);return h.x=f/p,h.y=v/g,h.width=y/p,h.height=E/g,h}remove(){this.div.removeEventListener("focusin",this.#c),this.div.removeEventListener("focusout",this.#l),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#r=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#y(),this.#s.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(u,a){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(u){this.#f=u,this.parent&&(u?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(u,a){this.#o=!0;let c=u/a,{style:h}=this.div;h.aspectRatio=c,h.height="auto"}static get MIN_SIZE(){return 16}}t.AnnotationEditor=o;class l extends o{constructor(u){super(u),this.annotationElementId=u.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=s,t.opacityToHex=o;var r=n(1),i=n(6);function s(p,g,f){for(let v of f)g.addEventListener(v,p[v].bind(p))}function o(p){return Math.round(Math.min(255,Math.max(1,255*p))).toString(16).padStart(2,"0")}class l{#e=0;getId(){return`${r.AnnotationEditorPrefix}${this.#e++}`}}class d{#e=(0,r.getUuid)();#t=0;#n=null;static get _isSVGFittingCanvas(){let g='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',v=new OffscreenCanvas(1,3).getContext("2d"),y=new Image;y.src=g;let E=y.decode().then(()=>(v.drawImage(y,0,0,1,1,0,0,1,3),new Uint32Array(v.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,r.shadow)(this,"_isSVGFittingCanvas",E)}#r(g,f){return ye(this,null,function*(){this.#n||=new Map;let v=this.#n.get(g);if(v===null)return null;if(v?.bitmap)return v.refCounter+=1,v;try{v||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let y;if(typeof f=="string"){v.url=f;let E=yield fetch(f);if(!E.ok)throw new Error(E.statusText);y=yield E.blob()}else y=v.file=f;if(y.type==="image/svg+xml"){let E=d._isSVGFittingCanvas,M=new FileReader,T=new Image,w=new Promise((C,L)=>{T.onload=()=>{v.bitmap=T,v.isSvg=!0,C()},M.onload=()=>ye(this,null,function*(){let U=v.svgUrl=M.result;T.src=(yield E)?`${U}#svgView(preserveAspectRatio(none))`:U}),T.onerror=M.onerror=L});M.readAsDataURL(y),yield w}else v.bitmap=yield createImageBitmap(y);v.refCounter=1}catch(y){console.error(y),v=null}return this.#n.set(g,v),v&&this.#n.set(v.id,v),v})}getFromFile(g){return ye(this,null,function*(){let{lastModified:f,name:v,size:y,type:E}=g;return this.#r(`${f}_${v}_${y}_${E}`,g)})}getFromUrl(g){return ye(this,null,function*(){return this.#r(g,g)})}getFromId(g){return ye(this,null,function*(){this.#n||=new Map;let f=this.#n.get(g);return f?f.bitmap?(f.refCounter+=1,f):f.file?this.getFromFile(f.file):this.getFromUrl(f.url):null})}getSvgUrl(g){let f=this.#n.get(g);return f?.isSvg?f.svgUrl:null}deleteId(g){this.#n||=new Map;let f=this.#n.get(g);f&&(f.refCounter-=1,f.refCounter===0&&(f.bitmap=null))}isValidId(g){return g.startsWith(`image_${this.#e}_`)}}class u{#e=[];#t=!1;#n;#r=-1;constructor(g=128){this.#n=g}add({cmd:g,undo:f,mustExec:v,type:y=NaN,overwriteIfSameType:E=!1,keepUndo:M=!1}){if(v&&g(),this.#t)return;let T={cmd:g,undo:f,type:y};if(this.#r===-1){this.#e.length>0&&(this.#e.length=0),this.#r=0,this.#e.push(T);return}if(E&&this.#e[this.#r].type===y){M&&(T.undo=this.#e[this.#r].undo),this.#e[this.#r]=T;return}let w=this.#r+1;w===this.#n?this.#e.splice(0,1):(this.#r=w,w<this.#e.length&&this.#e.splice(w)),this.#e.push(T)}undo(){this.#r!==-1&&(this.#t=!0,this.#e[this.#r].undo(),this.#t=!1,this.#r-=1)}redo(){this.#r<this.#e.length-1&&(this.#r+=1,this.#t=!0,this.#e[this.#r].cmd(),this.#t=!1)}hasSomethingToUndo(){return this.#r!==-1}hasSomethingToRedo(){return this.#r<this.#e.length-1}destroy(){this.#e=null}}t.CommandManager=u;class a{constructor(g){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:f}=r.FeatureTest.platform;for(let[v,y,E={}]of g)for(let M of v){let T=M.startsWith("mac+");f&&T?(this.callbacks.set(M.slice(4),{callback:y,options:E}),this.allKeys.add(M.split("+").at(-1))):!f&&!T&&(this.callbacks.set(M,{callback:y,options:E}),this.allKeys.add(M.split("+").at(-1)))}}#e(g){g.altKey&&this.buffer.push("alt"),g.ctrlKey&&this.buffer.push("ctrl"),g.metaKey&&this.buffer.push("meta"),g.shiftKey&&this.buffer.push("shift"),this.buffer.push(g.key);let f=this.buffer.join("+");return this.buffer.length=0,f}exec(g,f){if(!this.allKeys.has(f.key))return;let v=this.callbacks.get(this.#e(f));if(!v)return;let{callback:y,options:{bubbles:E=!1,args:M=[],checker:T=null}}=v;T&&!T(g,f)||(y.bind(g,...M)(),E||(f.stopPropagation(),f.preventDefault()))}}t.KeyboardManager=a;class c{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){let g=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(g),(0,r.shadow)(this,"_colors",g)}convert(g){let f=(0,i.getRGB)(g);if(!window.matchMedia("(forced-colors: active)").matches)return f;for(let[v,y]of this._colors)if(y.every((E,M)=>E===f[M]))return c._colorsMapping.get(v);return f}getHexCode(g){let f=this._colors.get(g);return f?r.Util.makeHexColor(...f):g}}t.ColorManager=c;let h=(()=>{class p{#e=null;#t=new Map;#n=new Map;#r=null;#a=null;#o=new u;#s=0;#c=new Set;#l=null;#i=null;#f=new Set;#d=null;#h=new l;#p=!1;#v=!1;#m=null;#g=r.AnnotationEditorType.NONE;#u=new Set;#y=null;#D=this.blur.bind(this);#E=this.focus.bind(this);#A=this.copy.bind(this);#T=this.cut.bind(this);#k=this.paste.bind(this);#O=this.keydown.bind(this);#F=this.onEditingAction.bind(this);#b=this.onPageChanging.bind(this);#N=this.onScaleChanging.bind(this);#M=this.onRotationChanging.bind(this);#x={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#_=[0,0];#I=null;#C=null;#L=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let f=p.prototype,v=M=>{let{activeElement:T}=document;return T&&M.#C.contains(T)&&M.hasSomethingToControl()},y=this.TRANSLATE_SMALL,E=this.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new a([[["ctrl+a","mac+meta+a"],f.selectAll],[["ctrl+z","mac+meta+z"],f.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],f.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],f.delete],[["Escape","mac+Escape"],f.unselectAll],[["ArrowLeft","mac+ArrowLeft"],f.translateSelectedEditors,{args:[-y,0],checker:v}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],f.translateSelectedEditors,{args:[-E,0],checker:v}],[["ArrowRight","mac+ArrowRight"],f.translateSelectedEditors,{args:[y,0],checker:v}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],f.translateSelectedEditors,{args:[E,0],checker:v}],[["ArrowUp","mac+ArrowUp"],f.translateSelectedEditors,{args:[0,-y],checker:v}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],f.translateSelectedEditors,{args:[0,-E],checker:v}],[["ArrowDown","mac+ArrowDown"],f.translateSelectedEditors,{args:[0,y],checker:v}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],f.translateSelectedEditors,{args:[0,E],checker:v}]]))}constructor(f,v,y,E,M,T){this.#C=f,this.#L=v,this.#r=y,this._eventBus=E,this._eventBus._on("editingaction",this.#F),this._eventBus._on("pagechanging",this.#b),this._eventBus._on("scalechanging",this.#N),this._eventBus._on("rotationchanging",this.#M),this.#a=M.annotationStorage,this.#d=M.filterFactory,this.#y=T,this.viewParameters={realScale:i.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#R(),this.#B(),this._eventBus._off("editingaction",this.#F),this._eventBus._off("pagechanging",this.#b),this._eventBus._off("scalechanging",this.#N),this._eventBus._off("rotationchanging",this.#M);for(let f of this.#n.values())f.destroy();this.#n.clear(),this.#t.clear(),this.#f.clear(),this.#e=null,this.#u.clear(),this.#o.destroy(),this.#r.destroy()}get hcmFilter(){return(0,r.shadow)(this,"hcmFilter",this.#y?this.#d.addHCMFilter(this.#y.foreground,this.#y.background):"none")}get direction(){return(0,r.shadow)(this,"direction",getComputedStyle(this.#C).direction)}editAltText(f){this.#r?.editAltText(this,f)}onPageChanging({pageNumber:f}){this.#s=f-1}focusMainContainer(){this.#C.focus()}findParent(f,v){for(let y of this.#n.values()){let{x:E,y:M,width:T,height:w}=y.div.getBoundingClientRect();if(f>=E&&f<=E+T&&v>=M&&v<=M+w)return y}return null}disableUserSelect(f=!1){this.#L.classList.toggle("noUserSelect",f)}addShouldRescale(f){this.#f.add(f)}removeShouldRescale(f){this.#f.delete(f)}onScaleChanging({scale:f}){this.commitOrRemove(),this.viewParameters.realScale=f*i.PixelsPerInch.PDF_TO_CSS_UNITS;for(let v of this.#f)v.onScaleChanging()}onRotationChanging({pagesRotation:f}){this.commitOrRemove(),this.viewParameters.rotation=f}addToAnnotationStorage(f){!f.isEmpty()&&this.#a&&!this.#a.has(f.id)&&this.#a.setValue(f.id,f)}#j(){window.addEventListener("focus",this.#E),window.addEventListener("blur",this.#D)}#B(){window.removeEventListener("focus",this.#E),window.removeEventListener("blur",this.#D)}blur(){if(!this.hasSelection)return;let{activeElement:f}=document;for(let v of this.#u)if(v.div.contains(f)){this.#m=[v,f],v._focusEventsAllowed=!1;break}}focus(){if(!this.#m)return;let[f,v]=this.#m;this.#m=null,v.addEventListener("focusin",()=>{f._focusEventsAllowed=!0},{once:!0}),v.focus()}#U(){window.addEventListener("keydown",this.#O,{capture:!0})}#R(){window.removeEventListener("keydown",this.#O,{capture:!0})}#P(){document.addEventListener("copy",this.#A),document.addEventListener("cut",this.#T),document.addEventListener("paste",this.#k)}#S(){document.removeEventListener("copy",this.#A),document.removeEventListener("cut",this.#T),document.removeEventListener("paste",this.#k)}addEditListeners(){this.#U(),this.#P()}removeEditListeners(){this.#R(),this.#S()}copy(f){if(f.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;let v=[];for(let y of this.#u){let E=y.serialize(!0);E&&v.push(E)}v.length!==0&&f.clipboardData.setData("application/pdfjs",JSON.stringify(v))}cut(f){this.copy(f),this.delete()}paste(f){f.preventDefault();let{clipboardData:v}=f;for(let M of v.items)for(let T of this.#i)if(T.isHandlingMimeForPasting(M.type)){T.paste(M,this.currentLayer);return}let y=v.getData("application/pdfjs");if(!y)return;try{y=JSON.parse(y)}catch(M){(0,r.warn)(`paste: "${M.message}".`);return}if(!Array.isArray(y))return;this.unselectAll();let E=this.currentLayer;try{let M=[];for(let C of y){let L=E.deserialize(C);if(!L)return;M.push(L)}let T=()=>{for(let C of M)this.#$(C);this.#z(M)},w=()=>{for(let C of M)C.remove()};this.addCommands({cmd:T,undo:w,mustExec:!0})}catch(M){(0,r.warn)(`paste: "${M.message}".`)}}keydown(f){this.getActive()?.shouldGetKeyboardEvents()||p._keyboardManager.exec(this,f)}onEditingAction(f){["undo","redo","delete","selectAll"].includes(f.name)&&this[f.name]()}#w(f){Object.entries(f).some(([y,E])=>this.#x[y]!==E)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#x,f)})}#V(f){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:f})}setEditingState(f){f?(this.#j(),this.#U(),this.#P(),this.#w({isEditing:this.#g!==r.AnnotationEditorType.NONE,isEmpty:this.#H(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#B(),this.#R(),this.#S(),this.#w({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(f){if(!this.#i){this.#i=f;for(let v of this.#i)this.#V(v.defaultPropertiesToUpdate)}}getId(){return this.#h.getId()}get currentLayer(){return this.#n.get(this.#s)}getLayer(f){return this.#n.get(f)}get currentPageIndex(){return this.#s}addLayer(f){this.#n.set(f.pageIndex,f),this.#p?f.enable():f.disable()}removeLayer(f){this.#n.delete(f.pageIndex)}updateMode(f,v=null){if(this.#g!==f){if(this.#g=f,f===r.AnnotationEditorType.NONE){this.setEditingState(!1),this.#G();return}this.setEditingState(!0),this.#W(),this.unselectAll();for(let y of this.#n.values())y.updateMode(f);if(v){for(let y of this.#t.values())if(y.annotationElementId===v){this.setSelected(y),y.enterInEditMode();break}}}}updateToolbar(f){f!==this.#g&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:f})}updateParams(f,v){if(this.#i){if(f===r.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(f);return}for(let y of this.#u)y.updateParams(f,v);for(let y of this.#i)y.updateDefaultParams(f,v)}}enableWaiting(f=!1){if(this.#v!==f){this.#v=f;for(let v of this.#n.values())f?v.disableClick():v.enableClick(),v.div.classList.toggle("waiting",f)}}#W(){if(!this.#p){this.#p=!0;for(let f of this.#n.values())f.enable()}}#G(){if(this.unselectAll(),this.#p){this.#p=!1;for(let f of this.#n.values())f.disable()}}getEditors(f){let v=[];for(let y of this.#t.values())y.pageIndex===f&&v.push(y);return v}getEditor(f){return this.#t.get(f)}addEditor(f){this.#t.set(f.id,f)}removeEditor(f){this.#t.delete(f.id),this.unselect(f),(!f.annotationElementId||!this.#c.has(f.annotationElementId))&&this.#a?.remove(f.id)}addDeletedAnnotationElement(f){this.#c.add(f.annotationElementId),f.deleted=!0}isDeletedAnnotationElement(f){return this.#c.has(f)}removeDeletedAnnotationElement(f){this.#c.delete(f.annotationElementId),f.deleted=!1}#$(f){let v=this.#n.get(f.pageIndex);v?v.addOrRebuild(f):this.addEditor(f)}setActiveEditor(f){this.#e!==f&&(this.#e=f,f&&this.#V(f.propertiesToUpdate))}toggleSelected(f){if(this.#u.has(f)){this.#u.delete(f),f.unselect(),this.#w({hasSelectedEditor:this.hasSelection});return}this.#u.add(f),f.select(),this.#V(f.propertiesToUpdate),this.#w({hasSelectedEditor:!0})}setSelected(f){for(let v of this.#u)v!==f&&v.unselect();this.#u.clear(),this.#u.add(f),f.select(),this.#V(f.propertiesToUpdate),this.#w({hasSelectedEditor:!0})}isSelected(f){return this.#u.has(f)}unselect(f){f.unselect(),this.#u.delete(f),this.#w({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#u.size!==0}undo(){this.#o.undo(),this.#w({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#H()})}redo(){this.#o.redo(),this.#w({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#H()})}addCommands(f){this.#o.add(f),this.#w({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#H()})}#H(){if(this.#t.size===0)return!0;if(this.#t.size===1)for(let f of this.#t.values())return f.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;let f=[...this.#u],v=()=>{for(let E of f)E.remove()},y=()=>{for(let E of f)this.#$(E)};this.addCommands({cmd:v,undo:y,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#z(f){this.#u.clear();for(let v of f)v.isEmpty()||(this.#u.add(v),v.select());this.#w({hasSelectedEditor:!0})}selectAll(){for(let f of this.#u)f.commit();this.#z(this.#t.values())}unselectAll(){if(this.#e){this.#e.commitOrRemove();return}if(this.hasSelection){for(let f of this.#u)f.unselect();this.#u.clear(),this.#w({hasSelectedEditor:!1})}}translateSelectedEditors(f,v,y=!1){if(y||this.commitOrRemove(),!this.hasSelection)return;this.#_[0]+=f,this.#_[1]+=v;let[E,M]=this.#_,T=[...this.#u],w=1e3;this.#I&&clearTimeout(this.#I),this.#I=setTimeout(()=>{this.#I=null,this.#_[0]=this.#_[1]=0,this.addCommands({cmd:()=>{for(let C of T)this.#t.has(C.id)&&C.translateInPage(E,M)},undo:()=>{for(let C of T)this.#t.has(C.id)&&C.translateInPage(-E,-M)},mustExec:!1})},w);for(let C of T)C.translateInPage(f,v)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#l=new Map;for(let f of this.#u)this.#l.set(f,{savedX:f.x,savedY:f.y,savedPageIndex:f.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#l)return!1;this.disableUserSelect(!1);let f=this.#l;this.#l=null;let v=!1;for(let[{x:E,y:M,pageIndex:T},w]of f)w.newX=E,w.newY=M,w.newPageIndex=T,v||=E!==w.savedX||M!==w.savedY||T!==w.savedPageIndex;if(!v)return!1;let y=(E,M,T,w)=>{if(this.#t.has(E.id)){let C=this.#n.get(w);C?E._setParentAndPosition(C,M,T):(E.pageIndex=w,E.x=M,E.y=T)}};return this.addCommands({cmd:()=>{for(let[E,{newX:M,newY:T,newPageIndex:w}]of f)y(E,M,T,w)},undo:()=>{for(let[E,{savedX:M,savedY:T,savedPageIndex:w}]of f)y(E,M,T,w)},mustExec:!0}),!0}dragSelectedEditors(f,v){if(this.#l)for(let y of this.#l.keys())y.drag(f,v)}rebuild(f){if(f.parent===null){let v=this.getLayer(f.pageIndex);v?(v.changeParent(f),v.addOrRebuild(f)):(this.addEditor(f),this.addToAnnotationStorage(f),f.rebuild())}else f.parent.addOrRebuild(f)}isActive(f){return this.#e===f}getActive(){return this.#e}getMode(){return this.#g}get imageManager(){return(0,r.shadow)(this,"imageManager",new d)}}return p})();t.AnnotationEditorUIManager=h},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=L,t.getColorValues=ne,t.getCurrentTransform=J,t.getCurrentTransformInverse=Q,t.getFilenameFromUrl=y,t.getPdfFilenameFromUrl=E,t.getRGB=W,t.getXfaPageViewport=$,t.isDataScheme=f,t.isPdfFile=v,t.isValidFetchUrl=T,t.loadScript=C,t.noContextMenu=w,t.setLayerDimensions=ie;var r=n(7),i=n(1);let s="http://www.w3.org/2000/svg";class o{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}t.PixelsPerInch=o;class l extends r.BaseFilterFactory{#e;#t;#n;#r;#a;#o;#s;#c;#l;#i;#f=0;constructor({docId:O,ownerDocument:S=globalThis.document}={}){super(),this.#n=O,this.#r=S}get#d(){return this.#e||=new Map}get#h(){if(!this.#t){let O=this.#r.createElement("div"),{style:S}=O;S.visibility="hidden",S.contain="strict",S.width=S.height=0,S.position="absolute",S.top=S.left=0,S.zIndex=-1;let b=this.#r.createElementNS(s,"svg");b.setAttribute("width",0),b.setAttribute("height",0),this.#t=this.#r.createElementNS(s,"defs"),O.append(b),b.append(this.#t),this.#r.body.append(O)}return this.#t}addFilter(O){if(!O)return"none";let S=this.#d.get(O);if(S)return S;let b,_,A,N;if(O.length===1){let m=O[0],D=new Array(256);for(let I=0;I<256;I++)D[I]=m[I]/255;N=b=_=A=D.join(",")}else{let[m,D,I]=O,R=new Array(256),P=new Array(256),B=new Array(256);for(let V=0;V<256;V++)R[V]=m[V]/255,P[V]=D[V]/255,B[V]=I[V]/255;b=R.join(","),_=P.join(","),A=B.join(","),N=`${b}${_}${A}`}if(S=this.#d.get(N),S)return this.#d.set(O,S),S;let k=`g_${this.#n}_transfer_map_${this.#f++}`,j=`url(#${k})`;this.#d.set(O,j),this.#d.set(N,j);let x=this.#v(k);return this.#g(b,_,A,x),j}addHCMFilter(O,S){let b=`${O}-${S}`;if(this.#o===b)return this.#s;if(this.#o=b,this.#s="none",this.#a?.remove(),!O||!S)return this.#s;let _=this.#u(O);O=i.Util.makeHexColor(..._);let A=this.#u(S);if(S=i.Util.makeHexColor(...A),this.#h.style.color="",O==="#000000"&&S==="#ffffff"||O===S)return this.#s;let N=new Array(256);for(let D=0;D<=255;D++){let I=D/255;N[D]=I<=.03928?I/12.92:((I+.055)/1.055)**2.4}let k=N.join(","),j=`g_${this.#n}_hcm_filter`,x=this.#c=this.#v(j);this.#g(k,k,k,x),this.#p(x);let m=(D,I)=>{let R=_[D]/255,P=A[D]/255,B=new Array(I+1);for(let V=0;V<=I;V++)B[V]=R+V/I*(P-R);return B.join(",")};return this.#g(m(0,5),m(1,5),m(2,5),x),this.#s=`url(#${j})`,this.#s}addHighlightHCMFilter(O,S,b,_){let A=`${O}-${S}-${b}-${_}`;if(this.#l===A)return this.#i;if(this.#l=A,this.#i="none",this.#c?.remove(),!O||!S)return this.#i;let[N,k]=[O,S].map(this.#u.bind(this)),j=Math.round(.2126*N[0]+.7152*N[1]+.0722*N[2]),x=Math.round(.2126*k[0]+.7152*k[1]+.0722*k[2]),[m,D]=[b,_].map(this.#u.bind(this));x<j&&([j,x,m,D]=[x,j,D,m]),this.#h.style.color="";let I=(B,V,G)=>{let re=new Array(256),q=(x-j)/G,Y=B/255,X=(V-B)/(255*G),K=0;for(let ee=0;ee<=G;ee++){let se=Math.round(j+ee*q),le=Y+ee*X;for(let ue=K;ue<=se;ue++)re[ue]=le;K=se+1}for(let ee=K;ee<256;ee++)re[ee]=re[K-1];return re.join(",")},R=`g_${this.#n}_hcm_highlight_filter`,P=this.#c=this.#v(R);return this.#p(P),this.#g(I(m[0],D[0],5),I(m[1],D[1],5),I(m[2],D[2],5),P),this.#i=`url(#${R})`,this.#i}destroy(O=!1){O&&(this.#s||this.#i)||(this.#t&&(this.#t.parentNode.parentNode.remove(),this.#t=null),this.#e&&(this.#e.clear(),this.#e=null),this.#f=0)}#p(O){let S=this.#r.createElementNS(s,"feColorMatrix");S.setAttribute("type","matrix"),S.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),O.append(S)}#v(O){let S=this.#r.createElementNS(s,"filter");return S.setAttribute("color-interpolation-filters","sRGB"),S.setAttribute("id",O),this.#h.append(S),S}#m(O,S,b){let _=this.#r.createElementNS(s,S);_.setAttribute("type","discrete"),_.setAttribute("tableValues",b),O.append(_)}#g(O,S,b,_){let A=this.#r.createElementNS(s,"feComponentTransfer");_.append(A),this.#m(A,"feFuncR",O),this.#m(A,"feFuncG",S),this.#m(A,"feFuncB",b)}#u(O){return this.#h.style.color=O,W(getComputedStyle(this.#h).getPropertyValue("color"))}}t.DOMFilterFactory=l;class d extends r.BaseCanvasFactory{constructor({ownerDocument:O=globalThis.document}={}){super(),this._document=O}_createCanvas(O,S){let b=this._document.createElement("canvas");return b.width=O,b.height=S,b}}t.DOMCanvasFactory=d;function u(Z,O=!1){return ye(this,null,function*(){if(T(Z,document.baseURI)){let S=yield fetch(Z);if(!S.ok)throw new Error(S.statusText);return O?new Uint8Array(yield S.arrayBuffer()):(0,i.stringToBytes)(yield S.text())}return new Promise((S,b)=>{let _=new XMLHttpRequest;_.open("GET",Z,!0),O&&(_.responseType="arraybuffer"),_.onreadystatechange=()=>{if(_.readyState===XMLHttpRequest.DONE){if(_.status===200||_.status===0){let A;if(O&&_.response?A=new Uint8Array(_.response):!O&&_.responseText&&(A=(0,i.stringToBytes)(_.responseText)),A){S(A);return}}b(new Error(_.statusText))}},_.send(null)})})}class a extends r.BaseCMapReaderFactory{_fetchData(O,S){return u(O,this.isCompressed).then(b=>({cMapData:b,compressionType:S}))}}t.DOMCMapReaderFactory=a;class c extends r.BaseStandardFontDataFactory{_fetchData(O){return u(O,!0)}}t.DOMStandardFontDataFactory=c;class h extends r.BaseSVGFactory{_createSVG(O){return document.createElementNS(s,O)}}t.DOMSVGFactory=h;class p{constructor({viewBox:O,scale:S,rotation:b,offsetX:_=0,offsetY:A=0,dontFlip:N=!1}){this.viewBox=O,this.scale=S,this.rotation=b,this.offsetX=_,this.offsetY=A;let k=(O[2]+O[0])/2,j=(O[3]+O[1])/2,x,m,D,I;switch(b%=360,b<0&&(b+=360),b){case 180:x=-1,m=0,D=0,I=1;break;case 90:x=0,m=1,D=1,I=0;break;case 270:x=0,m=-1,D=-1,I=0;break;case 0:x=1,m=0,D=0,I=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}N&&(D=-D,I=-I);let R,P,B,V;x===0?(R=Math.abs(j-O[1])*S+_,P=Math.abs(k-O[0])*S+A,B=(O[3]-O[1])*S,V=(O[2]-O[0])*S):(R=Math.abs(k-O[0])*S+_,P=Math.abs(j-O[1])*S+A,B=(O[2]-O[0])*S,V=(O[3]-O[1])*S),this.transform=[x*S,m*S,D*S,I*S,R-x*S*k-D*S*j,P-m*S*k-I*S*j],this.width=B,this.height=V}get rawDims(){let{viewBox:O}=this;return(0,i.shadow)(this,"rawDims",{pageWidth:O[2]-O[0],pageHeight:O[3]-O[1],pageX:O[0],pageY:O[1]})}clone({scale:O=this.scale,rotation:S=this.rotation,offsetX:b=this.offsetX,offsetY:_=this.offsetY,dontFlip:A=!1}={}){return new p({viewBox:this.viewBox.slice(),scale:O,rotation:S,offsetX:b,offsetY:_,dontFlip:A})}convertToViewportPoint(O,S){return i.Util.applyTransform([O,S],this.transform)}convertToViewportRectangle(O){let S=i.Util.applyTransform([O[0],O[1]],this.transform),b=i.Util.applyTransform([O[2],O[3]],this.transform);return[S[0],S[1],b[0],b[1]]}convertToPdfPoint(O,S){return i.Util.applyInverseTransform([O,S],this.transform)}}t.PageViewport=p;class g extends i.BaseException{constructor(O,S=0){super(O,"RenderingCancelledException"),this.extraDelay=S}}t.RenderingCancelledException=g;function f(Z){let O=Z.length,S=0;for(;S<O&&Z[S].trim()==="";)S++;return Z.substring(S,S+5).toLowerCase()==="data:"}function v(Z){return typeof Z=="string"&&/\.pdf$/i.test(Z)}function y(Z,O=!1){return O||([Z]=Z.split(/[#?]/,1)),Z.substring(Z.lastIndexOf("/")+1)}function E(Z,O="document.pdf"){if(typeof Z!="string")return O;if(f(Z))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),O;let S=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,b=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,_=S.exec(Z),A=b.exec(_[1])||b.exec(_[2])||b.exec(_[3]);if(A&&(A=A[0],A.includes("%")))try{A=b.exec(decodeURIComponent(A))[0]}catch{}return A||O}class M{started=Object.create(null);times=[];time(O){O in this.started&&(0,i.warn)(`Timer is already running for ${O}`),this.started[O]=Date.now()}timeEnd(O){O in this.started||(0,i.warn)(`Timer has not been started for ${O}`),this.times.push({name:O,start:this.started[O],end:Date.now()}),delete this.started[O]}toString(){let O=[],S=0;for(let{name:b}of this.times)S=Math.max(b.length,S);for(let{name:b,start:_,end:A}of this.times)O.push(`${b.padEnd(S)} ${A-_}ms
`);return O.join("")}}t.StatTimer=M;function T(Z,O){try{let{protocol:S}=O?new URL(Z,O):new URL(Z);return S==="http:"||S==="https:"}catch{return!1}}function w(Z){Z.preventDefault()}function C(Z,O=!1){return new Promise((S,b)=>{let _=document.createElement("script");_.src=Z,_.onload=function(A){O&&_.remove(),S(A)},_.onerror=function(){b(new Error(`Cannot load script at: ${_.src}`))},(document.head||document.documentElement).append(_)})}function L(Z){console.log("Deprecated API usage: "+Z)}let U;class F{static toDateObject(O){if(!O||typeof O!="string")return null;U||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");let S=U.exec(O);if(!S)return null;let b=parseInt(S[1],10),_=parseInt(S[2],10);_=_>=1&&_<=12?_-1:0;let A=parseInt(S[3],10);A=A>=1&&A<=31?A:1;let N=parseInt(S[4],10);N=N>=0&&N<=23?N:0;let k=parseInt(S[5],10);k=k>=0&&k<=59?k:0;let j=parseInt(S[6],10);j=j>=0&&j<=59?j:0;let x=S[7]||"Z",m=parseInt(S[8],10);m=m>=0&&m<=23?m:0;let D=parseInt(S[9],10)||0;return D=D>=0&&D<=59?D:0,x==="-"?(N+=m,k+=D):x==="+"&&(N-=m,k-=D),new Date(Date.UTC(b,_,A,N,k,j))}}t.PDFDateString=F;function $(Z,{scale:O=1,rotation:S=0}){let{width:b,height:_}=Z.attributes.style,A=[0,0,parseInt(b),parseInt(_)];return new p({viewBox:A,scale:O,rotation:S})}function W(Z){if(Z.startsWith("#")){let O=parseInt(Z.slice(1),16);return[(O&16711680)>>16,(O&65280)>>8,O&255]}return Z.startsWith("rgb(")?Z.slice(4,-1).split(",").map(O=>parseInt(O)):Z.startsWith("rgba(")?Z.slice(5,-1).split(",").map(O=>parseInt(O)).slice(0,3):((0,i.warn)(`Not a valid color format: "${Z}"`),[0,0,0])}function ne(Z){let O=document.createElement("span");O.style.visibility="hidden",document.body.append(O);for(let S of Z.keys()){O.style.color=S;let b=window.getComputedStyle(O).color;Z.set(S,W(b))}O.remove()}function J(Z){let{a:O,b:S,c:b,d:_,e:A,f:N}=Z.getTransform();return[O,S,b,_,A,N]}function Q(Z){let{a:O,b:S,c:b,d:_,e:A,f:N}=Z.getTransform().invertSelf();return[O,S,b,_,A,N]}function ie(Z,O,S=!1,b=!0){if(O instanceof p){let{pageWidth:_,pageHeight:A}=O.rawDims,{style:N}=Z,k=i.FeatureTest.isCSSRoundSupported,j=`var(--scale-factor) * ${_}px`,x=`var(--scale-factor) * ${A}px`,m=k?`round(${j}, 1px)`:`calc(${j})`,D=k?`round(${x}, 1px)`:`calc(${x})`;!S||O.rotation%180===0?(N.width=m,N.height=D):(N.width=D,N.height=m)}b&&Z.setAttribute("data-main-rotation",O.rotation)}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var r=n(1);class i{constructor(){this.constructor===i&&(0,r.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(a){return"none"}addHCMFilter(a,c){return"none"}addHighlightHCMFilter(a,c,h,p){return"none"}destroy(a=!1){}}t.BaseFilterFactory=i;class s{constructor(){this.constructor===s&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(a,c){if(a<=0||c<=0)throw new Error("Invalid canvas size");let h=this._createCanvas(a,c);return{canvas:h,context:h.getContext("2d")}}reset(a,c,h){if(!a.canvas)throw new Error("Canvas is not specified");if(c<=0||h<=0)throw new Error("Invalid canvas size");a.canvas.width=c,a.canvas.height=h}destroy(a){if(!a.canvas)throw new Error("Canvas is not specified");a.canvas.width=0,a.canvas.height=0,a.canvas=null,a.context=null}_createCanvas(a,c){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=s;class o{constructor({baseUrl:a=null,isCompressed:c=!0}){this.constructor===o&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=a,this.isCompressed=c}fetch(c){return ye(this,arguments,function*({name:a}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!a)throw new Error("CMap name must be specified.");let h=this.baseUrl+a+(this.isCompressed?".bcmap":""),p=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(h,p).catch(g=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${h}`)})})}_fetchData(a,c){(0,r.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=o;class l{constructor({baseUrl:a=null}){this.constructor===l&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=a}fetch(c){return ye(this,arguments,function*({filename:a}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!a)throw new Error("Font filename must be specified.");let h=`${this.baseUrl}${a}`;return this._fetchData(h).catch(p=>{throw new Error(`Unable to load font data at: ${h}`)})})}_fetchData(a){(0,r.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=l;class d{constructor(){this.constructor===d&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(a,c,h=!1){if(a<=0||c<=0)throw new Error("Invalid SVG dimensions");let p=this._createSVG("svg:svg");return p.setAttribute("version","1.1"),h||(p.setAttribute("width",`${a}px`),p.setAttribute("height",`${c}px`)),p.setAttribute("preserveAspectRatio","none"),p.setAttribute("viewBox",`0 0 ${a} ${c}`),p}createElement(a){if(typeof a!="string")throw new Error("Invalid SVG element type");return this._createSVG(a)}_createSVG(a){(0,r.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=d},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var r=n(1);let i=3285377520,s=4294901760,o=65535;class l{constructor(u){this.h1=u?u&4294967295:i,this.h2=u?u&4294967295:i}update(u){let a,c;if(typeof u=="string"){a=new Uint8Array(u.length*2),c=0;for(let L=0,U=u.length;L<U;L++){let F=u.charCodeAt(L);F<=255?a[c++]=F:(a[c++]=F>>>8,a[c++]=F&255)}}else if((0,r.isArrayBuffer)(u))a=u.slice(),c=a.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");let h=c>>2,p=c-h*4,g=new Uint32Array(a.buffer,0,h),f=0,v=0,y=this.h1,E=this.h2,M=3432918353,T=461845907,w=M&o,C=T&o;for(let L=0;L<h;L++)L&1?(f=g[L],f=f*M&s|f*w&o,f=f<<15|f>>>17,f=f*T&s|f*C&o,y^=f,y=y<<13|y>>>19,y=y*5+3864292196):(v=g[L],v=v*M&s|v*w&o,v=v<<15|v>>>17,v=v*T&s|v*C&o,E^=v,E=E<<13|E>>>19,E=E*5+3864292196);switch(f=0,p){case 3:f^=a[h*4+2]<<16;case 2:f^=a[h*4+1]<<8;case 1:f^=a[h*4],f=f*M&s|f*w&o,f=f<<15|f>>>17,f=f*T&s|f*C&o,h&1?y^=f:E^=f}this.h1=y,this.h2=E}hexdigest(){let u=this.h1,a=this.h2;return u^=a>>>1,u=u*3981806797&s|u*36045&o,a=a*4283543511&s|((a<<16|u>>>16)*2950163797&s)>>>16,u^=a>>>1,u=u*444984403&s|u*60499&o,a=a*3301882366&s|((a<<16|u>>>16)*3120437893&s)>>>16,u^=a>>>1,(u>>>0).toString(16).padStart(8,"0")+(a>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=l},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var r=n(1);class i{#e=new Set;constructor({ownerDocument:l=globalThis.document,styleElement:d=null}){this._document=l,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(l){this.nativeFontFaces.add(l),this._document.fonts.add(l)}removeNativeFontFace(l){this.nativeFontFaces.delete(l),this._document.fonts.delete(l)}insertRule(l){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let d=this.styleElement.sheet;d.insertRule(l,d.cssRules.length)}clear(){for(let l of this.nativeFontFaces)this._document.fonts.delete(l);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(l){return ye(this,null,function*(){if(!(!l||this.#e.has(l.loadedName))){if((0,r.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:d,src:u,style:a}=l,c=new FontFace(d,u,a);this.addNativeFontFace(c);try{yield c.load(),this.#e.add(d)}catch{(0,r.warn)(`Cannot load system font: ${l.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}(0,r.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}})}bind(l){return ye(this,null,function*(){if(l.attached||l.missingFile&&!l.systemFontInfo)return;if(l.attached=!0,l.systemFontInfo){yield this.loadSystemFont(l.systemFontInfo);return}if(this.isFontLoadingAPISupported){let u=l.createNativeFontFace();if(u){this.addNativeFontFace(u);try{yield u.loaded}catch(a){throw(0,r.warn)(`Failed to load font '${u.family}': '${a}'.`),l.disableFontFace=!0,a}}return}let d=l.createFontFaceRule();if(d){if(this.insertRule(d),this.isSyncFontLoadingSupported)return;yield new Promise(u=>{let a=this._queueLoadingCallback(u);this._prepareFontLoadEvent(l,a)})}})}get isFontLoadingAPISupported(){let l=!!this._document?.fonts;return(0,r.shadow)(this,"isFontLoadingAPISupported",l)}get isSyncFontLoadingSupported(){let l=!1;return(r.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(l=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",l)}_queueLoadingCallback(l){function d(){for((0,r.assert)(!a.done,"completeRequest() cannot be called twice."),a.done=!0;u.length>0&&u[0].done;){let c=u.shift();setTimeout(c.callback,0)}}let{loadingRequests:u}=this,a={done:!1,complete:d,callback:l};return u.push(a),a}get _loadTestFont(){let l=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,r.shadow)(this,"_loadTestFont",l)}_prepareFontLoadEvent(l,d){function u($,W){return $.charCodeAt(W)<<24|$.charCodeAt(W+1)<<16|$.charCodeAt(W+2)<<8|$.charCodeAt(W+3)&255}function a($,W,ne,J){let Q=$.substring(0,W),ie=$.substring(W+ne);return Q+J+ie}let c,h,p=this._document.createElement("canvas");p.width=1,p.height=1;let g=p.getContext("2d"),f=0;function v($,W){if(++f>30){(0,r.warn)("Load test font never loaded."),W();return}if(g.font="30px "+$,g.fillText(".",0,20),g.getImageData(0,0,1,1).data[3]>0){W();return}setTimeout(v.bind(null,$,W))}let y=`lt${Date.now()}${this.loadTestFontId++}`,E=this._loadTestFont;E=a(E,976,y.length,y);let T=16,w=1482184792,C=u(E,T);for(c=0,h=y.length-3;c<h;c+=4)C=C-w+u(y,c)|0;c<y.length&&(C=C-w+u(y+"XXX",c)|0),E=a(E,T,4,(0,r.string32)(C));let L=`url(data:font/opentype;base64,${btoa(E)});`,U=`@font-face {font-family:"${y}";src:${L}}`;this.insertRule(U);let F=this._document.createElement("div");F.style.visibility="hidden",F.style.width=F.style.height="10px",F.style.position="absolute",F.style.top=F.style.left="0px";for(let $ of[l.loadedName,y]){let W=this._document.createElement("span");W.textContent="Hi",W.style.fontFamily=$,F.append(W)}this._document.body.append(F),v(y,()=>{F.remove(),d.complete()})}}t.FontLoader=i;class s{constructor(l,{isEvalSupported:d=!0,disableFontFace:u=!1,ignoreErrors:a=!1,inspectFont:c=null}){this.compiledGlyphs=Object.create(null);for(let h in l)this[h]=l[h];this.isEvalSupported=d!==!1,this.disableFontFace=u===!0,this.ignoreErrors=a===!0,this._inspectFont=c}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let l;if(!this.cssFontInfo)l=new FontFace(this.loadedName,this.data,{});else{let d={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(d.style=`oblique ${this.cssFontInfo.italicAngle}deg`),l=new FontFace(this.cssFontInfo.fontFamily,this.data,d)}return this._inspectFont?.(this),l}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let l=(0,r.bytesToString)(this.data),d=`url(data:${this.mimetype};base64,${btoa(l)});`,u;if(!this.cssFontInfo)u=`@font-face {font-family:"${this.loadedName}";src:${d}}`;else{let a=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(a+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),u=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${a}src:${d}}`}return this._inspectFont?.(this,d),u}getPathGenerator(l,d){if(this.compiledGlyphs[d]!==void 0)return this.compiledGlyphs[d];let u;try{u=l.get(this.loadedName+"_path_"+d)}catch(a){if(!this.ignoreErrors)throw a;return(0,r.warn)(`getPathGenerator - ignoring character: "${a}".`),this.compiledGlyphs[d]=function(c,h){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){let a=[];for(let c of u){let h=c.args!==void 0?c.args.join(","):"";a.push("c.",c.cmd,"(",h,`);
`)}return this.compiledGlyphs[d]=new Function("c","size",a.join(""))}return this.compiledGlyphs[d]=function(a,c){for(let h of u)h.cmd==="scale"&&(h.args=[c,-c]),a[h.cmd].apply(a,h.args)}}}t.FontFaceObject=s},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var r=n(7),i=n(1);let s=function(a){return new Promise((c,h)=>{wo().readFile(a,(g,f)=>{if(g||!f){h(new Error(g));return}c(new Uint8Array(f))})})};class o extends r.BaseFilterFactory{}t.NodeFilterFactory=o;class l extends r.BaseCanvasFactory{_createCanvas(c,h){return Hp().createCanvas(c,h)}}t.NodeCanvasFactory=l;class d extends r.BaseCMapReaderFactory{_fetchData(c,h){return s(c).then(p=>({cMapData:p,compressionType:h}))}}t.NodeCMapReaderFactory=d;class u extends r.BaseStandardFontDataFactory{_fetchData(c){return s(c)}}t.NodeStandardFontDataFactory=u},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var r=n(1),i=n(6),s=n(12),o=n(13);let l=16,d=100,u=4096,a=15,c=10,h=1e3,p=16;function g(S,b){if(S._removeMirroring)throw new Error("Context is already forwarding operations.");S.__originalSave=S.save,S.__originalRestore=S.restore,S.__originalRotate=S.rotate,S.__originalScale=S.scale,S.__originalTranslate=S.translate,S.__originalTransform=S.transform,S.__originalSetTransform=S.setTransform,S.__originalResetTransform=S.resetTransform,S.__originalClip=S.clip,S.__originalMoveTo=S.moveTo,S.__originalLineTo=S.lineTo,S.__originalBezierCurveTo=S.bezierCurveTo,S.__originalRect=S.rect,S.__originalClosePath=S.closePath,S.__originalBeginPath=S.beginPath,S._removeMirroring=()=>{S.save=S.__originalSave,S.restore=S.__originalRestore,S.rotate=S.__originalRotate,S.scale=S.__originalScale,S.translate=S.__originalTranslate,S.transform=S.__originalTransform,S.setTransform=S.__originalSetTransform,S.resetTransform=S.__originalResetTransform,S.clip=S.__originalClip,S.moveTo=S.__originalMoveTo,S.lineTo=S.__originalLineTo,S.bezierCurveTo=S.__originalBezierCurveTo,S.rect=S.__originalRect,S.closePath=S.__originalClosePath,S.beginPath=S.__originalBeginPath,delete S._removeMirroring},S.save=function(){b.save(),this.__originalSave()},S.restore=function(){b.restore(),this.__originalRestore()},S.translate=function(A,N){b.translate(A,N),this.__originalTranslate(A,N)},S.scale=function(A,N){b.scale(A,N),this.__originalScale(A,N)},S.transform=function(A,N,k,j,x,m){b.transform(A,N,k,j,x,m),this.__originalTransform(A,N,k,j,x,m)},S.setTransform=function(A,N,k,j,x,m){b.setTransform(A,N,k,j,x,m),this.__originalSetTransform(A,N,k,j,x,m)},S.resetTransform=function(){b.resetTransform(),this.__originalResetTransform()},S.rotate=function(A){b.rotate(A),this.__originalRotate(A)},S.clip=function(A){b.clip(A),this.__originalClip(A)},S.moveTo=function(_,A){b.moveTo(_,A),this.__originalMoveTo(_,A)},S.lineTo=function(_,A){b.lineTo(_,A),this.__originalLineTo(_,A)},S.bezierCurveTo=function(_,A,N,k,j,x){b.bezierCurveTo(_,A,N,k,j,x),this.__originalBezierCurveTo(_,A,N,k,j,x)},S.rect=function(_,A,N,k){b.rect(_,A,N,k),this.__originalRect(_,A,N,k)},S.closePath=function(){b.closePath(),this.__originalClosePath()},S.beginPath=function(){b.beginPath(),this.__originalBeginPath()}}class f{constructor(b){this.canvasFactory=b,this.cache=Object.create(null)}getCanvas(b,_,A){let N;return this.cache[b]!==void 0?(N=this.cache[b],this.canvasFactory.reset(N,_,A)):(N=this.canvasFactory.create(_,A),this.cache[b]=N),N}delete(b){delete this.cache[b]}clear(){for(let b in this.cache){let _=this.cache[b];this.canvasFactory.destroy(_),delete this.cache[b]}}}function v(S,b,_,A,N,k,j,x,m,D){let[I,R,P,B,V,G]=(0,i.getCurrentTransform)(S);if(R===0&&P===0){let Y=j*I+V,X=Math.round(Y),K=x*B+G,ee=Math.round(K),se=(j+m)*I+V,le=Math.abs(Math.round(se)-X)||1,ue=(x+D)*B+G,fe=Math.abs(Math.round(ue)-ee)||1;return S.setTransform(Math.sign(I),0,0,Math.sign(B),X,ee),S.drawImage(b,_,A,N,k,0,0,le,fe),S.setTransform(I,R,P,B,V,G),[le,fe]}if(I===0&&B===0){let Y=x*P+V,X=Math.round(Y),K=j*R+G,ee=Math.round(K),se=(x+D)*P+V,le=Math.abs(Math.round(se)-X)||1,ue=(j+m)*R+G,fe=Math.abs(Math.round(ue)-ee)||1;return S.setTransform(0,Math.sign(R),Math.sign(P),0,X,ee),S.drawImage(b,_,A,N,k,0,0,fe,le),S.setTransform(I,R,P,B,V,G),[fe,le]}S.drawImage(b,_,A,N,k,j,x,m,D);let re=Math.hypot(I,R),q=Math.hypot(P,B);return[re*m,q*D]}function y(S){let{width:b,height:_}=S;if(b>h||_>h)return null;let A=1e3,N=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),k=b+1,j=new Uint8Array(k*(_+1)),x,m,D,I=b+7&-8,R=new Uint8Array(I*_),P=0;for(let q of S.data){let Y=128;for(;Y>0;)R[P++]=q&Y?0:255,Y>>=1}let B=0;for(P=0,R[P]!==0&&(j[0]=1,++B),m=1;m<b;m++)R[P]!==R[P+1]&&(j[m]=R[P]?2:1,++B),P++;for(R[P]!==0&&(j[m]=2,++B),x=1;x<_;x++){P=x*I,D=x*k,R[P-I]!==R[P]&&(j[D]=R[P]?1:8,++B);let q=(R[P]?4:0)+(R[P-I]?8:0);for(m=1;m<b;m++)q=(q>>2)+(R[P+1]?4:0)+(R[P-I+1]?8:0),N[q]&&(j[D+m]=N[q],++B),P++;if(R[P-I]!==R[P]&&(j[D+m]=R[P]?2:4,++B),B>A)return null}for(P=I*(_-1),D=x*k,R[P]!==0&&(j[D]=8,++B),m=1;m<b;m++)R[P]!==R[P+1]&&(j[D+m]=R[P]?4:8,++B),P++;if(R[P]!==0&&(j[D+m]=4,++B),B>A)return null;let V=new Int32Array([0,k,-1,0,-k,0,0,0,1]),G=new Path2D;for(x=0;B&&x<=_;x++){let q=x*k,Y=q+b;for(;q<Y&&!j[q];)q++;if(q===Y)continue;G.moveTo(q%k,x);let X=q,K=j[q];do{let ee=V[K];do q+=ee;while(!j[q]);let se=j[q];se!==5&&se!==10?(K=se,j[q]=0):(K=se&51*K>>4,j[q]&=K>>2|K<<2),G.lineTo(q%k,q/k|0),j[q]||--B}while(X!==q);--x}return R=null,j=null,function(q){q.save(),q.scale(1/b,-1/_),q.translate(0,-_),q.fill(G),q.beginPath(),q.restore()}}class E{constructor(b,_){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,b,_])}clone(){let b=Object.create(this);return b.clipBox=this.clipBox.slice(),b}setCurrentPoint(b,_){this.x=b,this.y=_}updatePathMinMax(b,_,A){[_,A]=r.Util.applyTransform([_,A],b),this.minX=Math.min(this.minX,_),this.minY=Math.min(this.minY,A),this.maxX=Math.max(this.maxX,_),this.maxY=Math.max(this.maxY,A)}updateRectMinMax(b,_){let A=r.Util.applyTransform(_,b),N=r.Util.applyTransform(_.slice(2),b);this.minX=Math.min(this.minX,A[0],N[0]),this.minY=Math.min(this.minY,A[1],N[1]),this.maxX=Math.max(this.maxX,A[0],N[0]),this.maxY=Math.max(this.maxY,A[1],N[1])}updateScalingPathMinMax(b,_){r.Util.scaleMinMax(b,_),this.minX=Math.min(this.minX,_[0]),this.maxX=Math.max(this.maxX,_[1]),this.minY=Math.min(this.minY,_[2]),this.maxY=Math.max(this.maxY,_[3])}updateCurvePathMinMax(b,_,A,N,k,j,x,m,D,I){let R=r.Util.bezierBoundingBox(_,A,N,k,j,x,m,D);if(I){I[0]=Math.min(I[0],R[0],R[2]),I[1]=Math.max(I[1],R[0],R[2]),I[2]=Math.min(I[2],R[1],R[3]),I[3]=Math.max(I[3],R[1],R[3]);return}this.updateRectMinMax(b,R)}getPathBoundingBox(b=s.PathType.FILL,_=null){let A=[this.minX,this.minY,this.maxX,this.maxY];if(b===s.PathType.STROKE){_||(0,r.unreachable)("Stroke bounding box must include transform.");let N=r.Util.singularValueDecompose2dScale(_),k=N[0]*this.lineWidth/2,j=N[1]*this.lineWidth/2;A[0]-=k,A[1]-=j,A[2]+=k,A[3]+=j}return A}updateClipFromPath(){let b=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(b||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(b){this.clipBox=b,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(b=s.PathType.FILL,_=null){return r.Util.intersect(this.clipBox,this.getPathBoundingBox(b,_))}}function M(S,b){if(typeof ImageData<"u"&&b instanceof ImageData){S.putImageData(b,0,0);return}let _=b.height,A=b.width,N=_%p,k=(_-N)/p,j=N===0?k:k+1,x=S.createImageData(A,p),m=0,D,I=b.data,R=x.data,P,B,V,G;if(b.kind===r.ImageKind.GRAYSCALE_1BPP){let re=I.byteLength,q=new Uint32Array(R.buffer,0,R.byteLength>>2),Y=q.length,X=A+7>>3,K=4294967295,ee=r.FeatureTest.isLittleEndian?4278190080:255;for(P=0;P<j;P++){for(V=P<k?p:N,D=0,B=0;B<V;B++){let se=re-m,le=0,ue=se>X?A:se*8-7,fe=ue&-8,De=0,Pe=0;for(;le<fe;le+=8)Pe=I[m++],q[D++]=Pe&128?K:ee,q[D++]=Pe&64?K:ee,q[D++]=Pe&32?K:ee,q[D++]=Pe&16?K:ee,q[D++]=Pe&8?K:ee,q[D++]=Pe&4?K:ee,q[D++]=Pe&2?K:ee,q[D++]=Pe&1?K:ee;for(;le<ue;le++)De===0&&(Pe=I[m++],De=128),q[D++]=Pe&De?K:ee,De>>=1}for(;D<Y;)q[D++]=0;S.putImageData(x,0,P*p)}}else if(b.kind===r.ImageKind.RGBA_32BPP){for(B=0,G=A*p*4,P=0;P<k;P++)R.set(I.subarray(m,m+G)),m+=G,S.putImageData(x,0,B),B+=p;P<j&&(G=A*N*4,R.set(I.subarray(m,m+G)),S.putImageData(x,0,B))}else if(b.kind===r.ImageKind.RGB_24BPP)for(V=p,G=A*V,P=0;P<j;P++){for(P>=k&&(V=N,G=A*V),D=0,B=G;B--;)R[D++]=I[m++],R[D++]=I[m++],R[D++]=I[m++],R[D++]=255;S.putImageData(x,0,P*p)}else throw new Error(`bad image kind: ${b.kind}`)}function T(S,b){if(b.bitmap){S.drawImage(b.bitmap,0,0);return}let _=b.height,A=b.width,N=_%p,k=(_-N)/p,j=N===0?k:k+1,x=S.createImageData(A,p),m=0,D=b.data,I=x.data;for(let R=0;R<j;R++){let P=R<k?p:N;({srcPos:m}=(0,o.convertBlackAndWhiteToRGBA)({src:D,srcPos:m,dest:I,width:A,height:P,nonBlackColor:0})),S.putImageData(x,0,R*p)}}function w(S,b){let _=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let A of _)S[A]!==void 0&&(b[A]=S[A]);S.setLineDash!==void 0&&(b.setLineDash(S.getLineDash()),b.lineDashOffset=S.lineDashOffset)}function C(S){if(S.strokeStyle=S.fillStyle="#000000",S.fillRule="nonzero",S.globalAlpha=1,S.lineWidth=1,S.lineCap="butt",S.lineJoin="miter",S.miterLimit=10,S.globalCompositeOperation="source-over",S.font="10px sans-serif",S.setLineDash!==void 0&&(S.setLineDash([]),S.lineDashOffset=0),!r.isNodeJS){let{filter:b}=S;b!=="none"&&b!==""&&(S.filter="none")}}function L(S,b,_,A){let N=S.length;for(let k=3;k<N;k+=4){let j=S[k];if(j===0)S[k-3]=b,S[k-2]=_,S[k-1]=A;else if(j<255){let x=255-j;S[k-3]=S[k-3]*j+b*x>>8,S[k-2]=S[k-2]*j+_*x>>8,S[k-1]=S[k-1]*j+A*x>>8}}}function U(S,b,_){let A=S.length,N=1/255;for(let k=3;k<A;k+=4){let j=_?_[S[k]]:S[k];b[k]=b[k]*j*N|0}}function F(S,b,_){let A=S.length;for(let N=3;N<A;N+=4){let k=S[N-3]*77+S[N-2]*152+S[N-1]*28;b[N]=_?b[N]*_[k>>8]>>8:b[N]*k>>16}}function $(S,b,_,A,N,k,j,x,m,D,I){let R=!!k,P=R?k[0]:0,B=R?k[1]:0,V=R?k[2]:0,G=N==="Luminosity"?F:U,q=Math.min(A,Math.ceil(1048576/_));for(let Y=0;Y<A;Y+=q){let X=Math.min(q,A-Y),K=S.getImageData(x-D,Y+(m-I),_,X),ee=b.getImageData(x,Y+m,_,X);R&&L(K.data,P,B,V),G(K.data,ee.data,j),b.putImageData(ee,x,Y+m)}}function W(S,b,_,A){let N=A[0],k=A[1],j=A[2]-N,x=A[3]-k;j===0||x===0||($(b.context,_,j,x,b.subtype,b.backdrop,b.transferMap,N,k,b.offsetX,b.offsetY),S.save(),S.globalAlpha=1,S.globalCompositeOperation="source-over",S.setTransform(1,0,0,1,0,0),S.drawImage(_.canvas,0,0),S.restore())}function ne(S,b){let _=r.Util.singularValueDecompose2dScale(S);_[0]=Math.fround(_[0]),_[1]=Math.fround(_[1]);let A=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return b!==void 0?b:_[0]<=A||_[1]<=A}let J=["butt","round","square"],Q=["miter","round","bevel"],ie={},Z={};class O{constructor(b,_,A,N,k,{optionalContentConfig:j,markedContentStack:x=null},m,D){this.ctx=b,this.current=new E(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=_,this.objs=A,this.canvasFactory=N,this.filterFactory=k,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=x||[],this.optionalContentConfig=j,this.cachedCanvases=new f(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=m,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=D,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(b,_=null){return typeof b=="string"?b.startsWith("g_")?this.commonObjs.get(b):this.objs.get(b):_}beginDrawing({transform:b,viewport:_,transparency:A=!1,background:N=null}){let k=this.ctx.canvas.width,j=this.ctx.canvas.height,x=this.ctx.fillStyle;if(this.ctx.fillStyle=N||"#ffffff",this.ctx.fillRect(0,0,k,j),this.ctx.fillStyle=x,A){let m=this.cachedCanvases.getCanvas("transparent",k,j);this.compositeCtx=this.ctx,this.transparentCanvas=m.canvas,this.ctx=m.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),C(this.ctx),b&&(this.ctx.transform(...b),this.outputScaleX=b[0],this.outputScaleY=b[0]),this.ctx.transform(..._.transform),this.viewportScale=_.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx)}executeOperatorList(b,_,A,N){let k=b.argsArray,j=b.fnArray,x=_||0,m=k.length;if(m===x)return x;let D=m-x>c&&typeof A=="function",I=D?Date.now()+a:0,R=0,P=this.commonObjs,B=this.objs,V;for(;;){if(N!==void 0&&x===N.nextBreakPoint)return N.breakIt(x,A),x;if(V=j[x],V!==r.OPS.dependency)this[V].apply(this,k[x]);else for(let G of k[x]){let re=G.startsWith("g_")?P:B;if(!re.has(G))return re.get(G,A),x}if(x++,x===m)return x;if(D&&++R>c){if(Date.now()>I)return A(),x;R=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let b of this._cachedBitmapsMap.values()){for(let _ of b.values())typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement&&(_.width=_.height=0);b.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){let b=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(b!=="none"){let _=this.ctx.filter;this.ctx.filter=b,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=_}}}_scaleImage(b,_){let A=b.width,N=b.height,k=Math.max(Math.hypot(_[0],_[1]),1),j=Math.max(Math.hypot(_[2],_[3]),1),x=A,m=N,D="prescale1",I,R;for(;k>2&&x>1||j>2&&m>1;){let P=x,B=m;k>2&&x>1&&(P=x>=16384?Math.floor(x/2)-1||1:Math.ceil(x/2),k/=x/P),j>2&&m>1&&(B=m>=16384?Math.floor(m/2)-1||1:Math.ceil(m)/2,j/=m/B),I=this.cachedCanvases.getCanvas(D,P,B),R=I.context,R.clearRect(0,0,P,B),R.drawImage(b,0,0,x,m,0,0,P,B),b=I.canvas,x=P,m=B,D=D==="prescale1"?"prescale2":"prescale1"}return{img:b,paintWidth:x,paintHeight:m}}_createMaskCanvas(b){let _=this.ctx,{width:A,height:N}=b,k=this.current.fillColor,j=this.current.patternFill,x=(0,i.getCurrentTransform)(_),m,D,I,R;if((b.bitmap||b.data)&&b.count>1){let le=b.bitmap||b.data.buffer;D=JSON.stringify(j?x:[x.slice(0,4),k]),m=this._cachedBitmapsMap.get(le),m||(m=new Map,this._cachedBitmapsMap.set(le,m));let ue=m.get(D);if(ue&&!j){let fe=Math.round(Math.min(x[0],x[2])+x[4]),De=Math.round(Math.min(x[1],x[3])+x[5]);return{canvas:ue,offsetX:fe,offsetY:De}}I=ue}I||(R=this.cachedCanvases.getCanvas("maskCanvas",A,N),T(R.context,b));let P=r.Util.transform(x,[1/A,0,0,-1/N,0,0]);P=r.Util.transform(P,[1,0,0,1,0,-N]);let B=r.Util.applyTransform([0,0],P),V=r.Util.applyTransform([A,N],P),G=r.Util.normalizeRect([B[0],B[1],V[0],V[1]]),re=Math.round(G[2]-G[0])||1,q=Math.round(G[3]-G[1])||1,Y=this.cachedCanvases.getCanvas("fillCanvas",re,q),X=Y.context,K=Math.min(B[0],V[0]),ee=Math.min(B[1],V[1]);X.translate(-K,-ee),X.transform(...P),I||(I=this._scaleImage(R.canvas,(0,i.getCurrentTransformInverse)(X)),I=I.img,m&&j&&m.set(D,I)),X.imageSmoothingEnabled=ne((0,i.getCurrentTransform)(X),b.interpolate),v(X,I,0,0,I.width,I.height,0,0,A,N),X.globalCompositeOperation="source-in";let se=r.Util.transform((0,i.getCurrentTransformInverse)(X),[1,0,0,1,-K,-ee]);return X.fillStyle=j?k.getPattern(_,this,se,s.PathType.FILL):k,X.fillRect(0,0,A,N),m&&!j&&(this.cachedCanvases.delete("fillCanvas"),m.set(D,Y.canvas)),{canvas:Y.canvas,offsetX:Math.round(K),offsetY:Math.round(ee)}}setLineWidth(b){b!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=b,this.ctx.lineWidth=b}setLineCap(b){this.ctx.lineCap=J[b]}setLineJoin(b){this.ctx.lineJoin=Q[b]}setMiterLimit(b){this.ctx.miterLimit=b}setDash(b,_){let A=this.ctx;A.setLineDash!==void 0&&(A.setLineDash(b),A.lineDashOffset=_)}setRenderingIntent(b){}setFlatness(b){}setGState(b){for(let[_,A]of b)switch(_){case"LW":this.setLineWidth(A);break;case"LC":this.setLineCap(A);break;case"LJ":this.setLineJoin(A);break;case"ML":this.setMiterLimit(A);break;case"D":this.setDash(A[0],A[1]);break;case"RI":this.setRenderingIntent(A);break;case"FL":this.setFlatness(A);break;case"Font":this.setFont(A[0],A[1]);break;case"CA":this.current.strokeAlpha=A;break;case"ca":this.current.fillAlpha=A,this.ctx.globalAlpha=A;break;case"BM":this.ctx.globalCompositeOperation=A;break;case"SMask":this.current.activeSMask=A?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(A);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let b=this.inSMaskMode;this.current.activeSMask&&!b?this.beginSMaskMode():!this.current.activeSMask&&b&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let b=this.ctx.canvas.width,_=this.ctx.canvas.height,A="smaskGroupAt"+this.groupLevel,N=this.cachedCanvases.getCanvas(A,b,_);this.suspendedCtx=this.ctx,this.ctx=N.context;let k=this.ctx;k.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),w(this.suspendedCtx,k),g(k,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),w(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(b){if(!this.current.activeSMask)return;b?(b[0]=Math.floor(b[0]),b[1]=Math.floor(b[1]),b[2]=Math.ceil(b[2]),b[3]=Math.ceil(b[3])):b=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let _=this.current.activeSMask,A=this.suspendedCtx;W(A,_,this.ctx,b),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(w(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let b=this.current;this.stateStack.push(b),this.current=b.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),w(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(b,_,A,N,k,j){this.ctx.transform(b,_,A,N,k,j),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(b,_,A){let N=this.ctx,k=this.current,j=k.x,x=k.y,m,D,I=(0,i.getCurrentTransform)(N),R=I[0]===0&&I[3]===0||I[1]===0&&I[2]===0,P=R?A.slice(0):null;for(let B=0,V=0,G=b.length;B<G;B++)switch(b[B]|0){case r.OPS.rectangle:j=_[V++],x=_[V++];let re=_[V++],q=_[V++],Y=j+re,X=x+q;N.moveTo(j,x),re===0||q===0?N.lineTo(Y,X):(N.lineTo(Y,x),N.lineTo(Y,X),N.lineTo(j,X)),R||k.updateRectMinMax(I,[j,x,Y,X]),N.closePath();break;case r.OPS.moveTo:j=_[V++],x=_[V++],N.moveTo(j,x),R||k.updatePathMinMax(I,j,x);break;case r.OPS.lineTo:j=_[V++],x=_[V++],N.lineTo(j,x),R||k.updatePathMinMax(I,j,x);break;case r.OPS.curveTo:m=j,D=x,j=_[V+4],x=_[V+5],N.bezierCurveTo(_[V],_[V+1],_[V+2],_[V+3],j,x),k.updateCurvePathMinMax(I,m,D,_[V],_[V+1],_[V+2],_[V+3],j,x,P),V+=6;break;case r.OPS.curveTo2:m=j,D=x,N.bezierCurveTo(j,x,_[V],_[V+1],_[V+2],_[V+3]),k.updateCurvePathMinMax(I,m,D,j,x,_[V],_[V+1],_[V+2],_[V+3],P),j=_[V+2],x=_[V+3],V+=4;break;case r.OPS.curveTo3:m=j,D=x,j=_[V+2],x=_[V+3],N.bezierCurveTo(_[V],_[V+1],j,x,j,x),k.updateCurvePathMinMax(I,m,D,_[V],_[V+1],j,x,j,x,P),V+=4;break;case r.OPS.closePath:N.closePath();break}R&&k.updateScalingPathMinMax(I,P),k.setCurrentPoint(j,x)}closePath(){this.ctx.closePath()}stroke(b=!0){let _=this.ctx,A=this.current.strokeColor;_.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof A=="object"&&A?.getPattern?(_.save(),_.strokeStyle=A.getPattern(_,this,(0,i.getCurrentTransformInverse)(_),s.PathType.STROKE),this.rescaleAndStroke(!1),_.restore()):this.rescaleAndStroke(!0)),b&&this.consumePath(this.current.getClippedPathBoundingBox()),_.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(b=!0){let _=this.ctx,A=this.current.fillColor,N=this.current.patternFill,k=!1;N&&(_.save(),_.fillStyle=A.getPattern(_,this,(0,i.getCurrentTransformInverse)(_),s.PathType.FILL),k=!0);let j=this.current.getClippedPathBoundingBox();this.contentVisible&&j!==null&&(this.pendingEOFill?(_.fill("evenodd"),this.pendingEOFill=!1):_.fill()),k&&_.restore(),b&&this.consumePath(j)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ie}eoClip(){this.pendingClip=Z}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let b=this.pendingTextPaths,_=this.ctx;if(b===void 0){_.beginPath();return}_.save(),_.beginPath();for(let A of b)_.setTransform(...A.transform),_.translate(A.x,A.y),A.addToPath(_,A.fontSize);_.restore(),_.clip(),_.beginPath(),delete this.pendingTextPaths}setCharSpacing(b){this.current.charSpacing=b}setWordSpacing(b){this.current.wordSpacing=b}setHScale(b){this.current.textHScale=b/100}setLeading(b){this.current.leading=-b}setFont(b,_){let A=this.commonObjs.get(b),N=this.current;if(!A)throw new Error(`Can't find font for ${b}`);if(N.fontMatrix=A.fontMatrix||r.FONT_IDENTITY_MATRIX,(N.fontMatrix[0]===0||N.fontMatrix[3]===0)&&(0,r.warn)("Invalid font matrix for font "+b),_<0?(_=-_,N.fontDirection=-1):N.fontDirection=1,this.current.font=A,this.current.fontSize=_,A.isType3Font)return;let k=A.loadedName||"sans-serif",j=A.systemFontInfo?.css||`"${k}", ${A.fallbackName}`,x="normal";A.black?x="900":A.bold&&(x="bold");let m=A.italic?"italic":"normal",D=_;_<l?D=l:_>d&&(D=d),this.current.fontSizeScale=_/D,this.ctx.font=`${m} ${x} ${D}px ${j}`}setTextRenderingMode(b){this.current.textRenderingMode=b}setTextRise(b){this.current.textRise=b}moveText(b,_){this.current.x=this.current.lineX+=b,this.current.y=this.current.lineY+=_}setLeadingMoveText(b,_){this.setLeading(-_),this.moveText(b,_)}setTextMatrix(b,_,A,N,k,j){this.current.textMatrix=[b,_,A,N,k,j],this.current.textMatrixScale=Math.hypot(b,_),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(b,_,A,N){let k=this.ctx,j=this.current,x=j.font,m=j.textRenderingMode,D=j.fontSize/j.fontSizeScale,I=m&r.TextRenderingMode.FILL_STROKE_MASK,R=!!(m&r.TextRenderingMode.ADD_TO_PATH_FLAG),P=j.patternFill&&!x.missingFile,B;(x.disableFontFace||R||P)&&(B=x.getPathGenerator(this.commonObjs,b)),x.disableFontFace||P?(k.save(),k.translate(_,A),k.beginPath(),B(k,D),N&&k.setTransform(...N),(I===r.TextRenderingMode.FILL||I===r.TextRenderingMode.FILL_STROKE)&&k.fill(),(I===r.TextRenderingMode.STROKE||I===r.TextRenderingMode.FILL_STROKE)&&k.stroke(),k.restore()):((I===r.TextRenderingMode.FILL||I===r.TextRenderingMode.FILL_STROKE)&&k.fillText(b,_,A),(I===r.TextRenderingMode.STROKE||I===r.TextRenderingMode.FILL_STROKE)&&k.strokeText(b,_,A)),R&&(this.pendingTextPaths||=[]).push({transform:(0,i.getCurrentTransform)(k),x:_,y:A,fontSize:D,addToPath:B})}get isFontSubpixelAAEnabled(){let{context:b}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);b.scale(1.5,1),b.fillText("I",0,10);let _=b.getImageData(0,0,10,10).data,A=!1;for(let N=3;N<_.length;N+=4)if(_[N]>0&&_[N]<255){A=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",A)}showText(b){let _=this.current,A=_.font;if(A.isType3Font)return this.showType3Text(b);let N=_.fontSize;if(N===0)return;let k=this.ctx,j=_.fontSizeScale,x=_.charSpacing,m=_.wordSpacing,D=_.fontDirection,I=_.textHScale*D,R=b.length,P=A.vertical,B=P?1:-1,V=A.defaultVMetrics,G=N*_.fontMatrix[0],re=_.textRenderingMode===r.TextRenderingMode.FILL&&!A.disableFontFace&&!_.patternFill;k.save(),k.transform(..._.textMatrix),k.translate(_.x,_.y+_.textRise),D>0?k.scale(I,-1):k.scale(I,1);let q;if(_.patternFill){k.save();let se=_.fillColor.getPattern(k,this,(0,i.getCurrentTransformInverse)(k),s.PathType.FILL);q=(0,i.getCurrentTransform)(k),k.restore(),k.fillStyle=se}let Y=_.lineWidth,X=_.textMatrixScale;if(X===0||Y===0){let se=_.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;(se===r.TextRenderingMode.STROKE||se===r.TextRenderingMode.FILL_STROKE)&&(Y=this.getSinglePixelWidth())}else Y/=X;if(j!==1&&(k.scale(j,j),Y/=j),k.lineWidth=Y,A.isInvalidPDFjsFont){let se=[],le=0;for(let ue of b)se.push(ue.unicode),le+=ue.width;k.fillText(se.join(""),0,0),_.x+=le*G*I,k.restore(),this.compose();return}let K=0,ee;for(ee=0;ee<R;++ee){let se=b[ee];if(typeof se=="number"){K+=B*se*N/1e3;continue}let le=!1,ue=(se.isSpace?m:0)+x,fe=se.fontChar,De=se.accent,Pe,ct,tt=se.width;if(P){let nt=se.vmetric||V,Ht=-(se.vmetric?nt[1]:tt*.5)*G,Do=nt[2]*G;tt=nt?-nt[0]:tt,Pe=Ht/j,ct=(K+Do)/j}else Pe=K/j,ct=0;if(A.remeasure&&tt>0){let nt=k.measureText(fe).width*1e3/N*j;if(tt<nt&&this.isFontSubpixelAAEnabled){let Ht=tt/nt;le=!0,k.save(),k.scale(Ht,1),Pe/=Ht}else tt!==nt&&(Pe+=(tt-nt)/2e3*N/j)}if(this.contentVisible&&(se.isInFont||A.missingFile)){if(re&&!De)k.fillText(fe,Pe,ct);else if(this.paintChar(fe,Pe,ct,q),De){let nt=Pe+N*De.offset.x/j,Ht=ct-N*De.offset.y/j;this.paintChar(De.fontChar,nt,Ht,q)}}let Hn=P?tt*G-ue*D:tt*G+ue*D;K+=Hn,le&&k.restore()}P?_.y-=K:_.x+=K*I,k.restore(),this.compose()}showType3Text(b){let _=this.ctx,A=this.current,N=A.font,k=A.fontSize,j=A.fontDirection,x=N.vertical?1:-1,m=A.charSpacing,D=A.wordSpacing,I=A.textHScale*j,R=A.fontMatrix||r.FONT_IDENTITY_MATRIX,P=b.length,B=A.textRenderingMode===r.TextRenderingMode.INVISIBLE,V,G,re,q;if(!(B||k===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,_.save(),_.transform(...A.textMatrix),_.translate(A.x,A.y),_.scale(I,j),V=0;V<P;++V){if(G=b[V],typeof G=="number"){q=x*G*k/1e3,this.ctx.translate(q,0),A.x+=q*I;continue}let Y=(G.isSpace?D:0)+m,X=N.charProcOperatorList[G.operatorListId];if(!X){(0,r.warn)(`Type3 character "${G.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=G,this.save(),_.scale(k,k),_.transform(...R),this.executeOperatorList(X),this.restore()),re=r.Util.applyTransform([G.width,0],R)[0]*k+Y,_.translate(re,0),A.x+=re*I}_.restore(),this.processingType3=null}}setCharWidth(b,_){}setCharWidthAndBounds(b,_,A,N,k,j){this.ctx.rect(A,N,k-A,j-N),this.ctx.clip(),this.endPath()}getColorN_Pattern(b){let _;if(b[0]==="TilingPattern"){let A=b[1],N=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),k={createCanvasGraphics:j=>new O(j,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};_=new s.TilingPattern(b,A,this.ctx,k,N)}else _=this._getPattern(b[1],b[2]);return _}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(b,_,A){let N=r.Util.makeHexColor(b,_,A);this.ctx.strokeStyle=N,this.current.strokeColor=N}setFillRGBColor(b,_,A){let N=r.Util.makeHexColor(b,_,A);this.ctx.fillStyle=N,this.current.fillColor=N,this.current.patternFill=!1}_getPattern(b,_=null){let A;return this.cachedPatterns.has(b)?A=this.cachedPatterns.get(b):(A=(0,s.getShadingPattern)(this.getObject(b)),this.cachedPatterns.set(b,A)),_&&(A.matrix=_),A}shadingFill(b){if(!this.contentVisible)return;let _=this.ctx;this.save();let A=this._getPattern(b);_.fillStyle=A.getPattern(_,this,(0,i.getCurrentTransformInverse)(_),s.PathType.SHADING);let N=(0,i.getCurrentTransformInverse)(_);if(N){let{width:k,height:j}=_.canvas,[x,m,D,I]=r.Util.getAxialAlignedBoundingBox([0,0,k,j],N);this.ctx.fillRect(x,m,D-x,I-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(b,_){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(b)&&b.length===6&&this.transform(...b),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),_)){let A=_[2]-_[0],N=_[3]-_[1];this.ctx.rect(_[0],_[1],A,N),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),_),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(b){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let _=this.ctx;b.isolated||(0,r.info)("TODO: Support non-isolated groups."),b.knockout&&(0,r.warn)("Knockout groups not supported.");let A=(0,i.getCurrentTransform)(_);if(b.matrix&&_.transform(...b.matrix),!b.bbox)throw new Error("Bounding box is required.");let N=r.Util.getAxialAlignedBoundingBox(b.bbox,(0,i.getCurrentTransform)(_)),k=[0,0,_.canvas.width,_.canvas.height];N=r.Util.intersect(N,k)||[0,0,0,0];let j=Math.floor(N[0]),x=Math.floor(N[1]),m=Math.max(Math.ceil(N[2])-j,1),D=Math.max(Math.ceil(N[3])-x,1),I=1,R=1;m>u&&(I=m/u,m=u),D>u&&(R=D/u,D=u),this.current.startNewPathAndClipBox([0,0,m,D]);let P="groupAt"+this.groupLevel;b.smask&&(P+="_smask_"+this.smaskCounter++%2);let B=this.cachedCanvases.getCanvas(P,m,D),V=B.context;V.scale(1/I,1/R),V.translate(-j,-x),V.transform(...A),b.smask?this.smaskStack.push({canvas:B.canvas,context:V,offsetX:j,offsetY:x,scaleX:I,scaleY:R,subtype:b.smask.subtype,backdrop:b.smask.backdrop,transferMap:b.smask.transferMap||null,startTransformInverse:null}):(_.setTransform(1,0,0,1,0,0),_.translate(j,x),_.scale(I,R),_.save()),w(_,V),this.ctx=V,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(_),this.groupLevel++}endGroup(b){if(!this.contentVisible)return;this.groupLevel--;let _=this.ctx,A=this.groupStack.pop();if(this.ctx=A,this.ctx.imageSmoothingEnabled=!1,b.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let N=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...N);let k=r.Util.getAxialAlignedBoundingBox([0,0,_.canvas.width,_.canvas.height],N);this.ctx.drawImage(_.canvas,0,0),this.ctx.restore(),this.compose(k)}}beginAnnotation(b,_,A,N,k){if(this.#e(),C(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(_)&&_.length===4){let j=_[2]-_[0],x=_[3]-_[1];if(k&&this.annotationCanvasMap){A=A.slice(),A[4]-=_[0],A[5]-=_[1],_=_.slice(),_[0]=_[1]=0,_[2]=j,_[3]=x;let[m,D]=r.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:I}=this,R=Math.ceil(j*this.outputScaleX*I),P=Math.ceil(x*this.outputScaleY*I);this.annotationCanvas=this.canvasFactory.create(R,P);let{canvas:B,context:V}=this.annotationCanvas;this.annotationCanvasMap.set(b,B),this.annotationCanvas.savedCtx=this.ctx,this.ctx=V,this.ctx.save(),this.ctx.setTransform(m,0,0,-D,0,x*D),C(this.ctx)}else C(this.ctx),this.ctx.rect(_[0],_[1],j,x),this.ctx.clip(),this.endPath()}this.current=new E(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...A),this.transform(...N)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(b){if(!this.contentVisible)return;let _=b.count;b=this.getObject(b.data,b),b.count=_;let A=this.ctx,N=this.processingType3;if(N&&(N.compiled===void 0&&(N.compiled=y(b)),N.compiled)){N.compiled(A);return}let k=this._createMaskCanvas(b),j=k.canvas;A.save(),A.setTransform(1,0,0,1,0,0),A.drawImage(j,k.offsetX,k.offsetY),A.restore(),this.compose()}paintImageMaskXObjectRepeat(b,_,A=0,N=0,k,j){if(!this.contentVisible)return;b=this.getObject(b.data,b);let x=this.ctx;x.save();let m=(0,i.getCurrentTransform)(x);x.transform(_,A,N,k,0,0);let D=this._createMaskCanvas(b);x.setTransform(1,0,0,1,D.offsetX-m[4],D.offsetY-m[5]);for(let I=0,R=j.length;I<R;I+=2){let P=r.Util.transform(m,[_,A,N,k,j[I],j[I+1]]),[B,V]=r.Util.applyTransform([0,0],P);x.drawImage(D.canvas,B,V)}x.restore(),this.compose()}paintImageMaskXObjectGroup(b){if(!this.contentVisible)return;let _=this.ctx,A=this.current.fillColor,N=this.current.patternFill;for(let k of b){let{data:j,width:x,height:m,transform:D}=k,I=this.cachedCanvases.getCanvas("maskCanvas",x,m),R=I.context;R.save();let P=this.getObject(j,k);T(R,P),R.globalCompositeOperation="source-in",R.fillStyle=N?A.getPattern(R,this,(0,i.getCurrentTransformInverse)(_),s.PathType.FILL):A,R.fillRect(0,0,x,m),R.restore(),_.save(),_.transform(...D),_.scale(1,-1),v(_,I.canvas,0,0,x,m,0,-1,1,1),_.restore()}this.compose()}paintImageXObject(b){if(!this.contentVisible)return;let _=this.getObject(b);if(!_){(0,r.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(_)}paintImageXObjectRepeat(b,_,A,N){if(!this.contentVisible)return;let k=this.getObject(b);if(!k){(0,r.warn)("Dependent image isn't ready yet");return}let j=k.width,x=k.height,m=[];for(let D=0,I=N.length;D<I;D+=2)m.push({transform:[_,0,0,A,N[D],N[D+1]],x:0,y:0,w:j,h:x});this.paintInlineImageXObjectGroup(k,m)}applyTransferMapsToCanvas(b){return this.current.transferMaps!=="none"&&(b.filter=this.current.transferMaps,b.drawImage(b.canvas,0,0),b.filter="none"),b.canvas}applyTransferMapsToBitmap(b){if(this.current.transferMaps==="none")return b.bitmap;let{bitmap:_,width:A,height:N}=b,k=this.cachedCanvases.getCanvas("inlineImage",A,N),j=k.context;return j.filter=this.current.transferMaps,j.drawImage(_,0,0),j.filter="none",k.canvas}paintInlineImageXObject(b){if(!this.contentVisible)return;let _=b.width,A=b.height,N=this.ctx;if(this.save(),!r.isNodeJS){let{filter:x}=N;x!=="none"&&x!==""&&(N.filter="none")}N.scale(1/_,-1/A);let k;if(b.bitmap)k=this.applyTransferMapsToBitmap(b);else if(typeof HTMLElement=="function"&&b instanceof HTMLElement||!b.data)k=b;else{let m=this.cachedCanvases.getCanvas("inlineImage",_,A).context;M(m,b),k=this.applyTransferMapsToCanvas(m)}let j=this._scaleImage(k,(0,i.getCurrentTransformInverse)(N));N.imageSmoothingEnabled=ne((0,i.getCurrentTransform)(N),b.interpolate),v(N,j.img,0,0,j.paintWidth,j.paintHeight,0,-A,_,A),this.compose(),this.restore()}paintInlineImageXObjectGroup(b,_){if(!this.contentVisible)return;let A=this.ctx,N;if(b.bitmap)N=b.bitmap;else{let k=b.width,j=b.height,m=this.cachedCanvases.getCanvas("inlineImage",k,j).context;M(m,b),N=this.applyTransferMapsToCanvas(m)}for(let k of _)A.save(),A.transform(...k.transform),A.scale(1,-1),v(A,N,k.x,k.y,k.w,k.h,0,-1,1,1),A.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(b){}markPointProps(b,_){}beginMarkedContent(b){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(b,_){b==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(_)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(b){let _=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(b);let A=this.ctx;this.pendingClip&&(_||(this.pendingClip===Z?A.clip("evenodd"):A.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),A.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let b=(0,i.getCurrentTransform)(this.ctx);if(b[1]===0&&b[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(b[0]),Math.abs(b[3]));else{let _=Math.abs(b[0]*b[3]-b[2]*b[1]),A=Math.hypot(b[0],b[2]),N=Math.hypot(b[1],b[3]);this._cachedGetSinglePixelWidth=Math.max(A,N)/_}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:b}=this.current,{a:_,b:A,c:N,d:k}=this.ctx.getTransform(),j,x;if(A===0&&N===0){let m=Math.abs(_),D=Math.abs(k);if(m===D)if(b===0)j=x=1/m;else{let I=m*b;j=x=I<1?1/I:1}else if(b===0)j=1/m,x=1/D;else{let I=m*b,R=D*b;j=I<1?1/I:1,x=R<1?1/R:1}}else{let m=Math.abs(_*k-A*N),D=Math.hypot(_,A),I=Math.hypot(N,k);if(b===0)j=I/m,x=D/m;else{let R=b*m;j=I>R?I/R:1,x=D>R?D/R:1}}this._cachedScaleForStroking[0]=j,this._cachedScaleForStroking[1]=x}return this._cachedScaleForStroking}rescaleAndStroke(b){let{ctx:_}=this,{lineWidth:A}=this.current,[N,k]=this.getScaleForStroking();if(_.lineWidth=A||1,N===1&&k===1){_.stroke();return}let j=_.getLineDash();if(b&&_.save(),_.scale(N,k),j.length>0){let x=Math.max(N,k);_.setLineDash(j.map(m=>m/x)),_.lineDashOffset/=x}_.stroke(),b&&_.restore()}isContentVisible(){for(let b=this.markedContentStack.length-1;b>=0;b--)if(!this.markedContentStack[b].visible)return!1;return!0}}t.CanvasGraphics=O;for(let S in r.OPS)O.prototype[S]!==void 0&&(O.prototype[r.OPS[S]]=O.prototype[S])},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=p;var r=n(1),i=n(6);let s={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=s;function o(v,y){if(!y)return;let E=y[2]-y[0],M=y[3]-y[1],T=new Path2D;T.rect(y[0],y[1],E,M),v.clip(T)}class l{constructor(){this.constructor===l&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class d extends l{constructor(y){super(),this._type=y[1],this._bbox=y[2],this._colorStops=y[3],this._p0=y[4],this._p1=y[5],this._r0=y[6],this._r1=y[7],this.matrix=null}_createGradient(y){let E;this._type==="axial"?E=y.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(E=y.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let M of this._colorStops)E.addColorStop(M[0],M[1]);return E}getPattern(y,E,M,T){let w;if(T===s.STROKE||T===s.FILL){let C=E.current.getClippedPathBoundingBox(T,(0,i.getCurrentTransform)(y))||[0,0,0,0],L=Math.ceil(C[2]-C[0])||1,U=Math.ceil(C[3]-C[1])||1,F=E.cachedCanvases.getCanvas("pattern",L,U,!0),$=F.context;$.clearRect(0,0,$.canvas.width,$.canvas.height),$.beginPath(),$.rect(0,0,$.canvas.width,$.canvas.height),$.translate(-C[0],-C[1]),M=r.Util.transform(M,[1,0,0,1,C[0],C[1]]),$.transform(...E.baseTransform),this.matrix&&$.transform(...this.matrix),o($,this._bbox),$.fillStyle=this._createGradient($),$.fill(),w=y.createPattern(F.canvas,"no-repeat");let W=new DOMMatrix(M);w.setTransform(W)}else o(y,this._bbox),w=this._createGradient(y);return w}}function u(v,y,E,M,T,w,C,L){let U=y.coords,F=y.colors,$=v.data,W=v.width*4,ne;U[E+1]>U[M+1]&&(ne=E,E=M,M=ne,ne=w,w=C,C=ne),U[M+1]>U[T+1]&&(ne=M,M=T,T=ne,ne=C,C=L,L=ne),U[E+1]>U[M+1]&&(ne=E,E=M,M=ne,ne=w,w=C,C=ne);let J=(U[E]+y.offsetX)*y.scaleX,Q=(U[E+1]+y.offsetY)*y.scaleY,ie=(U[M]+y.offsetX)*y.scaleX,Z=(U[M+1]+y.offsetY)*y.scaleY,O=(U[T]+y.offsetX)*y.scaleX,S=(U[T+1]+y.offsetY)*y.scaleY;if(Q>=S)return;let b=F[w],_=F[w+1],A=F[w+2],N=F[C],k=F[C+1],j=F[C+2],x=F[L],m=F[L+1],D=F[L+2],I=Math.round(Q),R=Math.round(S),P,B,V,G,re,q,Y,X;for(let K=I;K<=R;K++){if(K<Z){let fe=K<Q?0:(Q-K)/(Q-Z);P=J-(J-ie)*fe,B=b-(b-N)*fe,V=_-(_-k)*fe,G=A-(A-j)*fe}else{let fe;K>S?fe=1:Z===S?fe=0:fe=(Z-K)/(Z-S),P=ie-(ie-O)*fe,B=N-(N-x)*fe,V=k-(k-m)*fe,G=j-(j-D)*fe}let ee;K<Q?ee=0:K>S?ee=1:ee=(Q-K)/(Q-S),re=J-(J-O)*ee,q=b-(b-x)*ee,Y=_-(_-m)*ee,X=A-(A-D)*ee;let se=Math.round(Math.min(P,re)),le=Math.round(Math.max(P,re)),ue=W*K+se*4;for(let fe=se;fe<=le;fe++)ee=(P-fe)/(P-re),ee<0?ee=0:ee>1&&(ee=1),$[ue++]=B-(B-q)*ee|0,$[ue++]=V-(V-Y)*ee|0,$[ue++]=G-(G-X)*ee|0,$[ue++]=255}}function a(v,y,E){let M=y.coords,T=y.colors,w,C;switch(y.type){case"lattice":let L=y.verticesPerRow,U=Math.floor(M.length/L)-1,F=L-1;for(w=0;w<U;w++){let $=w*L;for(let W=0;W<F;W++,$++)u(v,E,M[$],M[$+1],M[$+L],T[$],T[$+1],T[$+L]),u(v,E,M[$+L+1],M[$+1],M[$+L],T[$+L+1],T[$+1],T[$+L])}break;case"triangles":for(w=0,C=M.length;w<C;w+=3)u(v,E,M[w],M[w+1],M[w+2],T[w],T[w+1],T[w+2]);break;default:throw new Error("illegal figure")}}class c extends l{constructor(y){super(),this._coords=y[2],this._colors=y[3],this._figures=y[4],this._bounds=y[5],this._bbox=y[7],this._background=y[8],this.matrix=null}_createMeshCanvas(y,E,M){let L=Math.floor(this._bounds[0]),U=Math.floor(this._bounds[1]),F=Math.ceil(this._bounds[2])-L,$=Math.ceil(this._bounds[3])-U,W=Math.min(Math.ceil(Math.abs(F*y[0]*1.1)),3e3),ne=Math.min(Math.ceil(Math.abs($*y[1]*1.1)),3e3),J=F/W,Q=$/ne,ie={coords:this._coords,colors:this._colors,offsetX:-L,offsetY:-U,scaleX:1/J,scaleY:1/Q},Z=W+2*2,O=ne+2*2,S=M.getCanvas("mesh",Z,O,!1),b=S.context,_=b.createImageData(W,ne);if(E){let N=_.data;for(let k=0,j=N.length;k<j;k+=4)N[k]=E[0],N[k+1]=E[1],N[k+2]=E[2],N[k+3]=255}for(let N of this._figures)a(_,N,ie);return b.putImageData(_,2,2),{canvas:S.canvas,offsetX:L-2*J,offsetY:U-2*Q,scaleX:J,scaleY:Q}}getPattern(y,E,M,T){o(y,this._bbox);let w;if(T===s.SHADING)w=r.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(y));else if(w=r.Util.singularValueDecompose2dScale(E.baseTransform),this.matrix){let L=r.Util.singularValueDecompose2dScale(this.matrix);w=[w[0]*L[0],w[1]*L[1]]}let C=this._createMeshCanvas(w,T===s.SHADING?null:this._background,E.cachedCanvases);return T!==s.SHADING&&(y.setTransform(...E.baseTransform),this.matrix&&y.transform(...this.matrix)),y.translate(C.offsetX,C.offsetY),y.scale(C.scaleX,C.scaleY),y.createPattern(C.canvas,"no-repeat")}}class h extends l{getPattern(){return"hotpink"}}function p(v){switch(v[0]){case"RadialAxial":return new d(v);case"Mesh":return new c(v);case"Dummy":return new h}throw new Error(`Unknown IR type: ${v[0]}`)}let g={COLORED:1,UNCOLORED:2},f=(()=>{class v{static MAX_PATTERN_SIZE=3e3;constructor(E,M,T,w,C){this.operatorList=E[2],this.matrix=E[3]||[1,0,0,1,0,0],this.bbox=E[4],this.xstep=E[5],this.ystep=E[6],this.paintType=E[7],this.tilingType=E[8],this.color=M,this.ctx=T,this.canvasGraphicsFactory=w,this.baseTransform=C}createPatternCanvas(E){let M=this.operatorList,T=this.bbox,w=this.xstep,C=this.ystep,L=this.paintType,U=this.tilingType,F=this.color,$=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+U);let W=T[0],ne=T[1],J=T[2],Q=T[3],ie=r.Util.singularValueDecompose2dScale(this.matrix),Z=r.Util.singularValueDecompose2dScale(this.baseTransform),O=[ie[0]*Z[0],ie[1]*Z[1]],S=this.getSizeAndScale(w,this.ctx.canvas.width,O[0]),b=this.getSizeAndScale(C,this.ctx.canvas.height,O[1]),_=E.cachedCanvases.getCanvas("pattern",S.size,b.size,!0),A=_.context,N=$.createCanvasGraphics(A);N.groupLevel=E.groupLevel,this.setFillAndStrokeStyleToContext(N,L,F);let k=W,j=ne,x=J,m=Q;return W<0&&(k=0,x+=Math.abs(W)),ne<0&&(j=0,m+=Math.abs(ne)),A.translate(-(S.scale*k),-(b.scale*j)),N.transform(S.scale,0,0,b.scale,0,0),A.save(),this.clipBbox(N,k,j,x,m),N.baseTransform=(0,i.getCurrentTransform)(N.ctx),N.executeOperatorList(M),N.endDrawing(),{canvas:_.canvas,scaleX:S.scale,scaleY:b.scale,offsetX:k,offsetY:j}}getSizeAndScale(E,M,T){E=Math.abs(E);let w=Math.max(v.MAX_PATTERN_SIZE,M),C=Math.ceil(E*T);return C>=w?C=w:T=C/E,{scale:T,size:C}}clipBbox(E,M,T,w,C){let L=w-M,U=C-T;E.ctx.rect(M,T,L,U),E.current.updateRectMinMax((0,i.getCurrentTransform)(E.ctx),[M,T,w,C]),E.clip(),E.endPath()}setFillAndStrokeStyleToContext(E,M,T){let w=E.ctx,C=E.current;switch(M){case g.COLORED:let L=this.ctx;w.fillStyle=L.fillStyle,w.strokeStyle=L.strokeStyle,C.fillColor=L.fillStyle,C.strokeColor=L.strokeStyle;break;case g.UNCOLORED:let U=r.Util.makeHexColor(T[0],T[1],T[2]);w.fillStyle=U,w.strokeStyle=U,C.fillColor=U,C.strokeColor=U;break;default:throw new r.FormatError(`Unsupported paint type: ${M}`)}}getPattern(E,M,T,w){let C=T;w!==s.SHADING&&(C=r.Util.transform(C,M.baseTransform),this.matrix&&(C=r.Util.transform(C,this.matrix)));let L=this.createPatternCanvas(M),U=new DOMMatrix(C);U=U.translate(L.offsetX,L.offsetY),U=U.scale(1/L.scaleX,1/L.scaleY);let F=E.createPattern(L.canvas,"repeat");return F.setTransform(U),F}}return v})();t.TilingPattern=f},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=s,t.convertToRGBA=i,t.grayToRGBA=l;var r=n(1);function i(d){switch(d.kind){case r.ImageKind.GRAYSCALE_1BPP:return s(d);case r.ImageKind.RGB_24BPP:return o(d)}return null}function s({src:d,srcPos:u=0,dest:a,width:c,height:h,nonBlackColor:p=4294967295,inverseDecode:g=!1}){let f=r.FeatureTest.isLittleEndian?4278190080:255,[v,y]=g?[p,f]:[f,p],E=c>>3,M=c&7,T=d.length;a=new Uint32Array(a.buffer);let w=0;for(let C=0;C<h;C++){for(let U=u+E;u<U;u++){let F=u<T?d[u]:255;a[w++]=F&128?y:v,a[w++]=F&64?y:v,a[w++]=F&32?y:v,a[w++]=F&16?y:v,a[w++]=F&8?y:v,a[w++]=F&4?y:v,a[w++]=F&2?y:v,a[w++]=F&1?y:v}if(M===0)continue;let L=u<T?d[u++]:255;for(let U=0;U<M;U++)a[w++]=L&1<<7-U?y:v}return{srcPos:u,destPos:w}}function o({src:d,srcPos:u=0,dest:a,destPos:c=0,width:h,height:p}){let g=0,f=d.length>>2,v=new Uint32Array(d.buffer,u,f);if(r.FeatureTest.isLittleEndian){for(;g<f-2;g+=3,c+=4){let y=v[g],E=v[g+1],M=v[g+2];a[c]=y|4278190080,a[c+1]=y>>>24|E<<8|4278190080,a[c+2]=E>>>16|M<<16|4278190080,a[c+3]=M>>>8|4278190080}for(let y=g*4,E=d.length;y<E;y+=3)a[c++]=d[y]|d[y+1]<<8|d[y+2]<<16|4278190080}else{for(;g<f-2;g+=3,c+=4){let y=v[g],E=v[g+1],M=v[g+2];a[c]=y|255,a[c+1]=y<<24|E>>>8|255,a[c+2]=E<<16|M>>>16|255,a[c+3]=M<<8|255}for(let y=g*4,E=d.length;y<E;y+=3)a[c++]=d[y]<<24|d[y+1]<<16|d[y+2]<<8|255}return{srcPos:u,destPos:c}}function l(d,u){if(r.FeatureTest.isLittleEndian)for(let a=0,c=d.length;a<c;a++)u[a]=d[a]*65793|4278190080;else for(let a=0,c=d.length;a<c;a++)u[a]=d[a]*16843008|255}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;let n=Object.create(null);t.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var r=n(1);let i={UNKNOWN:0,DATA:1,ERROR:2},s={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function o(d){switch(d instanceof Error||typeof d=="object"&&d!==null||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),d.name){case"AbortException":return new r.AbortException(d.message);case"MissingPDFException":return new r.MissingPDFException(d.message);case"PasswordException":return new r.PasswordException(d.message,d.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(d.message,d.status);case"UnknownErrorException":return new r.UnknownErrorException(d.message,d.details);default:return new r.UnknownErrorException(d.message,d.toString())}}class l{constructor(u,a,c){this.sourceName=u,this.targetName=a,this.comObj=c,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=h=>{let p=h.data;if(p.targetName!==this.sourceName)return;if(p.stream){this.#t(p);return}if(p.callback){let f=p.callbackId,v=this.callbackCapabilities[f];if(!v)throw new Error(`Cannot resolve callback ${f}`);if(delete this.callbackCapabilities[f],p.callback===i.DATA)v.resolve(p.data);else if(p.callback===i.ERROR)v.reject(o(p.reason));else throw new Error("Unexpected callback case");return}let g=this.actionHandler[p.action];if(!g)throw new Error(`Unknown action from worker: ${p.action}`);if(p.callbackId){let f=this.sourceName,v=p.sourceName;new Promise(function(y){y(g(p.data))}).then(function(y){c.postMessage({sourceName:f,targetName:v,callback:i.DATA,callbackId:p.callbackId,data:y})},function(y){c.postMessage({sourceName:f,targetName:v,callback:i.ERROR,callbackId:p.callbackId,reason:o(y)})});return}if(p.streamId){this.#e(p);return}g(p.data)},c.addEventListener("message",this._onComObjOnMessage)}on(u,a){let c=this.actionHandler;if(c[u])throw new Error(`There is already an actionName called "${u}"`);c[u]=a}send(u,a,c){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,data:a},c)}sendWithPromise(u,a,c){let h=this.callbackId++,p=new r.PromiseCapability;this.callbackCapabilities[h]=p;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,callbackId:h,data:a},c)}catch(g){p.reject(g)}return p.promise}sendWithStream(u,a,c,h){let p=this.streamId++,g=this.sourceName,f=this.targetName,v=this.comObj;return new ReadableStream({start:y=>{let E=new r.PromiseCapability;return this.streamControllers[p]={controller:y,startCall:E,pullCall:null,cancelCall:null,isClosed:!1},v.postMessage({sourceName:g,targetName:f,action:u,streamId:p,data:a,desiredSize:y.desiredSize},h),E.promise},pull:y=>{let E=new r.PromiseCapability;return this.streamControllers[p].pullCall=E,v.postMessage({sourceName:g,targetName:f,stream:s.PULL,streamId:p,desiredSize:y.desiredSize}),E.promise},cancel:y=>{(0,r.assert)(y instanceof Error,"cancel must have a valid reason");let E=new r.PromiseCapability;return this.streamControllers[p].cancelCall=E,this.streamControllers[p].isClosed=!0,v.postMessage({sourceName:g,targetName:f,stream:s.CANCEL,streamId:p,reason:o(y)}),E.promise}},c)}#e(u){let a=u.streamId,c=this.sourceName,h=u.sourceName,p=this.comObj,g=this,f=this.actionHandler[u.action],v={enqueue(y,E=1,M){if(this.isCancelled)return;let T=this.desiredSize;this.desiredSize-=E,T>0&&this.desiredSize<=0&&(this.sinkCapability=new r.PromiseCapability,this.ready=this.sinkCapability.promise),p.postMessage({sourceName:c,targetName:h,stream:s.ENQUEUE,streamId:a,chunk:y},M)},close(){this.isCancelled||(this.isCancelled=!0,p.postMessage({sourceName:c,targetName:h,stream:s.CLOSE,streamId:a}),delete g.streamSinks[a])},error(y){(0,r.assert)(y instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,p.postMessage({sourceName:c,targetName:h,stream:s.ERROR,streamId:a,reason:o(y)}))},sinkCapability:new r.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:u.desiredSize,ready:null};v.sinkCapability.resolve(),v.ready=v.sinkCapability.promise,this.streamSinks[a]=v,new Promise(function(y){y(f(u.data,v))}).then(function(){p.postMessage({sourceName:c,targetName:h,stream:s.START_COMPLETE,streamId:a,success:!0})},function(y){p.postMessage({sourceName:c,targetName:h,stream:s.START_COMPLETE,streamId:a,reason:o(y)})})}#t(u){let a=u.streamId,c=this.sourceName,h=u.sourceName,p=this.comObj,g=this.streamControllers[a],f=this.streamSinks[a];switch(u.stream){case s.START_COMPLETE:u.success?g.startCall.resolve():g.startCall.reject(o(u.reason));break;case s.PULL_COMPLETE:u.success?g.pullCall.resolve():g.pullCall.reject(o(u.reason));break;case s.PULL:if(!f){p.postMessage({sourceName:c,targetName:h,stream:s.PULL_COMPLETE,streamId:a,success:!0});break}f.desiredSize<=0&&u.desiredSize>0&&f.sinkCapability.resolve(),f.desiredSize=u.desiredSize,new Promise(function(v){v(f.onPull?.())}).then(function(){p.postMessage({sourceName:c,targetName:h,stream:s.PULL_COMPLETE,streamId:a,success:!0})},function(v){p.postMessage({sourceName:c,targetName:h,stream:s.PULL_COMPLETE,streamId:a,reason:o(v)})});break;case s.ENQUEUE:if((0,r.assert)(g,"enqueue should have stream controller"),g.isClosed)break;g.controller.enqueue(u.chunk);break;case s.CLOSE:if((0,r.assert)(g,"close should have stream controller"),g.isClosed)break;g.isClosed=!0,g.controller.close(),this.#n(g,a);break;case s.ERROR:(0,r.assert)(g,"error should have stream controller"),g.controller.error(o(u.reason)),this.#n(g,a);break;case s.CANCEL_COMPLETE:u.success?g.cancelCall.resolve():g.cancelCall.reject(o(u.reason)),this.#n(g,a);break;case s.CANCEL:if(!f)break;new Promise(function(v){v(f.onCancel?.(o(u.reason)))}).then(function(){p.postMessage({sourceName:c,targetName:h,stream:s.CANCEL_COMPLETE,streamId:a,success:!0})},function(v){p.postMessage({sourceName:c,targetName:h,stream:s.CANCEL_COMPLETE,streamId:a,reason:o(v)})}),f.sinkCapability.reject(o(u.reason)),f.isCancelled=!0,delete this.streamSinks[a];break;default:throw new Error("Unexpected stream case")}}#n(u,a){return ye(this,null,function*(){yield Promise.allSettled([u.startCall?.promise,u.pullCall?.promise,u.cancelCall?.promise]),delete this.streamControllers[a]})}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}t.MessageHandler=l},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=n(1);class i{#e;#t;constructor({parsedData:o,rawData:l}){this.#e=o,this.#t=l}getRaw(){return this.#t}get(o){return this.#e.get(o)??null}getAll(){return(0,r.objectFromMap)(this.#e)}has(o){return this.#e.has(o)}}t.Metadata=i},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var r=n(1),i=n(8);let s=Symbol("INTERNAL");class o{#e=!0;constructor(u,a){this.name=u,this.intent=a}get visible(){return this.#e}_setVisible(u,a){u!==s&&(0,r.unreachable)("Internal method `_setVisible` called."),this.#e=a}}class l{#e=null;#t=new Map;#n=null;#r=null;constructor(u){if(this.name=null,this.creator=null,u!==null){this.name=u.name,this.creator=u.creator,this.#r=u.order;for(let a of u.groups)this.#t.set(a.id,new o(a.name,a.intent));if(u.baseState==="OFF")for(let a of this.#t.values())a._setVisible(s,!1);for(let a of u.on)this.#t.get(a)._setVisible(s,!0);for(let a of u.off)this.#t.get(a)._setVisible(s,!1);this.#n=this.getHash()}}#a(u){let a=u.length;if(a<2)return!0;let c=u[0];for(let h=1;h<a;h++){let p=u[h],g;if(Array.isArray(p))g=this.#a(p);else if(this.#t.has(p))g=this.#t.get(p).visible;else return(0,r.warn)(`Optional content group not found: ${p}`),!0;switch(c){case"And":if(!g)return!1;break;case"Or":if(g)return!0;break;case"Not":return!g;default:return!0}}return c==="And"}isVisible(u){if(this.#t.size===0)return!0;if(!u)return(0,r.warn)("Optional content group not defined."),!0;if(u.type==="OCG")return this.#t.has(u.id)?this.#t.get(u.id).visible:((0,r.warn)(`Optional content group not found: ${u.id}`),!0);if(u.type==="OCMD"){if(u.expression)return this.#a(u.expression);if(!u.policy||u.policy==="AnyOn"){for(let a of u.ids){if(!this.#t.has(a))return(0,r.warn)(`Optional content group not found: ${a}`),!0;if(this.#t.get(a).visible)return!0}return!1}else if(u.policy==="AllOn"){for(let a of u.ids){if(!this.#t.has(a))return(0,r.warn)(`Optional content group not found: ${a}`),!0;if(!this.#t.get(a).visible)return!1}return!0}else if(u.policy==="AnyOff"){for(let a of u.ids){if(!this.#t.has(a))return(0,r.warn)(`Optional content group not found: ${a}`),!0;if(!this.#t.get(a).visible)return!0}return!1}else if(u.policy==="AllOff"){for(let a of u.ids){if(!this.#t.has(a))return(0,r.warn)(`Optional content group not found: ${a}`),!0;if(this.#t.get(a).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${u.policy}.`),!0}return(0,r.warn)(`Unknown group type ${u.type}.`),!0}setVisibility(u,a=!0){if(!this.#t.has(u)){(0,r.warn)(`Optional content group not found: ${u}`);return}this.#t.get(u)._setVisible(s,!!a),this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#r?this.#r.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,r.objectFromMap)(this.#t):null}getGroup(u){return this.#t.get(u)||null}getHash(){if(this.#e!==null)return this.#e;let u=new i.MurmurHash3_64;for(let[a,c]of this.#t)u.update(`${a}:${c.visible}`);return this.#e=u.hexdigest()}}t.OptionalContentConfig=l},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var r=n(1),i=n(6);class s{constructor({length:u,initialData:a,progressiveDone:c=!1,contentDispositionFilename:h=null,disableRange:p=!1,disableStream:g=!1},f){if((0,r.assert)(f,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=h,a?.length>0){let v=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(v)}this._pdfDataRangeTransport=f,this._isStreamingSupported=!g,this._isRangeSupported=!p,this._contentLength=u,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((v,y)=>{this._onReceiveData({begin:v,chunk:y})}),this._pdfDataRangeTransport.addProgressListener((v,y)=>{this._onProgress({loaded:v,total:y})}),this._pdfDataRangeTransport.addProgressiveReadListener(v=>{this._onReceiveData({chunk:v})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:u,chunk:a}){let c=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;if(u===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(c):this._queuedChunks.push(c);else{let h=this._rangeReaders.some(function(p){return p._begin!==u?!1:(p._enqueue(c),!0)});(0,r.assert)(h,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(u){u.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:u.loaded}):this._fullRequestReader?.onProgress?.({loaded:u.loaded,total:u.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(u){let a=this._rangeReaders.indexOf(u);a>=0&&this._rangeReaders.splice(a,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let u=this._queuedChunks;return this._queuedChunks=null,new o(this,u,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(u,a){if(a<=this._progressiveDataLength)return null;let c=new l(this,u,a);return this._pdfDataRangeTransport.requestDataRange(u,a),this._rangeReaders.push(c),c}cancelAllRequests(u){this._fullRequestReader?.cancel(u);for(let a of this._rangeReaders.slice(0))a.cancel(u);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=s;class o{constructor(u,a,c=!1,h=null){this._stream=u,this._done=c||!1,this._filename=(0,i.isPdfFile)(h)?h:null,this._queuedChunks=a||[],this._loaded=0;for(let p of this._queuedChunks)this._loaded+=p.byteLength;this._requests=[],this._headersReady=Promise.resolve(),u._fullRequestReader=this,this.onProgress=null}_enqueue(u){this._done||(this._requests.length>0?this._requests.shift().resolve({value:u,done:!1}):this._queuedChunks.push(u),this._loaded+=u.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){return ye(this,null,function*(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let u=new r.PromiseCapability;return this._requests.push(u),u.promise})}cancel(u){this._done=!0;for(let a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class l{constructor(u,a,c){this._stream=u,this._begin=a,this._end=c,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(u){if(!this._done){if(this._requests.length===0)this._queuedChunk=u;else{this._requests.shift().resolve({value:u,done:!1});for(let c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){return ye(this,null,function*(){if(this._queuedChunk){let a=this._queuedChunk;return this._queuedChunk=null,{value:a,done:!1}}if(this._done)return{value:void 0,done:!0};let u=new r.PromiseCapability;return this._requests.push(u),u.promise})}cancel(u){this._done=!0;for(let a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var r=n(1),i=n(20);function s(c,h,p){return{method:"GET",headers:c,signal:p.signal,mode:"cors",credentials:h?"include":"same-origin",redirect:"follow"}}function o(c){let h=new Headers;for(let p in c){let g=c[p];g!==void 0&&h.append(p,g)}return h}function l(c){return c instanceof Uint8Array?c.buffer:c instanceof ArrayBuffer?c:((0,r.warn)(`getArrayBuffer - unexpected data format: ${c}`),new Uint8Array(c).buffer)}class d{constructor(h){this.source=h,this.isHttp=/^https?:/i.test(h.url),this.httpHeaders=this.isHttp&&h.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new u(this),this._fullRequestReader}getRangeReader(h,p){if(p<=this._progressiveDataLength)return null;let g=new a(this,h,p);return this._rangeRequestReaders.push(g),g}cancelAllRequests(h){this._fullRequestReader?.cancel(h);for(let p of this._rangeRequestReaders.slice(0))p.cancel(h)}}t.PDFFetchStream=d;class u{constructor(h){this._stream=h,this._reader=null,this._loaded=0,this._filename=null;let p=h.source;this._withCredentials=p.withCredentials||!1,this._contentLength=p.length,this._headersCapability=new r.PromiseCapability,this._disableRange=p.disableRange||!1,this._rangeChunkSize=p.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!p.disableStream,this._isRangeSupported=!p.disableRange,this._headers=o(this._stream.httpHeaders);let g=p.url;fetch(g,s(this._headers,this._withCredentials,this._abortController)).then(f=>{if(!(0,i.validateResponseStatus)(f.status))throw(0,i.createResponseStatusError)(f.status,g);this._reader=f.body.getReader(),this._headersCapability.resolve();let v=M=>f.headers.get(M),{allowRangeRequests:y,suggestedLength:E}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=y,this._contentLength=E||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(v),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return ye(this,null,function*(){yield this._headersCapability.promise;let{value:h,done:p}=yield this._reader.read();return p?{value:h,done:p}:(this._loaded+=h.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:l(h),done:!1})})}cancel(h){this._reader?.cancel(h),this._abortController.abort()}}class a{constructor(h,p,g){this._stream=h,this._reader=null,this._loaded=0;let f=h.source;this._withCredentials=f.withCredentials||!1,this._readCapability=new r.PromiseCapability,this._isStreamingSupported=!f.disableStream,this._abortController=new AbortController,this._headers=o(this._stream.httpHeaders),this._headers.append("Range",`bytes=${p}-${g-1}`);let v=f.url;fetch(v,s(this._headers,this._withCredentials,this._abortController)).then(y=>{if(!(0,i.validateResponseStatus)(y.status))throw(0,i.createResponseStatusError)(y.status,v);this._readCapability.resolve(),this._reader=y.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){return ye(this,null,function*(){yield this._readCapability.promise;let{value:h,done:p}=yield this._reader.read();return p?{value:h,done:p}:(this._loaded+=h.byteLength,this.onProgress?.({loaded:this._loaded}),{value:l(h),done:!1})})}cancel(h){this._reader?.cancel(h),this._abortController.abort()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=d,t.extractFilenameFromHeader=l,t.validateRangeRequestCapabilities=o,t.validateResponseStatus=u;var r=n(1),i=n(21),s=n(6);function o({getResponseHeader:a,isHttp:c,rangeChunkSize:h,disableRange:p}){let g={allowRangeRequests:!1,suggestedLength:void 0},f=parseInt(a("Content-Length"),10);return!Number.isInteger(f)||(g.suggestedLength=f,f<=2*h)||p||!c||a("Accept-Ranges")!=="bytes"||(a("Content-Encoding")||"identity")!=="identity"||(g.allowRangeRequests=!0),g}function l(a){let c=a("Content-Disposition");if(c){let h=(0,i.getFilenameFromContentDispositionHeader)(c);if(h.includes("%"))try{h=decodeURIComponent(h)}catch{}if((0,s.isPdfFile)(h))return h}return null}function d(a,c){return a===404||a===0&&c.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+c+'".'):new r.UnexpectedResponseException(`Unexpected server response (${a}) while retrieving PDF "${c}".`,a)}function u(a){return a===200||a===206}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=i;var r=n(1);function i(s){let o=!0,l=d("filename\\*","i").exec(s);if(l){l=l[1];let f=h(l);return f=unescape(f),f=p(f),f=g(f),a(f)}if(l=c(s),l){let f=g(l);return a(f)}if(l=d("filename","i").exec(s),l){l=l[1];let f=h(l);return f=g(f),a(f)}function d(f,v){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function u(f,v){if(f){if(!/^[\x00-\xFF]+$/.test(v))return v;try{let y=new TextDecoder(f,{fatal:!0}),E=(0,r.stringToBytes)(v);v=y.decode(E),o=!1}catch{}}return v}function a(f){return o&&/[\x80-\xff]/.test(f)&&(f=u("utf-8",f),o&&(f=u("iso-8859-1",f))),f}function c(f){let v=[],y,E=d("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=E.exec(f))!==null;){let[,T,w,C]=y;if(T=parseInt(T,10),T in v){if(T===0)break;continue}v[T]=[w,C]}let M=[];for(let T=0;T<v.length&&T in v;++T){let[w,C]=v[T];C=h(C),w&&(C=unescape(C),T===0&&(C=p(C))),M.push(C)}return M.join("")}function h(f){if(f.startsWith('"')){let v=f.slice(1).split('\\"');for(let y=0;y<v.length;++y){let E=v[y].indexOf('"');E!==-1&&(v[y]=v[y].slice(0,E),v.length=y+1),v[y]=v[y].replaceAll(/\\(.)/g,"$1")}f=v.join('"')}return f}function p(f){let v=f.indexOf("'");if(v===-1)return f;let y=f.slice(0,v),M=f.slice(v+1).replace(/^[^']*'/,"");return u(y,M)}function g(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,y,E,M){if(E==="q"||E==="Q")return M=M.replaceAll("_"," "),M=M.replaceAll(/=([0-9a-fA-F]{2})/g,function(T,w){return String.fromCharCode(parseInt(w,16))}),u(y,M);try{M=atob(M)}catch{}return u(y,M)})}return""}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var r=n(1),i=n(20);let s=200,o=206;function l(h){let p=h.response;return typeof p!="string"?p:(0,r.stringToBytes)(p).buffer}class d{constructor(p,g={}){this.url=p,this.isHttp=/^https?:/i.test(p),this.httpHeaders=this.isHttp&&g.httpHeaders||Object.create(null),this.withCredentials=g.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(p,g,f){let v={begin:p,end:g};for(let y in f)v[y]=f[y];return this.request(v)}requestFull(p){return this.request(p)}request(p){let g=new XMLHttpRequest,f=this.currXhrId++,v=this.pendingRequests[f]={xhr:g};g.open("GET",this.url),g.withCredentials=this.withCredentials;for(let y in this.httpHeaders){let E=this.httpHeaders[y];E!==void 0&&g.setRequestHeader(y,E)}return this.isHttp&&"begin"in p&&"end"in p?(g.setRequestHeader("Range",`bytes=${p.begin}-${p.end-1}`),v.expectedStatus=o):v.expectedStatus=s,g.responseType="arraybuffer",p.onError&&(g.onerror=function(y){p.onError(g.status)}),g.onreadystatechange=this.onStateChange.bind(this,f),g.onprogress=this.onProgress.bind(this,f),v.onHeadersReceived=p.onHeadersReceived,v.onDone=p.onDone,v.onError=p.onError,v.onProgress=p.onProgress,g.send(null),f}onProgress(p,g){let f=this.pendingRequests[p];f&&f.onProgress?.(g)}onStateChange(p,g){let f=this.pendingRequests[p];if(!f)return;let v=f.xhr;if(v.readyState>=2&&f.onHeadersReceived&&(f.onHeadersReceived(),delete f.onHeadersReceived),v.readyState!==4||!(p in this.pendingRequests))return;if(delete this.pendingRequests[p],v.status===0&&this.isHttp){f.onError?.(v.status);return}let y=v.status||s;if(!(y===s&&f.expectedStatus===o)&&y!==f.expectedStatus){f.onError?.(v.status);return}let M=l(v);if(y===o){let T=v.getResponseHeader("Content-Range"),w=/bytes (\d+)-(\d+)\/(\d+)/.exec(T);f.onDone({begin:parseInt(w[1],10),chunk:M})}else M?f.onDone({begin:0,chunk:M}):f.onError?.(v.status)}getRequestXhr(p){return this.pendingRequests[p].xhr}isPendingRequest(p){return p in this.pendingRequests}abortRequest(p){let g=this.pendingRequests[p].xhr;delete this.pendingRequests[p],g.abort()}}class u{constructor(p){this._source=p,this._manager=new d(p.url,{httpHeaders:p.httpHeaders,withCredentials:p.withCredentials}),this._rangeChunkSize=p.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(p){let g=this._rangeRequestReaders.indexOf(p);g>=0&&this._rangeRequestReaders.splice(g,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new a(this._manager,this._source),this._fullRequestReader}getRangeReader(p,g){let f=new c(this._manager,p,g);return f.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(f),f}cancelAllRequests(p){this._fullRequestReader?.cancel(p);for(let g of this._rangeRequestReaders.slice(0))g.cancel(p)}}t.PDFNetworkStream=u;class a{constructor(p,g){this._manager=p;let f={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=g.url,this._fullRequestId=p.requestFull(f),this._headersReceivedCapability=new r.PromiseCapability,this._disableRange=g.disableRange||!1,this._contentLength=g.length,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let p=this._fullRequestId,g=this._manager.getRequestXhr(p),f=E=>g.getResponseHeader(E),{allowRangeRequests:v,suggestedLength:y}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});v&&(this._isRangeSupported=!0),this._contentLength=y||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(f),this._isRangeSupported&&this._manager.abortRequest(p),this._headersReceivedCapability.resolve()}_onDone(p){if(p&&(this._requests.length>0?this._requests.shift().resolve({value:p.chunk,done:!1}):this._cachedChunks.push(p.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(p){this._storedError=(0,i.createResponseStatusError)(p,this._url),this._headersReceivedCapability.reject(this._storedError);for(let g of this._requests)g.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(p){this.onProgress?.({loaded:p.loaded,total:p.lengthComputable?p.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){return ye(this,null,function*(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let p=new r.PromiseCapability;return this._requests.push(p),p.promise})}cancel(p){this._done=!0,this._headersReceivedCapability.reject(p);for(let g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class c{constructor(p,g,f){this._manager=p;let v={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=p.url,this._requestId=p.requestRange(g,f,v),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(p){let g=p.chunk;this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunk=g,this._done=!0;for(let f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(p){this._storedError=(0,i.createResponseStatusError)(p,this._url);for(let g of this._requests)g.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(p){this.isStreamingSupported||this.onProgress?.({loaded:p.loaded})}get isStreamingSupported(){return!1}read(){return ye(this,null,function*(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};let p=new r.PromiseCapability;return this._requests.push(p),p.promise})}cancel(p){this._done=!0;for(let g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var r=n(1),i=n(20);let s=/^file:\/\/\/[a-zA-Z]:\//;function o(f){let v=$p(),y=v.parse(f);return y.protocol==="file:"||y.host?y:/^[a-z]:[/\\]/i.test(f)?v.parse(`file:///${f}`):(y.host||(y.protocol="file:"),y)}class l{constructor(v){this.source=v,this.url=o(v.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&v.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new p(this):new c(this),this._fullRequestReader}getRangeReader(v,y){if(y<=this._progressiveDataLength)return null;let E=this.isFsUrl?new g(this,v,y):new h(this,v,y);return this._rangeRequestReaders.push(E),E}cancelAllRequests(v){this._fullRequestReader?.cancel(v);for(let y of this._rangeRequestReaders.slice(0))y.cancel(v)}}t.PDFNodeStream=l;class d{constructor(v){this._url=v.url,this._done=!1,this._storedError=null,this.onProgress=null;let y=v.source;this._contentLength=y.length,this._loaded=0,this._filename=null,this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._readableStream=null,this._readCapability=new r.PromiseCapability,this._headersCapability=new r.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return ye(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let v=this._readableStream.read();return v===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=v.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(v).buffer,done:!1})})}cancel(v){if(!this._readableStream){this._error(v);return}this._readableStream.destroy(v)}_error(v){this._storedError=v,this._readCapability.resolve()}_setReadableStream(v){this._readableStream=v,v.on("readable",()=>{this._readCapability.resolve()}),v.on("end",()=>{v.destroy(),this._done=!0,this._readCapability.resolve()}),v.on("error",y=>{this._error(y)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class u{constructor(v){this._url=v.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new r.PromiseCapability;let y=v.source;this._isStreamingSupported=!y.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){return ye(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let v=this._readableStream.read();return v===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=v.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(v).buffer,done:!1})})}cancel(v){if(!this._readableStream){this._error(v);return}this._readableStream.destroy(v)}_error(v){this._storedError=v,this._readCapability.resolve()}_setReadableStream(v){this._readableStream=v,v.on("readable",()=>{this._readCapability.resolve()}),v.on("end",()=>{v.destroy(),this._done=!0,this._readCapability.resolve()}),v.on("error",y=>{this._error(y)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function a(f,v){return{protocol:f.protocol,auth:f.auth,host:f.hostname,port:f.port,path:f.path,method:"GET",headers:v}}class c extends d{constructor(v){super(v);let y=E=>{if(E.statusCode===404){let C=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=C,this._headersCapability.reject(C);return}this._headersCapability.resolve(),this._setReadableStream(E);let M=C=>this._readableStream.headers[C.toLowerCase()],{allowRangeRequests:T,suggestedLength:w}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:M,isHttp:v.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=T,this._contentLength=w||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(M)};if(this._request=null,this._url.protocol==="http:"){let E=zl();this._request=E.request(a(this._url,v.httpHeaders),y)}else{let E=Wl();this._request=E.request(a(this._url,v.httpHeaders),y)}this._request.on("error",E=>{this._storedError=E,this._headersCapability.reject(E)}),this._request.end()}}class h extends u{constructor(v,y,E){super(v),this._httpHeaders={};for(let T in v.httpHeaders){let w=v.httpHeaders[T];w!==void 0&&(this._httpHeaders[T]=w)}this._httpHeaders.Range=`bytes=${y}-${E-1}`;let M=T=>{if(T.statusCode===404){let w=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=w;return}this._setReadableStream(T)};if(this._request=null,this._url.protocol==="http:"){let T=zl();this._request=T.request(a(this._url,this._httpHeaders),M)}else{let T=Wl();this._request=T.request(a(this._url,this._httpHeaders),M)}this._request.on("error",T=>{this._storedError=T}),this._request.end()}}class p extends d{constructor(v){super(v);let y=decodeURIComponent(this._url.path);s.test(this._url.href)&&(y=y.replace(/^\//,""));let E=wo();E.lstat(y,(M,T)=>{if(M){M.code==="ENOENT"&&(M=new r.MissingPDFException(`Missing PDF "${y}".`)),this._storedError=M,this._headersCapability.reject(M);return}this._contentLength=T.size,this._setReadableStream(E.createReadStream(y)),this._headersCapability.resolve()})}}class g extends u{constructor(v,y,E){super(v);let M=decodeURIComponent(this._url.path);s.test(this._url.href)&&(M=M.replace(/^\//,""));let T=wo();this._setReadableStream(T.createReadStream(M,{start:y,end:E-1}))}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var r=n(6),i=n(1);let s={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},o="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/1999/xlink",d=["butt","round","square"],u=["miter","round","bevel"],a=function(T,w="",C=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!C)return URL.createObjectURL(new Blob([T],{type:w}));let L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",U=`data:${w};base64,`;for(let F=0,$=T.length;F<$;F+=3){let W=T[F]&255,ne=T[F+1]&255,J=T[F+2]&255,Q=W>>2,ie=(W&3)<<4|ne>>4,Z=F+1<$?(ne&15)<<2|J>>6:64,O=F+2<$?J&63:64;U+=L[Q]+L[ie]+L[Z]+L[O]}return U},c=function(){let T=new Uint8Array([137,80,78,71,13,10,26,10]),w=12,C=new Int32Array(256);for(let J=0;J<256;J++){let Q=J;for(let ie=0;ie<8;ie++)Q=Q&1?3988292384^Q>>1&2147483647:Q>>1&2147483647;C[J]=Q}function L(J,Q,ie){let Z=-1;for(let O=Q;O<ie;O++){let S=(Z^J[O])&255,b=C[S];Z=Z>>>8^b}return Z^-1}function U(J,Q,ie,Z){let O=Z,S=Q.length;ie[O]=S>>24&255,ie[O+1]=S>>16&255,ie[O+2]=S>>8&255,ie[O+3]=S&255,O+=4,ie[O]=J.charCodeAt(0)&255,ie[O+1]=J.charCodeAt(1)&255,ie[O+2]=J.charCodeAt(2)&255,ie[O+3]=J.charCodeAt(3)&255,O+=4,ie.set(Q,O),O+=Q.length;let b=L(ie,Z+4,O);ie[O]=b>>24&255,ie[O+1]=b>>16&255,ie[O+2]=b>>8&255,ie[O+3]=b&255}function F(J,Q,ie){let Z=1,O=0;for(let S=Q;S<ie;++S)Z=(Z+(J[S]&255))%65521,O=(O+Z)%65521;return O<<16|Z}function $(J){if(!i.isNodeJS)return W(J);try{let Q=parseInt(process.versions.node)>=8?J:Buffer.from(J),ie=zp().deflateSync(Q,{level:9});return ie instanceof Uint8Array?ie:new Uint8Array(ie)}catch(Q){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Q)}return W(J)}function W(J){let Q=J.length,ie=65535,Z=Math.ceil(Q/ie),O=new Uint8Array(2+Q+Z*5+4),S=0;O[S++]=120,O[S++]=156;let b=0;for(;Q>ie;)O[S++]=0,O[S++]=255,O[S++]=255,O[S++]=0,O[S++]=0,O.set(J.subarray(b,b+ie),S),S+=ie,b+=ie,Q-=ie;O[S++]=1,O[S++]=Q&255,O[S++]=Q>>8&255,O[S++]=~Q&65535&255,O[S++]=(~Q&65535)>>8&255,O.set(J.subarray(b),S),S+=J.length-b;let _=F(J,0,J.length);return O[S++]=_>>24&255,O[S++]=_>>16&255,O[S++]=_>>8&255,O[S++]=_&255,O}function ne(J,Q,ie,Z){let O=J.width,S=J.height,b,_,A,N=J.data;switch(Q){case i.ImageKind.GRAYSCALE_1BPP:_=0,b=1,A=O+7>>3;break;case i.ImageKind.RGB_24BPP:_=2,b=8,A=O*3;break;case i.ImageKind.RGBA_32BPP:_=6,b=8,A=O*4;break;default:throw new Error("invalid format")}let k=new Uint8Array((1+A)*S),j=0,x=0;for(let B=0;B<S;++B)k[j++]=0,k.set(N.subarray(x,x+A),j),x+=A,j+=A;if(Q===i.ImageKind.GRAYSCALE_1BPP&&Z){j=0;for(let B=0;B<S;B++){j++;for(let V=0;V<A;V++)k[j++]^=255}}let m=new Uint8Array([O>>24&255,O>>16&255,O>>8&255,O&255,S>>24&255,S>>16&255,S>>8&255,S&255,b,_,0,0,0]),D=$(k),I=T.length+w*3+m.length+D.length,R=new Uint8Array(I),P=0;return R.set(T,P),P+=T.length,U("IHDR",m,R,P),P+=w+m.length,U("IDATA",D,R,P),P+=w+D.length,U("IEND",new Uint8Array(0),R,P),a(R,"image/png",ie)}return function(Q,ie,Z){let O=Q.kind===void 0?i.ImageKind.GRAYSCALE_1BPP:Q.kind;return ne(Q,O,ie,Z)}}();class h{constructor(){this.fontSizeScale=1,this.fontWeight=s.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=s.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(w,C){this.x=w,this.y=C}}function p(T){let w=[],C=[];for(let L of T){if(L.fn==="save"){w.push({fnId:92,fn:"group",items:[]}),C.push(w),w=w.at(-1).items;continue}L.fn==="restore"?w=C.pop():w.push(L)}return w}function g(T){if(Number.isInteger(T))return T.toString();let w=T.toFixed(10),C=w.length-1;if(w[C]!=="0")return w;do C--;while(w[C]==="0");return w.substring(0,w[C]==="."?C:C+1)}function f(T){if(T[4]===0&&T[5]===0){if(T[1]===0&&T[2]===0)return T[0]===1&&T[3]===1?"":`scale(${g(T[0])} ${g(T[3])})`;if(T[0]===T[3]&&T[1]===-T[2]){let w=Math.acos(T[0])*180/Math.PI;return`rotate(${g(w)})`}}else if(T[0]===1&&T[1]===0&&T[2]===0&&T[3]===1)return`translate(${g(T[4])} ${g(T[5])})`;return`matrix(${g(T[0])} ${g(T[1])} ${g(T[2])} ${g(T[3])} ${g(T[4])} ${g(T[5])})`}let v=0,y=0,E=0;class M{constructor(w,C,L=!1){(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new h,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=w,this.objs=C,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!L,this._operatorIdMapping=[];for(let U in i.OPS)this._operatorIdMapping[i.OPS[U]]=U}getObject(w,C=null){return typeof w=="string"?w.startsWith("g_")?this.commonObjs.get(w):this.objs.get(w):C}save(){this.transformStack.push(this.transformMatrix);let w=this.current;this.extraStack.push(w),this.current=w.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(w){this.save(),this.executeOpTree(w),this.restore()}loadDependencies(w){let C=w.fnArray,L=w.argsArray;for(let U=0,F=C.length;U<F;U++)if(C[U]===i.OPS.dependency)for(let $ of L[U]){let W=$.startsWith("g_")?this.commonObjs:this.objs,ne=new Promise(J=>{W.get($,J)});this.current.dependencies.push(ne)}return Promise.all(this.current.dependencies)}transform(w,C,L,U,F,$){let W=[w,C,L,U,F,$];this.transformMatrix=i.Util.transform(this.transformMatrix,W),this.tgrp=null}getSVG(w,C){this.viewport=C;let L=this._initialize(C);return this.loadDependencies(w).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(w)),L))}convertOpList(w){let C=this._operatorIdMapping,L=w.argsArray,U=w.fnArray,F=[];for(let $=0,W=U.length;$<W;$++){let ne=U[$];F.push({fnId:ne,fn:C[ne],args:L[$]})}return p(F)}executeOpTree(w){for(let C of w){let L=C.fn,U=C.fnId,F=C.args;switch(U|0){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(F);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(F[0],F[1]);break;case i.OPS.setFont:this.setFont(F);break;case i.OPS.showText:this.showText(F[0]);break;case i.OPS.showSpacedText:this.showText(F[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(F[0],F[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(F[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(F[0]);break;case i.OPS.setHScale:this.setHScale(F[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(F[0],F[1],F[2],F[3],F[4],F[5]);break;case i.OPS.setTextRise:this.setTextRise(F[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(F[0]);break;case i.OPS.setLineWidth:this.setLineWidth(F[0]);break;case i.OPS.setLineJoin:this.setLineJoin(F[0]);break;case i.OPS.setLineCap:this.setLineCap(F[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(F[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(F[0],F[1],F[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(F[0],F[1],F[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(F);break;case i.OPS.setFillColorN:this.setFillColorN(F);break;case i.OPS.shadingFill:this.shadingFill(F[0]);break;case i.OPS.setDash:this.setDash(F[0],F[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(F[0]);break;case i.OPS.setFlatness:this.setFlatness(F[0]);break;case i.OPS.setGState:this.setGState(F[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(F[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(F[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(F[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(F[0],F[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(F[0],F[1],F[2],F[3],F[4],F[5]);break;case i.OPS.constructPath:this.constructPath(F[0],F[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(C.items);break;default:(0,i.warn)(`Unimplemented operator ${L}`);break}}}setWordSpacing(w){this.current.wordSpacing=w}setCharSpacing(w){this.current.charSpacing=w}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(w,C,L,U,F,$){let W=this.current;W.textMatrix=W.lineMatrix=[w,C,L,U,F,$],W.textMatrixScale=Math.hypot(w,C),W.x=W.lineX=0,W.y=W.lineY=0,W.xcoords=[],W.ycoords=[],W.tspan=this.svgFactory.createElement("svg:tspan"),W.tspan.setAttributeNS(null,"font-family",W.fontFamily),W.tspan.setAttributeNS(null,"font-size",`${g(W.fontSize)}px`),W.tspan.setAttributeNS(null,"y",g(-W.y)),W.txtElement=this.svgFactory.createElement("svg:text"),W.txtElement.append(W.tspan)}beginText(){let w=this.current;w.x=w.lineX=0,w.y=w.lineY=0,w.textMatrix=i.IDENTITY_MATRIX,w.lineMatrix=i.IDENTITY_MATRIX,w.textMatrixScale=1,w.tspan=this.svgFactory.createElement("svg:tspan"),w.txtElement=this.svgFactory.createElement("svg:text"),w.txtgrp=this.svgFactory.createElement("svg:g"),w.xcoords=[],w.ycoords=[]}moveText(w,C){let L=this.current;L.x=L.lineX+=w,L.y=L.lineY+=C,L.xcoords=[],L.ycoords=[],L.tspan=this.svgFactory.createElement("svg:tspan"),L.tspan.setAttributeNS(null,"font-family",L.fontFamily),L.tspan.setAttributeNS(null,"font-size",`${g(L.fontSize)}px`),L.tspan.setAttributeNS(null,"y",g(-L.y))}showText(w){let C=this.current,L=C.font,U=C.fontSize;if(U===0)return;let F=C.fontSizeScale,$=C.charSpacing,W=C.wordSpacing,ne=C.fontDirection,J=C.textHScale*ne,Q=L.vertical,ie=Q?1:-1,Z=L.defaultVMetrics,O=U*C.fontMatrix[0],S=0;for(let A of w){if(A===null){S+=ne*W;continue}else if(typeof A=="number"){S+=ie*A*U/1e3;continue}let N=(A.isSpace?W:0)+$,k=A.fontChar,j,x,m=A.width;if(Q){let I,R=A.vmetric||Z;I=A.vmetric?R[1]:m*.5,I=-I*O;let P=R[2]*O;m=R?-R[0]:m,j=I/F,x=(S+P)/F}else j=S/F,x=0;(A.isInFont||L.missingFile)&&(C.xcoords.push(C.x+j),Q&&C.ycoords.push(-C.y+x),C.tspan.textContent+=k);let D=Q?m*O-N*ne:m*O+N*ne;S+=D}C.tspan.setAttributeNS(null,"x",C.xcoords.map(g).join(" ")),Q?C.tspan.setAttributeNS(null,"y",C.ycoords.map(g).join(" ")):C.tspan.setAttributeNS(null,"y",g(-C.y)),Q?C.y-=S:C.x+=S*J,C.tspan.setAttributeNS(null,"font-family",C.fontFamily),C.tspan.setAttributeNS(null,"font-size",`${g(C.fontSize)}px`),C.fontStyle!==s.fontStyle&&C.tspan.setAttributeNS(null,"font-style",C.fontStyle),C.fontWeight!==s.fontWeight&&C.tspan.setAttributeNS(null,"font-weight",C.fontWeight);let b=C.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(b===i.TextRenderingMode.FILL||b===i.TextRenderingMode.FILL_STROKE?(C.fillColor!==s.fillColor&&C.tspan.setAttributeNS(null,"fill",C.fillColor),C.fillAlpha<1&&C.tspan.setAttributeNS(null,"fill-opacity",C.fillAlpha)):C.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?C.tspan.setAttributeNS(null,"fill","transparent"):C.tspan.setAttributeNS(null,"fill","none"),b===i.TextRenderingMode.STROKE||b===i.TextRenderingMode.FILL_STROKE){let A=1/(C.textMatrixScale||1);this._setStrokeAttributes(C.tspan,A)}let _=C.textMatrix;C.textRise!==0&&(_=_.slice(),_[5]+=C.textRise),C.txtElement.setAttributeNS(null,"transform",`${f(_)} scale(${g(J)}, -1)`),C.txtElement.setAttributeNS(o,"xml:space","preserve"),C.txtElement.append(C.tspan),C.txtgrp.append(C.txtElement),this._ensureTransformGroup().append(C.txtElement)}setLeadingMoveText(w,C){this.setLeading(-C),this.moveText(w,C)}addFontStyle(w){if(!w.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));let C=a(w.data,w.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${w.loadedName}"; src: url(${C}); }
`}setFont(w){let C=this.current,L=this.commonObjs.get(w[0]),U=w[1];C.font=L,this.embedFonts&&!L.missingFile&&!this.embeddedFonts[L.loadedName]&&(this.addFontStyle(L),this.embeddedFonts[L.loadedName]=L),C.fontMatrix=L.fontMatrix||i.FONT_IDENTITY_MATRIX;let F="normal";L.black?F="900":L.bold&&(F="bold");let $=L.italic?"italic":"normal";U<0?(U=-U,C.fontDirection=-1):C.fontDirection=1,C.fontSize=U,C.fontFamily=L.loadedName,C.fontWeight=F,C.fontStyle=$,C.tspan=this.svgFactory.createElement("svg:tspan"),C.tspan.setAttributeNS(null,"y",g(-C.y)),C.xcoords=[],C.ycoords=[]}endText(){let w=this.current;w.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&w.txtElement?.hasChildNodes()&&(w.element=w.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(w){w>0&&(this.current.lineWidth=w)}setLineCap(w){this.current.lineCap=d[w]}setLineJoin(w){this.current.lineJoin=u[w]}setMiterLimit(w){this.current.miterLimit=w}setStrokeAlpha(w){this.current.strokeAlpha=w}setStrokeRGBColor(w,C,L){this.current.strokeColor=i.Util.makeHexColor(w,C,L)}setFillAlpha(w){this.current.fillAlpha=w}setFillRGBColor(w,C,L){this.current.fillColor=i.Util.makeHexColor(w,C,L),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(w){this.current.strokeColor=this._makeColorN_Pattern(w)}setFillColorN(w){this.current.fillColor=this._makeColorN_Pattern(w)}shadingFill(w){let{width:C,height:L}=this.viewport,U=i.Util.inverseTransform(this.transformMatrix),[F,$,W,ne]=i.Util.getAxialAlignedBoundingBox([0,0,C,L],U),J=this.svgFactory.createElement("svg:rect");J.setAttributeNS(null,"x",F),J.setAttributeNS(null,"y",$),J.setAttributeNS(null,"width",W-F),J.setAttributeNS(null,"height",ne-$),J.setAttributeNS(null,"fill",this._makeShadingPattern(w)),this.current.fillAlpha<1&&J.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(J)}_makeColorN_Pattern(w){return w[0]==="TilingPattern"?this._makeTilingPattern(w):this._makeShadingPattern(w)}_makeTilingPattern(w){let C=w[1],L=w[2],U=w[3]||i.IDENTITY_MATRIX,[F,$,W,ne]=w[4],J=w[5],Q=w[6],ie=w[7],Z=`shading${E++}`,[O,S,b,_]=i.Util.normalizeRect([...i.Util.applyTransform([F,$],U),...i.Util.applyTransform([W,ne],U)]),[A,N]=i.Util.singularValueDecompose2dScale(U),k=J*A,j=Q*N,x=this.svgFactory.createElement("svg:pattern");x.setAttributeNS(null,"id",Z),x.setAttributeNS(null,"patternUnits","userSpaceOnUse"),x.setAttributeNS(null,"width",k),x.setAttributeNS(null,"height",j),x.setAttributeNS(null,"x",`${O}`),x.setAttributeNS(null,"y",`${S}`);let m=this.svg,D=this.transformMatrix,I=this.current.fillColor,R=this.current.strokeColor,P=this.svgFactory.create(b-O,_-S);if(this.svg=P,this.transformMatrix=U,ie===2){let B=i.Util.makeHexColor(...C);this.current.fillColor=B,this.current.strokeColor=B}return this.executeOpTree(this.convertOpList(L)),this.svg=m,this.transformMatrix=D,this.current.fillColor=I,this.current.strokeColor=R,x.append(P.childNodes[0]),this.defs.append(x),`url(#${Z})`}_makeShadingPattern(w){switch(typeof w=="string"&&(w=this.objs.get(w)),w[0]){case"RadialAxial":let C=`shading${E++}`,L=w[3],U;switch(w[1]){case"axial":let F=w[4],$=w[5];U=this.svgFactory.createElement("svg:linearGradient"),U.setAttributeNS(null,"id",C),U.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),U.setAttributeNS(null,"x1",F[0]),U.setAttributeNS(null,"y1",F[1]),U.setAttributeNS(null,"x2",$[0]),U.setAttributeNS(null,"y2",$[1]);break;case"radial":let W=w[4],ne=w[5],J=w[6],Q=w[7];U=this.svgFactory.createElement("svg:radialGradient"),U.setAttributeNS(null,"id",C),U.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),U.setAttributeNS(null,"cx",ne[0]),U.setAttributeNS(null,"cy",ne[1]),U.setAttributeNS(null,"r",Q),U.setAttributeNS(null,"fx",W[0]),U.setAttributeNS(null,"fy",W[1]),U.setAttributeNS(null,"fr",J);break;default:throw new Error(`Unknown RadialAxial type: ${w[1]}`)}for(let F of L){let $=this.svgFactory.createElement("svg:stop");$.setAttributeNS(null,"offset",F[0]),$.setAttributeNS(null,"stop-color",F[1]),U.append($)}return this.defs.append(U),`url(#${C})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${w[0]}`)}}setDash(w,C){this.current.dashArray=w,this.current.dashPhase=C}constructPath(w,C){let L=this.current,U=L.x,F=L.y,$=[],W=0;for(let ne of w)switch(ne|0){case i.OPS.rectangle:U=C[W++],F=C[W++];let J=C[W++],Q=C[W++],ie=U+J,Z=F+Q;$.push("M",g(U),g(F),"L",g(ie),g(F),"L",g(ie),g(Z),"L",g(U),g(Z),"Z");break;case i.OPS.moveTo:U=C[W++],F=C[W++],$.push("M",g(U),g(F));break;case i.OPS.lineTo:U=C[W++],F=C[W++],$.push("L",g(U),g(F));break;case i.OPS.curveTo:U=C[W+4],F=C[W+5],$.push("C",g(C[W]),g(C[W+1]),g(C[W+2]),g(C[W+3]),g(U),g(F)),W+=6;break;case i.OPS.curveTo2:$.push("C",g(U),g(F),g(C[W]),g(C[W+1]),g(C[W+2]),g(C[W+3])),U=C[W+2],F=C[W+3],W+=4;break;case i.OPS.curveTo3:U=C[W+2],F=C[W+3],$.push("C",g(C[W]),g(C[W+1]),g(U),g(F),g(U),g(F)),W+=4;break;case i.OPS.closePath:$.push("Z");break}$=$.join(" "),L.path&&w.length>0&&w[0]!==i.OPS.rectangle&&w[0]!==i.OPS.moveTo?$=L.path.getAttributeNS(null,"d")+$:(L.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(L.path)),L.path.setAttributeNS(null,"d",$),L.path.setAttributeNS(null,"fill","none"),L.element=L.path,L.setCurrentPoint(U,F)}endPath(){let w=this.current;if(w.path=null,!this.pendingClip)return;if(!w.element){this.pendingClip=null;return}let C=`clippath${v++}`,L=this.svgFactory.createElement("svg:clipPath");L.setAttributeNS(null,"id",C),L.setAttributeNS(null,"transform",f(this.transformMatrix));let U=w.element.cloneNode(!0);if(this.pendingClip==="evenodd"?U.setAttributeNS(null,"clip-rule","evenodd"):U.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,L.append(U),this.defs.append(L),w.activeClipUrl){w.clipGroup=null;for(let F of this.extraStack)F.clipGroup=null;L.setAttributeNS(null,"clip-path",w.activeClipUrl)}w.activeClipUrl=`url(#${C})`,this.tgrp=null}clip(w){this.pendingClip=w}closePath(){let w=this.current;if(w.path){let C=`${w.path.getAttributeNS(null,"d")}Z`;w.path.setAttributeNS(null,"d",C)}}setLeading(w){this.current.leading=-w}setTextRise(w){this.current.textRise=w}setTextRenderingMode(w){this.current.textRenderingMode=w}setHScale(w){this.current.textHScale=w/100}setRenderingIntent(w){}setFlatness(w){}setGState(w){for(let[C,L]of w)switch(C){case"LW":this.setLineWidth(L);break;case"LC":this.setLineCap(L);break;case"LJ":this.setLineJoin(L);break;case"ML":this.setMiterLimit(L);break;case"D":this.setDash(L[0],L[1]);break;case"RI":this.setRenderingIntent(L);break;case"FL":this.setFlatness(L);break;case"Font":this.setFont(L);break;case"CA":this.setStrokeAlpha(L);break;case"ca":this.setFillAlpha(L);break;default:(0,i.warn)(`Unimplemented graphic state operator ${C}`);break}}fill(){let w=this.current;w.element&&(w.element.setAttributeNS(null,"fill",w.fillColor),w.element.setAttributeNS(null,"fill-opacity",w.fillAlpha),this.endPath())}stroke(){let w=this.current;w.element&&(this._setStrokeAttributes(w.element),w.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(w,C=1){let L=this.current,U=L.dashArray;C!==1&&U.length>0&&(U=U.map(function(F){return C*F})),w.setAttributeNS(null,"stroke",L.strokeColor),w.setAttributeNS(null,"stroke-opacity",L.strokeAlpha),w.setAttributeNS(null,"stroke-miterlimit",g(L.miterLimit)),w.setAttributeNS(null,"stroke-linecap",L.lineCap),w.setAttributeNS(null,"stroke-linejoin",L.lineJoin),w.setAttributeNS(null,"stroke-width",g(C*L.lineWidth)+"px"),w.setAttributeNS(null,"stroke-dasharray",U.map(g).join(" ")),w.setAttributeNS(null,"stroke-dashoffset",g(C*L.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){let w=this.svgFactory.createElement("svg:rect");w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y","0"),w.setAttributeNS(null,"width","1px"),w.setAttributeNS(null,"height","1px"),w.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(w)}paintImageXObject(w){let C=this.getObject(w);if(!C){(0,i.warn)(`Dependent image with object ID ${w} is not ready yet`);return}this.paintInlineImageXObject(C)}paintInlineImageXObject(w,C){let L=w.width,U=w.height,F=c(w,this.forceDataSchema,!!C),$=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x","0"),$.setAttributeNS(null,"y","0"),$.setAttributeNS(null,"width",g(L)),$.setAttributeNS(null,"height",g(U)),this.current.element=$,this.clip("nonzero");let W=this.svgFactory.createElement("svg:image");W.setAttributeNS(l,"xlink:href",F),W.setAttributeNS(null,"x","0"),W.setAttributeNS(null,"y",g(-U)),W.setAttributeNS(null,"width",g(L)+"px"),W.setAttributeNS(null,"height",g(U)+"px"),W.setAttributeNS(null,"transform",`scale(${g(1/L)} ${g(-1/U)})`),C?C.append(W):this._ensureTransformGroup().append(W)}paintImageMaskXObject(w){let C=this.getObject(w.data,w);if(C.bitmap){(0,i.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}let L=this.current,U=C.width,F=C.height,$=L.fillColor;L.maskId=`mask${y++}`;let W=this.svgFactory.createElement("svg:mask");W.setAttributeNS(null,"id",L.maskId);let ne=this.svgFactory.createElement("svg:rect");ne.setAttributeNS(null,"x","0"),ne.setAttributeNS(null,"y","0"),ne.setAttributeNS(null,"width",g(U)),ne.setAttributeNS(null,"height",g(F)),ne.setAttributeNS(null,"fill",$),ne.setAttributeNS(null,"mask",`url(#${L.maskId})`),this.defs.append(W),this._ensureTransformGroup().append(ne),this.paintInlineImageXObject(C,W)}paintFormXObjectBegin(w,C){if(Array.isArray(w)&&w.length===6&&this.transform(w[0],w[1],w[2],w[3],w[4],w[5]),C){let L=C[2]-C[0],U=C[3]-C[1],F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x",C[0]),F.setAttributeNS(null,"y",C[1]),F.setAttributeNS(null,"width",g(L)),F.setAttributeNS(null,"height",g(U)),this.current.element=F,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(w){let C=this.svgFactory.create(w.width,w.height),L=this.svgFactory.createElement("svg:defs");C.append(L),this.defs=L;let U=this.svgFactory.createElement("svg:g");return U.setAttributeNS(null,"transform",f(w.transform)),C.append(U),this.svg=U,C}_ensureClipGroup(){if(!this.current.clipGroup){let w=this.svgFactory.createElement("svg:g");w.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(w),this.current.clipGroup=w}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",f(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}t.SVGGraphics=M},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class n{static textContent(i){let s=[],o={items:s,styles:Object.create(null)};function l(d){if(!d)return;let u=null,a=d.name;if(a==="#text")u=d.value;else if(n.shouldBuildText(a))d?.attributes?.textContent?u=d.attributes.textContent:d.value&&(u=d.value);else return;if(u!==null&&s.push({str:u}),!!d.children)for(let c of d.children)l(c)}return l(i),o}static shouldBuildText(i){return!(i==="textarea"||i==="input"||i==="option"||i==="select")}}t.XfaText=n},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=f,t.updateTextLayer=v;var r=n(1),i=n(6);let s=1e5,o=30,l=.8,d=new Map;function u(y,E){let M;if(E&&r.FeatureTest.isOffscreenCanvasSupported)M=new OffscreenCanvas(y,y).getContext("2d",{alpha:!1});else{let T=document.createElement("canvas");T.width=T.height=y,M=T.getContext("2d",{alpha:!1})}return M}function a(y,E){let M=d.get(y);if(M)return M;let T=u(o,E);T.font=`${o}px ${y}`;let w=T.measureText(""),C=w.fontBoundingBoxAscent,L=Math.abs(w.fontBoundingBoxDescent);if(C){let F=C/(C+L);return d.set(y,F),T.canvas.width=T.canvas.height=0,F}T.strokeStyle="red",T.clearRect(0,0,o,o),T.strokeText("g",0,0);let U=T.getImageData(0,0,o,o).data;L=0;for(let F=U.length-1-3;F>=0;F-=4)if(U[F]>0){L=Math.ceil(F/4/o);break}T.clearRect(0,0,o,o),T.strokeText("A",0,o),U=T.getImageData(0,0,o,o).data,C=0;for(let F=0,$=U.length;F<$;F+=4)if(U[F]>0){C=o-Math.floor(F/4/o);break}if(T.canvas.width=T.canvas.height=0,C){let F=C/(C+L);return d.set(y,F),F}return d.set(y,l),l}function c(y,E,M){let T=document.createElement("span"),w={angle:0,canvasWidth:0,hasText:E.str!=="",hasEOL:E.hasEOL,fontSize:0};y._textDivs.push(T);let C=r.Util.transform(y._transform,E.transform),L=Math.atan2(C[1],C[0]),U=M[E.fontName];U.vertical&&(L+=Math.PI/2);let F=Math.hypot(C[2],C[3]),$=F*a(U.fontFamily,y._isOffscreenCanvasSupported),W,ne;L===0?(W=C[4],ne=C[5]-$):(W=C[4]+$*Math.sin(L),ne=C[5]-$*Math.cos(L));let J="calc(var(--scale-factor)*",Q=T.style;y._container===y._rootContainer?(Q.left=`${(100*W/y._pageWidth).toFixed(2)}%`,Q.top=`${(100*ne/y._pageHeight).toFixed(2)}%`):(Q.left=`${J}${W.toFixed(2)}px)`,Q.top=`${J}${ne.toFixed(2)}px)`),Q.fontSize=`${J}${F.toFixed(2)}px)`,Q.fontFamily=U.fontFamily,w.fontSize=F,T.setAttribute("role","presentation"),T.textContent=E.str,T.dir=E.dir,y._fontInspectorEnabled&&(T.dataset.fontName=E.fontName),L!==0&&(w.angle=L*(180/Math.PI));let ie=!1;if(E.str.length>1)ie=!0;else if(E.str!==" "&&E.transform[0]!==E.transform[3]){let Z=Math.abs(E.transform[0]),O=Math.abs(E.transform[3]);Z!==O&&Math.max(Z,O)/Math.min(Z,O)>1.5&&(ie=!0)}ie&&(w.canvasWidth=U.vertical?E.height:E.width),y._textDivProperties.set(T,w),y._isReadableStream&&y._layoutText(T)}function h(y){let{div:E,scale:M,properties:T,ctx:w,prevFontSize:C,prevFontFamily:L}=y,{style:U}=E,F="";if(T.canvasWidth!==0&&T.hasText){let{fontFamily:$}=U,{canvasWidth:W,fontSize:ne}=T;(C!==ne||L!==$)&&(w.font=`${ne*M}px ${$}`,y.prevFontSize=ne,y.prevFontFamily=$);let{width:J}=w.measureText(E.textContent);J>0&&(F=`scaleX(${W*M/J})`)}T.angle!==0&&(F=`rotate(${T.angle}deg) ${F}`),F.length>0&&(U.transform=F)}function p(y){if(y._canceled)return;let E=y._textDivs,M=y._capability;if(E.length>s){M.resolve();return}if(!y._isReadableStream)for(let w of E)y._layoutText(w);M.resolve()}class g{constructor({textContentSource:E,container:M,viewport:T,textDivs:w,textDivProperties:C,textContentItemsStr:L,isOffscreenCanvasSupported:U}){this._textContentSource=E,this._isReadableStream=E instanceof ReadableStream,this._container=this._rootContainer=M,this._textDivs=w||[],this._textContentItemsStr=L||[],this._isOffscreenCanvasSupported=U,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=C||new WeakMap,this._canceled=!1,this._capability=new r.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:T.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:u(0,U)};let{pageWidth:F,pageHeight:$,pageX:W,pageY:ne}=T.rawDims;this._transform=[1,0,0,-1,-W,ne+$],this._pageWidth=F,this._pageHeight=$,(0,i.setLayerDimensions)(M,T),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new r.AbortException("TextLayer task cancelled."))}_processItems(E,M){for(let T of E){if(T.str===void 0){if(T.type==="beginMarkedContentProps"||T.type==="beginMarkedContent"){let w=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),T.id!==null&&this._container.setAttribute("id",`${T.id}`),w.append(this._container)}else T.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(T.str),c(this,T,M)}}_layoutText(E){let M=this._layoutTextParams.properties=this._textDivProperties.get(E);if(this._layoutTextParams.div=E,h(this._layoutTextParams),M.hasText&&this._container.append(E),M.hasEOL){let T=document.createElement("br");T.setAttribute("role","presentation"),this._container.append(T)}}_render(){let E=new r.PromiseCapability,M=Object.create(null);if(this._isReadableStream){let T=()=>{this._reader.read().then(({value:w,done:C})=>{if(C){E.resolve();return}Object.assign(M,w.styles),this._processItems(w.items,M),T()},E.reject)};this._reader=this._textContentSource.getReader(),T()}else if(this._textContentSource){let{items:T,styles:w}=this._textContentSource;this._processItems(T,w),E.resolve()}else throw new Error('No "textContentSource" parameter specified.');E.promise.then(()=>{M=null,p(this)},this._capability.reject)}}t.TextLayerRenderTask=g;function f(y){!y.textContentSource&&(y.textContent||y.textContentStream)&&((0,i.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),y.textContentSource=y.textContent||y.textContentStream);let{container:E,viewport:M}=y,T=getComputedStyle(E),w=T.getPropertyValue("visibility"),C=parseFloat(T.getPropertyValue("--scale-factor"));w==="visible"&&(!C||Math.abs(C-M.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");let L=new g(y);return L._render(),L}function v({container:y,viewport:E,textDivs:M,textDivProperties:T,isOffscreenCanvasSupported:w,mustRotate:C=!0,mustRescale:L=!0}){if(C&&(0,i.setLayerDimensions)(y,{rotation:E.rotation}),L){let U=u(0,w),$={prevFontSize:null,prevFontFamily:null,div:null,scale:E.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:U};for(let W of M)$.properties=T.get(W),$.div=W,h($)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var r=n(1),i=n(4),s=n(28),o=n(33),l=n(6),d=n(34);let u=(()=>{class a{#e;#t=!1;#n=null;#r=this.pointerup.bind(this);#a=this.pointerdown.bind(this);#o=new Map;#s=!1;#c=!1;#l=!1;#i;static _initialized=!1;constructor({uiManager:h,pageIndex:p,div:g,accessibilityManager:f,annotationLayer:v,viewport:y,l10n:E}){let M=[s.FreeTextEditor,o.InkEditor,d.StampEditor];if(!a._initialized){a._initialized=!0;for(let T of M)T.initialize(E)}h.registerEditorTypes(M),this.#i=h,this.pageIndex=p,this.div=g,this.#e=f,this.#n=v,this.viewport=y,this.#i.addLayer(this)}get isEmpty(){return this.#o.size===0}updateToolbar(h){this.#i.updateToolbar(h)}updateMode(h=this.#i.getMode()){this.#p(),h===r.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),h!==r.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",h===r.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",h===r.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",h===r.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(h){if(!h&&this.#i.getMode()!==r.AnnotationEditorType.INK)return;if(!h){for(let g of this.#o.values())if(g.isEmpty()){g.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(h){this.#i.setEditingState(h)}addCommands(h){this.#i.addCommands(h)}enable(){this.div.style.pointerEvents="auto";let h=new Set;for(let g of this.#o.values())g.enableEditing(),g.annotationElementId&&h.add(g.annotationElementId);if(!this.#n)return;let p=this.#n.getEditableAnnotations();for(let g of p){if(g.hide(),this.#i.isDeletedAnnotationElement(g.data.id)||h.has(g.data.id))continue;let f=this.deserialize(g);f&&(this.addOrRebuild(f),f.enableEditing())}}disable(){this.#l=!0,this.div.style.pointerEvents="none";let h=new Set;for(let p of this.#o.values()){if(p.disableEditing(),!p.annotationElementId||p.serialize()!==null){h.add(p.annotationElementId);continue}this.getEditableAnnotation(p.annotationElementId)?.show(),p.remove()}if(this.#n){let p=this.#n.getEditableAnnotations();for(let g of p){let{id:f}=g.data;h.has(f)||this.#i.isDeletedAnnotationElement(f)||g.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#l=!1}getEditableAnnotation(h){return this.#n?.getEditableAnnotation(h)||null}setActiveEditor(h){this.#i.getActive()!==h&&this.#i.setActiveEditor(h)}enableClick(){this.div.addEventListener("pointerdown",this.#a),this.div.addEventListener("pointerup",this.#r)}disableClick(){this.div.removeEventListener("pointerdown",this.#a),this.div.removeEventListener("pointerup",this.#r)}attach(h){this.#o.set(h.id,h);let{annotationElementId:p}=h;p&&this.#i.isDeletedAnnotationElement(p)&&this.#i.removeDeletedAnnotationElement(h)}detach(h){this.#o.delete(h.id),this.#e?.removePointerInTextLayer(h.contentDiv),!this.#l&&h.annotationElementId&&this.#i.addDeletedAnnotationElement(h)}remove(h){this.detach(h),this.#i.removeEditor(h),h.div.contains(document.activeElement)&&setTimeout(()=>{this.#i.focusMainContainer()},0),h.div.remove(),h.isAttachedToDOM=!1,this.#c||this.addInkEditorIfNeeded(!1)}changeParent(h){h.parent!==this&&(h.annotationElementId&&(this.#i.addDeletedAnnotationElement(h.annotationElementId),i.AnnotationEditor.deleteAnnotationElement(h),h.annotationElementId=null),this.attach(h),h.parent?.detach(h),h.setParent(this),h.div&&h.isAttachedToDOM&&(h.div.remove(),this.div.append(h.div)))}add(h){if(this.changeParent(h),this.#i.addEditor(h),this.attach(h),!h.isAttachedToDOM){let p=h.render();this.div.append(p),h.isAttachedToDOM=!0}h.fixAndSetPosition(),h.onceAdded(),this.#i.addToAnnotationStorage(h)}moveEditorInDOM(h){if(!h.isAttachedToDOM)return;let{activeElement:p}=document;h.div.contains(p)&&(h._focusEventsAllowed=!1,setTimeout(()=>{h.div.contains(document.activeElement)?h._focusEventsAllowed=!0:(h.div.addEventListener("focusin",()=>{h._focusEventsAllowed=!0},{once:!0}),p.focus())},0)),h._structTreeParentId=this.#e?.moveElementInDOM(this.div,h.div,h.contentDiv,!0)}addOrRebuild(h){h.needsToBeRebuilt()?h.rebuild():this.add(h)}addUndoableEditor(h){let p=()=>h._uiManager.rebuild(h),g=()=>{h.remove()};this.addCommands({cmd:p,undo:g,mustExec:!1})}getNextId(){return this.#i.getId()}#f(h){switch(this.#i.getMode()){case r.AnnotationEditorType.FREETEXT:return new s.FreeTextEditor(h);case r.AnnotationEditorType.INK:return new o.InkEditor(h);case r.AnnotationEditorType.STAMP:return new d.StampEditor(h)}return null}pasteEditor(h,p){this.#i.updateToolbar(h),this.#i.updateMode(h);let{offsetX:g,offsetY:f}=this.#h(),v=this.getNextId(),y=this.#f(ce({parent:this,id:v,x:g,y:f,uiManager:this.#i,isCentered:!0},p));y&&this.add(y)}deserialize(h){switch(h.annotationType??h.annotationEditorType){case r.AnnotationEditorType.FREETEXT:return s.FreeTextEditor.deserialize(h,this,this.#i);case r.AnnotationEditorType.INK:return o.InkEditor.deserialize(h,this,this.#i);case r.AnnotationEditorType.STAMP:return d.StampEditor.deserialize(h,this,this.#i)}return null}#d(h,p){let g=this.getNextId(),f=this.#f({parent:this,id:g,x:h.offsetX,y:h.offsetY,uiManager:this.#i,isCentered:p});return f&&this.add(f),f}#h(){let{x:h,y:p,width:g,height:f}=this.div.getBoundingClientRect(),v=Math.max(0,h),y=Math.max(0,p),E=Math.min(window.innerWidth,h+g),M=Math.min(window.innerHeight,p+f),T=(v+E)/2-h,w=(y+M)/2-p,[C,L]=this.viewport.rotation%180===0?[T,w]:[w,T];return{offsetX:C,offsetY:L}}addNewEditor(){this.#d(this.#h(),!0)}setSelected(h){this.#i.setSelected(h)}toggleSelected(h){this.#i.toggleSelected(h)}isSelected(h){return this.#i.isSelected(h)}unselect(h){this.#i.unselect(h)}pointerup(h){let{isMac:p}=r.FeatureTest.platform;if(!(h.button!==0||h.ctrlKey&&p)&&h.target===this.div&&this.#s){if(this.#s=!1,!this.#t){this.#t=!0;return}if(this.#i.getMode()===r.AnnotationEditorType.STAMP){this.#i.unselectAll();return}this.#d(h,!1)}}pointerdown(h){if(this.#s){this.#s=!1;return}let{isMac:p}=r.FeatureTest.platform;if(h.button!==0||h.ctrlKey&&p||h.target!==this.div)return;this.#s=!0;let g=this.#i.getActive();this.#t=!g||g.isEmpty()}findNewParent(h,p,g){let f=this.#i.findParent(p,g);return f===null||f===this?!1:(f.changeParent(h),!0)}destroy(){this.#i.getActive()?.parent===this&&(this.#i.commitOrRemove(),this.#i.setActiveEditor(null));for(let h of this.#o.values())this.#e?.removePointerInTextLayer(h.contentDiv),h.setParent(null),h.isAttachedToDOM=!1,h.div.remove();this.div=null,this.#o.clear(),this.#i.removeLayer(this)}#p(){this.#c=!0;for(let h of this.#o.values())h.isEmpty()&&h.remove();this.#c=!1}render({viewport:h}){this.viewport=h,(0,l.setLayerDimensions)(this.div,h);for(let p of this.#i.getEditors(this.pageIndex))this.add(p);this.updateMode()}update({viewport:h}){this.#i.commitOrRemove(),this.viewport=h,(0,l.setLayerDimensions)(this.div,{rotation:h.rotation}),this.updateMode()}get pageDimensions(){let{pageWidth:h,pageHeight:p}=this.viewport.rawDims;return[h,p]}}return a})();t.AnnotationEditorLayer=u},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var r=n(1),i=n(5),s=n(4),o=n(29);let l=(()=>{class d extends s.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#r=this.editorDivKeydown.bind(this);#a;#o="";#s=`${this.id}-editor`;#c;#l=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let a=d.prototype,c=g=>g.isEmpty(),h=i.AnnotationEditorUIManager.TRANSLATE_SMALL,p=i.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new i.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],a.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],a.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],a._translateEmpty,{args:[-h,0],checker:c}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],a._translateEmpty,{args:[-p,0],checker:c}],[["ArrowRight","mac+ArrowRight"],a._translateEmpty,{args:[h,0],checker:c}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],a._translateEmpty,{args:[p,0],checker:c}],[["ArrowUp","mac+ArrowUp"],a._translateEmpty,{args:[0,-h],checker:c}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],a._translateEmpty,{args:[0,-p],checker:c}],[["ArrowDown","mac+ArrowDown"],a._translateEmpty,{args:[0,h],checker:c}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],a._translateEmpty,{args:[0,p],checker:c}]]))}static _type="freetext";constructor(a){super(ke(ce({},a),{name:"freeTextEditor"})),this.#a=a.color||d._defaultColor||s.AnnotationEditor._defaultLineColor,this.#c=a.fontSize||d._defaultFontSize}static initialize(a){s.AnnotationEditor.initialize(a,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});let c=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(c.getPropertyValue("--freetext-padding"))}static updateDefaultParams(a,c){switch(a){case r.AnnotationEditorParamsType.FREETEXT_SIZE:d._defaultFontSize=c;break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:d._defaultColor=c;break}}updateParams(a,c){switch(a){case r.AnnotationEditorParamsType.FREETEXT_SIZE:this.#i(c);break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(c);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,d._defaultFontSize],[r.AnnotationEditorParamsType.FREETEXT_COLOR,d._defaultColor||s.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,this.#c],[r.AnnotationEditorParamsType.FREETEXT_COLOR,this.#a]]}#i(a){let c=p=>{this.editorDiv.style.fontSize=`calc(${p}px * var(--scale-factor))`,this.translate(0,-(p-this.#c)*this.parentScale),this.#c=p,this.#h()},h=this.#c;this.addCommands({cmd:()=>{c(a)},undo:()=>{c(h)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(a){let c=this.#a;this.addCommands({cmd:()=>{this.#a=this.editorDiv.style.color=a},undo:()=>{this.#a=this.editorDiv.style.color=c},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(a,c){this._uiManager.translateSelectedEditors(a,c,!0)}getInitialTranslation(){let a=this.parentScale;return[-d._internalPadding*a,-(d._internalPadding+this.#c)*a]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(r.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#r),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#s),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#r),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(a){this._focusEventsAllowed&&(super.focusin(a),a.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#m();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){let a=this.editorDiv.getElementsByTagName("div");if(a.length===0)return this.editorDiv.innerText;let c=[];for(let h of a)c.push(h.innerText.replace(/\r\n?|\n/,""));return c.join(`
`)}#h(){let[a,c]=this.parentDimensions,h;if(this.isAttachedToDOM)h=this.div.getBoundingClientRect();else{let{currentLayer:p,div:g}=this,f=g.style.display;g.style.display="hidden",p.div.append(this.div),h=g.getBoundingClientRect(),g.remove(),g.style.display=f}this.rotation%180===this.parentRotation%180?(this.width=h.width/a,this.height=h.height/c):(this.width=h.height/a,this.height=h.width/c),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let a=this.#o,c=this.#o=this.#d().trimEnd();if(a===c)return;let h=p=>{if(this.#o=p,!p){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{h(c)},undo:()=>{h(a)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(a){this.enterInEditMode()}keydown(a){a.target===this.div&&a.key==="Enter"&&(this.enterInEditMode(),a.preventDefault())}editorDivKeydown(a){d._keyboardManager.exec(this,a)}editorDivFocus(a){this.isEditing=!0}editorDivBlur(a){this.isEditing=!1}editorDivInput(a){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let a,c;this.width&&(a=this.x,c=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#s),this.enableEditing(),s.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(p=>this.editorDiv?.setAttribute("aria-label",p)),s.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(p=>this.editorDiv?.setAttribute("default-content",p)),this.editorDiv.contentEditable=!0;let{style:h}=this.editorDiv;if(h.fontSize=`calc(${this.#c}px * var(--scale-factor))`,h.color=this.#a,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){let[p,g]=this.parentDimensions;if(this.annotationElementId){let{position:f}=this.#l,[v,y]=this.getInitialTranslation();[v,y]=this.pageTranslationToScreen(v,y);let[E,M]=this.pageDimensions,[T,w]=this.pageTranslation,C,L;switch(this.rotation){case 0:C=a+(f[0]-T)/E,L=c+this.height-(f[1]-w)/M;break;case 90:C=a+(f[0]-T)/E,L=c-(f[1]-w)/M,[v,y]=[y,-v];break;case 180:C=a-this.width+(f[0]-T)/E,L=c-(f[1]-w)/M,[v,y]=[-v,-y];break;case 270:C=a+(f[0]-T-this.height*M)/E,L=c+(f[1]-w-this.width*E)/M,[v,y]=[-y,v];break}this.setAt(C*p,L*g,v,y)}else this.setAt(a*p,c*g,this.width*p,this.height*g);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#o)for(let a of this.#o.split(`
`)){let c=document.createElement("div");c.append(a?document.createTextNode(a):document.createElement("br")),this.editorDiv.append(c)}}get contentDiv(){return this.editorDiv}static deserialize(a,c,h){let p=null;if(a instanceof o.FreeTextAnnotationElement){let{data:{defaultAppearanceData:{fontSize:f,fontColor:v},rect:y,rotation:E,id:M},textContent:T,textPosition:w,parent:{page:{pageNumber:C}}}=a;if(!T||T.length===0)return null;p=a={annotationType:r.AnnotationEditorType.FREETEXT,color:Array.from(v),fontSize:f,value:T.join(`
`),position:w,pageIndex:C-1,rect:y,rotation:E,id:M,deleted:!1}}let g=super.deserialize(a,c,h);return g.#c=a.fontSize,g.#a=r.Util.makeHexColor(...a.color),g.#o=a.value,g.annotationElementId=a.id||null,g.#l=p,g}serialize(a=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};let c=d._internalPadding*this.parentScale,h=this.getRect(c,c),p=s.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#a),g={annotationType:r.AnnotationEditorType.FREETEXT,color:p,fontSize:this.#c,value:this.#o,pageIndex:this.pageIndex,rect:h,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return a?g:this.annotationElementId&&!this.#v(g)?null:(g.id=this.annotationElementId,g)}#v(a){let{value:c,fontSize:h,color:p,rect:g,pageIndex:f}=this.#l;return a.value!==c||a.fontSize!==h||a.rect.some((v,y)=>Math.abs(v-g[y])>=1)||a.color.some((v,y)=>v!==p[y])||a.pageIndex!==f}#m(a=!1){if(!this.annotationElementId)return;if(this.#h(),!a&&(this.width===0||this.height===0)){setTimeout(()=>this.#m(!0),0);return}let c=d._internalPadding*this.parentScale;this.#l.rect=this.getRect(c,c)}}return d})();t.FreeTextEditor=l},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var r=n(1),i=n(6),s=n(3),o=n(30),l=n(31),d=n(32);let u=1e3,a=9,c=new WeakSet;function h(x){return{width:x[2]-x[0],height:x[3]-x[1]}}class p{static create(m){switch(m.data.annotationType){case r.AnnotationType.LINK:return new f(m);case r.AnnotationType.TEXT:return new v(m);case r.AnnotationType.WIDGET:switch(m.data.fieldType){case"Tx":return new E(m);case"Btn":return m.data.radioButton?new w(m):m.data.checkBox?new T(m):new C(m);case"Ch":return new L(m);case"Sig":return new M(m)}return new y(m);case r.AnnotationType.POPUP:return new U(m);case r.AnnotationType.FREETEXT:return new $(m);case r.AnnotationType.LINE:return new W(m);case r.AnnotationType.SQUARE:return new ne(m);case r.AnnotationType.CIRCLE:return new J(m);case r.AnnotationType.POLYLINE:return new Q(m);case r.AnnotationType.CARET:return new Z(m);case r.AnnotationType.INK:return new O(m);case r.AnnotationType.POLYGON:return new ie(m);case r.AnnotationType.HIGHLIGHT:return new S(m);case r.AnnotationType.UNDERLINE:return new b(m);case r.AnnotationType.SQUIGGLY:return new _(m);case r.AnnotationType.STRIKEOUT:return new A(m);case r.AnnotationType.STAMP:return new N(m);case r.AnnotationType.FILEATTACHMENT:return new k(m);default:return new g(m)}}}class g{#e=!1;constructor(m,{isRenderable:D=!1,ignoreBorder:I=!1,createQuadrilaterals:R=!1}={}){this.isRenderable=D,this.data=m.data,this.layer=m.layer,this.linkService=m.linkService,this.downloadManager=m.downloadManager,this.imageResourcesPath=m.imageResourcesPath,this.renderForms=m.renderForms,this.svgFactory=m.svgFactory,this.annotationStorage=m.annotationStorage,this.enableScripting=m.enableScripting,this.hasJSActions=m.hasJSActions,this._fieldObjects=m.fieldObjects,this.parent=m.parent,D&&(this.container=this._createContainer(I)),R&&this._createQuadrilaterals()}static _hasPopupData({titleObj:m,contentsObj:D,richText:I}){return!!(m?.str||D?.str||I?.str)}get hasPopupData(){return g._hasPopupData(this.data)}_createContainer(m){let{data:D,parent:{page:I,viewport:R}}=this,P=document.createElement("section");P.setAttribute("data-annotation-id",D.id),this instanceof y||(P.tabIndex=u),P.style.zIndex=this.parent.zIndex++,this.data.popupRef&&P.setAttribute("aria-haspopup","dialog"),D.noRotate&&P.classList.add("norotate");let{pageWidth:B,pageHeight:V,pageX:G,pageY:re}=R.rawDims;if(!D.rect||this instanceof U){let{rotation:ee}=D;return!D.hasOwnCanvas&&ee!==0&&this.setRotation(ee,P),P}let{width:q,height:Y}=h(D.rect),X=r.Util.normalizeRect([D.rect[0],I.view[3]-D.rect[1]+I.view[1],D.rect[2],I.view[3]-D.rect[3]+I.view[1]]);if(!m&&D.borderStyle.width>0){P.style.borderWidth=`${D.borderStyle.width}px`;let ee=D.borderStyle.horizontalCornerRadius,se=D.borderStyle.verticalCornerRadius;if(ee>0||se>0){let ue=`calc(${ee}px * var(--scale-factor)) / calc(${se}px * var(--scale-factor))`;P.style.borderRadius=ue}else if(this instanceof w){let ue=`calc(${q}px * var(--scale-factor)) / calc(${Y}px * var(--scale-factor))`;P.style.borderRadius=ue}switch(D.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:P.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:P.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:P.style.borderBottomStyle="solid";break;default:break}let le=D.borderColor||null;le?(this.#e=!0,P.style.borderColor=r.Util.makeHexColor(le[0]|0,le[1]|0,le[2]|0)):P.style.borderWidth=0}P.style.left=`${100*(X[0]-G)/B}%`,P.style.top=`${100*(X[1]-re)/V}%`;let{rotation:K}=D;return D.hasOwnCanvas||K===0?(P.style.width=`${100*q/B}%`,P.style.height=`${100*Y/V}%`):this.setRotation(K,P),P}setRotation(m,D=this.container){if(!this.data.rect)return;let{pageWidth:I,pageHeight:R}=this.parent.viewport.rawDims,{width:P,height:B}=h(this.data.rect),V,G;m%180===0?(V=100*P/I,G=100*B/R):(V=100*B/I,G=100*P/R),D.style.width=`${V}%`,D.style.height=`${G}%`,D.setAttribute("data-main-rotation",(360-m)%360)}get _commonActions(){let m=(D,I,R)=>{let P=R.detail[D],B=P[0],V=P.slice(1);R.target.style[I]=o.ColorConverters[`${B}_HTML`](V),this.annotationStorage.setValue(this.data.id,{[I]:o.ColorConverters[`${B}_rgb`](V)})};return(0,r.shadow)(this,"_commonActions",{display:D=>{let{display:I}=D.detail,R=I%2===1;this.container.style.visibility=R?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:R,noPrint:I===1||I===2})},print:D=>{this.annotationStorage.setValue(this.data.id,{noPrint:!D.detail.print})},hidden:D=>{let{hidden:I}=D.detail;this.container.style.visibility=I?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:I,noView:I})},focus:D=>{setTimeout(()=>D.target.focus({preventScroll:!1}),0)},userName:D=>{D.target.title=D.detail.userName},readonly:D=>{D.target.disabled=D.detail.readonly},required:D=>{this._setRequired(D.target,D.detail.required)},bgColor:D=>{m("bgColor","backgroundColor",D)},fillColor:D=>{m("fillColor","backgroundColor",D)},fgColor:D=>{m("fgColor","color",D)},textColor:D=>{m("textColor","color",D)},borderColor:D=>{m("borderColor","borderColor",D)},strokeColor:D=>{m("strokeColor","borderColor",D)},rotation:D=>{let I=D.detail.rotation;this.setRotation(I),this.annotationStorage.setValue(this.data.id,{rotation:I})}})}_dispatchEventFromSandbox(m,D){let I=this._commonActions;for(let R of Object.keys(D.detail))(m[R]||I[R])?.(D)}_setDefaultPropertiesFromJS(m){if(!this.enableScripting)return;let D=this.annotationStorage.getRawValue(this.data.id);if(!D)return;let I=this._commonActions;for(let[R,P]of Object.entries(D)){let B=I[R];if(B){let V={detail:{[R]:P},target:m};B(V),delete D[R]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:m}=this.data;if(!m)return;let[D,I,R,P]=this.data.rect;if(m.length===1){let[,{x:se,y:le},{x:ue,y:fe}]=m[0];if(R===se&&P===le&&D===ue&&I===fe)return}let{style:B}=this.container,V;if(this.#e){let{borderColor:se,borderWidth:le}=B;B.borderWidth=0,V=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${se}" stroke-width="${le}">`],this.container.classList.add("hasBorder")}let G=R-D,re=P-I,{svgFactory:q}=this,Y=q.createElement("svg");Y.classList.add("quadrilateralsContainer"),Y.setAttribute("width",0),Y.setAttribute("height",0);let X=q.createElement("defs");Y.append(X);let K=q.createElement("clipPath"),ee=`clippath_${this.data.id}`;K.setAttribute("id",ee),K.setAttribute("clipPathUnits","objectBoundingBox"),X.append(K);for(let[,{x:se,y:le},{x:ue,y:fe}]of m){let De=q.createElement("rect"),Pe=(ue-D)/G,ct=(P-le)/re,tt=(se-ue)/G,Hn=(le-fe)/re;De.setAttribute("x",Pe),De.setAttribute("y",ct),De.setAttribute("width",tt),De.setAttribute("height",Hn),K.append(De),V?.push(`<rect vector-effect="non-scaling-stroke" x="${Pe}" y="${ct}" width="${tt}" height="${Hn}"/>`)}this.#e&&(V.push("</g></svg>')"),B.backgroundImage=V.join("")),this.container.append(Y),this.container.style.clipPath=`url(#${ee})`}_createPopup(){let{container:m,data:D}=this;m.setAttribute("aria-haspopup","dialog");let I=new U({data:{color:D.color,titleObj:D.titleObj,modificationDate:D.modificationDate,contentsObj:D.contentsObj,richText:D.richText,parentRect:D.rect,borderStyle:0,id:`popup_${D.id}`,rotation:D.rotation},parent:this.parent,elements:[this]});this.parent.div.append(I.render())}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(m,D=null){let I=[];if(this._fieldObjects){let R=this._fieldObjects[m];if(R)for(let{page:P,id:B,exportValues:V}of R){if(P===-1||B===D)continue;let G=typeof V=="string"?V:null,re=document.querySelector(`[data-element-id="${B}"]`);if(re&&!c.has(re)){(0,r.warn)(`_getElementsByName - element not allowed: ${B}`);continue}I.push({id:B,exportValue:G,domElement:re})}return I}for(let R of document.getElementsByName(m)){let{exportValue:P}=R,B=R.getAttribute("data-element-id");B!==D&&c.has(R)&&I.push({id:B,exportValue:P,domElement:R})}return I}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let m=this.getElementsToTriggerPopup();if(Array.isArray(m))for(let D of m)D.classList.add("highlightArea");else m.classList.add("highlightArea")}_editOnDoubleClick(){let{annotationEditorType:m,data:{id:D}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:m,editId:D})})}}class f extends g{constructor(m,D=null){super(m,{isRenderable:!0,ignoreBorder:!!D?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=m.data.isTooltipOnly}render(){let{data:m,linkService:D}=this,I=document.createElement("a");I.setAttribute("data-element-id",m.id);let R=!1;return m.url?(D.addLinkAttributes(I,m.url,m.newWindow),R=!0):m.action?(this._bindNamedAction(I,m.action),R=!0):m.attachment?(this._bindAttachment(I,m.attachment),R=!0):m.setOCGState?(this.#t(I,m.setOCGState),R=!0):m.dest?(this._bindLink(I,m.dest),R=!0):(m.actions&&(m.actions.Action||m.actions["Mouse Up"]||m.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(I,m),R=!0),m.resetForm?(this._bindResetFormAction(I,m.resetForm),R=!0):this.isTooltipOnly&&!R&&(this._bindLink(I,""),R=!0)),this.container.classList.add("linkAnnotation"),R&&this.container.append(I),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(m,D){m.href=this.linkService.getDestinationHash(D),m.onclick=()=>(D&&this.linkService.goToDestination(D),!1),(D||D==="")&&this.#e()}_bindNamedAction(m,D){m.href=this.linkService.getAnchorUrl(""),m.onclick=()=>(this.linkService.executeNamedAction(D),!1),this.#e()}_bindAttachment(m,D){m.href=this.linkService.getAnchorUrl(""),m.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,D.content,D.filename),!1),this.#e()}#t(m,D){m.href=this.linkService.getAnchorUrl(""),m.onclick=()=>(this.linkService.executeSetOCGState(D),!1),this.#e()}_bindJSAction(m,D){m.href=this.linkService.getAnchorUrl("");let I=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let R of Object.keys(D.actions)){let P=I.get(R);P&&(m[P]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D.id,name:R}}),!1))}m.onclick||(m.onclick=()=>!1),this.#e()}_bindResetFormAction(m,D){let I=m.onclick;if(I||(m.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),I||(m.onclick=()=>!1);return}m.onclick=()=>{I?.();let{fields:R,refs:P,include:B}=D,V=[];if(R.length!==0||P.length!==0){let q=new Set(P);for(let Y of R){let X=this._fieldObjects[Y]||[];for(let{id:K}of X)q.add(K)}for(let Y of Object.values(this._fieldObjects))for(let X of Y)q.has(X.id)===B&&V.push(X)}else for(let q of Object.values(this._fieldObjects))V.push(...q);let G=this.annotationStorage,re=[];for(let q of V){let{id:Y}=q;switch(re.push(Y),q.type){case"text":{let K=q.defaultValue||"";G.setValue(Y,{value:K});break}case"checkbox":case"radiobutton":{let K=q.defaultValue===q.exportValues;G.setValue(Y,{value:K});break}case"combobox":case"listbox":{let K=q.defaultValue||"";G.setValue(Y,{value:K});break}default:continue}let X=document.querySelector(`[data-element-id="${Y}"]`);if(X){if(!c.has(X)){(0,r.warn)(`_bindResetFormAction - element not allowed: ${Y}`);continue}}else continue;X.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:re,name:"ResetForm"}}),!1}}}class v extends g{constructor(m){super(m,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let m=document.createElement("img");return m.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",m.alt="[{{type}} Annotation]",m.dataset.l10nId="text_annotation_type",m.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(m),this.container}}class y extends g{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(m){this.data.hasOwnCanvas&&(m.previousSibling?.nodeName==="CANVAS"&&(m.previousSibling.hidden=!0),m.hidden=!1)}_getKeyModifier(m){let{isWin:D,isMac:I}=r.FeatureTest.platform;return D&&m.ctrlKey||I&&m.metaKey}_setEventListener(m,D,I,R,P){I.includes("mouse")?m.addEventListener(I,B=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:R,value:P(B),shift:B.shiftKey,modifier:this._getKeyModifier(B)}})}):m.addEventListener(I,B=>{if(I==="blur"){if(!D.focused||!B.relatedTarget)return;D.focused=!1}else if(I==="focus"){if(D.focused)return;D.focused=!0}P&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:R,value:P(B)}})})}_setEventListeners(m,D,I,R){for(let[P,B]of I)(B==="Action"||this.data.actions?.[B])&&((B==="Focus"||B==="Blur")&&(D||={focused:!1}),this._setEventListener(m,D,P,B,R),B==="Focus"&&!this.data.actions?.Blur?this._setEventListener(m,D,"blur","Blur",null):B==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(m,D,"focus","Focus",null))}_setBackgroundColor(m){let D=this.data.backgroundColor||null;m.style.backgroundColor=D===null?"transparent":r.Util.makeHexColor(D[0],D[1],D[2])}_setTextStyle(m){let D=["left","center","right"],{fontColor:I}=this.data.defaultAppearanceData,R=this.data.defaultAppearanceData.fontSize||a,P=m.style,B,V=2,G=re=>Math.round(10*re)/10;if(this.data.multiLine){let re=Math.abs(this.data.rect[3]-this.data.rect[1]-V),q=Math.round(re/(r.LINE_FACTOR*R))||1,Y=re/q;B=Math.min(R,G(Y/r.LINE_FACTOR))}else{let re=Math.abs(this.data.rect[3]-this.data.rect[1]-V);B=Math.min(R,G(re/r.LINE_FACTOR))}P.fontSize=`calc(${B}px * var(--scale-factor))`,P.color=r.Util.makeHexColor(I[0],I[1],I[2]),this.data.textAlignment!==null&&(P.textAlign=D[this.data.textAlignment])}_setRequired(m,D){D?m.setAttribute("required",!0):m.removeAttribute("required"),m.setAttribute("aria-required",D)}}class E extends y{constructor(m){let D=m.renderForms||!m.data.hasAppearance&&!!m.data.fieldValue;super(m,{isRenderable:D})}setPropertyOnSiblings(m,D,I,R){let P=this.annotationStorage;for(let B of this._getElementsByName(m.name,m.id))B.domElement&&(B.domElement[D]=I),P.setValue(B.id,{[R]:I})}render(){let m=this.annotationStorage,D=this.data.id;this.container.classList.add("textWidgetAnnotation");let I=null;if(this.renderForms){let R=m.getValue(D,{value:this.data.fieldValue}),P=R.value||"",B=m.getValue(D,{charLimit:this.data.maxLen}).charLimit;B&&P.length>B&&(P=P.slice(0,B));let V=R.formattedValue||this.data.textContent?.join(`
`)||null;V&&this.data.comb&&(V=V.replaceAll(/\s+/g,""));let G={userValue:P,formattedValue:V,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(I=document.createElement("textarea"),I.textContent=V??P,this.data.doNotScroll&&(I.style.overflowY="hidden")):(I=document.createElement("input"),I.type="text",I.setAttribute("value",V??P),this.data.doNotScroll&&(I.style.overflowX="hidden")),this.data.hasOwnCanvas&&(I.hidden=!0),c.add(I),I.setAttribute("data-element-id",D),I.disabled=this.data.readOnly,I.name=this.data.fieldName,I.tabIndex=u,this._setRequired(I,this.data.required),B&&(I.maxLength=B),I.addEventListener("input",q=>{m.setValue(D,{value:q.target.value}),this.setPropertyOnSiblings(I,"value",q.target.value,"value"),G.formattedValue=null}),I.addEventListener("resetform",q=>{let Y=this.data.defaultFieldValue??"";I.value=G.userValue=Y,G.formattedValue=null});let re=q=>{let{formattedValue:Y}=G;Y!=null&&(q.target.value=Y),q.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){I.addEventListener("focus",Y=>{if(G.focused)return;let{target:X}=Y;G.userValue&&(X.value=G.userValue),G.lastCommittedValue=X.value,G.commitKey=1,G.focused=!0}),I.addEventListener("updatefromsandbox",Y=>{this.showElementAndHideCanvas(Y.target);let X={value(K){G.userValue=K.detail.value??"",m.setValue(D,{value:G.userValue.toString()}),K.target.value=G.userValue},formattedValue(K){let{formattedValue:ee}=K.detail;G.formattedValue=ee,ee!=null&&K.target!==document.activeElement&&(K.target.value=ee),m.setValue(D,{formattedValue:ee})},selRange(K){K.target.setSelectionRange(...K.detail.selRange)},charLimit:K=>{let{charLimit:ee}=K.detail,{target:se}=K;if(ee===0){se.removeAttribute("maxLength");return}se.setAttribute("maxLength",ee);let le=G.userValue;!le||le.length<=ee||(le=le.slice(0,ee),se.value=G.userValue=le,m.setValue(D,{value:le}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D,name:"Keystroke",value:le,willCommit:!0,commitKey:1,selStart:se.selectionStart,selEnd:se.selectionEnd}}))}};this._dispatchEventFromSandbox(X,Y)}),I.addEventListener("keydown",Y=>{G.commitKey=1;let X=-1;if(Y.key==="Escape"?X=0:Y.key==="Enter"&&!this.data.multiLine?X=2:Y.key==="Tab"&&(G.commitKey=3),X===-1)return;let{value:K}=Y.target;G.lastCommittedValue!==K&&(G.lastCommittedValue=K,G.userValue=K,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D,name:"Keystroke",value:K,willCommit:!0,commitKey:X,selStart:Y.target.selectionStart,selEnd:Y.target.selectionEnd}}))});let q=re;re=null,I.addEventListener("blur",Y=>{if(!G.focused||!Y.relatedTarget)return;G.focused=!1;let{value:X}=Y.target;G.userValue=X,G.lastCommittedValue!==X&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D,name:"Keystroke",value:X,willCommit:!0,commitKey:G.commitKey,selStart:Y.target.selectionStart,selEnd:Y.target.selectionEnd}}),q(Y)}),this.data.actions?.Keystroke&&I.addEventListener("beforeinput",Y=>{G.lastCommittedValue=null;let{data:X,target:K}=Y,{value:ee,selectionStart:se,selectionEnd:le}=K,ue=se,fe=le;switch(Y.inputType){case"deleteWordBackward":{let De=ee.substring(0,se).match(/\w*[^\w]*$/);De&&(ue-=De[0].length);break}case"deleteWordForward":{let De=ee.substring(se).match(/^[^\w]*\w*/);De&&(fe+=De[0].length);break}case"deleteContentBackward":se===le&&(ue-=1);break;case"deleteContentForward":se===le&&(fe+=1);break}Y.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D,name:"Keystroke",value:ee,change:X||"",willCommit:!1,selStart:ue,selEnd:fe}})}),this._setEventListeners(I,G,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Y=>Y.target.value)}if(re&&I.addEventListener("blur",re),this.data.comb){let Y=(this.data.rect[2]-this.data.rect[0])/B;I.classList.add("comb"),I.style.letterSpacing=`calc(${Y}px * var(--scale-factor) - 1ch)`}}else I=document.createElement("div"),I.textContent=this.data.fieldValue,I.style.verticalAlign="middle",I.style.display="table-cell";return this._setTextStyle(I),this._setBackgroundColor(I),this._setDefaultPropertiesFromJS(I),this.container.append(I),this.container}}class M extends y{constructor(m){super(m,{isRenderable:!!m.data.hasOwnCanvas})}}class T extends y{constructor(m){super(m,{isRenderable:m.renderForms})}render(){let m=this.annotationStorage,D=this.data,I=D.id,R=m.getValue(I,{value:D.exportValue===D.fieldValue}).value;typeof R=="string"&&(R=R!=="Off",m.setValue(I,{value:R})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let P=document.createElement("input");return c.add(P),P.setAttribute("data-element-id",I),P.disabled=D.readOnly,this._setRequired(P,this.data.required),P.type="checkbox",P.name=D.fieldName,R&&P.setAttribute("checked",!0),P.setAttribute("exportValue",D.exportValue),P.tabIndex=u,P.addEventListener("change",B=>{let{name:V,checked:G}=B.target;for(let re of this._getElementsByName(V,I)){let q=G&&re.exportValue===D.exportValue;re.domElement&&(re.domElement.checked=q),m.setValue(re.id,{value:q})}m.setValue(I,{value:G})}),P.addEventListener("resetform",B=>{let V=D.defaultFieldValue||"Off";B.target.checked=V===D.exportValue}),this.enableScripting&&this.hasJSActions&&(P.addEventListener("updatefromsandbox",B=>{let V={value(G){G.target.checked=G.detail.value!=="Off",m.setValue(I,{value:G.target.checked})}};this._dispatchEventFromSandbox(V,B)}),this._setEventListeners(P,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],B=>B.target.checked)),this._setBackgroundColor(P),this._setDefaultPropertiesFromJS(P),this.container.append(P),this.container}}class w extends y{constructor(m){super(m,{isRenderable:m.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let m=this.annotationStorage,D=this.data,I=D.id,R=m.getValue(I,{value:D.fieldValue===D.buttonValue}).value;typeof R=="string"&&(R=R!==D.buttonValue,m.setValue(I,{value:R}));let P=document.createElement("input");if(c.add(P),P.setAttribute("data-element-id",I),P.disabled=D.readOnly,this._setRequired(P,this.data.required),P.type="radio",P.name=D.fieldName,R&&P.setAttribute("checked",!0),P.tabIndex=u,P.addEventListener("change",B=>{let{name:V,checked:G}=B.target;for(let re of this._getElementsByName(V,I))m.setValue(re.id,{value:!1});m.setValue(I,{value:G})}),P.addEventListener("resetform",B=>{let V=D.defaultFieldValue;B.target.checked=V!=null&&V===D.buttonValue}),this.enableScripting&&this.hasJSActions){let B=D.buttonValue;P.addEventListener("updatefromsandbox",V=>{let G={value:re=>{let q=B===re.detail.value;for(let Y of this._getElementsByName(re.target.name)){let X=q&&Y.id===I;Y.domElement&&(Y.domElement.checked=X),m.setValue(Y.id,{value:X})}}};this._dispatchEventFromSandbox(G,V)}),this._setEventListeners(P,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],V=>V.target.checked)}return this._setBackgroundColor(P),this._setDefaultPropertiesFromJS(P),this.container.append(P),this.container}}class C extends f{constructor(m){super(m,{ignoreBorder:m.data.hasAppearance})}render(){let m=super.render();m.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(m.title=this.data.alternativeText);let D=m.lastChild;return this.enableScripting&&this.hasJSActions&&D&&(this._setDefaultPropertiesFromJS(D),D.addEventListener("updatefromsandbox",I=>{this._dispatchEventFromSandbox({},I)})),m}}class L extends y{constructor(m){super(m,{isRenderable:m.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let m=this.annotationStorage,D=this.data.id,I=m.getValue(D,{value:this.data.fieldValue}),R=document.createElement("select");c.add(R),R.setAttribute("data-element-id",D),R.disabled=this.data.readOnly,this._setRequired(R,this.data.required),R.name=this.data.fieldName,R.tabIndex=u;let P=this.data.combo&&this.data.options.length>0;this.data.combo||(R.size=this.data.options.length,this.data.multiSelect&&(R.multiple=!0)),R.addEventListener("resetform",q=>{let Y=this.data.defaultFieldValue;for(let X of R.options)X.selected=X.value===Y});for(let q of this.data.options){let Y=document.createElement("option");Y.textContent=q.displayValue,Y.value=q.exportValue,I.value.includes(q.exportValue)&&(Y.setAttribute("selected",!0),P=!1),R.append(Y)}let B=null;if(P){let q=document.createElement("option");q.value=" ",q.setAttribute("hidden",!0),q.setAttribute("selected",!0),R.prepend(q),B=()=>{q.remove(),R.removeEventListener("input",B),B=null},R.addEventListener("input",B)}let V=q=>{let Y=q?"value":"textContent",{options:X,multiple:K}=R;return K?Array.prototype.filter.call(X,ee=>ee.selected).map(ee=>ee[Y]):X.selectedIndex===-1?null:X[X.selectedIndex][Y]},G=V(!1),re=q=>{let Y=q.target.options;return Array.prototype.map.call(Y,X=>({displayValue:X.textContent,exportValue:X.value}))};return this.enableScripting&&this.hasJSActions?(R.addEventListener("updatefromsandbox",q=>{let Y={value(X){B?.();let K=X.detail.value,ee=new Set(Array.isArray(K)?K:[K]);for(let se of R.options)se.selected=ee.has(se.value);m.setValue(D,{value:V(!0)}),G=V(!1)},multipleSelection(X){R.multiple=!0},remove(X){let K=R.options,ee=X.detail.remove;K[ee].selected=!1,R.remove(ee),K.length>0&&Array.prototype.findIndex.call(K,le=>le.selected)===-1&&(K[0].selected=!0),m.setValue(D,{value:V(!0),items:re(X)}),G=V(!1)},clear(X){for(;R.length!==0;)R.remove(0);m.setValue(D,{value:null,items:[]}),G=V(!1)},insert(X){let{index:K,displayValue:ee,exportValue:se}=X.detail.insert,le=R.children[K],ue=document.createElement("option");ue.textContent=ee,ue.value=se,le?le.before(ue):R.append(ue),m.setValue(D,{value:V(!0),items:re(X)}),G=V(!1)},items(X){let{items:K}=X.detail;for(;R.length!==0;)R.remove(0);for(let ee of K){let{displayValue:se,exportValue:le}=ee,ue=document.createElement("option");ue.textContent=se,ue.value=le,R.append(ue)}R.options.length>0&&(R.options[0].selected=!0),m.setValue(D,{value:V(!0),items:re(X)}),G=V(!1)},indices(X){let K=new Set(X.detail.indices);for(let ee of X.target.options)ee.selected=K.has(ee.index);m.setValue(D,{value:V(!0)}),G=V(!1)},editable(X){X.target.disabled=!X.detail.editable}};this._dispatchEventFromSandbox(Y,q)}),R.addEventListener("input",q=>{let Y=V(!0);m.setValue(D,{value:Y}),q.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D,name:"Keystroke",value:G,changeEx:Y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(R,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],q=>q.target.value)):R.addEventListener("input",function(q){m.setValue(D,{value:V(!0)})}),this.data.combo&&this._setTextStyle(R),this._setBackgroundColor(R),this._setDefaultPropertiesFromJS(R),this.container.append(R),this.container}}class U extends g{constructor(m){let{data:D,elements:I}=m;super(m,{isRenderable:g._hasPopupData(D)}),this.elements=I}render(){this.container.classList.add("popupAnnotation");let m=new F({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),D=[];for(let I of this.elements)I.popup=m,D.push(I.data.id),I.addHighlightArea();return this.container.setAttribute("aria-controls",D.map(I=>`${r.AnnotationPrefix}${I}`).join(",")),this.container}}class F{#e=null;#t=this.#u.bind(this);#n=this.#E.bind(this);#r=this.#D.bind(this);#a=this.#y.bind(this);#o=null;#s=null;#c=null;#l=null;#i=null;#f=null;#d=!1;#h=null;#p=null;#v=null;#m=null;#g=!1;constructor({container:m,color:D,elements:I,titleObj:R,modificationDate:P,contentsObj:B,richText:V,parent:G,rect:re,parentRect:q,open:Y}){this.#s=m,this.#m=R,this.#c=B,this.#v=V,this.#i=G,this.#o=D,this.#p=re,this.#f=q,this.#l=I;let X=i.PDFDateString.toDateObject(P);X&&(this.#e=G.l10n.get("annotation_date_string",{date:X.toLocaleDateString(),time:X.toLocaleTimeString()})),this.trigger=I.flatMap(K=>K.getElementsToTriggerPopup());for(let K of this.trigger)K.addEventListener("click",this.#a),K.addEventListener("mouseenter",this.#r),K.addEventListener("mouseleave",this.#n),K.classList.add("popupTriggerArea");for(let K of I)K.container?.addEventListener("keydown",this.#t);this.#s.hidden=!0,Y&&this.#y()}render(){if(this.#h)return;let{page:{view:m},viewport:{rawDims:{pageWidth:D,pageHeight:I,pageX:R,pageY:P}}}=this.#i,B=this.#h=document.createElement("div");if(B.className="popup",this.#o){let De=B.style.outlineColor=r.Util.makeHexColor(...this.#o);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?B.style.backgroundColor=`color-mix(in srgb, ${De} 30%, white)`:B.style.backgroundColor=r.Util.makeHexColor(...this.#o.map(ct=>Math.floor(.7*(255-ct)+ct)))}let V=document.createElement("span");V.className="header";let G=document.createElement("h1");if(V.append(G),{dir:G.dir,str:G.textContent}=this.#m,B.append(V),this.#e){let De=document.createElement("span");De.classList.add("popupDate"),this.#e.then(Pe=>{De.textContent=Pe}),V.append(De)}let re=this.#c,q=this.#v;if(q?.str&&(!re?.str||re.str===q.str))d.XfaLayer.render({xfaHtml:q.html,intent:"richText",div:B}),B.lastChild.classList.add("richText","popupContent");else{let De=this._formatContents(re);B.append(De)}let Y=!!this.#f,X=Y?this.#f:this.#p;for(let De of this.#l)if(!X||r.Util.intersect(De.data.rect,X)!==null){X=De.data.rect,Y=!0;break}let K=r.Util.normalizeRect([X[0],m[3]-X[1]+m[1],X[2],m[3]-X[3]+m[1]]),se=Y?X[2]-X[0]+5:0,le=K[0]+se,ue=K[1],{style:fe}=this.#s;fe.left=`${100*(le-R)/D}%`,fe.top=`${100*(ue-P)/I}%`,this.#s.append(B)}_formatContents({str:m,dir:D}){let I=document.createElement("p");I.classList.add("popupContent"),I.dir=D;let R=m.split(/(?:\r\n?|\n)/);for(let P=0,B=R.length;P<B;++P){let V=R[P];I.append(document.createTextNode(V)),P<B-1&&I.append(document.createElement("br"))}return I}#u(m){m.altKey||m.shiftKey||m.ctrlKey||m.metaKey||(m.key==="Enter"||m.key==="Escape"&&this.#d)&&this.#y()}#y(){this.#d=!this.#d,this.#d?(this.#D(),this.#s.addEventListener("click",this.#a),this.#s.addEventListener("keydown",this.#t)):(this.#E(),this.#s.removeEventListener("click",this.#a),this.#s.removeEventListener("keydown",this.#t))}#D(){this.#h||this.render(),this.isVisible?this.#d&&this.#s.classList.add("focused"):(this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#E(){this.#s.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#g=this.isVisible,this.#g&&(this.#s.hidden=!0)}maybeShow(){this.#g&&(this.#g=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class $ extends g{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0}),this.textContent=m.data.textContent,this.textPosition=m.data.textPosition,this.annotationEditorType=r.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let m=document.createElement("div");m.classList.add("annotationTextContent"),m.setAttribute("role","comment");for(let D of this.textContent){let I=document.createElement("span");I.textContent=D,m.append(I)}this.container.append(m)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=$;class W extends g{#e=null;constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let m=this.data,{width:D,height:I}=h(m.rect),R=this.svgFactory.create(D,I,!0),P=this.#e=this.svgFactory.createElement("svg:line");return P.setAttribute("x1",m.rect[2]-m.lineCoordinates[0]),P.setAttribute("y1",m.rect[3]-m.lineCoordinates[1]),P.setAttribute("x2",m.rect[2]-m.lineCoordinates[2]),P.setAttribute("y2",m.rect[3]-m.lineCoordinates[3]),P.setAttribute("stroke-width",m.borderStyle.width||1),P.setAttribute("stroke","transparent"),P.setAttribute("fill","transparent"),R.append(P),this.container.append(R),!m.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class ne extends g{#e=null;constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let m=this.data,{width:D,height:I}=h(m.rect),R=this.svgFactory.create(D,I,!0),P=m.borderStyle.width,B=this.#e=this.svgFactory.createElement("svg:rect");return B.setAttribute("x",P/2),B.setAttribute("y",P/2),B.setAttribute("width",D-P),B.setAttribute("height",I-P),B.setAttribute("stroke-width",P||1),B.setAttribute("stroke","transparent"),B.setAttribute("fill","transparent"),R.append(B),this.container.append(R),!m.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class J extends g{#e=null;constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let m=this.data,{width:D,height:I}=h(m.rect),R=this.svgFactory.create(D,I,!0),P=m.borderStyle.width,B=this.#e=this.svgFactory.createElement("svg:ellipse");return B.setAttribute("cx",D/2),B.setAttribute("cy",I/2),B.setAttribute("rx",D/2-P/2),B.setAttribute("ry",I/2-P/2),B.setAttribute("stroke-width",P||1),B.setAttribute("stroke","transparent"),B.setAttribute("fill","transparent"),R.append(B),this.container.append(R),!m.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Q extends g{#e=null;constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let m=this.data,{width:D,height:I}=h(m.rect),R=this.svgFactory.create(D,I,!0),P=[];for(let V of m.vertices){let G=V.x-m.rect[0],re=m.rect[3]-V.y;P.push(G+","+re)}P=P.join(" ");let B=this.#e=this.svgFactory.createElement(this.svgElementName);return B.setAttribute("points",P),B.setAttribute("stroke-width",m.borderStyle.width||1),B.setAttribute("stroke","transparent"),B.setAttribute("fill","transparent"),R.append(B),this.container.append(R),!m.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class ie extends Q{constructor(m){super(m),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Z extends g{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class O extends g{#e=[];constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=r.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);let m=this.data,{width:D,height:I}=h(m.rect),R=this.svgFactory.create(D,I,!0);for(let P of m.inkLists){let B=[];for(let G of P){let re=G.x-m.rect[0],q=m.rect[3]-G.y;B.push(`${re},${q}`)}B=B.join(" ");let V=this.svgFactory.createElement(this.svgElementName);this.#e.push(V),V.setAttribute("points",B),V.setAttribute("stroke-width",m.borderStyle.width||1),V.setAttribute("stroke","transparent"),V.setAttribute("fill","transparent"),!m.popupRef&&this.hasPopupData&&this._createPopup(),R.append(V)}return this.container.append(R),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}t.InkAnnotationElement=O;class S extends g{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class b extends g{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class _ extends g{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class A extends g{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class N extends g{constructor(m){super(m,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=N;class k extends g{#e=null;constructor(m){super(m,{isRenderable:!0});let{filename:D,content:I}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(D,!0),this.content=I,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:D,content:I})}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:m,data:D}=this,I;D.hasAppearance||D.fillAlpha===0?I=document.createElement("div"):(I=document.createElement("img"),I.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(D.name)?"paperclip":"pushpin"}.svg`,D.fillAlpha&&D.fillAlpha<1&&(I.style=`filter: opacity(${Math.round(D.fillAlpha*100)}%);`)),I.addEventListener("dblclick",this.#t.bind(this)),this.#e=I;let{isMac:R}=r.FeatureTest.platform;return m.addEventListener("keydown",P=>{P.key==="Enter"&&(R?P.metaKey:P.ctrlKey)&&this.#t()}),!D.popupRef&&this.hasPopupData?this._createPopup():I.classList.add("popupTriggerArea"),m.append(I),m}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class j{#e=null;#t=null;#n=new Map;constructor({div:m,accessibilityManager:D,annotationCanvasMap:I,l10n:R,page:P,viewport:B}){this.div=m,this.#e=D,this.#t=I,this.l10n=R,this.page=P,this.viewport=B,this.zIndex=0,this.l10n||=l.NullL10n}#r(m,D){let I=m.firstChild||m;I.id=`${r.AnnotationPrefix}${D}`,this.div.append(m),this.#e?.moveElementInDOM(this.div,m,I,!1)}render(m){return ye(this,null,function*(){let{annotations:D}=m,I=this.div;(0,i.setLayerDimensions)(I,this.viewport);let R=new Map,P={data:null,layer:I,linkService:m.linkService,downloadManager:m.downloadManager,imageResourcesPath:m.imageResourcesPath||"",renderForms:m.renderForms!==!1,svgFactory:new i.DOMSVGFactory,annotationStorage:m.annotationStorage||new s.AnnotationStorage,enableScripting:m.enableScripting===!0,hasJSActions:m.hasJSActions,fieldObjects:m.fieldObjects,parent:this,elements:null};for(let B of D){if(B.noHTML)continue;let V=B.annotationType===r.AnnotationType.POPUP;if(V){let q=R.get(B.id);if(!q)continue;P.elements=q}else{let{width:q,height:Y}=h(B.rect);if(q<=0||Y<=0)continue}P.data=B;let G=p.create(P);if(!G.isRenderable)continue;if(!V&&B.popupRef){let q=R.get(B.popupRef);q?q.push(G):R.set(B.popupRef,[G])}G.annotationEditorType>0&&this.#n.set(G.data.id,G);let re=G.render();B.hidden&&(re.style.visibility="hidden"),this.#r(re,B.id)}this.#a(),yield this.l10n.translate(I)})}update({viewport:m}){let D=this.div;this.viewport=m,(0,i.setLayerDimensions)(D,{rotation:m.rotation}),this.#a(),D.hidden=!1}#a(){if(!this.#t)return;let m=this.div;for(let[D,I]of this.#t){let R=m.querySelector(`[data-annotation-id="${D}"]`);if(!R)continue;let{firstChild:P}=R;P?P.nodeName==="CANVAS"?P.replaceWith(I):P.before(I):R.append(I)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(m){return this.#n.get(m)}}t.AnnotationLayer=j},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function n(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function r(s){return Math.max(0,Math.min(255,255*s))}class i{static CMYK_G([o,l,d,u]){return["G",1-Math.min(1,.3*o+.59*d+.11*l+u)]}static G_CMYK([o]){return["CMYK",0,0,0,1-o]}static G_RGB([o]){return["RGB",o,o,o]}static G_rgb([o]){return o=r(o),[o,o,o]}static G_HTML([o]){let l=n(o);return`#${l}${l}${l}`}static RGB_G([o,l,d]){return["G",.3*o+.59*l+.11*d]}static RGB_rgb(o){return o.map(r)}static RGB_HTML(o){return`#${o.map(n).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([o,l,d,u]){return["RGB",1-Math.min(1,o+u),1-Math.min(1,d+u),1-Math.min(1,l+u)]}static CMYK_rgb([o,l,d,u]){return[r(1-Math.min(1,o+u)),r(1-Math.min(1,d+u)),r(1-Math.min(1,l+u))]}static CMYK_HTML(o){let l=this.CMYK_RGB(o).slice(1);return this.RGB_HTML(l)}static RGB_CMYK([o,l,d]){let u=1-o,a=1-l,c=1-d,h=Math.min(u,a,c);return["CMYK",u,a,c,h]}}t.ColorConverters=i},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=r;let n={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xD7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xD7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing\u2026",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};n.print_progress_percent="{{progress}}%";function r(l,d){switch(l){case"find_match_count":l=`find_match_count[${d.total===1?"one":"other"}]`;break;case"find_match_count_limit":l=`find_match_count_limit[${d.limit===1?"one":"other"}]`;break}return n[l]||""}function i(l,d){return d?l.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(u,a)=>a in d?d[a]:"{{"+a+"}}"):l}let s={getLanguage(){return ye(this,null,function*(){return"en-us"})},getDirection(){return ye(this,null,function*(){return"ltr"})},get(a){return ye(this,arguments,function*(l,d=null,u=r(l,d)){return i(u,d)})},translate(l){return ye(this,null,function*(){})}};t.NullL10n=s},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var r=n(25);class i{static setupStorage(o,l,d,u,a){let c=u.getValue(l,{value:null});switch(d.name){case"textarea":if(c.value!==null&&(o.textContent=c.value),a==="print")break;o.addEventListener("input",h=>{u.setValue(l,{value:h.target.value})});break;case"input":if(d.attributes.type==="radio"||d.attributes.type==="checkbox"){if(c.value===d.attributes.xfaOn?o.setAttribute("checked",!0):c.value===d.attributes.xfaOff&&o.removeAttribute("checked"),a==="print")break;o.addEventListener("change",h=>{u.setValue(l,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&o.setAttribute("value",c.value),a==="print")break;o.addEventListener("input",h=>{u.setValue(l,{value:h.target.value})})}break;case"select":if(c.value!==null){o.setAttribute("value",c.value);for(let h of d.children)h.attributes.value===c.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}o.addEventListener("input",h=>{let p=h.target.options,g=p.selectedIndex===-1?"":p[p.selectedIndex].value;u.setValue(l,{value:g})});break}}static setAttributes({html:o,element:l,storage:d=null,intent:u,linkService:a}){let{attributes:c}=l,h=o instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${u}`);for(let[p,g]of Object.entries(c))if(g!=null)switch(p){case"class":g.length&&o.setAttribute(p,g.join(" "));break;case"dataId":break;case"id":o.setAttribute("data-element-id",g);break;case"style":Object.assign(o.style,g);break;case"textContent":o.textContent=g;break;default:(!h||p!=="href"&&p!=="newWindow")&&o.setAttribute(p,g)}h&&a.addLinkAttributes(o,c.href,c.newWindow),d&&c.dataId&&this.setupStorage(o,c.dataId,l,d)}static render(o){let l=o.annotationStorage,d=o.linkService,u=o.xfaHtml,a=o.intent||"display",c=document.createElement(u.name);u.attributes&&this.setAttributes({html:c,element:u,intent:a,linkService:d});let h=[[u,-1,c]],p=o.div;if(p.append(c),o.viewport){let f=`matrix(${o.viewport.transform.join(",")})`;p.style.transform=f}a!=="richText"&&p.setAttribute("class","xfaLayer xfaFont");let g=[];for(;h.length>0;){let[f,v,y]=h.at(-1);if(v+1===f.children.length){h.pop();continue}let E=f.children[++h.at(-1)[1]];if(E===null)continue;let{name:M}=E;if(M==="#text"){let w=document.createTextNode(E.value);g.push(w),y.append(w);continue}let T=E?.attributes?.xmlns?document.createElementNS(E.attributes.xmlns,M):document.createElement(M);if(y.append(T),E.attributes&&this.setAttributes({html:T,element:E,storage:l,intent:a,linkService:d}),E.children&&E.children.length>0)h.push([E,-1,T]);else if(E.value){let w=document.createTextNode(E.value);r.XfaText.shouldBuildText(M)&&g.push(w),T.append(w)}}for(let f of p.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:g}}static update(o){let l=`matrix(${o.viewport.transform.join(",")})`;o.div.style.transform=l,o.div.hidden=!1}}t.XfaLayer=i},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var r=n(1),i=n(4),s=n(29),o=n(6),l=n(5);let d=(()=>{class u extends i.AnnotationEditor{#e=0;#t=0;#n=this.canvasPointermove.bind(this);#r=this.canvasPointerleave.bind(this);#a=this.canvasPointerup.bind(this);#o=this.canvasPointerdown.bind(this);#s=new Path2D;#c=!1;#l=!1;#i=!1;#f=null;#d=0;#h=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(c){super(ke(ce({},c),{name:"inkEditor"})),this.color=c.color||null,this.thickness=c.thickness||null,this.opacity=c.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(c){i.AnnotationEditor.initialize(c,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(c,h){switch(c){case r.AnnotationEditorParamsType.INK_THICKNESS:u._defaultThickness=h;break;case r.AnnotationEditorParamsType.INK_COLOR:u._defaultColor=h;break;case r.AnnotationEditorParamsType.INK_OPACITY:u._defaultOpacity=h/100;break}}updateParams(c,h){switch(c){case r.AnnotationEditorParamsType.INK_THICKNESS:this.#v(h);break;case r.AnnotationEditorParamsType.INK_COLOR:this.#m(h);break;case r.AnnotationEditorParamsType.INK_OPACITY:this.#g(h);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,u._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,u._defaultColor||i.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(u._defaultOpacity*100)]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||u._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,this.color||u._defaultColor||i.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??u._defaultOpacity))]]}#v(c){let h=this.thickness;this.addCommands({cmd:()=>{this.thickness=c,this.#S()},undo:()=>{this.thickness=h,this.#S()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(c){let h=this.color;this.addCommands({cmd:()=>{this.color=c,this.#b()},undo:()=>{this.color=h,this.#b()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(c){c/=100;let h=this.opacity;this.addCommands({cmd:()=>{this.opacity=c,this.#b()},undo:()=>{this.opacity=h,this.#b()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#M(),this.#x()),this.isAttachedToDOM||(this.parent.add(this),this.#_()),this.#S()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(c){!this.parent&&c?this._uiManager.removeShouldRescale(this):this.parent&&c===null&&this._uiManager.addShouldRescale(this),super.setParent(c)}onScaleChanging(){let[c,h]=this.parentDimensions,p=this.width*c,g=this.height*h;this.setDimensions(p,g)}enableEditMode(){this.#c||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#o))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#o))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#u(){let{parentRotation:c,parentDimensions:[h,p]}=this;switch(c){case 90:return[0,p,p,h];case 180:return[h,p,h,p];case 270:return[h,0,p,h];default:return[0,0,h,p]}}#y(){let{ctx:c,color:h,opacity:p,thickness:g,parentScale:f,scaleFactor:v}=this;c.lineWidth=g*f/v,c.lineCap="round",c.lineJoin="round",c.miterLimit=10,c.strokeStyle=`${h}${(0,l.opacityToHex)(p)}`}#D(c,h){this.canvas.addEventListener("contextmenu",o.noContextMenu),this.canvas.addEventListener("pointerleave",this.#r),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#a),this.canvas.removeEventListener("pointerdown",this.#o),this.isEditing=!0,this.#i||(this.#i=!0,this.#_(),this.thickness||=u._defaultThickness,this.color||=u._defaultColor||i.AnnotationEditor._defaultLineColor,this.opacity??=u._defaultOpacity),this.currentPath.push([c,h]),this.#l=!1,this.#y(),this.#p=()=>{this.#k(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#E(c,h){let[p,g]=this.currentPath.at(-1);if(this.currentPath.length>1&&c===p&&h===g)return;let f=this.currentPath,v=this.#s;if(f.push([c,h]),this.#l=!0,f.length<=2){v.moveTo(...f[0]),v.lineTo(c,h);return}f.length===3&&(this.#s=v=new Path2D,v.moveTo(...f[0])),this.#O(v,...f.at(-3),...f.at(-2),c,h)}#A(){if(this.currentPath.length===0)return;let c=this.currentPath.at(-1);this.#s.lineTo(...c)}#T(c,h){this.#p=null,c=Math.min(Math.max(c,0),this.canvas.width),h=Math.min(Math.max(h,0),this.canvas.height),this.#E(c,h),this.#A();let p;if(this.currentPath.length!==1)p=this.#F();else{let E=[c,h];p=[[E,E.slice(),E.slice(),E]]}let g=this.#s,f=this.currentPath;this.currentPath=[],this.#s=new Path2D;let v=()=>{this.allRawPaths.push(f),this.paths.push(p),this.bezierPath2D.push(g),this.rebuild()},y=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#M(),this.#x()),this.#S())};this.addCommands({cmd:v,undo:y,mustExec:!0})}#k(){if(!this.#l)return;this.#l=!1;let c=Math.ceil(this.thickness*this.parentScale),h=this.currentPath.slice(-3),p=h.map(T=>T[0]),g=h.map(T=>T[1]),f=Math.min(...p)-c,v=Math.max(...p)+c,y=Math.min(...g)-c,E=Math.max(...g)+c,{ctx:M}=this;M.save(),M.clearRect(0,0,this.canvas.width,this.canvas.height);for(let T of this.bezierPath2D)M.stroke(T);M.stroke(this.#s),M.restore()}#O(c,h,p,g,f,v,y){let E=(h+g)/2,M=(p+f)/2,T=(g+v)/2,w=(f+y)/2;c.bezierCurveTo(E+2*(g-E)/3,M+2*(f-M)/3,T+2*(g-T)/3,w+2*(f-w)/3,T,w)}#F(){let c=this.currentPath;if(c.length<=2)return[[c[0],c[0],c.at(-1),c.at(-1)]];let h=[],p,[g,f]=c[0];for(p=1;p<c.length-2;p++){let[C,L]=c[p],[U,F]=c[p+1],$=(C+U)/2,W=(L+F)/2,ne=[g+2*(C-g)/3,f+2*(L-f)/3],J=[$+2*(C-$)/3,W+2*(L-W)/3];h.push([[g,f],ne,J,[$,W]]),[g,f]=[$,W]}let[v,y]=c[p],[E,M]=c[p+1],T=[g+2*(v-g)/3,f+2*(y-f)/3],w=[E+2*(v-E)/3,M+2*(y-M)/3];return h.push([[g,f],T,w,[E,M]]),h}#b(){if(this.isEmpty()){this.#C();return}this.#y();let{canvas:c,ctx:h}=this;h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,c.width,c.height),this.#C();for(let p of this.bezierPath2D)h.stroke(p)}commit(){this.#c||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#c=!0,this.div.classList.add("disabled"),this.#S(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(c){this._focusEventsAllowed&&(super.focusin(c),this.enableEditMode())}canvasPointerdown(c){c.button!==0||!this.isInEditMode()||this.#c||(this.setInForeground(),c.preventDefault(),c.type!=="mouse"&&this.div.focus(),this.#D(c.offsetX,c.offsetY))}canvasPointermove(c){c.preventDefault(),this.#E(c.offsetX,c.offsetY)}canvasPointerup(c){c.preventDefault(),this.#N(c)}canvasPointerleave(c){this.#N(c)}#N(c){this.canvas.removeEventListener("pointerleave",this.#r),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#a),this.canvas.addEventListener("pointerdown",this.#o),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",o.noContextMenu)},10),this.#T(c.offsetX,c.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#M(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",i.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(c=>this.canvas?.setAttribute("aria-label",c)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#x(){this.#f=new ResizeObserver(c=>{let h=c[0].contentRect;h.width&&h.height&&this.setDimensions(h.width,h.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#c}render(){if(this.div)return this.div;let c,h;this.width&&(c=this.x,h=this.y),super.render(),i.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(y=>this.div?.setAttribute("aria-label",y));let[p,g,f,v]=this.#u();if(this.setAt(p,g,0,0),this.setDims(f,v),this.#M(),this.width){let[y,E]=this.parentDimensions;this.setAspectRatio(this.width*y,this.height*E),this.setAt(c*y,h*E,this.width*y,this.height*E),this.#i=!0,this.#_(),this.setDims(this.width*y,this.height*E),this.#b(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#x(),this.div}#_(){if(!this.#i)return;let[c,h]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*c),this.canvas.height=Math.ceil(this.height*h),this.#C()}setDimensions(c,h){let p=Math.round(c),g=Math.round(h);if(this.#d===p&&this.#h===g)return;this.#d=p,this.#h=g,this.canvas.style.visibility="hidden";let[f,v]=this.parentDimensions;this.width=c/f,this.height=h/v,this.fixAndSetPosition(),this.#c&&this.#I(c,h),this.#_(),this.#b(),this.canvas.style.visibility="visible",this.fixDims()}#I(c,h){let p=this.#P(),g=(c-p)/this.#t,f=(h-p)/this.#e;this.scaleFactor=Math.min(g,f)}#C(){let c=this.#P()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+c,this.translationY*this.scaleFactor+c)}static#L(c){let h=new Path2D;for(let p=0,g=c.length;p<g;p++){let[f,v,y,E]=c[p];p===0&&h.moveTo(...f),h.bezierCurveTo(v[0],v[1],y[0],y[1],E[0],E[1])}return h}static#j(c,h,p){let[g,f,v,y]=h;switch(p){case 0:for(let E=0,M=c.length;E<M;E+=2)c[E]+=g,c[E+1]=y-c[E+1];break;case 90:for(let E=0,M=c.length;E<M;E+=2){let T=c[E];c[E]=c[E+1]+g,c[E+1]=T+f}break;case 180:for(let E=0,M=c.length;E<M;E+=2)c[E]=v-c[E],c[E+1]+=f;break;case 270:for(let E=0,M=c.length;E<M;E+=2){let T=c[E];c[E]=v-c[E+1],c[E+1]=y-T}break;default:throw new Error("Invalid rotation")}return c}static#B(c,h,p){let[g,f,v,y]=h;switch(p){case 0:for(let E=0,M=c.length;E<M;E+=2)c[E]-=g,c[E+1]=y-c[E+1];break;case 90:for(let E=0,M=c.length;E<M;E+=2){let T=c[E];c[E]=c[E+1]-f,c[E+1]=T-g}break;case 180:for(let E=0,M=c.length;E<M;E+=2)c[E]=v-c[E],c[E+1]-=f;break;case 270:for(let E=0,M=c.length;E<M;E+=2){let T=c[E];c[E]=y-c[E+1],c[E+1]=v-T}break;default:throw new Error("Invalid rotation")}return c}#U(c,h,p,g){let f=[],v=this.thickness/2,y=c*h+v,E=c*p+v;for(let M of this.paths){let T=[],w=[];for(let C=0,L=M.length;C<L;C++){let[U,F,$,W]=M[C],ne=c*U[0]+y,J=c*U[1]+E,Q=c*F[0]+y,ie=c*F[1]+E,Z=c*$[0]+y,O=c*$[1]+E,S=c*W[0]+y,b=c*W[1]+E;C===0&&(T.push(ne,J),w.push(ne,J)),T.push(Q,ie,Z,O,S,b),w.push(Q,ie),C===L-1&&w.push(S,b)}f.push({bezier:u.#j(T,g,this.rotation),points:u.#j(w,g,this.rotation)})}return f}#R(){let c=1/0,h=-1/0,p=1/0,g=-1/0;for(let f of this.paths)for(let[v,y,E,M]of f){let T=r.Util.bezierBoundingBox(...v,...y,...E,...M);c=Math.min(c,T[0]),p=Math.min(p,T[1]),h=Math.max(h,T[2]),g=Math.max(g,T[3])}return[c,p,h,g]}#P(){return this.#c?Math.ceil(this.thickness*this.parentScale):0}#S(c=!1){if(this.isEmpty())return;if(!this.#c){this.#b();return}let h=this.#R(),p=this.#P();this.#t=Math.max(i.AnnotationEditor.MIN_SIZE,h[2]-h[0]),this.#e=Math.max(i.AnnotationEditor.MIN_SIZE,h[3]-h[1]);let g=Math.ceil(p+this.#t*this.scaleFactor),f=Math.ceil(p+this.#e*this.scaleFactor),[v,y]=this.parentDimensions;this.width=g/v,this.height=f/y,this.setAspectRatio(g,f);let E=this.translationX,M=this.translationY;this.translationX=-h[0],this.translationY=-h[1],this.#_(),this.#b(),this.#d=g,this.#h=f,this.setDims(g,f);let T=c?p/this.scaleFactor/2:0;this.translate(E-this.translationX-T,M-this.translationY-T)}static deserialize(c,h,p){if(c instanceof s.InkAnnotationElement)return null;let g=super.deserialize(c,h,p);g.thickness=c.thickness,g.color=r.Util.makeHexColor(...c.color),g.opacity=c.opacity;let[f,v]=g.pageDimensions,y=g.width*f,E=g.height*v,M=g.parentScale,T=c.thickness/2;g.#c=!0,g.#d=Math.round(y),g.#h=Math.round(E);let{paths:w,rect:C,rotation:L}=c;for(let{bezier:F}of w){F=u.#B(F,C,L);let $=[];g.paths.push($);let W=M*(F[0]-T),ne=M*(F[1]-T);for(let Q=2,ie=F.length;Q<ie;Q+=6){let Z=M*(F[Q]-T),O=M*(F[Q+1]-T),S=M*(F[Q+2]-T),b=M*(F[Q+3]-T),_=M*(F[Q+4]-T),A=M*(F[Q+5]-T);$.push([[W,ne],[Z,O],[S,b],[_,A]]),W=_,ne=A}let J=this.#L($);g.bezierPath2D.push(J)}let U=g.#R();return g.#t=Math.max(i.AnnotationEditor.MIN_SIZE,U[2]-U[0]),g.#e=Math.max(i.AnnotationEditor.MIN_SIZE,U[3]-U[1]),g.#I(y,E),g}serialize(){if(this.isEmpty())return null;let c=this.getRect(0,0),h=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:r.AnnotationEditorType.INK,color:h,thickness:this.thickness,opacity:this.opacity,paths:this.#U(this.scaleFactor/this.parentScale,this.translationX,this.translationY,c),pageIndex:this.pageIndex,rect:c,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}return u})();t.InkEditor=d},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var r=n(1),i=n(4),s=n(6),o=n(29);let l=(()=>{class d extends i.AnnotationEditor{#e=null;#t=null;#n=null;#r=null;#a=null;#o=null;#s=null;#c=null;#l=!1;#i=!1;static _type="stamp";constructor(a){super(ke(ce({},a),{name:"stampEditor"})),this.#r=a.bitmapUrl,this.#a=a.bitmapFile}static initialize(a){i.AnnotationEditor.initialize(a)}static get supportedTypes(){let a=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,r.shadow)(this,"supportedTypes",a.map(c=>`image/${c}`))}static get supportedTypesStr(){return(0,r.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(a){return this.supportedTypes.includes(a)}static paste(a,c){c.pasteEditor(r.AnnotationEditorType.STAMP,{bitmapFile:a.getAsFile()})}#f(a,c=!1){if(!a){this.remove();return}this.#e=a.bitmap,c||(this.#t=a.id,this.#l=a.isSvg),this.#p()}#d(){this.#n=null,this._uiManager.enableWaiting(!1),this.#o&&this.div.focus()}#h(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(c=>this.#f(c,!0)).finally(()=>this.#d());return}if(this.#r){let c=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(c).then(h=>this.#f(h)).finally(()=>this.#d());return}if(this.#a){let c=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(c).then(h=>this.#f(h)).finally(()=>this.#d());return}let a=document.createElement("input");a.type="file",a.accept=d.supportedTypesStr,this.#n=new Promise(c=>{a.addEventListener("change",()=>ye(this,null,function*(){if(!a.files||a.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let h=yield this._uiManager.imageManager.getFromFile(a.files[0]);this.#f(h)}c()})),a.addEventListener("cancel",()=>{this.remove(),c()})}).finally(()=>this.#d()),a.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#o?.remove(),this.#o=null,this.#s?.disconnect(),this.#s=null),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#h();return}super.rebuild(),this.div!==null&&(this.#t&&this.#h(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#r||this.#a)}get isResizable(){return!0}render(){if(this.div)return this.div;let a,c;if(this.width&&(a=this.x,c=this.y),super.render(),this.div.hidden=!0,this.#e?this.#p():this.#h(),this.width){let[h,p]=this.parentDimensions;this.setAt(a*h,c*p,this.width*h,this.height*p)}return this.div}#p(){let{div:a}=this,{width:c,height:h}=this.#e,[p,g]=this.pageDimensions,f=.75;if(this.width)c=this.width*p,h=this.height*g;else if(c>f*p||h>f*g){let M=Math.min(f*p/c,f*g/h);c*=M,h*=M}let[v,y]=this.parentDimensions;this.setDims(c*v/p,h*y/g),this._uiManager.enableWaiting(!1);let E=this.#o=document.createElement("canvas");a.append(E),a.hidden=!1,this.#g(c,h),this.#y(),this.#i||(this.parent.addUndoableEditor(this),this.#i=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#v(a,c){let[h,p]=this.parentDimensions;this.width=a/h,this.height=c/p,this.setDims(a,c),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#c!==null&&clearTimeout(this.#c);let g=200;this.#c=setTimeout(()=>{this.#c=null,this.#g(a,c)},g)}#m(a,c){let{width:h,height:p}=this.#e,g=h,f=p,v=this.#e;for(;g>2*a||f>2*c;){let y=g,E=f;g>2*a&&(g=g>=16384?Math.floor(g/2)-1:Math.ceil(g/2)),f>2*c&&(f=f>=16384?Math.floor(f/2)-1:Math.ceil(f/2));let M=new OffscreenCanvas(g,f);M.getContext("2d").drawImage(v,0,0,y,E,0,0,g,f),v=M.transferToImageBitmap()}return v}#g(a,c){a=Math.ceil(a),c=Math.ceil(c);let h=this.#o;if(!h||h.width===a&&h.height===c)return;h.width=a,h.height=c;let p=this.#l?this.#e:this.#m(a,c),g=h.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(p,0,0,p.width,p.height,0,0,a,c)}#u(a){if(a){if(this.#l){let p=this._uiManager.imageManager.getSvgUrl(this.#t);if(p)return p}let c=document.createElement("canvas");return{width:c.width,height:c.height}=this.#e,c.getContext("2d").drawImage(this.#e,0,0),c.toDataURL()}if(this.#l){let[c,h]=this.pageDimensions,p=Math.round(this.width*c*s.PixelsPerInch.PDF_TO_CSS_UNITS),g=Math.round(this.height*h*s.PixelsPerInch.PDF_TO_CSS_UNITS),f=new OffscreenCanvas(p,g);return f.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,p,g),f.transferToImageBitmap()}return structuredClone(this.#e)}#y(){this.#s=new ResizeObserver(a=>{let c=a[0].contentRect;c.width&&c.height&&this.#v(c.width,c.height)}),this.#s.observe(this.div)}static deserialize(a,c,h){if(a instanceof o.StampAnnotationElement)return null;let p=super.deserialize(a,c,h),{rect:g,bitmapUrl:f,bitmapId:v,isSvg:y,accessibilityData:E}=a;v&&h.imageManager.isValidId(v)?p.#t=v:p.#r=f,p.#l=y;let[M,T]=p.pageDimensions;return p.width=(g[2]-g[0])/M,p.height=(g[3]-g[1])/T,E&&(p.altTextData=E),p}serialize(a=!1,c=null){if(this.isEmpty())return null;let h={annotationType:r.AnnotationEditorType.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#l,structTreeParentId:this._structTreeParentId};if(a)return h.bitmapUrl=this.#u(!0),h.accessibilityData=this.altTextData,h;let{decorative:p,altText:g}=this.altTextData;if(!p&&g&&(h.accessibilityData={type:"Figure",alt:g}),c===null)return h;c.stamps||=new Map;let f=this.#l?(h.rect[2]-h.rect[0])*(h.rect[3]-h.rect[1]):null;if(!c.stamps.has(this.#t))c.stamps.set(this.#t,{area:f,serialized:h}),h.bitmap=this.#u(!1);else if(this.#l){let v=c.stamps.get(this.#t);f>v.area&&(v.area=f,v.serialized.bitmap.close(),v.serialized.bitmap=this.#u(!1))}return h}}return d})();t.StampEditor=l}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return s.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return o.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return l.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"DOMSVGFactory",{enumerable:!0,get:function(){return r.DOMSVGFactory}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return d.GlobalWorkerOptions}}),Object.defineProperty(e,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return n.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return u.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return r.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(e,"noContextMenu",{enumerable:!0,get:function(){return r.noContextMenu}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return i.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return r.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return i.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return n.version}});var t=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),r=__w_pdfjs_require__(6),i=__w_pdfjs_require__(26),s=__w_pdfjs_require__(27),o=__w_pdfjs_require__(5),l=__w_pdfjs_require__(29),d=__w_pdfjs_require__(14),u=__w_pdfjs_require__(32);let a="3.11.174",c="ce8716743"})(),__webpack_exports__})())});var Mo=null;var To=1,Gl=Symbol("SIGNAL");function Te(e){let t=Mo;return Mo=e,t}function ql(){return Mo}var xo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Kp(e){if(!(Oo(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===To)){if(!e.producerMustRecompute(e)&&!Po(e)){e.dirty=!1,e.lastCleanEpoch=To;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=To}}function Ro(e){return e&&(e.nextProducerIndex=0),Te(e)}function Yl(e,t){if(Te(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Oo(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)ko(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Po(e){Fo(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Kp(n),r!==n.version))return!0}return!1}function No(e){if(Fo(e),Oo(e))for(let t=0;t<e.producerNode.length;t++)ko(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function ko(e,t){if(Zp(e),e.liveConsumerNode.length===1&&Qp(e))for(let r=0;r<e.producerNode.length;r++)ko(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];Fo(i),i.producerIndexOfThis[r]=t}}function Oo(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Fo(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Zp(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Qp(e){return e.producerNode!==void 0}function Jp(){throw new Error}var eg=Jp;function Xl(e){eg=e}function ge(e){return typeof e=="function"}function Gn(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ni=Gn(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Fr(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Be=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ge(r))try{r()}catch(s){t=s instanceof Ni?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Kl(s)}catch(o){t=t??[],o instanceof Ni?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Ni(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Kl(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Fr(n,t)}remove(t){let{_finalizers:n}=this;n&&Fr(n,t),t instanceof e&&t._removeParent(this)}};Be.EMPTY=(()=>{let e=new Be;return e.closed=!0,e})();var Lo=Be.EMPTY;function ki(e){return e instanceof Be||e&&"closed"in e&&ge(e.remove)&&ge(e.add)&&ge(e.unsubscribe)}function Kl(e){ge(e)?e():e.unsubscribe()}var Et={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var qn={setTimeout(e,t,...n){let{delegate:r}=qn;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=qn;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Oi(e){qn.setTimeout(()=>{let{onUnhandledError:t}=Et;if(t)t(e);else throw e})}function Lr(){}var Zl=jo("C",void 0,void 0);function Ql(e){return jo("E",void 0,e)}function Jl(e){return jo("N",e,void 0)}function jo(e,t,n){return{kind:e,value:t,error:n}}var yn=null;function Yn(e){if(Et.useDeprecatedSynchronousErrorHandling){let t=!yn;if(t&&(yn={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=yn;if(yn=null,n)throw r}}else e()}function eu(e){Et.useDeprecatedSynchronousErrorHandling&&yn&&(yn.errorThrown=!0,yn.error=e)}var bn=class extends Be{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,ki(t)&&t.add(this)):this.destination=rg}static create(t,n,r){return new Xn(t,n,r)}next(t){this.isStopped?Uo(Jl(t),this):this._next(t)}error(t){this.isStopped?Uo(Ql(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Uo(Zl,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},tg=Function.prototype.bind;function Bo(e,t){return tg.call(e,t)}var Vo=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Fi(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Fi(r)}else Fi(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Fi(n)}}},Xn=class extends bn{constructor(t,n,r){super();let i;if(ge(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Et.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Bo(t.next,s),error:t.error&&Bo(t.error,s),complete:t.complete&&Bo(t.complete,s)}):i=t}this.destination=new Vo(i)}};function Fi(e){Et.useDeprecatedSynchronousErrorHandling?eu(e):Oi(e)}function ng(e){throw e}function Uo(e,t){let{onStoppedNotification:n}=Et;n&&qn.setTimeout(()=>n(e,t))}var rg={closed:!0,next:Lr,error:ng,complete:Lr};var Kn=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ut(e){return e}function Ho(...e){return $o(e)}function $o(e){return e.length===0?ut:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var Re=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=sg(n)?n:new Xn(n,r,i);return Yn(()=>{let{operator:o,source:l}=this;s.add(o?o.call(s,l):l?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=tu(r),new r((i,s)=>{let o=new Xn({next:l=>{try{n(l)}catch(d){s(d),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Kn](){return this}pipe(...n){return $o(n)(this)}toPromise(n){return n=tu(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return e.create=t=>new e(t),e})();function tu(e){var t;return(t=e??Et.Promise)!==null&&t!==void 0?t:Promise}function ig(e){return e&&ge(e.next)&&ge(e.error)&&ge(e.complete)}function sg(e){return e&&e instanceof bn||ig(e)&&ki(e)}function zo(e){return ge(e?.lift)}function Ae(e){return t=>{if(zo(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ie(e,t,n,r,i){return new Wo(e,t,n,r,i)}var Wo=class extends bn{constructor(t,n,r,i,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(l){try{n(l)}catch(d){t.error(d)}}:super._next,this._error=i?function(l){try{i(l)}catch(d){t.error(d)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Zn(){return Ae((e,t)=>{let n=null;e._refCount++;let r=Ie(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let i=e._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var Qn=class extends Re{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,zo(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Be;let n=this.getSubject();t.add(this.source.subscribe(Ie(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Be.EMPTY)}return t}refCount(){return Zn()(this)}};var nu=Gn(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var rt=(()=>{class e extends Re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Li(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new nu}next(n){Yn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Yn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Yn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Lo:(this.currentObservers=null,s.push(n),new Be(()=>{this.currentObservers=null,Fr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new Re;return n.source=this,n}}return e.create=(t,n)=>new Li(t,n),e})(),Li=class extends rt{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Lo}};var Ye=class extends rt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var dt=new Re(e=>e.complete());function ru(e){return e&&ge(e.schedule)}function iu(e){return e[e.length-1]}function su(e){return ge(iu(e))?e.pop():void 0}function on(e){return ru(iu(e))?e.pop():void 0}function au(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(a){try{u(r.next(a))}catch(c){o(c)}}function d(a){try{u(r.throw(a))}catch(c){o(c)}}function u(a){a.done?s(a.value):i(a.value).then(l,d)}u((r=r.apply(e,t||[])).next())})}function ou(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _n(e){return this instanceof _n?(this.v=e,this):new _n(e)}function cu(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(g){return Promise.resolve(g).then(p,c)}}function l(p,g){r[p]&&(i[p]=function(f){return new Promise(function(v,y){s.push([p,f,v,y])>1||d(p,f)})},g&&(i[p]=g(i[p])))}function d(p,g){try{u(r[p](g))}catch(f){h(s[0][3],f)}}function u(p){p.value instanceof _n?Promise.resolve(p.value.v).then(a,c):h(s[0][2],p)}function a(p){d("next",p)}function c(p){d("throw",p)}function h(p,g){p(g),s.shift(),s.length&&d(s[0][0],s[0][1])}}function lu(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof ou=="function"?ou(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(l,d){o=e[s](o),i(l,d,o.done,o.value)})}}function i(s,o,l,d){Promise.resolve(d).then(function(u){s({value:u,done:l})},o)}}var ji=e=>e&&typeof e.length=="number"&&typeof e!="function";function Bi(e){return ge(e?.then)}function Ui(e){return ge(e[Kn])}function Vi(e){return Symbol.asyncIterator&&ge(e?.[Symbol.asyncIterator])}function Hi(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function og(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var $i=og();function zi(e){return ge(e?.[$i])}function Wi(e){return cu(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield _n(n.read());if(i)return yield _n(void 0);yield yield _n(r)}}finally{n.releaseLock()}})}function Gi(e){return ge(e?.getReader)}function We(e){if(e instanceof Re)return e;if(e!=null){if(Ui(e))return ag(e);if(ji(e))return cg(e);if(Bi(e))return lg(e);if(Vi(e))return uu(e);if(zi(e))return ug(e);if(Gi(e))return dg(e)}throw Hi(e)}function ag(e){return new Re(t=>{let n=e[Kn]();if(ge(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function cg(e){return new Re(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function lg(e){return new Re(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Oi)})}function ug(e){return new Re(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function uu(e){return new Re(t=>{hg(e,t).catch(n=>t.error(n))})}function dg(e){return uu(Wi(e))}function hg(e,t){var n,r,i,s;return au(this,void 0,void 0,function*(){try{for(n=lu(e);r=yield n.next(),!r.done;){let o=r.value;if(t.next(o),t.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}t.complete()})}function at(e,t,n,r=0,i=!1){let s=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function qi(e,t=0){return Ae((n,r)=>{n.subscribe(Ie(r,i=>at(r,e,()=>r.next(i),t),()=>at(r,e,()=>r.complete(),t),i=>at(r,e,()=>r.error(i),t)))})}function Yi(e,t=0){return Ae((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function du(e,t){return We(e).pipe(Yi(t),qi(t))}function hu(e,t){return We(e).pipe(Yi(t),qi(t))}function fu(e,t){return new Re(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function pu(e,t){return new Re(n=>{let r;return at(n,t,()=>{r=e[$i](),at(n,t,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>ge(r?.return)&&r.return()})}function Xi(e,t){if(!e)throw new Error("Iterable cannot be null");return new Re(n=>{at(n,t,()=>{let r=e[Symbol.asyncIterator]();at(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function gu(e,t){return Xi(Wi(e),t)}function mu(e,t){if(e!=null){if(Ui(e))return du(e,t);if(ji(e))return fu(e,t);if(Bi(e))return hu(e,t);if(Vi(e))return Xi(e,t);if(zi(e))return pu(e,t);if(Gi(e))return gu(e,t)}throw Hi(e)}function Ve(e,t){return t?mu(e,t):We(e)}function me(...e){let t=on(e);return Ve(e,t)}function Jn(e,t){let n=ge(e)?e:()=>e,r=i=>i.error(n());return new Re(t?i=>t.schedule(r,0,i):r)}function Go(e){return!!e&&(e instanceof Re||ge(e.lift)&&ge(e.subscribe))}var $t=Gn(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Ce(e,t){return Ae((n,r)=>{let i=0;n.subscribe(Ie(r,s=>{r.next(e.call(t,s,i++))}))})}var{isArray:fg}=Array;function pg(e,t){return fg(t)?e(...t):e(t)}function vu(e){return Ce(t=>pg(e,t))}var{isArray:gg}=Array,{getPrototypeOf:mg,prototype:vg,keys:yg}=Object;function yu(e){if(e.length===1){let t=e[0];if(gg(t))return{args:t,keys:null};if(bg(t)){let n=yg(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function bg(e){return e&&typeof e=="object"&&mg(e)===vg}function bu(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function Ki(...e){let t=on(e),n=su(e),{args:r,keys:i}=yu(e);if(r.length===0)return Ve([],t);let s=new Re(_g(r,t,i?o=>bu(i,o):ut));return n?s.pipe(vu(n)):s}function _g(e,t,n=ut){return r=>{_u(t,()=>{let{length:i}=e,s=new Array(i),o=i,l=i;for(let d=0;d<i;d++)_u(t,()=>{let u=Ve(e[d],t),a=!1;u.subscribe(Ie(r,c=>{s[d]=c,a||(a=!0,l--),l||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function _u(e,t,n){e?at(n,e,t):t()}function wu(e,t,n,r,i,s,o,l){let d=[],u=0,a=0,c=!1,h=()=>{c&&!d.length&&!u&&t.complete()},p=f=>u<r?g(f):d.push(f),g=f=>{s&&t.next(f),u++;let v=!1;We(n(f,a++)).subscribe(Ie(t,y=>{i?.(y),s?p(y):t.next(y)},()=>{v=!0},void 0,()=>{if(v)try{for(u--;d.length&&u<r;){let y=d.shift();o?at(t,o,()=>g(y)):g(y)}h()}catch(y){t.error(y)}}))};return e.subscribe(Ie(t,p,()=>{c=!0,h()})),()=>{l?.()}}function He(e,t,n=1/0){return ge(t)?He((r,i)=>Ce((s,o)=>t(r,s,i,o))(We(e(r,i))),n):(typeof t=="number"&&(n=t),Ae((r,i)=>wu(r,i,e,n)))}function qo(e=1/0){return He(ut,e)}function Eu(){return qo(1)}function er(...e){return Eu()(Ve(e,on(e)))}function Zi(e){return new Re(t=>{We(e()).subscribe(t)})}function Dt(e,t){return Ae((n,r)=>{let i=0;n.subscribe(Ie(r,s=>e.call(t,s,i++)&&r.next(s)))})}function an(e){return Ae((t,n)=>{let r=null,i=!1,s;r=t.subscribe(Ie(n,void 0,void 0,o=>{s=We(e(o,an(e)(t))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Du(e,t,n,r,i){return(s,o)=>{let l=n,d=t,u=0;s.subscribe(Ie(o,a=>{let c=u++;d=l?e(d,a,c):(l=!0,a),r&&o.next(d)},i&&(()=>{l&&o.next(d),o.complete()})))}}function tr(e,t){return ge(t)?He(e,t,1):He(e,1)}function cn(e){return Ae((t,n)=>{let r=!1;t.subscribe(Ie(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function zt(e){return e<=0?()=>dt:Ae((t,n)=>{let r=0;t.subscribe(Ie(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Yo(e){return Ce(()=>e)}function Qi(e=wg){return Ae((t,n)=>{let r=!1;t.subscribe(Ie(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function wg(){return new $t}function jr(e){return Ae((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Nt(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Dt((i,s)=>e(i,s,r)):ut,zt(1),n?cn(t):Qi(()=>new $t))}function nr(e){return e<=0?()=>dt:Ae((t,n)=>{let r=[];t.subscribe(Ie(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Xo(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Dt((i,s)=>e(i,s,r)):ut,nr(1),n?cn(t):Qi(()=>new $t))}function Ko(e,t){return Ae(Du(e,t,arguments.length>=2,!0))}function Zo(...e){let t=on(e);return Ae((n,r)=>{(t?er(e,n,t):er(e,n)).subscribe(r)})}function Ct(e,t){return Ae((n,r)=>{let i=null,s=0,o=!1,l=()=>o&&!i&&r.complete();n.subscribe(Ie(r,d=>{i?.unsubscribe();let u=0,a=s++;We(e(d,a)).subscribe(i=Ie(r,c=>r.next(t?t(d,c,a,u++):c),()=>{i=null,l()}))},()=>{o=!0,l()}))})}function Qo(e){return Ae((t,n)=>{We(e).subscribe(Ie(n,()=>n.complete(),Lr)),!n.closed&&t.subscribe(n)})}function Xe(e,t,n){let r=ge(e)||t||n?{next:e,error:t,complete:n}:e;return r?Ae((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let l=!0;i.subscribe(Ie(s,d=>{var u;(u=r.next)===null||u===void 0||u.call(r,d),s.next(d)},()=>{var d;l=!1,(d=r.complete)===null||d===void 0||d.call(r),s.complete()},d=>{var u;l=!1,(u=r.error)===null||u===void 0||u.call(r,d),s.error(d)},()=>{var d,u;l&&((d=r.unsubscribe)===null||d===void 0||d.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):ut}var ld="https://g.co/ng/security#xss",de=class extends Error{constructor(t,n){super(rc(t,n)),this.code=t}};function rc(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function Qr(e){return{toString:e}.toString()}var Ji="__parameters__";function Eg(e){return function(...n){if(e){let r=e(...n);for(let i in r)this[i]=r[i]}}}function ud(e,t,n){return Qr(()=>{let r=Eg(t);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return l.annotation=o,l;function l(d,u,a){let c=d.hasOwnProperty(Ji)?d[Ji]:Object.defineProperty(d,Ji,{value:[]})[Ji];for(;c.length<=a;)c.push(null);return(c[a]=c[a]||[]).push(o),d}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}function Ne(e){for(let t in e)if(e[t]===Ne)return t;throw Error("Could not find renamed property on target object.")}function it(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(it).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function Cu(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var Dg=Ne({__forward_ref__:Ne});function dd(e){return e.__forward_ref__=dd,e.toString=function(){return it(this())},e}function vt(e){return hd(e)?e():e}function hd(e){return typeof e=="function"&&e.hasOwnProperty(Dg)&&e.__forward_ref__===dd}function pe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function xs(e){return{providers:e.providers||[],imports:e.imports||[]}}function Rs(e){return Su(e,pd)||Su(e,gd)}function fd(e){return Rs(e)!==null}function Su(e,t){return e.hasOwnProperty(t)?e[t]:null}function Cg(e){let t=e&&(e[pd]||e[gd]);return t||null}function Au(e){return e&&(e.hasOwnProperty(Iu)||e.hasOwnProperty(Sg))?e[Iu]:null}var pd=Ne({\u0275prov:Ne}),Iu=Ne({\u0275inj:Ne}),gd=Ne({ngInjectableDef:Ne}),Sg=Ne({ngInjectorDef:Ne}),be=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=pe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function md(e){return e&&!!e.\u0275providers}var Ag=Ne({\u0275cmp:Ne}),Ig=Ne({\u0275dir:Ne}),Tg=Ne({\u0275pipe:Ne}),Mg=Ne({\u0275mod:Ne}),cs=Ne({\u0275fac:Ne}),Vr=Ne({__NG_ELEMENT_ID__:Ne}),Tu=Ne({__NG_ENV_ID__:Ne});function Hr(e){return typeof e=="string"?e:e==null?"":String(e)}function xg(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Hr(e)}function Rg(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new de(-200,e)}function ic(e,t){throw new de(-201,!1)}var _e=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(_e||{}),ua;function vd(){return ua}function mt(e){let t=ua;return ua=e,t}function yd(e,t,n){let r=Rs(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&_e.Optional)return null;if(t!==void 0)return t;ic(e,"Injector")}var Pg={},$r=Pg,da="__NG_DI_FLAG__",ls="ngTempTokenPath",Ng="ngTokenPath",kg=/\n/gm,Og="\u0275",Mu="__source",or;function Fg(){return or}function ln(e){let t=or;return or=e,t}function Lg(e,t=_e.Default){if(or===void 0)throw new de(-203,!1);return or===null?yd(e,void 0,t):or.get(e,t&_e.Optional?null:void 0,t)}function Se(e,t=_e.Default){return(vd()||Lg)(vt(e),t)}function oe(e,t=_e.Default){return Se(e,Ps(t))}function Ps(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function ha(e){let t=[];for(let n=0;n<e.length;n++){let r=vt(e[n]);if(Array.isArray(r)){if(r.length===0)throw new de(900,!1);let i,s=_e.Default;for(let o=0;o<r.length;o++){let l=r[o],d=jg(l);typeof d=="number"?d===-1?i=l.token:s|=d:i=l}t.push(Se(i,s))}else t.push(Se(r))}return t}function bd(e,t){return e[da]=t,e.prototype[da]=t,e}function jg(e){return e[da]}function Bg(e,t,n,r){let i=e[ls];throw t[Mu]&&i.unshift(t[Mu]),e.message=Ug(`
`+e.message,i,n,r),e[Ng]=i,e[ls]=null,e}function Ug(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==Og?e.slice(2):e;let i=it(t);if(Array.isArray(t))i=t.map(it).join(" -> ");else if(typeof t=="object"){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let l=t[o];s.push(o+":"+(typeof l=="string"?JSON.stringify(l):it(l)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(kg,`
  `)}`}var sc=bd(ud("Optional"),8);var _d=bd(ud("SkipSelf"),4);function cr(e,t){let n=e.hasOwnProperty(cs);return n?e[cs]:null}function Vg(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function Hg(e){return e.flat(Number.POSITIVE_INFINITY)}function oc(e,t){e.forEach(n=>Array.isArray(n)?oc(n,t):t(n))}function wd(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function us(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function $g(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let s=i-2;e[i]=e[s],i--}e[t]=n,e[t+1]=r}}function zg(e,t,n){let r=Jr(e,t);return r>=0?e[r|1]=n:(r=~r,$g(e,r,t,n)),r}function Jo(e,t){let n=Jr(e,t);if(n>=0)return e[n|1]}function Jr(e,t){return Wg(e,t,1)}function Wg(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=e[s<<n];if(t===o)return s<<n;o>t?i=s:r=s+1}return~(i<<n)}var zr={},At=[],lr=new be(""),Ed=new be("",-1),Dd=new be(""),ds=class{get(t,n=$r){if(n===$r){let r=new Error(`NullInjectorError: No provider for ${it(t)}!`);throw r.name="NullInjectorError",r}return n}},Cd=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Cd||{}),Ft=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Ft||{}),dn=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(dn||{});function Gg(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let s=t.length;if(i+s===r||e.charCodeAt(i+s)<=32)return i}n=i+1}}function fa(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],l=n[r++];e.setAttribute(t,o,l,s)}else{let s=i,o=n[++r];Yg(s)?e.setProperty(t,s,o):e.setAttribute(t,s,o),r++}}return r}function qg(e){return e===3||e===4||e===6}function Yg(e){return e.charCodeAt(0)===64}function ac(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?xu(e,n,i,null,t[++r]):xu(e,n,i,null,null))}}return e}function xu(e,t,n,r,i){let s=0,o=e.length;if(t===-1)o=-1;else for(;s<e.length;){let l=e[s++];if(typeof l=="number"){if(l===t){o=-1;break}else if(l>t){o=s-1;break}}}for(;s<e.length;){let l=e[s];if(typeof l=="number")break;if(l===n){if(r===null){i!==null&&(e[s+1]=i);return}else if(r===e[s+1]){e[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),r!==null&&e.splice(s++,0,r),i!==null&&e.splice(s++,0,i)}var Sd="ng-template";function Xg(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&Gg(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(cc(e))return!1;if(i=t.indexOf(1,i),i>-1){let s;for(;++i<t.length&&typeof(s=t[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function cc(e){return e.type===4&&e.value!==Sd}function Kg(e,t,n){let r=e.type===4&&!n?Sd:e.value;return t===r}function Zg(e,t,n){let r=4,i=e.attrs,s=i!==null?em(i):0,o=!1;for(let l=0;l<t.length;l++){let d=t[l];if(typeof d=="number"){if(!o&&!St(r)&&!St(d))return!1;if(o&&St(d))continue;o=!1,r=d|r&1;continue}if(!o)if(r&4){if(r=2|r&1,d!==""&&!Kg(e,d,n)||d===""&&t.length===1){if(St(r))return!1;o=!0}}else if(r&8){if(i===null||!Xg(e,i,d,n)){if(St(r))return!1;o=!0}}else{let u=t[++l],a=Qg(d,i,cc(e),n);if(a===-1){if(St(r))return!1;o=!0;continue}if(u!==""){let c;if(a>s?c="":c=i[a+1].toLowerCase(),r&2&&u!==c){if(St(r))return!1;o=!0}}}}return St(r)||o}function St(e){return(e&1)===0}function Qg(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<t.length;){let o=t[i];if(o===e)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let l=t[++i];for(;typeof l=="string";)l=t[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return tm(t,e)}function Jg(e,t,n=!1){for(let r=0;r<t.length;r++)if(Zg(e,t[r],n))return!0;return!1}function em(e){for(let t=0;t<e.length;t++){let n=e[t];if(qg(n))return t}return e.length}function tm(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function Ru(e,t){return e?":not("+t.trim()+")":t}function nm(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if(typeof o=="string")if(r&2){let l=e[++n];i+="["+o+(l.length>0?'="'+l+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!St(o)&&(t+=Ru(s,i),i=""),r=o,s=s||!St(r);n++}return i!==""&&(t+=Ru(s,i)),t}function rm(e){return e.map(nm).join(",")}function im(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let s=e[r];if(typeof s=="string")i===2?s!==""&&t.push(s,e[++r]):i===8&&n.push(s);else{if(!St(i))break;i=s}r++}return{attrs:t,classes:n}}function Ns(e){return Qr(()=>{let t=xd(e),n=ke(ce({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Cd.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Ft.Emulated,styles:e.styles||At,_:null,schemas:e.schemas||null,tView:null,id:""});Rd(n);let r=e.dependencies;return n.directiveDefs=Nu(r,!1),n.pipeDefs=Nu(r,!0),n.id=am(n),n})}function sm(e){return Dn(e)||Ad(e)}function om(e){return e!==null}function ks(e){return Qr(()=>({type:e.type,bootstrap:e.bootstrap||At,declarations:e.declarations||At,imports:e.imports||At,exports:e.exports||At,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Pu(e,t){if(e==null)return zr;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],s,o,l=dn.None;Array.isArray(i)?(l=i[0],s=i[1],o=i[2]??s):(s=i,o=i),t?(n[s]=l!==dn.None?[r,l]:r,t[s]=o):n[s]=r}return n}function ei(e){return Qr(()=>{let t=xd(e);return Rd(t),t})}function Dn(e){return e[Ag]||null}function Ad(e){return e[Ig]||null}function Id(e){return e[Tg]||null}function Td(e){let t=Dn(e)||Ad(e)||Id(e);return t!==null?t.standalone:!1}function Md(e,t){let n=e[Mg]||null;if(!n&&t===!0)throw new Error(`Type ${it(e)} does not have '\u0275mod' property.`);return n}function xd(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||zr,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||At,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Pu(e.inputs,t),outputs:Pu(e.outputs),debugInfo:null}}function Rd(e){e.features?.forEach(t=>t(e))}function Nu(e,t){if(!e)return null;let n=t?Id:sm;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(om)}function am(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Os(e){return{\u0275providers:e}}function cm(...e){return{\u0275providers:Pd(!0,e),\u0275fromNgModule:!0}}function Pd(e,...t){let n=[],r=new Set,i,s=o=>{n.push(o)};return oc(t,o=>{let l=o;pa(l,s,[],r)&&(i||=[],i.push(l))}),i!==void 0&&Nd(i,s),n}function Nd(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];lc(i,s=>{t(s,r)})}}function pa(e,t,n,r){if(e=vt(e),!e)return!1;let i=null,s=Au(e),o=!s&&Dn(e);if(!s&&!o){let d=e.ngModule;if(s=Au(d),s)i=d;else return!1}else{if(o&&!o.standalone)return!1;i=e}let l=r.has(i);if(o){if(l)return!1;if(r.add(i),o.dependencies){let d=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of d)pa(u,t,n,r)}}else if(s){if(s.imports!=null&&!l){r.add(i);let u;try{oc(s.imports,a=>{pa(a,t,n,r)&&(u||=[],u.push(a))})}finally{}u!==void 0&&Nd(u,t)}if(!l){let u=cr(i)||(()=>new i);t({provide:i,useFactory:u,deps:At},i),t({provide:Dd,useValue:i,multi:!0},i),t({provide:lr,useValue:()=>Se(i),multi:!0},i)}let d=s.providers;if(d!=null&&!l){let u=e;lc(d,a=>{t(a,u)})}}else return!1;return i!==e&&e.providers!==void 0}function lc(e,t){for(let n of e)md(n)&&(n=n.\u0275providers),Array.isArray(n)?lc(n,t):t(n)}var lm=Ne({provide:String,useValue:Ne});function kd(e){return e!==null&&typeof e=="object"&&lm in e}function um(e){return!!(e&&e.useExisting)}function dm(e){return!!(e&&e.useFactory)}function ga(e){return typeof e=="function"}var Fs=new be(""),ns={},hm={},ea;function uc(){return ea===void 0&&(ea=new ds),ea}var bt=class{},Wr=class extends bt{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,va(t,o=>this.processProvider(o)),this.records.set(Ed,rr(void 0,this)),i.has("environment")&&this.records.set(bt,rr(void 0,this));let s=this.records.get(Fs);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Dd,At,_e.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=Te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Te(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=ln(this),r=mt(void 0),i;try{return t()}finally{ln(n),mt(r)}}get(t,n=$r,r=_e.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(Tu))return t[Tu](this);r=Ps(r);let i,s=ln(this),o=mt(void 0);try{if(!(r&_e.SkipSelf)){let d=this.records.get(t);if(d===void 0){let u=ym(t)&&Rs(t);u&&this.injectableDefInScope(u)?d=rr(ma(t),ns):d=null,this.records.set(t,d)}if(d!=null)return this.hydrate(t,d)}let l=r&_e.Self?uc():this.parent;return n=r&_e.Optional&&n===$r?null:n,l.get(t,n)}catch(l){if(l.name==="NullInjectorError"){if((l[ls]=l[ls]||[]).unshift(it(t)),s)throw l;return Bg(l,t,"R3InjectorError",this.source)}else throw l}finally{mt(o),ln(s)}}resolveInjectorInitializers(){let t=Te(null),n=ln(this),r=mt(void 0),i;try{let s=this.get(lr,At,_e.Self);for(let o of s)o()}finally{ln(n),mt(r),Te(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(it(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(t){t=vt(t);let n=ga(t)?t:vt(t&&t.provide),r=pm(t);if(!ga(t)&&t.multi===!0){let i=this.records.get(n);i||(i=rr(void 0,ns,!0),i.factory=()=>ha(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=Te(null);try{return n.value===ns&&(n.value=hm,n.value=n.factory()),typeof n.value=="object"&&n.value&&vm(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Te(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=vt(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ma(e){let t=Rs(e),n=t!==null?t.factory:cr(e);if(n!==null)return n;if(e instanceof be)throw new de(204,!1);if(e instanceof Function)return fm(e);throw new de(204,!1)}function fm(e){if(e.length>0)throw new de(204,!1);let n=Cg(e);return n!==null?()=>n.factory(e):()=>new e}function pm(e){if(kd(e))return rr(void 0,e.useValue);{let t=gm(e);return rr(t,ns)}}function gm(e,t,n){let r;if(ga(e)){let i=vt(e);return cr(i)||ma(i)}else if(kd(e))r=()=>vt(e.useValue);else if(dm(e))r=()=>e.useFactory(...ha(e.deps||[]));else if(um(e))r=()=>Se(vt(e.useExisting));else{let i=vt(e&&(e.useClass||e.provide));if(mm(e))r=()=>new i(...ha(e.deps));else return cr(i)||ma(i)}return r}function rr(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function mm(e){return!!e.deps}function vm(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function ym(e){return typeof e=="function"||typeof e=="object"&&e instanceof be}function va(e,t){for(let n of e)Array.isArray(n)?va(n,t):n&&md(n)?va(n.\u0275providers,t):t(n)}function Yt(e,t){e instanceof Wr&&e.assertNotDestroyed();let n,r=ln(e),i=mt(void 0);try{return t()}finally{ln(r),mt(i)}}function bm(){return vd()!==void 0||Fg()!=null}function _m(e){return typeof e=="function"}var Xt=0,we=1,he=2,et=3,It=4,Mt=5,hs=6,fs=7,Tt=8,ur=9,Lt=10,st=11,Gr=12,ku=13,vr=14,jt=15,Cn=16,ir=17,Wt=18,Ls=19,Od=20,un=21,ta=22,yt=23,hn=25,Fd=1;var Sn=7,ps=8,dr=9,ht=10,gs=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(gs||{});function wn(e){return Array.isArray(e)&&typeof e[Fd]=="object"}function Kt(e){return Array.isArray(e)&&e[Fd]===!0}function Ld(e){return(e.flags&4)!==0}function js(e){return e.componentOffset>-1}function dc(e){return(e.flags&1)===1}function ti(e){return!!e.template}function ya(e){return(e[he]&512)!==0}var ba=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function jd(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function Bs(){return Bd}function Bd(e){return e.type.prototype.ngOnChanges&&(e.setInput=Em),wm}Bs.ngInherit=!0;function wm(){let e=Vd(this),t=e?.current;if(t){let n=e.previous;if(n===zr)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Em(e,t,n,r,i){let s=this.declaredInputs[r],o=Vd(e)||Dm(e,{previous:zr,current:null}),l=o.current||(o.current={}),d=o.previous,u=d[s];l[s]=new ba(u&&u.currentValue,n,d===zr),jd(e,t,i,n)}var Ud="__ngSimpleChanges__";function Vd(e){return e[Ud]||null}function Dm(e,t){return e[Ud]=t}var Ou=null;var kt=function(e,t,n){Ou?.(e,t,n)},Cm="svg",Sm="math";function Bt(e){for(;Array.isArray(e);)e=e[Xt];return e}function Hd(e,t){return Bt(t[e])}function xt(e,t){return Bt(t[e.index])}function $d(e,t){return e.data[t]}function Nn(e,t){let n=t[e];return wn(n)?n:n[Xt]}function Am(e){return(e[he]&4)===4}function hc(e){return(e[he]&128)===128}function Im(e){return Kt(e[et])}function ms(e,t){return t==null?null:e[t]}function zd(e){e[ir]=0}function Wd(e){e[he]&1024||(e[he]|=1024,hc(e)&&Vs(e))}function Tm(e,t){for(;e>0;)t=t[vr],e--;return t}function Us(e){return!!(e[he]&9216||e[yt]?.dirty)}function _a(e){e[Lt].changeDetectionScheduler?.notify(8),e[he]&64&&(e[he]|=1024),Us(e)&&Vs(e)}function Vs(e){e[Lt].changeDetectionScheduler?.notify(0);let t=An(e);for(;t!==null&&!(t[he]&8192||(t[he]|=8192,!hc(t)));)t=An(t)}function Gd(e,t){if((e[he]&256)===256)throw new de(911,!1);e[un]===null&&(e[un]=[]),e[un].push(t)}function Mm(e,t){if(e[un]===null)return;let n=e[un].indexOf(t);n!==-1&&e[un].splice(n,1)}function An(e){let t=e[et];return Kt(t)?t[et]:t}var Ee={lFrame:rh(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var qd=!1;function xm(){return Ee.lFrame.elementDepthCount}function Rm(){Ee.lFrame.elementDepthCount++}function Pm(){Ee.lFrame.elementDepthCount--}function Yd(){return Ee.bindingsEnabled}function Nm(){return Ee.skipHydrationRootTNode!==null}function km(e){return Ee.skipHydrationRootTNode===e}function Om(){Ee.skipHydrationRootTNode=null}function Fe(){return Ee.lFrame.lView}function Ut(){return Ee.lFrame.tView}function Zt(e){return Ee.lFrame.contextLView=e,e[Tt]}function Qt(e){return Ee.lFrame.contextLView=null,e}function Rt(){let e=Xd();for(;e!==null&&e.type===64;)e=e.parent;return e}function Xd(){return Ee.lFrame.currentTNode}function Fm(){let e=Ee.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function ni(e,t){let n=Ee.lFrame;n.currentTNode=e,n.isParent=t}function Kd(){return Ee.lFrame.isParent}function Lm(){Ee.lFrame.isParent=!1}function Zd(){return qd}function Fu(e){qd=e}function jm(){let e=Ee.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Bm(){return Ee.lFrame.bindingIndex}function Um(e){return Ee.lFrame.bindingIndex=e}function Qd(){return Ee.lFrame.bindingIndex++}function Jd(e){let t=Ee.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Vm(){return Ee.lFrame.inI18n}function Hm(e,t){let n=Ee.lFrame;n.bindingIndex=n.bindingRootIndex=e,wa(t)}function $m(){return Ee.lFrame.currentDirectiveIndex}function wa(e){Ee.lFrame.currentDirectiveIndex=e}function zm(e){let t=Ee.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function eh(){return Ee.lFrame.currentQueryIndex}function fc(e){Ee.lFrame.currentQueryIndex=e}function Wm(e){let t=e[we];return t.type===2?t.declTNode:t.type===1?e[Mt]:null}function th(e,t,n){if(n&_e.SkipSelf){let i=t,s=e;for(;i=i.parent,i===null&&!(n&_e.Host);)if(i=Wm(s),i===null||(s=s[vr],i.type&10))break;if(i===null)return!1;t=i,e=s}let r=Ee.lFrame=nh();return r.currentTNode=t,r.lView=e,!0}function pc(e){let t=nh(),n=e[we];Ee.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function nh(){let e=Ee.lFrame,t=e===null?null:e.child;return t===null?rh(e):t}function rh(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function ih(){let e=Ee.lFrame;return Ee.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var sh=ih;function gc(){let e=ih();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Gm(e){return(Ee.lFrame.contextLView=Tm(e,Ee.lFrame.contextLView))[Tt]}function kn(){return Ee.lFrame.selectedIndex}function In(e){Ee.lFrame.selectedIndex=e}function qm(){let e=Ee.lFrame;return $d(e.tView,e.selectedIndex)}function Ym(){return Ee.lFrame.currentNamespace}var oh=!0;function mc(){return oh}function vc(e){oh=e}function Xm(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){let o=Bd(t);(n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o)}i&&(n.preOrderHooks??=[]).push(0-e,i),s&&((n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s))}function yc(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let s=e.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:l,ngAfterViewInit:d,ngAfterViewChecked:u,ngOnDestroy:a}=s;o&&(e.contentHooks??=[]).push(-n,o),l&&((e.contentHooks??=[]).push(n,l),(e.contentCheckHooks??=[]).push(n,l)),d&&(e.viewHooks??=[]).push(-n,d),u&&((e.viewHooks??=[]).push(n,u),(e.viewCheckHooks??=[]).push(n,u)),a!=null&&(e.destroyHooks??=[]).push(n,a)}}function rs(e,t,n){ah(e,t,3,n)}function is(e,t,n,r){(e[he]&3)===n&&ah(e,t,n,r)}function na(e,t){let n=e[he];(n&3)===t&&(n&=16383,n+=1,e[he]=n)}function ah(e,t,n,r){let i=r!==void 0?e[ir]&65535:0,s=r??-1,o=t.length-1,l=0;for(let d=i;d<o;d++)if(typeof t[d+1]=="number"){if(l=t[d],r!=null&&l>=r)break}else t[d]<0&&(e[ir]+=65536),(l<s||s==-1)&&(Km(e,n,t,d),e[ir]=(e[ir]&4294901760)+d+2),d++}function Lu(e,t){kt(4,e,t);let n=Te(null);try{t.call(e)}finally{Te(n),kt(5,e,t)}}function Km(e,t,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],l=e[o];i?e[he]>>14<e[ir]>>16&&(e[he]&3)===t&&(e[he]+=16384,Lu(l,s)):Lu(l,s)}var ar=-1,qr=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Zm(e){return e instanceof qr}function Qm(e){return(e.flags&8)!==0}function Jm(e){return(e.flags&16)!==0}var ra={},Ea=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Ps(r);let i=this.injector.get(t,ra,r);return i!==ra||n===ra?i:this.parentInjector.get(t,n,r)}};function ch(e){return e!==ar}function vs(e){return e&32767}function ev(e){return e>>16}function ys(e,t){let n=ev(e),r=t;for(;n>0;)r=r[vr],n--;return r}var Da=!0;function ju(e){let t=Da;return Da=e,t}var tv=256,lh=tv-1,uh=5,nv=0,Ot={};function rv(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Vr)&&(r=n[Vr]),r==null&&(r=n[Vr]=nv++);let i=r&lh,s=1<<i;t.data[e+(i>>uh)]|=s}function dh(e,t){let n=hh(e,t);if(n!==-1)return n;let r=t[we];r.firstCreatePass&&(e.injectorIndex=t.length,ia(r.data,e),ia(t,null),ia(r.blueprint,null));let i=bc(e,t),s=e.injectorIndex;if(ch(i)){let o=vs(i),l=ys(i,t),d=l[we].data;for(let u=0;u<8;u++)t[s+u]=l[o+u]|d[o+u]}return t[s+8]=i,s}function ia(e,t){e.push(0,0,0,0,0,0,0,0,t)}function hh(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function bc(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=vh(i),r===null)return ar;if(n++,i=i[vr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ar}function iv(e,t,n){rv(e,t,n)}function fh(e,t,n){if(n&_e.Optional||e!==void 0)return e;ic(t,"NodeInjector")}function ph(e,t,n,r){if(n&_e.Optional&&r===void 0&&(r=null),!(n&(_e.Self|_e.Host))){let i=e[ur],s=mt(void 0);try{return i?i.get(t,r,n&_e.Optional):yd(t,r,n&_e.Optional)}finally{mt(s)}}return fh(r,t,n)}function gh(e,t,n,r=_e.Default,i){if(e!==null){if(t[he]&2048&&!(r&_e.Self)){let o=cv(e,t,n,r,Ot);if(o!==Ot)return o}let s=mh(e,t,n,r,Ot);if(s!==Ot)return s}return ph(t,n,r,i)}function mh(e,t,n,r,i){let s=ov(n);if(typeof s=="function"){if(!th(t,e,r))return r&_e.Host?fh(i,n,r):ph(t,n,r,i);try{let o;if(o=s(r),o==null&&!(r&_e.Optional))ic(n);else return o}finally{sh()}}else if(typeof s=="number"){let o=null,l=hh(e,t),d=ar,u=r&_e.Host?t[jt][Mt]:null;for((l===-1||r&_e.SkipSelf)&&(d=l===-1?bc(e,t):t[l+8],d===ar||!Uu(r,!1)?l=-1:(o=t[we],l=vs(d),t=ys(d,t)));l!==-1;){let a=t[we];if(Bu(s,l,a.data)){let c=sv(l,t,n,o,r,u);if(c!==Ot)return c}d=t[l+8],d!==ar&&Uu(r,t[we].data[l+8]===u)&&Bu(s,l,t)?(o=a,l=vs(d),t=ys(d,t)):l=-1}}return i}function sv(e,t,n,r,i,s){let o=t[we],l=o.data[e+8],d=r==null?js(l)&&Da:r!=o&&(l.type&3)!==0,u=i&_e.Host&&s===l,a=ss(l,o,n,d,u);return a!==null?hr(t,o,a,l):Ot}function ss(e,t,n,r,i){let s=e.providerIndexes,o=t.data,l=s&1048575,d=e.directiveStart,u=e.directiveEnd,a=s>>20,c=r?l:l+a,h=i?l+a:u;for(let p=c;p<h;p++){let g=o[p];if(p<d&&n===g||p>=d&&g.type===n)return p}if(i){let p=o[d];if(p&&ti(p)&&p.type===n)return d}return null}function hr(e,t,n,r){let i=e[n],s=t.data;if(Zm(i)){let o=i;o.resolving&&Rg(xg(s[n]));let l=ju(o.canSeeViewProviders);o.resolving=!0;let d,u=o.injectImpl?mt(o.injectImpl):null,a=th(e,r,_e.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&Xm(n,s[n],t)}finally{u!==null&&mt(u),ju(l),o.resolving=!1,sh()}}return i}function ov(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Vr)?e[Vr]:void 0;return typeof t=="number"?t>=0?t&lh:av:t}function Bu(e,t,n){let r=1<<e;return!!(n[t+(e>>uh)]&r)}function Uu(e,t){return!(e&_e.Self)&&!(e&_e.Host&&t)}var En=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return gh(this._tNode,this._lView,t,Ps(r),n)}};function av(){return new En(Rt(),Fe())}function _c(e){return Qr(()=>{let t=e.prototype.constructor,n=t[cs]||Ca(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let s=i[cs]||Ca(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ca(e){return hd(e)?()=>{let t=Ca(vt(e));return t&&t()}:cr(e)}function cv(e,t,n,r,i){let s=e,o=t;for(;s!==null&&o!==null&&o[he]&2048&&!(o[he]&512);){let l=mh(s,o,n,r|_e.Self,Ot);if(l!==Ot)return l;let d=s.parent;if(!d){let u=o[Od];if(u){let a=u.get(n,Ot,r);if(a!==Ot)return a}d=vh(o),o=o[vr]}s=d}return i}function vh(e){let t=e[we],n=t.type;return n===2?t.declTNode:n===1?e[Mt]:null}function Vu(e,t=null,n=null,r){let i=yh(e,t,n,r);return i.resolveInjectorInitializers(),i}function yh(e,t=null,n=null,r,i=new Set){let s=[n||At,cm(e)];return r=r||(typeof e=="object"?void 0:it(e)),new Wr(s,t||uc(),r||null,i)}var Tn=class e{static{this.THROW_IF_NOT_FOUND=$r}static{this.NULL=new ds}static create(t,n){if(Array.isArray(t))return Vu({name:""},n,t,"");{let r=t.name??"";return Vu({name:r},t.parent,t.providers,r)}}static{this.\u0275prov=pe({token:e,providedIn:"any",factory:()=>Se(Ed)})}static{this.__NG_ELEMENT_ID__=-1}};var lv=new be("");lv.__NG_ELEMENT_ID__=e=>{let t=Rt();if(t===null)throw new de(204,!1);if(t.type&2)return t.value;if(e&_e.Optional)return null;throw new de(204,!1)};var uv="ngOriginalError";function sa(e){return e[uv]}var bh=!0,_h=(()=>{class e{static{this.__NG_ELEMENT_ID__=dv}static{this.__NG_ENV_ID__=n=>n}}return e})(),Sa=class extends _h{constructor(t){super(),this._lView=t}onDestroy(t){return Gd(this._lView,t),()=>Mm(this._lView,t)}};function dv(){return new Sa(Fe())}var yr=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ye(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=pe({token:e,providedIn:"root",factory:()=>new e})}}return e})();var Aa=class extends rt{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,bm()&&(this.destroyRef=oe(_h,{optional:!0})??void 0,this.pendingTasks=oe(yr,{optional:!0})??void 0)}emit(t){let n=Te(null);try{super.next(t)}finally{Te(n)}}subscribe(t,n,r){let i=t,s=n||(()=>null),o=r;if(t&&typeof t=="object"){let d=t;i=d.next?.bind(d),s=d.error?.bind(d),o=d.complete?.bind(d)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let l=super.subscribe({next:i,error:s,complete:o});return t instanceof Be&&t.add(l),l}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Je=Aa;function bs(...e){}function wh(e){let t,n;function r(){e=bs;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function Hu(e){return queueMicrotask(()=>e()),()=>{e=bs}}var wc="isAngularZone",_s=wc+"_ID",hv=0,Ue=class e{constructor(t){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Je(!1),this.onMicrotaskEmpty=new Je(!1),this.onStable=new Je(!1),this.onError=new Je(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=bh}=t;if(typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,gv(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(wc)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new de(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,t,fv,bs,bs);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},fv={};function Ec(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function pv(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){wh(()=>{e.callbackScheduled=!1,Ia(e),e.isCheckStableRunning=!0,Ec(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Ia(e)}function gv(e){let t=()=>{pv(e)},n=hv++;e._inner=e._inner.fork({name:"angular",properties:{[wc]:!0,[_s]:n,[_s+n]:!0},onInvokeTask:(r,i,s,o,l,d)=>{if(mv(d))return r.invokeTask(s,o,l,d);try{return $u(e),r.invokeTask(s,o,l,d)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),zu(e)}},onInvoke:(r,i,s,o,l,d,u)=>{try{return $u(e),r.invoke(s,o,l,d,u)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!vv(d)&&t(),zu(e)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,Ia(e),Ec(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function Ia(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function $u(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function zu(e){e._nesting--,Ec(e)}var Ta=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Je,this.onMicrotaskEmpty=new Je,this.onStable=new Je,this.onError=new Je}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function mv(e){return Eh(e,"__ignore_ng_zone__")}function vv(e){return Eh(e,"__scheduler_tick__")}function Eh(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Gt=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&sa(t);for(;n&&sa(n);)n=sa(n);return n||null}},yv=new be("",{providedIn:"root",factory:()=>{let e=oe(Ue),t=oe(Gt);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function bv(){return br(Rt(),Fe())}function br(e,t){return new On(xt(e,t))}var On=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=bv}}return e})();function _v(e){return e instanceof On?e.nativeElement:e}function wv(){return this._results[Symbol.iterator]()}var Ma=class e{get changes(){return this._changes??=new Je}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=wv)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=Hg(t);(this._changesDetected=!Vg(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Dh(e){return(e.flags&128)===128}var Ch=new Map,Ev=0;function Dv(){return Ev++}function Cv(e){Ch.set(e[Ls],e)}function xa(e){Ch.delete(e[Ls])}var Wu="__ngContext__";function Mn(e,t){wn(t)?(e[Wu]=t[Ls],Cv(t)):e[Wu]=t}function Sh(e){return Ih(e[Gr])}function Ah(e){return Ih(e[It])}function Ih(e){for(;e!==null&&!Kt(e);)e=e[It];return e}var Ra;function Th(e){Ra=e}function Sv(){if(Ra!==void 0)return Ra;if(typeof document<"u")return document;throw new de(210,!1)}var Dc=new be("",{providedIn:"root",factory:()=>Av}),Av="ng",Cc=new be(""),_r=new be("",{providedIn:"platform",factory:()=>"unknown"});var Sc=new be("",{providedIn:"root",factory:()=>Sv().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Iv="h",Tv="b";var Mv=()=>null;function Ac(e,t,n=!1){return Mv(e,t,n)}var Mh=!1,xv=new be("",{providedIn:"root",factory:()=>Mh});var ws=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ld})`}};function Hs(e){return e instanceof ws?e.changingThisBreaksApplicationSecurity:e}function xh(e,t){let n=Rv(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${ld})`)}return n===t}function Rv(e){return e instanceof ws&&e.getTypeName()||null}var Pv=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Rh(e){return e=String(e),e.match(Pv)?e:"unsafe:"+e}var Ic=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Ic||{});function Ph(e){let t=Nv();return t?t.sanitize(Ic.URL,e)||"":xh(e,"URL")?Hs(e):Rh(Hr(e))}function Nv(){let e=Fe();return e&&e[Lt].sanitizer}function Nh(e){return e instanceof Function?e():e}var qt=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(qt||{}),kv;function Tc(e,t){return kv(e,t)}function sr(e,t,n,r,i){if(r!=null){let s,o=!1;Kt(r)?s=r:wn(r)&&(o=!0,r=r[Xt]);let l=Bt(r);e===0&&n!==null?i==null?jh(t,n,l):Es(t,n,l,i||null,!0):e===1&&n!==null?Es(t,n,l,i||null,!0):e===2?Xv(t,l,o):e===3&&t.destroyNode(l),s!=null&&Zv(t,e,s,n,i)}}function Ov(e,t){return e.createText(t)}function Fv(e,t,n){e.setValue(t,n)}function kh(e,t,n){return e.createElement(t,n)}function Lv(e,t){Oh(e,t),t[Xt]=null,t[Mt]=null}function jv(e,t,n,r,i,s){r[Xt]=i,r[Mt]=t,$s(e,r,n,1,i,s)}function Oh(e,t){t[Lt].changeDetectionScheduler?.notify(9),$s(e,t,t[st],2,null,null)}function Bv(e){let t=e[Gr];if(!t)return oa(e[we],e);for(;t;){let n=null;if(wn(t))n=t[Gr];else{let r=t[ht];r&&(n=r)}if(!n){for(;t&&!t[It]&&t!==e;)wn(t)&&oa(t[we],t),t=t[et];t===null&&(t=e),wn(t)&&oa(t[we],t),n=t&&t[It]}t=n}}function Uv(e,t,n,r){let i=ht+r,s=n.length;r>0&&(n[i-1][It]=t),r<s-ht?(t[It]=n[i],wd(n,ht+r,t)):(n.push(t),t[It]=null),t[et]=n;let o=t[Cn];o!==null&&n!==o&&Fh(o,t);let l=t[Wt];l!==null&&l.insertView(e),_a(t),t[he]|=128}function Fh(e,t){let n=e[dr],r=t[et];if(wn(r))e[he]|=gs.HasTransplantedViews;else{let i=r[et][jt];t[jt]!==i&&(e[he]|=gs.HasTransplantedViews)}n===null?e[dr]=[t]:n.push(t)}function Mc(e,t){let n=e[dr],r=n.indexOf(t);n.splice(r,1)}function Pa(e,t){if(e.length<=ht)return;let n=ht+t,r=e[n];if(r){let i=r[Cn];i!==null&&i!==e&&Mc(i,r),t>0&&(e[n-1][It]=r[It]);let s=us(e,ht+t);Lv(r[we],r);let o=s[Wt];o!==null&&o.detachView(s[we]),r[et]=null,r[It]=null,r[he]&=-129}return r}function Lh(e,t){if(!(t[he]&256)){let n=t[st];n.destroyNode&&$s(e,t,n,3,null,null),Bv(t)}}function oa(e,t){if(t[he]&256)return;let n=Te(null);try{t[he]&=-129,t[he]|=256,t[yt]&&No(t[yt]),Hv(e,t),Vv(e,t),t[we].type===1&&t[st].destroy();let r=t[Cn];if(r!==null&&Kt(t[et])){r!==t[et]&&Mc(r,t);let i=t[Wt];i!==null&&i.detachView(e)}xa(t)}finally{Te(n)}}function Vv(e,t){let n=e.cleanup,r=t[fs];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(t[fs]=null);let i=t[un];if(i!==null){t[un]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function Hv(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof qr)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let l=i[s[o]],d=s[o+1];kt(4,l,d);try{d.call(l)}finally{kt(5,l,d)}}else{kt(4,i,s);try{s.call(i)}finally{kt(5,i,s)}}}}}function $v(e,t,n){return zv(e,t.parent,n)}function zv(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[Xt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=e.data[r.directiveStart+i];if(s===Ft.None||s===Ft.Emulated)return null}return xt(r,n)}}function Es(e,t,n,r,i){e.insertBefore(t,n,r,i)}function jh(e,t,n){e.appendChild(t,n)}function Gu(e,t,n,r,i){r!==null?Es(e,t,n,r,i):jh(e,t,n)}function Bh(e,t){return e.parentNode(t)}function Wv(e,t){return e.nextSibling(t)}function Gv(e,t,n){return Yv(e,t,n)}function qv(e,t,n){return e.type&40?xt(e,n):null}var Yv=qv,qu;function xc(e,t,n,r){let i=$v(e,r,t),s=t[st],o=r.parent||t[Mt],l=Gv(o,r,t);if(i!=null)if(Array.isArray(n))for(let d=0;d<n.length;d++)Gu(s,i,n[d],l,!1);else Gu(s,i,n,l,!1);qu!==void 0&&qu(s,r,t,n,i)}function Br(e,t){if(t!==null){let n=t.type;if(n&3)return xt(t,e);if(n&4)return Na(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Br(e,r);{let i=e[t.index];return Kt(i)?Na(-1,i):Bt(i)}}else{if(n&128)return Br(e,t.next);if(n&32)return Tc(t,e)()||Bt(e[t.index]);{let r=Uh(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=An(e[jt]);return Br(i,r)}else return Br(e,t.next)}}}return null}function Uh(e,t){if(t!==null){let r=e[jt][Mt],i=t.projection;return r.projection[i]}return null}function Na(e,t){let n=ht+e+1;if(n<t.length){let r=t[n],i=r[we].firstChild;if(i!==null)return Br(r,i)}return t[Sn]}function Xv(e,t,n){e.removeChild(null,t,n)}function Rc(e,t,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let l=r[n.index],d=n.type;if(o&&t===0&&(l&&Mn(Bt(l),r),n.flags|=2),(n.flags&32)!==32)if(d&8)Rc(e,t,n.child,r,i,s,!1),sr(t,e,i,l,s);else if(d&32){let u=Tc(n,r),a;for(;a=u();)sr(t,e,i,a,s);sr(t,e,i,l,s)}else d&16?Kv(e,t,r,n,i,s):sr(t,e,i,l,s);n=o?n.projectionNext:n.next}}function $s(e,t,n,r,i,s){Rc(n,r,e.firstChild,t,i,s,!1)}function Kv(e,t,n,r,i,s){let o=n[jt],d=o[Mt].projection[r.projection];if(Array.isArray(d))for(let u=0;u<d.length;u++){let a=d[u];sr(t,e,i,a,s)}else{let u=d,a=o[et];Dh(r)&&(u.flags|=128),Rc(e,t,u,a,i,s,!0)}}function Zv(e,t,n,r,i){let s=n[Sn],o=Bt(n);s!==o&&sr(t,e,r,s,i);for(let l=ht;l<n.length;l++){let d=n[l];$s(d[we],d,e,t,r,s)}}function Qv(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:qt.DashCase;i==null?e.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=qt.Important),e.setStyle(n,r,i,s))}}function Jv(e,t,n){e.setAttribute(t,"style",n)}function Vh(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Hh(e,t,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&fa(e,t,r),i!==null&&Vh(e,t,i),s!==null&&Jv(e,t,s)}var Jt={};function Le(e=1){$h(Ut(),Fe(),kn()+e,!1)}function $h(e,t,n,r){if(!r)if((t[he]&3)===3){let s=e.preOrderCheckHooks;s!==null&&rs(t,s,n)}else{let s=e.preOrderHooks;s!==null&&is(t,s,0,n)}In(n)}function pn(e,t=_e.Default){let n=Fe();if(n===null)return Se(e,t);let r=Rt();return gh(r,n,vt(e),t)}function zh(e,t,n,r,i,s){let o=Te(null);try{let l=null;i&dn.SignalBased&&(l=t[r][Gl]),l!==null&&l.transformFn!==void 0&&(s=l.transformFn(s)),i&dn.HasDecoratorInputTransform&&(s=e.inputTransforms[r].call(t,s)),e.setInput!==null?e.setInput(t,l,s,n,r):jd(t,l,r,s)}finally{Te(o)}}function ey(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)In(~i);else{let s=i,o=n[++r],l=n[++r];Hm(o,s);let d=t[s];l(2,d)}}}finally{In(-1)}}function zs(e,t,n,r,i,s,o,l,d,u,a){let c=t.blueprint.slice();return c[Xt]=i,c[he]=r|4|128|8|64,(u!==null||e&&e[he]&2048)&&(c[he]|=2048),zd(c),c[et]=c[vr]=e,c[Tt]=n,c[Lt]=o||e&&e[Lt],c[st]=l||e&&e[st],c[ur]=d||e&&e[ur]||null,c[Mt]=s,c[Ls]=Dv(),c[hs]=a,c[Od]=u,c[jt]=t.type==2?e[jt]:c,c}function Ws(e,t,n,r,i){let s=e.data[t];if(s===null)s=ty(e,t,n,r,i),Vm()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=Fm();s.injectorIndex=o===null?-1:o.injectorIndex}return ni(s,!0),s}function ty(e,t,n,r,i){let s=Xd(),o=Kd(),l=o?s:s&&s.parent,d=e.data[t]=ay(e,l,n,t,r,i);return e.firstChild===null&&(e.firstChild=d),s!==null&&(o?s.child==null&&d.parent!==null&&(s.child=d):s.next===null&&(s.next=d,d.prev=s)),d}function Wh(e,t,n,r){if(n===0)return-1;let i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Gh(e,t,n,r,i){let s=kn(),o=r&2;try{In(-1),o&&t.length>hn&&$h(e,t,hn,!1),kt(o?2:0,i),n(r,i)}finally{In(s),kt(o?3:1,i)}}function qh(e,t,n){if(Ld(t)){let r=Te(null);try{let i=t.directiveStart,s=t.directiveEnd;for(let o=i;o<s;o++){let l=e.data[o];if(l.contentQueries){let d=n[o];l.contentQueries(1,d,o)}}}finally{Te(r)}}}function Yh(e,t,n){Yd()&&(py(e,t,n,xt(n,t)),(n.flags&64)===64&&Jh(e,t,n))}function Xh(e,t,n=xt){let r=t.localNames;if(r!==null){let i=t.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],l=o===-1?n(t,e):e[o];e[i++]=l}}}function Kh(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Pc(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Pc(e,t,n,r,i,s,o,l,d,u,a){let c=hn+r,h=c+i,p=ny(c,h),g=typeof u=="function"?u():u;return p[we]={type:e,blueprint:p,template:n,queries:null,viewQuery:l,declTNode:t,data:p.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:d,consts:g,incompleteFirstPass:!1,ssrId:a}}function ny(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Jt);return n}function ry(e,t,n,r){let s=r.get(xv,Mh)||n===Ft.ShadowDom,o=e.selectRootElement(t,s);return iy(o),o}function iy(e){sy(e)}var sy=()=>null;function oy(e,t,n,r){let i=nf(t);i.push(n),e.firstCreatePass&&rf(e).push(r,i.length-1)}function ay(e,t,n,r,i,s){let o=t?t.injectorIndex:-1,l=0;return Nm()&&(l|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:l,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Yu(e,t,n,r,i){for(let s in t){if(!t.hasOwnProperty(s))continue;let o=t[s];if(o===void 0)continue;r??={};let l,d=dn.None;Array.isArray(o)?(l=o[0],d=o[1]):l=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}e===0?Xu(r,n,u,l,d):Xu(r,n,u,l)}return r}function Xu(e,t,n,r,i){let s;e.hasOwnProperty(n)?(s=e[n]).push(t,r):s=e[n]=[t,r],i!==void 0&&s.push(i)}function cy(e,t,n){let r=t.directiveStart,i=t.directiveEnd,s=e.data,o=t.attrs,l=[],d=null,u=null;for(let a=r;a<i;a++){let c=s[a],h=n?n.get(c):null,p=h?h.inputs:null,g=h?h.outputs:null;d=Yu(0,c.inputs,a,d,p),u=Yu(1,c.outputs,a,u,g);let f=d!==null&&o!==null&&!cc(t)?Dy(d,a,o):null;l.push(f)}d!==null&&(d.hasOwnProperty("class")&&(t.flags|=8),d.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=l,t.inputs=d,t.outputs=u}function ly(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function uy(e,t,n,r,i,s,o,l){let d=xt(t,n),u=t.inputs,a;!l&&u!=null&&(a=u[r])?(Nc(e,n,a,r,i),js(t)&&dy(n,t.index)):t.type&3?(r=ly(r),i=o!=null?o(i,t.value||"",r):i,s.setProperty(d,r,i)):t.type&12}function dy(e,t){let n=Nn(t,e);n[he]&16||(n[he]|=64)}function Zh(e,t,n,r){if(Yd()){let i=r===null?null:{"":-1},s=my(e,n),o,l;s===null?o=l=null:[o,l]=s,o!==null&&Qh(e,t,n,o,i,l),i&&vy(n,r,i)}n.mergedAttrs=ac(n.mergedAttrs,n.attrs)}function Qh(e,t,n,r,i,s){for(let u=0;u<r.length;u++)iv(dh(n,t),e,r[u].type);by(n,e.data.length,r.length);for(let u=0;u<r.length;u++){let a=r[u];a.providersResolver&&a.providersResolver(a)}let o=!1,l=!1,d=Wh(e,t,r.length,null);for(let u=0;u<r.length;u++){let a=r[u];n.mergedAttrs=ac(n.mergedAttrs,a.hostAttrs),_y(e,n,t,d,a),yy(d,a,i),a.contentQueries!==null&&(n.flags|=4),(a.hostBindings!==null||a.hostAttrs!==null||a.hostVars!==0)&&(n.flags|=64);let c=a.type.prototype;!o&&(c.ngOnChanges||c.ngOnInit||c.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),o=!0),!l&&(c.ngOnChanges||c.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),l=!0),d++}cy(e,n,s)}function hy(e,t,n,r,i){let s=i.hostBindings;if(s){let o=e.hostBindingOpCodes;o===null&&(o=e.hostBindingOpCodes=[]);let l=~t.index;fy(o)!=l&&o.push(l),o.push(n,r,s)}}function fy(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function py(e,t,n,r){let i=n.directiveStart,s=n.directiveEnd;js(n)&&wy(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||dh(n,t),Mn(r,t);let o=n.initialInputs;for(let l=i;l<s;l++){let d=e.data[l],u=hr(t,e,l,n);if(Mn(u,t),o!==null&&Ey(t,l-i,u,d,n,o),ti(d)){let a=Nn(n.index,t);a[Tt]=hr(t,e,l,n)}}}function Jh(e,t,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=$m();try{In(s);for(let l=r;l<i;l++){let d=e.data[l],u=t[l];wa(l),(d.hostBindings!==null||d.hostVars!==0||d.hostAttrs!==null)&&gy(d,u)}}finally{In(-1),wa(o)}}function gy(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function my(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(Jg(t,o.selectors,!1))if(r||(r=[]),ti(o))if(o.findHostDirectiveDefs!==null){let l=[];i=i||new Map,o.findHostDirectiveDefs(o,l,i),r.unshift(...l,o);let d=l.length;ka(e,t,d)}else r.unshift(o),ka(e,t,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function ka(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function vy(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let s=n[t[i+1]];if(s==null)throw new de(-301,!1);r.push(t[i],s)}}}function yy(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;ti(t)&&(n[""]=e)}}function by(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function _y(e,t,n,r,i){e.data[r]=i;let s=i.factory||(i.factory=cr(i.type,!0)),o=new qr(s,ti(i),pn);e.blueprint[r]=o,n[r]=o,hy(e,t,r,Wh(e,n,i.hostVars,Jt),i)}function wy(e,t,n){let r=xt(t,e),i=Kh(n),s=e[Lt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let l=Gs(e,zs(e,i,null,o,r,t,null,s.createRenderer(r,n),null,null,null));e[t.index]=l}function Ey(e,t,n,r,i,s){let o=s[t];if(o!==null)for(let l=0;l<o.length;){let d=o[l++],u=o[l++],a=o[l++],c=o[l++];zh(r,n,d,u,a,c)}}function Dy(e,t,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(e.hasOwnProperty(s)){r===null&&(r=[]);let o=e[s];for(let l=0;l<o.length;l+=3)if(o[l]===t){r.push(s,o[l+1],o[l+2],n[i+1]);break}}i+=2}return r}function ef(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function tf(e,t){let n=e.contentQueries;if(n!==null){let r=Te(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let l=e.data[o];fc(s),l.contentQueries(2,t[o],o)}}}finally{Te(r)}}}function Gs(e,t){return e[Gr]?e[ku][It]=t:e[Gr]=t,e[ku]=t,t}function Oa(e,t,n){fc(0);let r=Te(null);try{t(e,n)}finally{Te(r)}}function nf(e){return e[fs]??=[]}function rf(e){return e.cleanup??=[]}function sf(e,t){let n=e[ur],r=n?n.get(Gt,null):null;r&&r.handleError(t)}function Nc(e,t,n,r,i){for(let s=0;s<n.length;){let o=n[s++],l=n[s++],d=n[s++],u=t[o],a=e.data[o];zh(a,u,r,l,d,i)}}function of(e,t,n){let r=Hd(t,e);Fv(e[st],r,n)}function Cy(e,t){let n=Nn(t,e),r=n[we];Sy(r,n);let i=n[Xt];i!==null&&n[hs]===null&&(n[hs]=Ac(i,n[ur])),kc(r,n,n[Tt])}function Sy(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function kc(e,t,n){pc(t);try{let r=e.viewQuery;r!==null&&Oa(1,r,n);let i=e.template;i!==null&&Gh(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Wt]?.finishViewCreation(e),e.staticContentQueries&&tf(e,t),e.staticViewQueries&&Oa(2,e.viewQuery,n);let s=e.components;s!==null&&Ay(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[he]&=-5,gc()}}function Ay(e,t){for(let n=0;n<t.length;n++)Cy(e,t[n])}function Iy(e,t,n,r){let i=Te(null);try{let s=t.tView,l=e[he]&4096?4096:16,d=zs(e,s,n,l,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=e[t.index];d[Cn]=u;let a=e[Wt];return a!==null&&(d[Wt]=a.createEmbeddedView(s)),kc(s,d,n),d}finally{Te(i)}}function Ku(e,t){return!t||t.firstChild===null||Dh(e)}function Ty(e,t,n,r=!0){let i=t[we];if(Uv(i,t,e,n),r){let o=Na(n,e),l=t[st],d=Bh(l,e[Sn]);d!==null&&jv(i,e[Mt],l,t,d,o)}let s=t[hs];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Ds(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=t[n.index];s!==null&&r.push(Bt(s)),Kt(s)&&My(s,r);let o=n.type;if(o&8)Ds(e,t,n.child,r);else if(o&32){let l=Tc(n,t),d;for(;d=l();)r.push(d)}else if(o&16){let l=Uh(t,n);if(Array.isArray(l))r.push(...l);else{let d=An(t[jt]);Ds(d[we],d,l,r,!0)}}n=i?n.projectionNext:n.next}return r}function My(e,t){for(let n=ht;n<e.length;n++){let r=e[n],i=r[we].firstChild;i!==null&&Ds(r[we],r,i,t)}e[Sn]!==e[Xt]&&t.push(e[Sn])}var af=[];function xy(e){return e[yt]??Ry(e)}function Ry(e){let t=af.pop()??Object.create(Ny);return t.lView=e,t}function Py(e){e.lView[yt]!==e&&(e.lView=null,af.push(e))}var Ny=ke(ce({},xo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Vs(e.lView)},consumerOnSignalRead(){this.lView[yt]=this}});function ky(e){let t=e[yt]??Object.create(Oy);return t.lView=e,t}var Oy=ke(ce({},xo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=An(e.lView);for(;t&&!cf(t[we]);)t=An(t);t&&Wd(t)},consumerOnSignalRead(){this.lView[yt]=this}});function cf(e){return e.type!==2}var Fy=100;function lf(e,t=!0,n=0){let r=e[Lt],i=r.rendererFactory,s=!1;s||i.begin?.();try{Ly(e,n)}catch(o){throw t&&sf(e,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function Ly(e,t){let n=Zd();try{Fu(!0),Fa(e,t);let r=0;for(;Us(e);){if(r===Fy)throw new de(103,!1);r++,Fa(e,1)}}finally{Fu(n)}}function jy(e,t,n,r){let i=t[he];if((i&256)===256)return;let s=!1,o=!1;!s&&t[Lt].inlineEffectRunner?.flush(),pc(t);let l=!0,d=null,u=null;s||(cf(e)?(u=xy(t),d=Ro(u)):ql()===null?(l=!1,u=ky(t),d=Ro(u)):t[yt]&&(No(t[yt]),t[yt]=null));try{zd(t),Um(e.bindingStartIndex),n!==null&&Gh(e,t,n,2,r);let a=(i&3)===3;if(!s)if(a){let p=e.preOrderCheckHooks;p!==null&&rs(t,p,null)}else{let p=e.preOrderHooks;p!==null&&is(t,p,0,null),na(t,0)}if(o||By(t),uf(t,0),e.contentQueries!==null&&tf(e,t),!s)if(a){let p=e.contentCheckHooks;p!==null&&rs(t,p)}else{let p=e.contentHooks;p!==null&&is(t,p,1),na(t,1)}ey(e,t);let c=e.components;c!==null&&hf(t,c,0);let h=e.viewQuery;if(h!==null&&Oa(2,h,r),!s)if(a){let p=e.viewCheckHooks;p!==null&&rs(t,p)}else{let p=e.viewHooks;p!==null&&is(t,p,2),na(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[ta]){for(let p of t[ta])p();t[ta]=null}s||(t[he]&=-73)}catch(a){throw s||Vs(t),a}finally{u!==null&&(Yl(u,d),l&&Py(u)),gc()}}function uf(e,t){for(let n=Sh(e);n!==null;n=Ah(n))for(let r=ht;r<n.length;r++){let i=n[r];df(i,t)}}function By(e){for(let t=Sh(e);t!==null;t=Ah(t)){if(!(t[he]&gs.HasTransplantedViews))continue;let n=t[dr];for(let r=0;r<n.length;r++){let i=n[r];Wd(i)}}}function Uy(e,t,n){let r=Nn(t,e);df(r,n)}function df(e,t){hc(e)&&Fa(e,t)}function Fa(e,t){let r=e[we],i=e[he],s=e[yt],o=!!(t===0&&i&16);if(o||=!!(i&64&&t===0),o||=!!(i&1024),o||=!!(s?.dirty&&Po(s)),o||=!1,s&&(s.dirty=!1),e[he]&=-9217,o)jy(r,e,r.template,e[Tt]);else if(i&8192){uf(e,1);let l=r.components;l!==null&&hf(e,l,1)}}function hf(e,t,n){for(let r=0;r<t.length;r++)Uy(e,t[r],n)}function Oc(e,t){let n=Zd()?64:1088;for(e[Lt].changeDetectionScheduler?.notify(t);e;){e[he]|=n;let r=An(e);if(ya(e)&&!r)return e;e=r}return null}var xn=class{get rootNodes(){let t=this._lView,n=t[we];return Ds(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Tt]}set context(t){this._lView[Tt]=t}get destroyed(){return(this._lView[he]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[et];if(Kt(t)){let n=t[ps],r=n?n.indexOf(this):-1;r>-1&&(Pa(t,r),us(n,r))}this._attachedToViewContainer=!1}Lh(this._lView[we],this._lView)}onDestroy(t){Gd(this._lView,t)}markForCheck(){Oc(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[he]&=-129}reattach(){_a(this._lView),this._lView[he]|=128}detectChanges(){this._lView[he]|=1024,lf(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=ya(this._lView),n=this._lView[Cn];n!==null&&!t&&Mc(n,this._lView),Oh(this._lView[we],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=t;let n=ya(this._lView),r=this._lView[Cn];r!==null&&!n&&Fh(r,this._lView),_a(this._lView)}},Rn=(()=>{class e{static{this.__NG_ELEMENT_ID__=$y}}return e})(),Vy=Rn,Hy=class extends Vy{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=Iy(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new xn(i)}};function $y(){return Fc(Rt(),Fe())}function Fc(e,t){return e.type&4?new Hy(t,e,br(e,t)):null}var YI=new RegExp(`^(\\d+)*(${Tv}|${Iv})*(.*)`);var zy=()=>null;function Zu(e,t){return zy(e,t)}var fr=class{},qs=new be("",{providedIn:"root",factory:()=>!1});var ff=new be(""),pf=new be(""),La=class{},Cs=class{};function Wy(e){let t=Error(`No component factory found for ${it(e)}.`);return t[Gy]=e,t}var Gy="ngComponent";var ja=class{resolveComponentFactory(t){throw Wy(t)}},pr=class{static{this.NULL=new ja}},gr=class{};var qy=(()=>{class e{static{this.\u0275prov=pe({token:e,providedIn:"root",factory:()=>null})}}return e})();function Ba(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(t!==null)for(let o=0;o<t.length;o++){let l=t[o];if(typeof l=="number")s=l;else if(s==1)i=Cu(i,l);else if(s==2){let d=l,u=t[++o];r=Cu(r,d+": "+u+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var Ss=class extends pr{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Dn(t);return new Yr(n,this.ngModule)}};function Qu(e,t){let n=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let i=e[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,l=s?i[1]:dn.None;t?n.push({propName:o,templateName:r,isSignal:(l&dn.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function Yy(e){let t=e.toLowerCase();return t==="svg"?Cm:t==="math"?Sm:null}var Yr=class extends Cs{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=Qu(t.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Qu(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=rm(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let s=Te(null);try{i=i||this.ngModule;let o=i instanceof bt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let l=o?new Ea(t,o):t,d=l.get(gr,null);if(d===null)throw new de(407,!1);let u=l.get(qy,null),a=l.get(fr,null),c={rendererFactory:d,sanitizer:u,inlineEffectRunner:null,changeDetectionScheduler:a},h=d.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",g=r?ry(h,r,this.componentDef.encapsulation,l):kh(h,p,Yy(p)),f=512;this.componentDef.signals?f|=4096:this.componentDef.onPush||(f|=16);let v=null;g!==null&&(v=Ac(g,l,!0));let y=Pc(0,null,null,1,0,null,null,null,null,null,null),E=zs(null,y,null,f,null,null,c,h,l,null,v);pc(E);let M,T,w=null;try{let C=this.componentDef,L,U=null;C.findHostDirectiveDefs?(L=[],U=new Map,C.findHostDirectiveDefs(C,L,U),L.push(C)):L=[C];let F=Xy(E,g);w=Ky(F,g,C,L,E,c,h),T=$d(y,hn),g&&Jy(h,C,g,r),n!==void 0&&eb(T,this.ngContentSelectors,n),M=Qy(w,C,L,U,E,[tb]),kc(y,E,null)}catch(C){throw w!==null&&xa(w),xa(E),C}finally{gc()}return new Ua(this.componentType,M,br(T,E),E,T)}finally{Te(s)}}},Ua=class extends La{constructor(t,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new xn(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let s=this._rootLView;Nc(s[we],s,i,t,n),this.previousInputValues.set(t,n);let o=Nn(this._tNode.index,s);Oc(o,1)}}get injector(){return new En(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function Xy(e,t){let n=e[we],r=hn;return e[r]=t,Ws(n,r,2,"#host",null)}function Ky(e,t,n,r,i,s,o){let l=i[we];Zy(r,e,t,o);let d=null;t!==null&&(d=Ac(t,i[ur]));let u=s.rendererFactory.createRenderer(t,n),a=16;n.signals?a=4096:n.onPush&&(a=64);let c=zs(i,Kh(n),null,a,i[e.index],e,s,u,null,null,d);return l.firstCreatePass&&ka(l,e,r.length-1),Gs(i,c),i[e.index]=c}function Zy(e,t,n,r){for(let i of e)t.mergedAttrs=ac(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(Ba(t,t.mergedAttrs,!0),n!==null&&Hh(r,n,t))}function Qy(e,t,n,r,i,s){let o=Rt(),l=i[we],d=xt(o,i);Qh(l,i,o,n,null,r);for(let a=0;a<n.length;a++){let c=o.directiveStart+a,h=hr(i,l,c,o);Mn(h,i)}Jh(l,i,o),d&&Mn(d,i);let u=hr(i,l,o.directiveStart+o.componentOffset,o);if(e[Tt]=i[Tt]=u,s!==null)for(let a of s)a(u,t);return qh(l,o,i),u}function Jy(e,t,n,r){if(r)fa(e,n,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=im(t.selectors[0]);i&&fa(e,n,i),s&&s.length>0&&Vh(e,n,s.join(" "))}}function eb(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function tb(){let e=Rt();yc(Fe()[we],e)}var gn=(()=>{class e{static{this.__NG_ELEMENT_ID__=nb}}return e})();function nb(){let e=Rt();return mf(e,Fe())}var rb=gn,gf=class extends rb{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return br(this._hostTNode,this._hostLView)}get injector(){return new En(this._hostTNode,this._hostLView)}get parentInjector(){let t=bc(this._hostTNode,this._hostLView);if(ch(t)){let n=ys(t,this._hostLView),r=vs(t),i=n[we].data[r+8];return new En(i,n)}else return new En(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Ju(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-ht}createEmbeddedView(t,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Zu(this._lContainer,t.ssrId),l=t.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(l,i,Ku(this._hostTNode,o)),l}createComponent(t,n,r,i,s){let o=t&&!_m(t),l;if(o)l=n;else{let g=n||{};l=g.index,r=g.injector,i=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}let d=o?t:new Yr(Dn(t)),u=r||this.parentInjector;if(!s&&d.ngModule==null){let f=(o?u:this.parentInjector).get(bt,null);f&&(s=f)}let a=Dn(d.componentType??{}),c=Zu(this._lContainer,a?.id??null),h=c?.firstChild??null,p=d.create(u,i,h,s);return this.insertImpl(p.hostView,l,Ku(this._hostTNode,c)),p}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(Im(i)){let l=this.indexOf(t);if(l!==-1)this.detach(l);else{let d=i[et],u=new gf(d,d[Mt],d[et]);u.detach(u.indexOf(t))}}let s=this._adjustIndex(n),o=this._lContainer;return Ty(o,i,s,r),t.attachToViewContainerRef(),wd(aa(o),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Ju(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Pa(this._lContainer,n);r&&(us(aa(this._lContainer),n),Lh(r[we],r))}detach(t){let n=this._adjustIndex(t,-1),r=Pa(this._lContainer,n);return r&&us(aa(this._lContainer),n)!=null?new xn(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Ju(e){return e[ps]}function aa(e){return e[ps]||(e[ps]=[])}function mf(e,t){let n,r=t[e.index];return Kt(r)?n=r:(n=ef(r,t,null,e),t[e.index]=n,Gs(t,n)),sb(n,t,e,r),new gf(n,e,t)}function ib(e,t){let n=e[st],r=n.createComment(""),i=xt(t,e),s=Bh(n,i);return Es(n,s,r,Wv(n,i),!1),r}var sb=cb,ob=()=>!1;function ab(e,t,n){return ob(e,t,n)}function cb(e,t,n,r){if(e[Sn])return;let i;n.type&8?i=Bt(r):i=ib(t,n),e[Sn]=i}var Va=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},Ha=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),l=this.queries[o.indexInDeclarationView];i.push(l.clone())}return new e(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)Lc(t,n).matches!==null&&this.queries[n].setDirty()}},$a=class{constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=mb(t):this.predicate=t}},za=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(t,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},Wa=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(t,n,lb(n,s)),this.matchTNodeWithReadOption(t,n,ss(n,t,s,!1,!1))}else r===Rn?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,ss(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===On||i===gn||i===Rn&&n.type&4)this.addMatch(n.index,-2);else{let s=ss(n,t,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function lb(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function ub(e,t){return e.type&11?br(e,t):e.type&4?Fc(e,t):null}function db(e,t,n,r){return n===-1?ub(t,e):n===-2?hb(e,t,r):hr(e,e[we],n,t)}function hb(e,t,n){if(n===On)return br(t,e);if(n===Rn)return Fc(t,e);if(n===gn)return mf(t,e)}function vf(e,t,n,r){let i=t[Wt].queries[r];if(i.matches===null){let s=e.data,o=n.matches,l=[];for(let d=0;o!==null&&d<o.length;d+=2){let u=o[d];if(u<0)l.push(null);else{let a=s[u];l.push(db(t,a,o[d+1],n.metadata.read))}}i.matches=l}return i.matches}function Ga(e,t,n,r){let i=e.queries.getByIndex(n),s=i.matches;if(s!==null){let o=vf(e,t,i,n);for(let l=0;l<s.length;l+=2){let d=s[l];if(d>0)r.push(o[l/2]);else{let u=s[l+1],a=t[-d];for(let c=ht;c<a.length;c++){let h=a[c];h[Cn]===h[et]&&Ga(h[we],h,u,r)}if(a[dr]!==null){let c=a[dr];for(let h=0;h<c.length;h++){let p=c[h];Ga(p[we],p,u,r)}}}}}return r}function fb(e,t){return e[Wt].queries[t].queryList}function pb(e,t,n){let r=new Ma((n&4)===4);return oy(e,t,r,r.destroy),(t[Wt]??=new Ha).queries.push(new Va(r))-1}function gb(e,t,n){let r=Ut();return r.firstCreatePass&&(vb(r,new $a(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),pb(r,Fe(),t)}function mb(e){return e.split(",").map(t=>t.trim())}function vb(e,t,n){e.queries===null&&(e.queries=new za),e.queries.track(new Wa(t,n))}function Lc(e,t){return e.queries.getByIndex(t)}function yb(e,t){let n=e[we],r=Lc(n,t);return r.crossesNgTemplate?Ga(n,e,t,[]):vf(n,e,r,t)}var ed=new Set;function jc(e){ed.has(e)||(ed.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var fn=class{},Xr=class{};var qa=class extends fn{constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ss(this);let s=Md(t);this._bootstrapComponents=Nh(s.bootstrap),this._r3Injector=yh(t,n,[{provide:fn,useValue:this},{provide:pr,useValue:this.componentFactoryResolver},...r],it(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Ya=class extends Xr{constructor(t){super(),this.moduleType=t}create(t){return new qa(this.moduleType,t,[])}};var As=class extends fn{constructor(t){super(),this.componentFactoryResolver=new Ss(this),this.instance=null;let n=new Wr([...t.providers,{provide:fn,useValue:this},{provide:pr,useValue:this.componentFactoryResolver}],t.parent||uc(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Bc(e,t,n=null){return new As({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}function yf(e){return _b(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function bb(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function _b(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function wb(e,t,n){return e[t]=n}function Eb(e,t){return e[t]}function Kr(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function Db(e,t,n,r){let i=Kr(e,t,n);return Kr(e,t+1,r)||i}function Cb(e){return(e.flags&32)===32}function Sb(e,t,n,r,i,s,o,l,d){let u=t.consts,a=Ws(t,e,4,o||null,l||null);Zh(t,n,a,ms(u,d)),yc(t,a);let c=a.tView=Pc(2,a,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u,null);return t.queries!==null&&(t.queries.template(t,a),c.queries=t.queries.embeddedTView(a)),a}function Ab(e,t,n,r,i,s,o,l,d,u){let a=n+hn,c=t.firstCreatePass?Sb(a,t,e,r,i,s,o,l,d):t.data[a];ni(c,!1);let h=Ib(t,e,c,n);mc()&&xc(t,e,h,c),Mn(h,e);let p=ef(h,e,h,c);return e[a]=p,Gs(e,p),ab(p,c,e),dc(c)&&Yh(t,e,c),d!=null&&Xh(e,c,u),c}function en(e,t,n,r,i,s,o,l){let d=Fe(),u=Ut(),a=ms(u.consts,s);return Ab(d,u,e,t,n,r,i,a,o,l),en}var Ib=Tb;function Tb(e,t,n,r){return vc(!0),t[st].createComment("")}var Ur=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(Ur||{}),Mb=(()=>{class e{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=pe({token:e,providedIn:"root",factory:()=>new e})}}return e})(),td=class e{constructor(){this.ngZone=oe(Ue),this.scheduler=oe(fr),this.errorHandler=oe(Gt,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Ur.EarlyRead,Ur.Write,Ur.MixedReadWrite,Ur.Read]}execute(){this.executing=!0;for(let t of e.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[t]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[t](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(6))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}static{this.\u0275prov=pe({token:e,providedIn:"root",factory:()=>new e})}};function xb(e,t,n,r){return Kr(e,Qd(),n)?t+Hr(n)+r:Jt}function Rb(e,t,n,r,i,s){let o=Bm(),l=Db(e,o,n,i);return Jd(2),l?t+Hr(n)+r+Hr(i)+s:Jt}function es(e,t){return e<<17|t<<2}function Pn(e){return e>>17&32767}function Pb(e){return(e&2)==2}function Nb(e,t){return e&131071|t<<17}function Xa(e){return e|2}function mr(e){return(e&131068)>>2}function ca(e,t){return e&-131069|t<<2}function kb(e){return(e&1)===1}function Ka(e){return e|1}function Ob(e,t,n,r,i,s){let o=s?t.classBindings:t.styleBindings,l=Pn(o),d=mr(o);e[r]=n;let u=!1,a;if(Array.isArray(n)){let c=n;a=c[1],(a===null||Jr(c,a)>0)&&(u=!0)}else a=n;if(i)if(d!==0){let h=Pn(e[l+1]);e[r+1]=es(h,l),h!==0&&(e[h+1]=ca(e[h+1],r)),e[l+1]=Nb(e[l+1],r)}else e[r+1]=es(l,0),l!==0&&(e[l+1]=ca(e[l+1],r)),l=r;else e[r+1]=es(d,0),l===0?l=r:e[d+1]=ca(e[d+1],r),d=r;u&&(e[r+1]=Xa(e[r+1])),nd(e,a,r,!0),nd(e,a,r,!1),Fb(t,a,e,r,s),o=es(l,d),s?t.classBindings=o:t.styleBindings=o}function Fb(e,t,n,r,i){let s=i?e.residualClasses:e.residualStyles;s!=null&&typeof t=="string"&&Jr(s,t)>=0&&(n[r+1]=Ka(n[r+1]))}function nd(e,t,n,r){let i=e[n+1],s=t===null,o=r?Pn(i):mr(i),l=!1;for(;o!==0&&(l===!1||s);){let d=e[o],u=e[o+1];Lb(d,t)&&(l=!0,e[o+1]=r?Ka(u):Xa(u)),o=r?Pn(u):mr(u)}l&&(e[n+1]=r?Xa(i):Ka(i))}function Lb(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Jr(e,t)>=0:!1}function $e(e,t,n){let r=Fe(),i=Qd();if(Kr(r,i,t)){let s=Ut(),o=qm();uy(s,o,r,e,t,r[st],n,!1)}return $e}function rd(e,t,n,r,i){let s=t.inputs,o=i?"class":"style";Nc(e,n,s[o],o,r)}function ri(e,t,n){return bf(e,t,n,!1),ri}function Uc(e,t){return bf(e,t,null,!0),Uc}function bf(e,t,n,r){let i=Fe(),s=Ut(),o=Jd(2);if(s.firstUpdatePass&&Bb(s,e,o,r),t!==Jt&&Kr(i,o,t)){let l=s.data[kn()];zb(s,l,i,i[st],e,i[o+1]=Wb(t,n),r,o)}}function jb(e,t){return t>=e.expandoStartIndex}function Bb(e,t,n,r){let i=e.data;if(i[n+1]===null){let s=i[kn()],o=jb(e,n);Gb(s,r)&&t===null&&!o&&(t=!1),t=Ub(i,s,t,r),Ob(i,s,t,n,o,r)}}function Ub(e,t,n,r){let i=zm(e),s=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=la(null,e,t,n,r),n=Zr(n,t.attrs,r),s=null);else{let o=t.directiveStylingLast;if(o===-1||e[o]!==i)if(n=la(i,e,t,n,r),s===null){let d=Vb(e,t,r);d!==void 0&&Array.isArray(d)&&(d=la(null,e,t,d[1],r),d=Zr(d,t.attrs,r),Hb(e,t,r,d))}else s=$b(e,t,r)}return s!==void 0&&(r?t.residualClasses=s:t.residualStyles=s),n}function Vb(e,t,n){let r=n?t.classBindings:t.styleBindings;if(mr(r)!==0)return e[Pn(r)]}function Hb(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[Pn(i)]=r}function $b(e,t,n){let r,i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++){let o=e[s].hostAttrs;r=Zr(r,o,n)}return Zr(r,t.attrs,n)}function la(e,t,n,r,i){let s=null,o=n.directiveEnd,l=n.directiveStylingLast;for(l===-1?l=n.directiveStart:l++;l<o&&(s=t[l],r=Zr(r,s.hostAttrs,i),s!==e);)l++;return e!==null&&(n.directiveStylingLast=l),r}function Zr(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let s=0;s<t.length;s++){let o=t[s];typeof o=="number"?i=o:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),zg(e,o,n?!0:t[++s]))}return e===void 0?null:e}function zb(e,t,n,r,i,s,o,l){if(!(t.type&3))return;let d=e.data,u=d[l+1],a=kb(u)?id(d,t,n,i,mr(u),o):void 0;if(!Is(a)){Is(s)||Pb(u)&&(s=id(d,null,n,i,l,o));let c=Hd(kn(),n);Qv(r,o,c,i,s)}}function id(e,t,n,r,i,s){let o=t===null,l;for(;i>0;){let d=e[i],u=Array.isArray(d),a=u?d[1]:d,c=a===null,h=n[i+1];h===Jt&&(h=c?At:void 0);let p=c?Jo(h,r):a===r?h:void 0;if(u&&!Is(p)&&(p=Jo(d,r)),Is(p)&&(l=p,o))return l;let g=e[i+1];i=o?Pn(g):mr(g)}if(t!==null){let d=s?t.residualClasses:t.residualStyles;d!=null&&(l=Jo(d,r))}return l}function Is(e){return e!==void 0}function Wb(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=it(Hs(e)))),e}function Gb(e,t){return(e.flags&(t?8:16))!==0}function qb(e,t,n,r,i,s){let o=t.consts,l=ms(o,i),d=Ws(t,e,2,r,l);return Zh(t,n,d,ms(o,s)),d.attrs!==null&&Ba(d,d.attrs,!1),d.mergedAttrs!==null&&Ba(d,d.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,d),d}function je(e,t,n,r){let i=Fe(),s=Ut(),o=hn+e,l=i[st],d=s.firstCreatePass?qb(o,s,i,t,n,r):s.data[o],u=Yb(s,i,d,l,t,e);i[o]=u;let a=dc(d);return ni(d,!0),Hh(l,u,d),!Cb(d)&&mc()&&xc(s,i,u,d),xm()===0&&Mn(u,i),Rm(),a&&(Yh(s,i,d),qh(s,d,i)),r!==null&&Xh(i,d),je}function Oe(){let e=Rt();Kd()?Lm():(e=e.parent,ni(e,!1));let t=e;km(t)&&Om(),Pm();let n=Ut();return n.firstCreatePass&&(yc(n,e),Ld(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&Qm(t)&&rd(n,t,Fe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Jm(t)&&rd(n,t,Fe(),t.stylesWithoutHost,!1),Oe}function wr(e,t,n,r){return je(e,t,n,r),Oe(),wr}var Yb=(e,t,n,r,i,s)=>(vc(!0),kh(r,i,Ym()));function Ys(){return Fe()}var Ts="en-US";var Xb=Ts;function Kb(e){typeof e=="string"&&(Xb=e.toLowerCase().replace(/_/g,"-"))}var Zb=(e,t,n)=>{};function ft(e,t,n,r){let i=Fe(),s=Ut(),o=Rt();return Jb(s,i,i[st],o,e,t,r),ft}function Qb(e,t,n,r){let i=e.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let l=t[fs],d=i[s+2];return l.length>d?l[d]:null}typeof o=="string"&&(s+=2)}return null}function Jb(e,t,n,r,i,s,o){let l=dc(r),u=e.firstCreatePass&&rf(e),a=t[Tt],c=nf(t),h=!0;if(r.type&3||o){let f=xt(r,t),v=o?o(f):f,y=c.length,E=o?T=>o(Bt(T[r.index])):r.index,M=null;if(!o&&l&&(M=Qb(e,t,i,r.index)),M!==null){let T=M.__ngLastListenerFn__||M;T.__ngNextListenerFn__=s,M.__ngLastListenerFn__=s,h=!1}else{s=od(r,t,a,s),Zb(f,i,s);let T=n.listen(v,i,s);c.push(s,T),u&&u.push(i,E,y,y+1)}}else s=od(r,t,a,s);let p=r.outputs,g;if(h&&p!==null&&(g=p[i])){let f=g.length;if(f)for(let v=0;v<f;v+=2){let y=g[v],E=g[v+1],w=t[y][E].subscribe(s),C=c.length;c.push(s,w),u&&u.push(i,r.index,C,-(C+1))}}}function sd(e,t,n,r){let i=Te(null);try{return kt(6,t,n),n(r)!==!1}catch(s){return sf(e,s),!1}finally{kt(7,t,n),Te(i)}}function od(e,t,n,r){return function i(s){if(s===Function)return r;let o=e.componentOffset>-1?Nn(e.index,t):t;Oc(o,5);let l=sd(t,n,r,s),d=i.__ngNextListenerFn__;for(;d;)l=sd(t,n,d,s)&&l,d=d.__ngNextListenerFn__;return l}}function Ke(e=1){return Gm(e)}function _f(e,t,n){gb(e,t,n)}function Vc(e){let t=Fe(),n=Ut(),r=eh();fc(r+1);let i=Lc(n,r);if(e.dirty&&Am(t)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let s=yb(t,r);e.reset(s,_v),e.notifyOnChanges()}return!0}return!1}function Hc(){return fb(Fe(),eh())}function Ze(e,t=""){let n=Fe(),r=Ut(),i=e+hn,s=r.firstCreatePass?Ws(r,i,1,t,null):r.data[i],o=e0(r,n,s,t,e);n[i]=o,mc()&&xc(r,n,o,s),ni(s,!1)}var e0=(e,t,n,r,i)=>(vc(!0),Ov(t[st],r));function $c(e){return Er("",e,""),$c}function Er(e,t,n){let r=Fe(),i=xb(r,e,t,n);return i!==Jt&&of(r,kn(),i),Er}function Xs(e,t,n,r,i){let s=Fe(),o=Rb(s,e,t,n,r,i);return o!==Jt&&of(s,kn(),o),Xs}var t0=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Pd(!1,n.type),i=r.length>0?Bc([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=pe({token:e,providedIn:"environment",factory:()=>new e(Se(bt))})}}return e})();function Ks(e){jc("NgStandalone"),e.getStandaloneInjector=t=>t.get(t0).getOrCreateStandaloneInjector(e)}function wf(e,t,n){let r=jm()+e,i=Fe();return i[r]===Jt?wb(i,r,n?t.call(n):t()):Eb(i,r)}var Zs=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var Ef=new be("");function ii(e){return!!e&&typeof e.then=="function"}function Df(e){return!!e&&typeof e.subscribe=="function"}var Cf=new be(""),Sf=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=oe(Cf,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(ii(s))n.push(s);else if(Df(s)){let o=new Promise((l,d)=>{s.subscribe({complete:l,error:d})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),zc=new be("");function n0(){Xl(()=>{throw new de(600,!1)})}function r0(e){return e.isBoundToModule}var i0=10;function s0(e,t,n){try{let r=n();return ii(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var Fn=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=oe(yv),this.afterRenderManager=oe(Mb),this.zonelessEnabled=oe(qs),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new rt,this.afterTick=new rt,this.componentTypes=[],this.components=[],this.isStable=oe(yr).hasPendingTasks.pipe(Ce(n=>!n)),this._injector=oe(bt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Cs;if(!this._injector.get(Sf).done){let h=!i&&Td(n),p=!1;throw new de(405,p)}let o;i?o=n:o=this._injector.get(pr).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let l=r0(o)?void 0:this._injector.get(fn),d=r||o.selector,u=o.create(Tn.NULL,[],d,l),a=u.location.nativeElement,c=u.injector.get(Ef,null);return c?.registerApplication(a),u.onDestroy(()=>{this.detachView(u.hostView),os(this.components,u),c?.unregisterApplication(a)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new de(101,!1);let n=Te(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Te(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(gr,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<i0;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)o0(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Us(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;os(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(zc,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>os(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new de(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function os(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function o0(e,t,n,r){if(!n&&!Us(e))return;lf(e,t,n&&!r?0:1)}var Za=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Wc=(()=>{class e{compileModuleSync(n){return new Ya(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Md(n),s=Nh(i.declarations).reduce((o,l)=>{let d=Dn(l);return d&&o.push(new Yr(d)),o},[]);return new Za(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var a0=(()=>{class e{constructor(){this.zone=oe(Ue),this.changeDetectionScheduler=oe(fr),this.applicationRef=oe(Fn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),c0=new be("",{factory:()=>!1});function Af({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new Ue(ke(ce({},Tf()),{scheduleInRootZone:n})),[{provide:Ue,useFactory:e},{provide:lr,multi:!0,useFactory:()=>{let r=oe(a0,{optional:!0});return()=>r.initialize()}},{provide:lr,multi:!0,useFactory:()=>{let r=oe(l0);return()=>{r.initialize()}}},t===!0?{provide:ff,useValue:!0}:[],{provide:pf,useValue:n??bh}]}function If(e){let t=e?.ignoreChangesOutsideZone,n=e?.scheduleInRootZone,r=Af({ngZoneFactory:()=>{let i=Tf(e);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&jc("NgZone_CoalesceEvent"),new Ue(i)},ignoreChangesOutsideZone:t,scheduleInRootZone:n});return Os([{provide:c0,useValue:!0},{provide:qs,useValue:!1},r])}function Tf(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var l0=(()=>{class e{constructor(){this.subscription=new Be,this.initialized=!1,this.zone=oe(Ue),this.pendingTasks=oe(yr)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ue.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ue.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var u0=(()=>{class e{constructor(){this.appRef=oe(Fn),this.taskService=oe(yr),this.ngZone=oe(Ue),this.zonelessEnabled=oe(qs),this.disableScheduling=oe(ff,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Be,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(_s):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(oe(pf,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ta||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Hu:wh;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(_s+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Hu(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function d0(){return typeof $localize<"u"&&$localize.locale||Ts}var Gc=new be("",{providedIn:"root",factory:()=>oe(Gc,_e.Optional|_e.SkipSelf)||d0()});var Qa=new be("");function ts(e){return!e.moduleRef}function h0(e){let t=ts(e)?e.r3Injector:e.moduleRef.injector,n=t.get(Ue);return n.run(()=>{ts(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(Gt,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),ts(e)){let s=()=>t.destroy(),o=e.platformInjector.get(Qa);o.add(s),t.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>e.moduleRef.destroy(),o=e.platformInjector.get(Qa);o.add(s),e.moduleRef.onDestroy(()=>{os(e.allPlatformModules,e.moduleRef),i.unsubscribe(),o.delete(s)})}return s0(r,n,()=>{let s=t.get(Sf);return s.runInitializers(),s.donePromise.then(()=>{let o=t.get(Gc,Ts);if(Kb(o||Ts),ts(e)){let l=t.get(Fn);return e.rootComponent!==void 0&&l.bootstrap(e.rootComponent),l}else return f0(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function f0(e,t){let n=e.injector.get(Fn);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new de(-403,!1);t.push(e)}var as=null;function p0(e=[],t){return Tn.create({name:t,providers:[{provide:Fs,useValue:"platform"},{provide:Qa,useValue:new Set([()=>as=null])},...e]})}function g0(e=[]){if(as)return as;let t=p0(e);return as=t,n0(),m0(t),t}function m0(e){e.get(Cc,null)?.forEach(n=>n())}var si=(()=>{class e{static{this.__NG_ELEMENT_ID__=v0}}return e})();function v0(e){return y0(Rt(),Fe(),(e&16)===16)}function y0(e,t,n){if(js(e)&&!n){let r=Nn(e.index,t);return new xn(r,r)}else if(e.type&175){let r=t[jt];return new xn(r,t)}return null}var Ja=class{constructor(){}supports(t){return yf(t)}create(t){return new ec(t)}},b0=(e,t)=>t,ec=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||b0}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<ad(r,i,s)?n:r,l=ad(o,i,s),d=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let u=l-i,a=d-i;if(u!=a){for(let h=0;h<u;h++){let p=h<s.length?s[h]:s[h]=0,g=p+h;a<=g&&g<u&&(s[h]=p+1)}let c=o.previousIndex;s[c]=a-u}}l!==d&&t(o,l,d)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!yf(t))throw new de(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(t)){this.length=t.length;for(let l=0;l<this.length;l++)s=t[l],o=this._trackByFn(l,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,l),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,l)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,bb(t,l=>{o=this._trackByFn(i,l),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,l,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,l,o,i)),Object.is(n.item,l)||this._addIdentityChange(n,l)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let s;return t===null?s=this._itTail:(s=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,s,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,s,i)):t=this._addAfter(new tc(n,r),s,i)),t}_verifyReinsertion(t,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?t=this._reinsertAfter(s,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,s=t._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Ms),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ms),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},tc=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},nc=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Ms=class{constructor(){this.map=new Map}put(t){let n=t.trackById,r=this.map.get(n);r||(r=new nc,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ad(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function cd(){return new qc([new Ja])}var qc=(()=>{class e{static{this.\u0275prov=pe({token:e,providedIn:"root",factory:cd})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||cd()),deps:[[e,new _d,new sc]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new de(901,!1)}}return e})();function Mf(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,i=g0(r),s=[Af({}),{provide:fr,useExisting:u0},...n||[]],o=new As({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return h0({r3Injector:o.injector,platformInjector:i,rootComponent:t})}catch(t){return Promise.reject(t)}}var Ff=null;function Dr(){return Ff}function Lf(e){Ff??=e}var Js=class{};var _t=new be(""),jf=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>oe(D0),providedIn:"platform"})}}return e})();var D0=(()=>{class e extends jf{constructor(){super(),this._doc=oe(_t),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Dr().getBaseHref(this._doc)}onPopState(n){let r=Dr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Dr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function Bf(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function xf(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function Ln(e){return e&&e[0]!=="?"?"?"+e:e}var to=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>oe(Uf),providedIn:"root"})}}return e})(),C0=new be(""),Uf=(()=>{class e extends to{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??oe(_t).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Bf(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Ln(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Ln(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Ln(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(Se(jf),Se(C0,8))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var oi=(()=>{class e{constructor(n){this._subject=new Je,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=I0(xf(Rf(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ln(r))}normalize(n){return e.stripTrailingSlash(A0(this._basePath,Rf(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ln(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ln(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Ln}static{this.joinWithSlash=Bf}static{this.stripTrailingSlash=xf}static{this.\u0275fac=function(r){return new(r||e)(Se(to))}}static{this.\u0275prov=pe({token:e,factory:()=>S0(),providedIn:"root"})}}return e})();function S0(){return new oi(Se(to))}function A0(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function Rf(e){return e.replace(/\/index.html$/,"")}function I0(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function Vf(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}var Yc=class{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Hf=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Yc(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let l=r.get(s);r.move(l,o),Pf(l,i)}});for(let i=0,s=r.length;i<s;i++){let l=r.get(i).context;l.index=i,l.count=s,l.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);Pf(s,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(pn(gn),pn(Rn),pn(qc))}}static{this.\u0275dir=ei({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return e})();function Pf(e,t){e.context.$implicit=t.item}var $f=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new Xc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Nf("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Nf("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(pn(gn),pn(Rn))}}static{this.\u0275dir=ei({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})(),Xc=class{constructor(){this.$implicit=null,this.ngIf=null}};function Nf(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${it(t)}'.`)}var Kc=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=ks({type:e})}static{this.\u0275inj=xs({})}}return e})(),zf="browser",T0="server";function Zc(e){return e===T0}var eo=class{};var el=class extends Js{constructor(){super(...arguments),this.supportsDOMEvents=!0}},tl=class e extends el{static makeCurrent(){Lf(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=x0();return n==null?null:R0(n)}resetBaseElement(){ai=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Vf(document.cookie,t)}},ai=null;function x0(){return ai=ai||document.querySelector("base"),ai?ai.getAttribute("href"):null}function R0(e){return new URL(e,document.baseURI).pathname}var P0=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})(),nl=new be(""),Yf=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new de(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||e)(Se(nl),Se(Ue))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})(),no=class{constructor(t){this._doc=t}},Qc="ng-app-id",Xf=(()=>{class e{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Zc(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Qc}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Qc),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Qc,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(Se(_t),Se(Dc),Se(Sc,8),Se(_r))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})(),Jc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},il=/%COMP%/g,Kf="%COMP%",N0=`_nghost-${Kf}`,k0=`_ngcontent-${Kf}`,O0=!0,F0=new be("",{providedIn:"root",factory:()=>O0});function L0(e){return k0.replace(il,e)}function j0(e){return N0.replace(il,e)}function Zf(e,t){return t.map(n=>n.replace(il,e))}var Wf=(()=>{class e{constructor(n,r,i,s,o,l,d,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=l,this.ngZone=d,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Zc(l),this.defaultRenderer=new ci(n,o,d,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ft.ShadowDom&&(r=ke(ce({},r),{encapsulation:Ft.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof ro?i.applyToHost(n):i instanceof li&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,l=this.ngZone,d=this.eventManager,u=this.sharedStylesHost,a=this.removeStylesOnCompDestroy,c=this.platformIsServer;switch(r.encapsulation){case Ft.Emulated:s=new ro(d,u,r,this.appId,a,o,l,c);break;case Ft.ShadowDom:return new rl(d,u,n,r,o,l,this.nonce,c);default:s=new li(d,u,r,a,o,l,c);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(Se(Yf),Se(Xf),Se(Dc),Se(F0),Se(_t),Se(_r),Se(Ue),Se(Sc))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})(),ci=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Jc[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(Gf(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(Gf(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new de(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let s=Jc[i];s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=Jc[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(qt.DashCase|qt.Important)?t.style.setProperty(n,r,i&qt.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&qt.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=Dr().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function Gf(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var rl=class extends ci{constructor(t,n,r,i,s,o,l,d){super(t,s,o,d),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Zf(i.id,i.styles);for(let a of u){let c=document.createElement("style");l&&c.setAttribute("nonce",l),c.textContent=a,this.shadowRoot.appendChild(c)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},li=class extends ci{constructor(t,n,r,i,s,o,l,d){super(t,s,o,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=d?Zf(d,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ro=class extends li{constructor(t,n,r,i,s,o,l,d){let u=i+"-"+r.id;super(t,n,r,s,o,l,d,u),this.contentAttr=L0(u),this.hostAttr=j0(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},B0=(()=>{class e extends no{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(Se(_t))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})(),qf=["alt","control","meta","shift"],U0={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},V0={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},H0=(()=>{class e extends no{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i){let s=e.parseEventName(r),o=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Dr().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=e._normalizeKey(r.pop()),o="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),o="code."),qf.forEach(u=>{let a=r.indexOf(u);a>-1&&(r.splice(a,1),o+=u+".")}),o+=s,r.length!=0||s.length===0)return null;let d={};return d.domEventName=i,d.fullKey=o,d}static matchEventFullKeyCode(n,r){let i=U0[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),qf.forEach(o=>{if(o!==i){let l=V0[o];l(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{e.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||e)(Se(_t))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac})}}return e})();function Qf(e,t){return Mf(ce({rootComponent:e},$0(t)))}function $0(e){return{appProviders:[...Y0,...e?.providers??[]],platformProviders:q0}}function z0(){tl.makeCurrent()}function W0(){return new Gt}function G0(){return Th(document),document}var q0=[{provide:_r,useValue:zf},{provide:Cc,useValue:z0,multi:!0},{provide:_t,useFactory:G0,deps:[]}];var Y0=[{provide:Fs,useValue:"root"},{provide:Gt,useFactory:W0,deps:[]},{provide:nl,useClass:B0,multi:!0,deps:[_t,Ue,_r]},{provide:nl,useClass:H0,multi:!0,deps:[_t]},Wf,Xf,Yf,{provide:gr,useExisting:Wf},{provide:eo,useClass:P0,deps:[]},[]];var Jf=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||e)(Se(_t))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ve="primary",Ai=Symbol("RouteTitle"),ll=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Mr(e){return new ll(e)}function K0(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],l=e[s];if(o[0]===":")i[o.substring(1)]=l;else if(o!==l.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Z0(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Vt(e[n],t[n]))return!1;return!0}function Vt(e,t){let n=e?ul(e):void 0,r=t?ul(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!ap(e[i],t[i]))return!1;return!0}function ul(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function ap(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,s)=>r[s]===i)}else return e===t}function cp(e){return e.length>0?e[e.length-1]:null}function mn(e){return Go(e)?e:ii(e)?Ve(Promise.resolve(e)):me(e)}var Q0={exact:up,subset:dp},lp={exact:J0,subset:e_,ignored:()=>!0};function ep(e,t,n){return Q0[n.paths](e.root,t.root,n.matrixParams)&&lp[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function J0(e,t){return Vt(e,t)}function up(e,t,n){if(!Bn(e.segments,t.segments)||!oo(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!up(e.children[r],t.children[r],n))return!1;return!0}function e_(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>ap(e[n],t[n]))}function dp(e,t,n){return hp(e,t,t.segments,n)}function hp(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!Bn(i,n)||t.hasChildren()||!oo(i,n,r))}else if(e.segments.length===n.length){if(!Bn(e.segments,n)||!oo(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!dp(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!Bn(e.segments,i)||!oo(e.segments,i,r)||!e.children[ve]?!1:hp(e.children[ve],t,s,r)}}function oo(e,t,n){return t.every((r,i)=>lp[n](e[i].parameters,r.parameters))}var nn=class{constructor(t=new Me([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Mr(this.queryParams),this._queryParamMap}toString(){return r_.serialize(this)}},Me=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ao(this)}},jn=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Mr(this.parameters),this._parameterMap}toString(){return pp(this)}};function t_(e,t){return Bn(e,t)&&e.every((n,r)=>Vt(n.parameters,t[r].parameters))}function Bn(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function n_(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===ve&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==ve&&(n=n.concat(t(i,r)))}),n}var Fl=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>new mi,providedIn:"root"})}}return e})(),mi=class{parse(t){let n=new hl(t);return new nn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${ui(t.root,!0)}`,r=o_(t.queryParams),i=typeof t.fragment=="string"?`#${i_(t.fragment)}`:"";return`${n}${r}${i}`}},r_=new mi;function ao(e){return e.segments.map(t=>pp(t)).join("/")}function ui(e,t){if(!e.hasChildren())return ao(e);if(t){let n=e.children[ve]?ui(e.children[ve],!1):"",r=[];return Object.entries(e.children).forEach(([i,s])=>{i!==ve&&r.push(`${i}:${ui(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=n_(e,(r,i)=>i===ve?[ui(e.children[ve],!1)]:[`${i}:${ui(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[ve]!=null?`${ao(e)}/${n[0]}`:`${ao(e)}/(${n.join("//")})`}}function fp(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function io(e){return fp(e).replace(/%3B/gi,";")}function i_(e){return encodeURI(e)}function dl(e){return fp(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function co(e){return decodeURIComponent(e)}function tp(e){return co(e.replace(/\+/g,"%20"))}function pp(e){return`${dl(e.path)}${s_(e.parameters)}`}function s_(e){return Object.entries(e).map(([t,n])=>`;${dl(t)}=${dl(n)}`).join("")}function o_(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${io(n)}=${io(i)}`).join("&"):`${io(n)}=${io(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var a_=/^[^\/()?;#]+/;function sl(e){let t=e.match(a_);return t?t[0]:""}var c_=/^[^\/()?;=#]+/;function l_(e){let t=e.match(c_);return t?t[0]:""}var u_=/^[^=?&#]+/;function d_(e){let t=e.match(u_);return t?t[0]:""}var h_=/^[^&#]+/;function f_(e){let t=e.match(h_);return t?t[0]:""}var hl=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[ve]=new Me(t,n)),r}parseSegment(){let t=sl(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new de(4009,!1);return this.capture(t),new jn(co(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=l_(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=sl(this.remaining);i&&(r=i,this.capture(r))}t[co(n)]=co(r)}parseQueryParam(t){let n=d_(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=f_(this.remaining);o&&(r=o,this.capture(r))}let i=tp(n),s=tp(r);if(t.hasOwnProperty(i)){let o=t[i];Array.isArray(o)||(o=[o],t[i]=o),o.push(s)}else t[i]=s}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=sl(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new de(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=ve);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ve]:new Me([],o),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new de(4011,!1)}};function gp(e){return e.segments.length>0?new Me([],{[ve]:e}):e}function mp(e){let t={};for(let[r,i]of Object.entries(e.children)){let s=mp(i);if(r===ve&&s.segments.length===0&&s.hasChildren())for(let[o,l]of Object.entries(s.children))t[o]=l;else(s.segments.length>0||s.hasChildren())&&(t[r]=s)}let n=new Me(e.segments,t);return p_(n)}function p_(e){if(e.numberOfChildren===1&&e.children[ve]){let t=e.children[ve];return new Me(e.segments.concat(t.segments),t.children)}return e}function vi(e){return e instanceof nn}function g_(e,t,n=null,r=null){let i=vp(e);return yp(i,t,n,r)}function vp(e){let t;function n(s){let o={};for(let d of s.children){let u=n(d);o[d.outlet]=u}let l=new Me(s.url,o);return s===e&&(t=l),l}let r=n(e.root),i=gp(r);return t??i}function yp(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return ol(i,i,i,n,r);let s=m_(t);if(s.toRoot())return ol(i,i,new Me([],{}),n,r);let o=v_(s,i,e),l=o.processChildren?fi(o.segmentGroup,o.index,s.commands):_p(o.segmentGroup,o.index,s.commands);return ol(i,o.segmentGroup,l,n,r)}function lo(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function yi(e){return typeof e=="object"&&e!=null&&e.outlets}function ol(e,t,n,r,i){let s={};r&&Object.entries(r).forEach(([d,u])=>{s[d]=Array.isArray(u)?u.map(a=>`${a}`):`${u}`});let o;e===t?o=n:o=bp(e,t,n);let l=gp(mp(o));return new nn(l,s,i)}function bp(e,t,n){let r={};return Object.entries(e.children).forEach(([i,s])=>{s===t?r[i]=n:r[i]=bp(s,t,n)}),new Me(e.segments,r)}var uo=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&lo(r[0]))throw new de(4003,!1);let i=r.find(yi);if(i&&i!==cp(r))throw new de(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function m_(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new uo(!0,0,e);let t=0,n=!1,r=e.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let l={};return Object.entries(s.outlets).forEach(([d,u])=>{l[d]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:l}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((l,d)=>{d==0&&l==="."||(d==0&&l===""?n=!0:l===".."?t++:l!=""&&i.push(l))}),i):[...i,s]},[]);return new uo(n,t,r)}var Ar=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function v_(e,t,n){if(e.isAbsolute)return new Ar(t,!0,0);if(!n)return new Ar(t,!1,NaN);if(n.parent===null)return new Ar(n,!0,0);let r=lo(e.commands[0])?0:1,i=n.segments.length-1+r;return y_(n,i,e.numberOfDoubleDots)}function y_(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new de(4005,!1);i=r.segments.length}return new Ar(r,!1,i-s)}function b_(e){return yi(e[0])?e[0].outlets:{[ve]:e}}function _p(e,t,n){if(e??=new Me([],{}),e.segments.length===0&&e.hasChildren())return fi(e,t,n);let r=__(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let s=new Me(e.segments.slice(0,r.pathIndex),{});return s.children[ve]=new Me(e.segments.slice(r.pathIndex),e.children),fi(s,0,i)}else return r.match&&i.length===0?new Me(e.segments,{}):r.match&&!e.hasChildren()?fl(e,t,n):r.match?fi(e,0,i):fl(e,t,n)}function fi(e,t,n){if(n.length===0)return new Me(e.segments,{});{let r=b_(n),i={};if(Object.keys(r).some(s=>s!==ve)&&e.children[ve]&&e.numberOfChildren===1&&e.children[ve].segments.length===0){let s=fi(e.children[ve],t,n);return new Me(e.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=_p(e.children[s],t,o))}),Object.entries(e.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Me(e.segments,i)}}function __(e,t,n){let r=0,i=t,s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;let o=e.segments[i],l=n[r];if(yi(l))break;let d=`${l}`,u=r<n.length-1?n[r+1]:null;if(i>0&&d===void 0)break;if(d&&u&&typeof u=="object"&&u.outlets===void 0){if(!rp(d,u,o))return s;r+=2}else{if(!rp(d,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function fl(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let s=n[i];if(yi(s)){let d=w_(s.outlets);return new Me(r,d)}if(i===0&&lo(n[0])){let d=e.segments[t];r.push(new jn(d.path,np(n[0]))),i++;continue}let o=yi(s)?s.outlets[ve]:`${s}`,l=i<n.length-1?n[i+1]:null;o&&l&&lo(l)?(r.push(new jn(o,np(l))),i+=2):(r.push(new jn(o,{})),i++)}return new Me(r,{})}function w_(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=fl(new Me([],{}),0,r))}),t}function np(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function rp(e,t,n){return e==n.path&&Vt(t,n.parameters)}var pi="imperative",Qe=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Qe||{}),wt=class{constructor(t,n){this.id=t,this.url=n}},bi=class extends wt{constructor(t,n,r="imperative",i=null){super(t,n),this.type=Qe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Un=class extends wt{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=Qe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},gt=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(gt||{}),pl=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(pl||{}),tn=class extends wt{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Qe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Vn=class extends wt{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=Qe.NavigationSkipped}},_i=class extends wt{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=Qe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ho=class extends wt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Qe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gl=class extends wt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Qe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ml=class extends wt{constructor(t,n,r,i,s){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Qe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},vl=class extends wt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Qe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yl=class extends wt{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=Qe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bl=class{constructor(t){this.route=t,this.type=Qe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},_l=class{constructor(t){this.route=t,this.type=Qe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},wl=class{constructor(t){this.snapshot=t,this.type=Qe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},El=class{constructor(t){this.snapshot=t,this.type=Qe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dl=class{constructor(t){this.snapshot=t,this.type=Qe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cl=class{constructor(t){this.snapshot=t,this.type=Qe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var wi=class{},xr=class{constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function E_(e,t){return e.providers&&!e._injector&&(e._injector=Bc(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Pt(e){return e.outlet||ve}function D_(e,t){let n=e.filter(r=>Pt(r)===t);return n.push(...e.filter(r=>Pt(r)!==t)),n}function Ii(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Sl=class{get injector(){return Ii(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new bo(this.rootInjector),this.attachRef=null}},bo=(()=>{class e{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Sl(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||e)(Se(bt))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),fo=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=Al(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=Al(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=Il(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Il(t,this._root).map(n=>n.value)}};function Al(e,t){if(e===t.value)return t;for(let n of t.children){let r=Al(e,n);if(r)return r}return null}function Il(e,t){if(e===t.value)return[t];for(let n of t.children){let r=Il(e,n);if(r.length)return r.unshift(t),r}return[]}var pt=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Sr(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var po=class extends fo{constructor(t,n){super(t),this.snapshot=n,Ll(this,t)}toString(){return this.snapshot.toString()}};function wp(e){let t=C_(e),n=new Ye([new jn("",{})]),r=new Ye({}),i=new Ye({}),s=new Ye({}),o=new Ye(""),l=new Rr(n,r,s,o,i,ve,e,t.root);return l.snapshot=t.root,new po(new pt(l,[]),t)}function C_(e){let t={},n={},r={},i="",s=new Ir([],t,r,i,n,ve,e,null,{});return new mo("",new pt(s,[]))}var Rr=class{constructor(t,n,r,i,s,o,l,d){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=l,this._futureSnapshot=d,this.title=this.dataSubject?.pipe(Ce(u=>u[Ai]))??me(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ce(t=>Mr(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ce(t=>Mr(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function go(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:ce(ce({},t.params),e.params),data:ce(ce({},t.data),e.data),resolve:ce(ce(ce(ce({},e.data),t.data),i?.data),e._resolvedData)}:r={params:ce({},e.params),data:ce({},e.data),resolve:ce(ce({},e.data),e._resolvedData??{})},i&&Dp(i)&&(r.resolve[Ai]=i.title),r}var Ir=class{get title(){return this.data?.[Ai]}constructor(t,n,r,i,s,o,l,d,u){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=l,this.routeConfig=d,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Mr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Mr(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},mo=class extends fo{constructor(t,n){super(n),this.url=t,Ll(this,n)}toString(){return Ep(this._root)}};function Ll(e,t){t.value._routerState=e,t.children.forEach(n=>Ll(e,n))}function Ep(e){let t=e.children.length>0?` { ${e.children.map(Ep).join(", ")} } `:"";return`${e.value}${t}`}function al(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Vt(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Vt(t.params,n.params)||e.paramsSubject.next(n.params),Z0(t.url,n.url)||e.urlSubject.next(n.url),Vt(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Tl(e,t){let n=Vt(e.params,t.params)&&t_(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Tl(e.parent,t.parent))}function Dp(e){return typeof e.title=="string"||e.title===null}var S_=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ve,this.activateEvents=new Je,this.deactivateEvents=new Je,this.attachEvents=new Je,this.detachEvents=new Je,this.parentContexts=oe(bo),this.location=oe(gn),this.changeDetector=oe(si),this.inputBinder=oe(jl,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new de(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new de(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new de(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new de(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,d=new Ml(n,l,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:d,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=ei({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Bs]})}}return e})(),Ml=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Rr?this.route:t===bo?this.childContexts:this.parent.get(t,n)}},jl=new be("");function A_(e,t,n){let r=Ei(e,t._root,n?n._root:void 0);return new po(r,t)}function Ei(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=I_(e,t,n);return new pt(r,i)}else{if(e.shouldAttach(t.value)){let s=e.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(l=>Ei(e,l)),o}}let r=T_(t.value),i=t.children.map(s=>Ei(e,s));return new pt(r,i)}}function I_(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Ei(e,r,i);return Ei(e,r)})}function T_(e){return new Rr(new Ye(e.url),new Ye(e.params),new Ye(e.queryParams),new Ye(e.fragment),new Ye(e.data),e.outlet,e.component,e)}var Di=class{constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},Cp="ngNavigationCancelingError";function vo(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=vi(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=Sp(!1,gt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Sp(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[Cp]=!0,n.cancellationCode=t,n}function M_(e){return Ap(e)&&vi(e.url)}function Ap(e){return!!e&&e[Cp]}var x_=(e,t,n,r)=>Ce(i=>(new xl(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),xl=class{constructor(t,n,r,i,s){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),al(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=Sr(n);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,n,r){let i=t.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(t,n,o.children)}else this.deactivateChildRoutes(t,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=Sr(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:l})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=Sr(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=Sr(n);t.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Cl(s.value.snapshot))}),t.children.length&&this.forwardEvent(new El(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,s=n?n.value:null;if(al(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,o.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let l=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(l.contexts),o.attachRef=l.componentRef,o.route=l.route.value,o.outlet&&o.outlet.attach(l.componentRef,l.route.value),al(l.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,r)}},yo=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Tr=class{constructor(t,n){this.component=t,this.route=n}};function R_(e,t,n){let r=e._root,i=t?t._root:null;return di(r,i,n,[r.value])}function P_(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Nr(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!fd(e)?e:t.get(e):r}function di(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Sr(t);return e.children.forEach(o=>{N_(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,l])=>gi(l,n.getContext(o),i)),i}function N_(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=e.value,o=t?t.value:null,l=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let d=k_(o,s,s.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new yo(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?di(e,t,l?l.children:null,r,i):di(e,t,n,r,i),d&&l&&l.outlet&&l.outlet.isActivated&&i.canDeactivateChecks.push(new Tr(l.outlet.component,o))}else o&&gi(t,l,i),i.canActivateChecks.push(new yo(r)),s.component?di(e,null,l?l.children:null,r,i):di(e,null,n,r,i);return i}function k_(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Bn(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Bn(e.url,t.url)||!Vt(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Tl(e,t)||!Vt(e.queryParams,t.queryParams);case"paramsChange":default:return!Tl(e,t)}}function gi(e,t,n){let r=Sr(e),i=e.value;Object.entries(r).forEach(([s,o])=>{i.component?t?gi(o,t.children.getContext(s),n):gi(o,null,n):gi(o,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Tr(t.outlet.component,i)):n.canDeactivateChecks.push(new Tr(null,i)):n.canDeactivateChecks.push(new Tr(null,i))}function Ti(e){return typeof e=="function"}function O_(e){return typeof e=="boolean"}function F_(e){return e&&Ti(e.canLoad)}function L_(e){return e&&Ti(e.canActivate)}function j_(e){return e&&Ti(e.canActivateChild)}function B_(e){return e&&Ti(e.canDeactivate)}function U_(e){return e&&Ti(e.canMatch)}function Ip(e){return e instanceof $t||e?.name==="EmptyError"}var so=Symbol("INITIAL_VALUE");function Pr(){return Ct(e=>Ki(e.map(t=>t.pipe(zt(1),Zo(so)))).pipe(Ce(t=>{for(let n of t)if(n!==!0){if(n===so)return so;if(n===!1||V_(n))return n}return!0}),Dt(t=>t!==so),zt(1)))}function V_(e){return vi(e)||e instanceof Di}function H_(e,t){return He(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?me(ke(ce({},n),{guardsResult:!0})):$_(o,r,i,e).pipe(He(l=>l&&O_(l)?z_(r,s,e,t):me(l)),Ce(l=>ke(ce({},n),{guardsResult:l})))})}function $_(e,t,n,r){return Ve(e).pipe(He(i=>X_(i.component,i.route,n,t,r)),Nt(i=>i!==!0,!0))}function z_(e,t,n,r){return Ve(t).pipe(tr(i=>er(G_(i.route.parent,r),W_(i.route,r),Y_(e,i.path,n),q_(e,i.route,n))),Nt(i=>i!==!0,!0))}function W_(e,t){return e!==null&&t&&t(new Dl(e)),me(!0)}function G_(e,t){return e!==null&&t&&t(new wl(e)),me(!0)}function q_(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return me(!0);let i=r.map(s=>Zi(()=>{let o=Ii(t)??n,l=Nr(s,o),d=L_(l)?l.canActivate(t,e):Yt(o,()=>l(t,e));return mn(d).pipe(Nt())}));return me(i).pipe(Pr())}function Y_(e,t,n){let r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>P_(o)).filter(o=>o!==null).map(o=>Zi(()=>{let l=o.guards.map(d=>{let u=Ii(o.node)??n,a=Nr(d,u),c=j_(a)?a.canActivateChild(r,e):Yt(u,()=>a(r,e));return mn(c).pipe(Nt())});return me(l).pipe(Pr())}));return me(s).pipe(Pr())}function X_(e,t,n,r,i){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return me(!0);let o=s.map(l=>{let d=Ii(t)??i,u=Nr(l,d),a=B_(u)?u.canDeactivate(e,t,n,r):Yt(d,()=>u(e,t,n,r));return mn(a).pipe(Nt())});return me(o).pipe(Pr())}function K_(e,t,n,r){let i=t.canLoad;if(i===void 0||i.length===0)return me(!0);let s=i.map(o=>{let l=Nr(o,e),d=F_(l)?l.canLoad(t,n):Yt(e,()=>l(t,n));return mn(d)});return me(s).pipe(Pr(),Tp(r))}function Tp(e){return Ho(Xe(t=>{if(typeof t!="boolean")throw vo(e,t)}),Ce(t=>t===!0))}function Z_(e,t,n,r){let i=t.canMatch;if(!i||i.length===0)return me(!0);let s=i.map(o=>{let l=Nr(o,e),d=U_(l)?l.canMatch(t,n):Yt(e,()=>l(t,n));return mn(d)});return me(s).pipe(Pr(),Tp(r))}var Ci=class{constructor(t){this.segmentGroup=t||null}},Si=class extends Error{constructor(t){super(),this.urlTree=t}};function Cr(e){return Jn(new Ci(e))}function Q_(e){return Jn(new de(4e3,!1))}function J_(e){return Jn(Sp(!1,gt.GuardRejected))}var Rl=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return me(r);if(i.numberOfChildren>1||!i.children[ve])return Q_(`${t.redirectTo}`);i=i.children[ve]}}applyRedirectCommands(t,n,r,i,s){if(typeof n!="string"){let l=n,{queryParams:d,fragment:u,routeConfig:a,url:c,outlet:h,params:p,data:g,title:f}=i,v=Yt(s,()=>l({params:p,data:g,queryParams:d,fragment:u,routeConfig:a,url:c,outlet:h,title:f}));if(v instanceof nn)throw new Si(v);n=v}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n[0]==="/")throw new Si(o);return o}applyRedirectCreateUrlTree(t,n,r,i){let s=this.createSegmentGroup(t,n.root,r,i);return new nn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let l=s.substring(1);r[i]=n[l]}else r[i]=s}),r}createSegmentGroup(t,n,r,i){let s=this.createSegments(t,n.segments,r,i),o={};return Object.entries(n.children).forEach(([l,d])=>{o[l]=this.createSegmentGroup(t,d,r,i)}),new Me(s,o)}createSegments(t,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(t,s,i):this.findOrReturn(s,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new de(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}},Pl={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ew(e,t,n,r,i){let s=Mp(e,t,n);return s.matched?(r=E_(t,r),Z_(r,t,n,i).pipe(Ce(o=>o===!0?s:ce({},Pl)))):me(s)}function Mp(e,t,n){if(t.path==="**")return tw(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?ce({},Pl):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||K0)(n,e,t);if(!i)return ce({},Pl);let s={};Object.entries(i.posParams??{}).forEach(([l,d])=>{s[l]=d.path});let o=i.consumed.length>0?ce(ce({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function tw(e){return{matched:!0,parameters:e.length>0?cp(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function ip(e,t,n,r){return n.length>0&&iw(e,n,r)?{segmentGroup:new Me(t,rw(r,new Me(n,e.children))),slicedSegments:[]}:n.length===0&&sw(e,n,r)?{segmentGroup:new Me(e.segments,nw(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new Me(e.segments,e.children),slicedSegments:n}}function nw(e,t,n,r){let i={};for(let s of n)if(_o(e,t,s)&&!r[Pt(s)]){let o=new Me([],{});i[Pt(s)]=o}return ce(ce({},r),i)}function rw(e,t){let n={};n[ve]=t;for(let r of e)if(r.path===""&&Pt(r)!==ve){let i=new Me([],{});n[Pt(r)]=i}return n}function iw(e,t,n){return n.some(r=>_o(e,t,r)&&Pt(r)!==ve)}function sw(e,t,n){return n.some(r=>_o(e,t,r))}function _o(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function ow(e,t,n){return t.length===0&&!e.children[n]}var Nl=class{};function aw(e,t,n,r,i,s,o="emptyOnly"){return new kl(e,t,n,r,i,o,s).recognize()}var cw=31,kl=class{constructor(t,n,r,i,s,o,l){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=l,this.applyRedirects=new Rl(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new de(4002,`'${t.segmentGroup}'`)}recognize(){let t=ip(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Ce(({children:n,rootSnapshot:r})=>{let i=new pt(r,n),s=new mo("",i),o=g_(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let n=new Ir([],Object.freeze({}),Object.freeze(ce({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ve,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,ve,n).pipe(Ce(r=>({children:r,rootSnapshot:n})),an(r=>{if(r instanceof Si)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ci?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,s):this.processSegment(t,n,r,r.segments,i,!0,s).pipe(Ce(o=>o instanceof pt?[o]:[]))}processChildren(t,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ve(s).pipe(tr(o=>{let l=r.children[o],d=D_(n,o);return this.processSegmentGroup(t,d,l,o,i)}),Ko((o,l)=>(o.push(...l),o)),cn(null),Xo(),He(o=>{if(o===null)return Cr(r);let l=xp(o);return lw(l),me(l)}))}processSegment(t,n,r,i,s,o,l){return Ve(n).pipe(tr(d=>this.processSegmentAgainstRoute(d._injector??t,n,d,r,i,s,o,l).pipe(an(u=>{if(u instanceof Ci)return me(null);throw u}))),Nt(d=>!!d),an(d=>{if(Ip(d))return ow(r,i,s)?me(new Nl):Cr(r);throw d}))}processSegmentAgainstRoute(t,n,r,i,s,o,l,d){return Pt(r)!==o&&(o===ve||!_o(i,s,r))?Cr(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,s,o,d):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,s,o,d):Cr(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,s,o,l){let{matched:d,parameters:u,consumedSegments:a,positionalParamSegments:c,remainingSegments:h}=Mp(n,i,s);if(!d)return Cr(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>cw&&(this.allowRedirects=!1));let p=new Ir(s,u,Object.freeze(ce({},this.urlTree.queryParams)),this.urlTree.fragment,sp(i),Pt(i),i.component??i._loadedComponent??null,i,op(i)),g=go(p,l,this.paramsInheritanceStrategy);p.params=Object.freeze(g.params),p.data=Object.freeze(g.data);let f=this.applyRedirects.applyRedirectCommands(a,i.redirectTo,c,p,t);return this.applyRedirects.lineralizeSegments(i,f).pipe(He(v=>this.processSegment(t,r,n,v.concat(h),o,!1,l)))}matchSegmentAgainstRoute(t,n,r,i,s,o){let l=ew(n,r,i,t,this.urlSerializer);return r.path==="**"&&(n.children={}),l.pipe(Ct(d=>d.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(Ct(({routes:u})=>{let a=r._loadedInjector??t,{parameters:c,consumedSegments:h,remainingSegments:p}=d,g=new Ir(h,c,Object.freeze(ce({},this.urlTree.queryParams)),this.urlTree.fragment,sp(r),Pt(r),r.component??r._loadedComponent??null,r,op(r)),f=go(g,o,this.paramsInheritanceStrategy);g.params=Object.freeze(f.params),g.data=Object.freeze(f.data);let{segmentGroup:v,slicedSegments:y}=ip(n,h,p,u);if(y.length===0&&v.hasChildren())return this.processChildren(a,u,v,g).pipe(Ce(M=>new pt(g,M)));if(u.length===0&&y.length===0)return me(new pt(g,[]));let E=Pt(r)===s;return this.processSegment(a,u,v,y,E?ve:s,!0,g).pipe(Ce(M=>new pt(g,M instanceof pt?[M]:[])))}))):Cr(n)))}getChildConfig(t,n,r){return n.children?me({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?me({routes:n._loadedRoutes,injector:n._loadedInjector}):K_(t,n,r,this.urlSerializer).pipe(He(i=>i?this.configLoader.loadChildren(t,n).pipe(Xe(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):J_(n))):me({routes:[],injector:t})}};function lw(e){e.sort((t,n)=>t.value.outlet===ve?-1:n.value.outlet===ve?1:t.value.outlet.localeCompare(n.value.outlet))}function uw(e){let t=e.value.routeConfig;return t&&t.path===""}function xp(e){let t=[],n=new Set;for(let r of e){if(!uw(r)){t.push(r);continue}let i=t.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=xp(r.children);t.push(new pt(r.value,i))}return t.filter(r=>!n.has(r))}function sp(e){return e.data||{}}function op(e){return e.resolve||{}}function dw(e,t,n,r,i,s){return He(o=>aw(e,t,n,r,o.extractedUrl,i,s).pipe(Ce(({state:l,tree:d})=>ke(ce({},o),{targetSnapshot:l,urlAfterRedirects:d}))))}function hw(e,t){return He(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return me(n);let s=new Set(i.map(d=>d.route)),o=new Set;for(let d of s)if(!o.has(d))for(let u of Rp(d))o.add(u);let l=0;return Ve(o).pipe(tr(d=>s.has(d)?fw(d,r,e,t):(d.data=go(d,d.parent,e).resolve,me(void 0))),Xe(()=>l++),nr(1),He(d=>l===o.size?me(n):dt))})}function Rp(e){let t=e.children.map(n=>Rp(n)).flat();return[e,...t]}function fw(e,t,n,r){let i=e.routeConfig,s=e._resolve;return i?.title!==void 0&&!Dp(i)&&(s[Ai]=i.title),pw(s,e,t,r).pipe(Ce(o=>(e._resolvedData=o,e.data=go(e,e.parent,n).resolve,null)))}function pw(e,t,n,r){let i=ul(e);if(i.length===0)return me({});let s={};return Ve(i).pipe(He(o=>gw(e[o],t,n,r).pipe(Nt(),Xe(l=>{if(l instanceof Di)throw vo(new mi,l);s[o]=l}))),nr(1),Yo(s),an(o=>Ip(o)?dt:Jn(o)))}function gw(e,t,n,r){let i=Ii(t)??r,s=Nr(e,i),o=s.resolve?s.resolve(t,n):Yt(i,()=>s(t,n));return mn(o)}function cl(e){return Ct(t=>{let n=e(t);return n?Ve(n).pipe(Ce(()=>t)):me(t)})}var Pp=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ve);return r}getResolvedTitleForRoute(n){return n.data[Ai]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>oe(mw),providedIn:"root"})}}return e})(),mw=(()=>{class e extends Pp{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||e)(Se(Jf))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Bl=new be("",{providedIn:"root",factory:()=>({})}),vw=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=Ns({type:e,selectors:[["ng-component"]],standalone:!0,features:[Ks],decls:1,vars:0,template:function(r,i){r&1&&wr(0,"router-outlet")},dependencies:[S_],encapsulation:2})}}return e})();function Ul(e){let t=e.children&&e.children.map(Ul),n=t?ke(ce({},e),{children:t}):ce({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==ve&&(n.component=vw),n}var Vl=new be(""),yw=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=oe(Wc)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return me(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=mn(n.loadComponent()).pipe(Ce(Np),Xe(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),jr(()=>{this.componentLoaders.delete(n)})),i=new Qn(r,()=>new rt).pipe(Zn());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return me({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=bw(r,this.compiler,n,this.onLoadEndListener).pipe(jr(()=>{this.childrenLoaders.delete(r)})),o=new Qn(s,()=>new rt).pipe(Zn());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function bw(e,t,n,r){return mn(e.loadChildren()).pipe(Ce(Np),He(i=>i instanceof Xr||Array.isArray(i)?me(i):Ve(t.compileModuleAsync(i))),Ce(i=>{r&&r(e);let s,o,l=!1;return Array.isArray(i)?(o=i,l=!0):(s=i.create(n).injector,o=s.get(Vl,[],{optional:!0,self:!0}).flat()),{routes:o.map(Ul),injector:s}}))}function _w(e){return e&&typeof e=="object"&&"default"in e}function Np(e){return _w(e)?e.default:e}var Hl=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>oe(ww),providedIn:"root"})}}return e})(),ww=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Ew=new be("");var Dw=new be(""),Cw=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new rt,this.transitionAbortSubject=new rt,this.configLoader=oe(yw),this.environmentInjector=oe(bt),this.urlSerializer=oe(Fl),this.rootContexts=oe(bo),this.location=oe(oi),this.inputBindingEnabled=oe(jl,{optional:!0})!==null,this.titleStrategy=oe(Pp),this.options=oe(Bl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=oe(Hl),this.createViewTransition=oe(Ew,{optional:!0}),this.navigationErrorHandler=oe(Dw,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>me(void 0),this.rootComponentType=null;let n=i=>this.events.next(new bl(i)),r=i=>this.events.next(new _l(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(ke(ce(ce({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new Ye({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:pi,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Dt(s=>s.id!==0),Ce(s=>ke(ce({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ct(s=>{let o=!1,l=!1;return me(s).pipe(Ct(d=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",gt.SupersededByNewNavigation),dt;this.currentTransition=s,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,targetBrowserUrl:typeof d.extras.browserUrl=="string"?this.urlSerializer.parse(d.extras.browserUrl):d.extras.browserUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?ke(ce({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=d.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!u&&a!=="reload"){let c="";return this.events.next(new Vn(d.id,this.urlSerializer.serialize(d.rawUrl),c,pl.IgnoredSameUrlNavigation)),d.resolve(!1),dt}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return me(d).pipe(Ct(c=>{let h=this.transitions?.getValue();return this.events.next(new bi(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),h!==this.transitions?.getValue()?dt:Promise.resolve(c)}),dw(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Xe(c=>{s.targetSnapshot=c.targetSnapshot,s.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=ke(ce({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let h=new ho(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:c,extractedUrl:h,source:p,restoredState:g,extras:f}=d,v=new bi(c,this.urlSerializer.serialize(h),p,g);this.events.next(v);let y=wp(this.rootComponentType).snapshot;return this.currentTransition=s=ke(ce({},d),{targetSnapshot:y,urlAfterRedirects:h,extras:ke(ce({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,me(s)}else{let c="";return this.events.next(new Vn(d.id,this.urlSerializer.serialize(d.extractedUrl),c,pl.IgnoredByUrlHandlingStrategy)),d.resolve(!1),dt}}),Xe(d=>{let u=new gl(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}),Ce(d=>(this.currentTransition=s=ke(ce({},d),{guards:R_(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),s)),H_(this.environmentInjector,d=>this.events.next(d)),Xe(d=>{if(s.guardsResult=d.guardsResult,d.guardsResult&&typeof d.guardsResult!="boolean")throw vo(this.urlSerializer,d.guardsResult);let u=new ml(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(u)}),Dt(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",gt.GuardRejected),!1)),cl(d=>{if(d.guards.canActivateChecks.length)return me(d).pipe(Xe(u=>{let a=new vl(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(a)}),Ct(u=>{let a=!1;return me(u).pipe(hw(this.paramsInheritanceStrategy,this.environmentInjector),Xe({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(u,"",gt.NoDataFromResolver)}}))}),Xe(u=>{let a=new yl(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(a)}))}),cl(d=>{let u=a=>{let c=[];a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(a.routeConfig).pipe(Xe(h=>{a.component=h}),Ce(()=>{})));for(let h of a.children)c.push(...u(h));return c};return Ki(u(d.targetSnapshot.root)).pipe(cn(null),zt(1))}),cl(()=>this.afterPreactivation()),Ct(()=>{let{currentSnapshot:d,targetSnapshot:u}=s,a=this.createViewTransition?.(this.environmentInjector,d.root,u.root);return a?Ve(a).pipe(Ce(()=>s)):me(s)}),Ce(d=>{let u=A_(n.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=s=ke(ce({},d),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),Xe(()=>{this.events.next(new wi)}),x_(this.rootContexts,n.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),zt(1),Xe({next:d=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Un(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{o=!0}}),Qo(this.transitionAbortSubject.pipe(Xe(d=>{throw d}))),jr(()=>{!o&&!l&&this.cancelNavigationTransition(s,"",gt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),an(d=>{if(l=!0,Ap(d))this.events.next(new tn(s.id,this.urlSerializer.serialize(s.extractedUrl),d.message,d.cancellationCode)),M_(d)?this.events.next(new xr(d.url,d.navigationBehaviorOptions)):s.resolve(!1);else{let u=new _i(s.id,this.urlSerializer.serialize(s.extractedUrl),d,s.targetSnapshot??void 0);try{let a=Yt(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(a instanceof Di){let{message:c,cancellationCode:h}=vo(this.urlSerializer,a);this.events.next(new tn(s.id,this.urlSerializer.serialize(s.extractedUrl),c,h)),this.events.next(new xr(a.redirectTo,a.navigationBehaviorOptions))}else{this.events.next(u);let c=n.errorHandler(d);s.resolve(!!c)}}catch(a){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(a)}}return dt}))}))}cancelNavigationTransition(n,r,i){let s=new tn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Sw(e){return e!==pi}var Aw=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>oe(Iw),providedIn:"root"})}}return e})(),Ol=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},Iw=(()=>{class e extends Ol{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=_c(e)))(i||e)}})()}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),kp=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:()=>oe(Tw),providedIn:"root"})}}return e})(),Tw=(()=>{class e extends kp{constructor(){super(...arguments),this.location=oe(oi),this.urlSerializer=oe(Fl),this.options=oe(Bl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=oe(Hl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new nn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=wp(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof bi)this.stateMemento=this.createStateMemento();else if(n instanceof Vn)this.rawUrlTree=r.initialUrl;else if(n instanceof ho){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof wi?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof tn&&(n.code===gt.GuardRejected||n.code===gt.NoDataFromResolver)?this.restoreHistory(r):n instanceof _i?this.restoreHistory(r,!0):n instanceof Un&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof nn?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=ce(ce({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=ce(ce({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=_c(e)))(i||e)}})()}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),hi=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(hi||{});function Mw(e,t){e.events.pipe(Dt(n=>n instanceof Un||n instanceof tn||n instanceof _i||n instanceof Vn),Ce(n=>n instanceof Un||n instanceof Vn?hi.COMPLETE:(n instanceof tn?n.code===gt.Redirect||n.code===gt.SupersededByNewNavigation:!1)?hi.REDIRECTING:hi.FAILED),Dt(n=>n!==hi.REDIRECTING),zt(1)).subscribe(()=>{t()})}function xw(e){throw e}var Rw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Pw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Op=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=oe(Zs),this.stateManager=oe(kp),this.options=oe(Bl,{optional:!0})||{},this.pendingTasks=oe(yr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=oe(Cw),this.urlSerializer=oe(Fl),this.location=oe(oi),this.urlHandlingStrategy=oe(Hl),this._events=new rt,this.errorHandler=this.options.errorHandler||xw,this.navigated=!1,this.routeReuseStrategy=oe(Aw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=oe(Vl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!oe(jl,{optional:!0}),this.eventsSubscription=new Be,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof tn&&r.code!==gt.Redirect&&r.code!==gt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Un)this.navigated=!0;else if(r instanceof xr){let o=r.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),d=ce({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Sw(i.source)},o);this.scheduleNavigation(l,pi,null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}kw(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),pi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let d=ce({},i);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(s.state=d)}let l=this.parseUrl(n);this.scheduleNavigation(l,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Ul),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:l,preserveFragment:d}=r,u=d?this.currentUrlTree.fragment:o,a=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":a=ce(ce({},this.currentUrlTree.queryParams),s);break;case"preserve":a=this.currentUrlTree.queryParams;break;default:a=s||null}a!==null&&(a=this.removeEmptyProps(a));let c;try{let h=i?i.snapshot:this.routerState.snapshot.root;c=vp(h)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),c=this.currentUrlTree.root}return yp(c,n,a,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=vi(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,pi,null,r)}navigate(n,r={skipLocationChange:!1}){return Nw(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=ce({},Rw):r===!1?i=ce({},Pw):i=r,vi(n))return ep(this.currentUrlTree,n,i);let s=this.parseUrl(n);return ep(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let l,d,u;o?(l=o.resolve,d=o.reject,u=o.promise):u=new Promise((c,h)=>{l=c,d=h});let a=this.pendingTasks.add();return Mw(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(a))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:l,reject:d,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(c=>Promise.reject(c))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Nw(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new de(4008,!1)}function kw(e){return!(e instanceof wi)&&!(e instanceof xr)}var Ow=new be("");function Fp(e,...t){return Os([{provide:Vl,multi:!0,useValue:e},[],{provide:Rr,useFactory:Fw,deps:[Op]},{provide:zc,multi:!0,useFactory:Lw},t.map(n=>n.\u0275providers)])}function Fw(e){return e.routerState.root}function Lw(){let e=oe(Tn);return t=>{let n=e.get(Fn);if(t!==n.components[0])return;let r=e.get(Op),i=e.get(jw);e.get(Bw)===1&&r.initialNavigation(),e.get(Uw,null,_e.Optional)?.setUpPreloading(),e.get(Ow,null,_e.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var jw=new be("",{factory:()=>new rt}),Bw=new be("",{providedIn:"root",factory:()=>1});var Uw=new be("");var Lp=[];var jp={providers:[If({eventCoalescing:!0}),Fp(Lp)]};var Eo=Xp(Wp());var Jw=["pdfViewer"],eE=()=>[];function tE(e,t){if(e&1&&(je(0,"span",16),Ze(1),Oe()),e&2){let n=Ke(2);Le(),Er(" (",n.getTotalSignaturesCount()," \u270D\uFE0F total) ")}}function nE(e,t){if(e&1){let n=Ys();je(0,"div",11)(1,"button",12),ft("click",function(){Zt(n);let i=Ke();return Qt(i.goToPreviousPage())}),Ze(2,"\u2B05\uFE0F"),Oe(),je(3,"span",13),Ze(4),Oe(),je(5,"button",14),ft("click",function(){Zt(n);let i=Ke();return Qt(i.goToNextPage())}),Ze(6,"\u27A1\uFE0F"),Oe(),en(7,tE,2,1,"span",15),Oe()}if(e&2){let n=Ke();Le(),$e("disabled",n.currentPageNumber===1),Le(3),Xs("Page ",n.currentPageNumber," / ",n.totalPages,""),Le(),$e("disabled",n.currentPageNumber===n.totalPages),Le(2),$e("ngIf",n.getTotalSignaturesCount()>0)}}function rE(e,t){e&1&&(je(0,"div",17)(1,"div",18)(2,"div",19)(3,"h2"),Ze(4,"Upload a PDF"),Oe(),je(5,"p"),Ze(6,"Tap \u{1F4CB} to load the sample"),Oe(),je(7,"div",20),Ze(8,"\u{1F4C4} \u270F\uFE0F"),Oe()()()())}function iE(e,t){if(e&1&&(je(0,"span",28),Ze(1),Oe()),e&2){let n=Ke(2);Le(),Er(" ",n.getSignaturesForCurrentPage().length," \u270D\uFE0F ")}}function sE(e,t){if(e&1){let n=Ys();je(0,"div",29),ft("mousedown",function(i){let s=Zt(n).$implicit,o=Ke(2);return Qt(o.startDrag(s,i))})("touchstart",function(i){let s=Zt(n).$implicit,o=Ke(2);return Qt(o.startDrag(s,i))}),wr(1,"img",30),je(2,"button",31),ft("click",function(){let i=Zt(n).$implicit,s=Ke(2);return Qt(s.removeSignature(i.id))}),Ze(3,"\xD7"),Oe(),je(4,"div",32)(5,"div",33),ft("mousedown",function(i){let s=Zt(n).$implicit,o=Ke(2);return Qt(o.startResize(s,i))})("touchstart",function(i){let s=Zt(n).$implicit,o=Ke(2);return Qt(o.startResize(s,i))}),Oe()()()}if(e&2){let n=t.$implicit;ri("left",n.x,"px")("top",n.y,"px")("width",n.width,"px")("height",n.height,"px"),Le(),$e("src",n.imageData,Ph)}}function oE(e,t){if(e&1&&(je(0,"div",17)(1,"div",21,0)(3,"div",22)(4,"div",23)(5,"span"),Ze(6),Oe(),en(7,iE,2,1,"span",24),Oe(),je(8,"div",25),wr(9,"canvas",26),en(10,sE,6,9,"div",27),Oe()()()()),e&2){let n=Ke();Le(6),Xs("Page ",n.currentPageNumber," / ",n.totalPages,""),Le(),$e("ngIf",n.getSignaturesForCurrentPage().length>0),Le(),ri("width",n.currentPageData.width,"px")("height",n.currentPageData.height,"px"),Le(),$e("width",n.currentPageData.width)("height",n.currentPageData.height),Le(),$e("ngForOf",n.getSignaturesForCurrentPage())}}function aE(e,t){if(e&1&&(je(0,"span",39),Ze(1),Oe()),e&2){let n=Ke().index,r=Ke(2);Le(),$c(r.getSignaturesCountForPage(n+1))}}function cE(e,t){if(e&1){let n=Ys();je(0,"button",37),ft("click",function(){let i=Zt(n).index,s=Ke(2);return Qt(s.goToPage(i+1))}),Ze(1),en(2,aE,2,1,"span",38),Oe()}if(e&2){let n=t.index,r=Ke(2);Uc("active",r.currentPageNumber===n+1),$e("title","Page "+(n+1)+(r.getSignaturesCountForPage(n+1)>0?" ("+r.getSignaturesCountForPage(n+1)+" signatures)":"")),Le(),Er(" ",n+1," "),Le(),$e("ngIf",r.getSignaturesCountForPage(n+1)>0)}}function lE(e,t){if(e&1&&(je(0,"div",34)(1,"div",35),en(2,cE,3,5,"button",36),Oe()()),e&2){let n=Ke();Le(2),$e("ngForOf",wf(1,eE).constructor(n.totalPages))}}var Gp=(()=>{class e{constructor(){this.pdfLoaded=!1,this.pdfDocument=null,this.currentPageNumber=1,this.totalPages=0,this.currentPageData=null,this.signatures=[],this.currentSignature=null,this.draggedSignature=null,this.resizingSignature=null,this.dragOffset={x:0,y:0},this.resizeOffset={x:0,y:0}}ngOnInit(){Eo.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",this.loadDefaultSignature()}loadDefaultSignature(){let n=new Image;n.onload=()=>{let r=document.createElement("canvas"),i=r.getContext("2d");r.width=n.width,r.height=n.height,i.drawImage(n,0,0),this.currentSignature=r.toDataURL()},n.src="assets/signature.png"}loadTestPDF(){return ye(this,null,function*(){try{let r=yield(yield fetch("assets/doc1.pdf")).arrayBuffer();this.pdfDocument=yield Eo.getDocument(r).promise,this.totalPages=this.pdfDocument.numPages,this.currentPageNumber=1,yield this.renderCurrentPage(),this.pdfLoaded=!0,this.signatures=[]}catch(n){console.error("Error loading test PDF:",n),alert("Error loading test PDF file")}})}renderCurrentPage(){return ye(this,null,function*(){if(!this.pdfDocument)return;let n=1.5,r=window.innerWidth<=600?window.innerWidth*.9:1200,i=Math.min(n,r/595),o=(yield this.pdfDocument.getPage(this.currentPageNumber)).getViewport({scale:i});this.currentPageData={width:Math.round(o.width),height:Math.round(o.height),scale:i},setTimeout(()=>this.renderPage(),100)})}renderPage(){return ye(this,null,function*(){if(!this.currentPageData||!this.pdfDocument)return;let n=document.querySelector("canvas");if(!n)return;let r=n.getContext("2d"),i=yield this.pdfDocument.getPage(this.currentPageNumber),s=i.getViewport({scale:this.currentPageData.scale});n.width=this.currentPageData.width,n.height=this.currentPageData.height,this.currentPageData.canvas=n,yield i.render({canvasContext:r,viewport:s}).promise,console.log(`Rendered page ${this.currentPageNumber}: Canvas width=${n.width}, height=${n.height}`)})}goToNextPage(){this.currentPageNumber<this.totalPages&&(this.currentPageNumber++,this.renderCurrentPage())}goToPreviousPage(){this.currentPageNumber>1&&(this.currentPageNumber--,this.renderCurrentPage())}goToPage(n){n>=1&&n<=this.totalPages&&(this.currentPageNumber=n,this.renderCurrentPage())}addSignature(){if(!this.currentSignature||!this.pdfLoaded||!this.currentPageData)return;let n={id:Date.now().toString(),x:50,y:50,width:100,height:50,page:this.currentPageNumber,imageData:this.currentSignature};this.signatures.push(n)}startDrag(n,r){r.preventDefault(),this.draggedSignature=n;let i=0,s=0;r instanceof MouseEvent?(i=r.clientX,s=r.clientY):(i=r.touches[0].clientX,s=r.touches[0].clientY);let o=r.currentTarget.getBoundingClientRect();this.dragOffset.x=i-o.left,this.dragOffset.y=s-o.top;let l=u=>this.onDragMove(u),d=()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",d),document.removeEventListener("touchmove",l),document.removeEventListener("touchend",d),this.draggedSignature=null};document.addEventListener("mousemove",l),document.addEventListener("mouseup",d),document.addEventListener("touchmove",l,{passive:!1}),document.addEventListener("touchend",d)}onDragMove(n){if(!this.draggedSignature||!this.currentPageData)return;let r=0,i=0;n instanceof MouseEvent?(r=n.clientX,i=n.clientY):(r=n.touches[0].clientX,i=n.touches[0].clientY);let s=document.querySelector(".page-canvas-container");if(!s)return;let o=s.getBoundingClientRect(),l=s.offsetWidth/this.currentPageData.width,d=s.offsetHeight/this.currentPageData.height,u=(r-o.left-this.dragOffset.x)/l,a=(i-o.top-this.dragOffset.y)/d;this.draggedSignature.x=Math.max(0,Math.min(u,this.currentPageData.width-this.draggedSignature.width)),this.draggedSignature.y=Math.max(0,Math.min(a,this.currentPageData.height-this.draggedSignature.height))}startResize(n,r){r.preventDefault(),r.stopPropagation(),this.resizingSignature=n;let i=0,s=0;r instanceof MouseEvent?(i=r.clientX,s=r.clientY):(i=r.touches[0].clientX,s=r.touches[0].clientY);let o=r.currentTarget.getBoundingClientRect();this.resizeOffset.x=i-o.left,this.resizeOffset.y=s-o.top;let l=u=>this.onResizeMove(u),d=()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",d),document.removeEventListener("touchmove",l),document.removeEventListener("touchend",d),this.resizingSignature=null};document.addEventListener("mousemove",l),document.addEventListener("mouseup",d),document.addEventListener("touchmove",l,{passive:!1}),document.addEventListener("touchend",d)}onResizeMove(n){if(!this.resizingSignature||!this.currentPageData)return;let r=0,i=0;n instanceof MouseEvent?(r=n.clientX,i=n.clientY):(r=n.touches[0].clientX,i=n.touches[0].clientY);let s=document.querySelector(".page-canvas-container");if(!s)return;let o=s.getBoundingClientRect(),l=s.offsetWidth/this.currentPageData.width,d=s.offsetHeight/this.currentPageData.height,u=Math.max(50,(r-o.left-this.resizingSignature.x)/l),a=Math.max(25,(i-o.top-this.resizingSignature.y)/d);this.resizingSignature.width=Math.min(u,this.currentPageData.width-this.resizingSignature.x),this.resizingSignature.height=Math.min(a,this.currentPageData.height-this.resizingSignature.y)}getSignaturesForCurrentPage(){return this.signatures.filter(n=>n.page===this.currentPageNumber)}getTotalSignaturesCount(){return this.signatures.length}getSignaturesCountForPage(n){return this.signatures.filter(r=>r.page===n).length}removeSignature(n){this.signatures=this.signatures.filter(r=>r.id!==n)}clearSignatures(){this.signatures=[]}dataURLToBytes(n){let r=n.split(",")[1],i=atob(r),s=new Uint8Array(i.length);for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return s}savePDF(){return ye(this,null,function*(){if(!(!this.pdfDocument||this.signatures.length===0))try{let{PDFDocument:n}=yield import("./chunk-3BHOQIX5.js"),r=yield this.pdfDocument.getData(),i=yield n.load(r),s=new Map;this.signatures.forEach(p=>{s.has(p.page)||s.set(p.page,[]),s.get(p.page).push(p)});let o=1.5,l=window.innerWidth<=600?window.innerWidth*.9:1200,d=Math.min(o,l/595);for(let[p,g]of s){let f=i.getPage(p-1),{width:v,height:y}=f.getSize();for(let E of g)try{let M=this.dataURLToBytes(E.imageData),T=E.imageData.includes("data:image/png")?yield i.embedPng(M):yield i.embedJpg(M),w=E.x/d,C=E.y/d,L=E.width/d,U=E.height/d,F=y-C-U;f.drawImage(T,{x:w,y:F,width:L,height:U})}catch(M){console.error("Error adding signature to page:",M)}}let u=yield i.save(),a=new Blob([u],{type:"application/pdf"}),c=URL.createObjectURL(a),h=document.createElement("a");h.href=c,h.download="signed-document.pdf",document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(c)}catch(n){console.error("Error saving PDF:",n),alert("Error saving PDF. Please try again.")}})}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=Ns({type:e,selectors:[["app-root"]],viewQuery:function(r,i){if(r&1&&_f(Jw,5),r&2){let s;Vc(s=Hc())&&(i.pdfViewer=s.first)}},standalone:!0,features:[Ks],decls:15,vars:7,consts:[["pdfViewer",""],[1,"app-container"],[1,"header"],[1,"controls"],["title","Load Test PDF",1,"btn","btn-info",3,"click"],["title","Add Signature",1,"btn","btn-secondary",3,"click","disabled"],["title","Save PDF",1,"btn","btn-success",3,"click","disabled"],["title","Clear All",1,"btn","btn-warning",3,"click","disabled"],["class","page-controls",4,"ngIf"],["class","main-content",4,"ngIf"],["class","page-navigation",4,"ngIf"],[1,"page-controls"],["title","Previous Page",1,"btn","btn-nav",3,"click","disabled"],[1,"page-info"],["title","Next Page",1,"btn","btn-nav",3,"click","disabled"],["class","signature-summary",4,"ngIf"],[1,"signature-summary"],[1,"main-content"],[1,"upload-area"],[1,"upload-message"],[1,"upload-icons"],[1,"pdf-viewer"],[1,"page-container"],[1,"page-header"],["class","signature-count",4,"ngIf"],[1,"page-canvas-container"],[3,"width","height"],["class","placed-signature","style","touch-action: none;",3,"left","top","width","height","mousedown","touchstart",4,"ngFor","ngForOf"],[1,"signature-count"],[1,"placed-signature",2,"touch-action","none",3,"mousedown","touchstart"],["alt","Signature",1,"signature-image",3,"src"],["title","Delete",1,"delete-signature",3,"click"],[1,"resize-handles"],[1,"resize-handle","resize-se",2,"touch-action","none",3,"mousedown","touchstart"],[1,"page-navigation"],[1,"page-dots"],["class","page-dot",3,"active","title","click",4,"ngFor","ngForOf"],[1,"page-dot",3,"click","title"],["class","dot-signature-count",4,"ngIf"],[1,"dot-signature-count"]],template:function(r,i){r&1&&(je(0,"div",1)(1,"header",2)(2,"div",3)(3,"button",4),ft("click",function(){return i.loadTestPDF()}),Ze(4,"\u{1F4CB}"),Oe(),je(5,"button",5),ft("click",function(){return i.addSignature()}),Ze(6,"\u2795"),Oe(),je(7,"button",6),ft("click",function(){return i.savePDF()}),Ze(8,"\u{1F4BE}"),Oe(),je(9,"button",7),ft("click",function(){return i.clearSignatures()}),Ze(10,"\u{1F5D1}\uFE0F"),Oe()(),en(11,nE,8,5,"div",8),Oe(),en(12,rE,9,0,"div",9)(13,oE,11,10,"div",9)(14,lE,3,2,"div",10),Oe()),r&2&&(Le(5),$e("disabled",!i.pdfLoaded||!i.currentSignature),Le(2),$e("disabled",!i.pdfLoaded||i.signatures.length===0),Le(2),$e("disabled",i.signatures.length===0),Le(2),$e("ngIf",i.pdfLoaded),Le(),$e("ngIf",!i.pdfLoaded),Le(),$e("ngIf",i.pdfLoaded&&i.currentPageData),Le(),$e("ngIf",i.pdfLoaded&&i.totalPages>1))},dependencies:[Kc,Hf,$f],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}.app-container[_ngcontent-%COMP%]{min-height:100vh;background:#f9f9f9;font-family:Segoe UI,sans-serif;color:#333}.header[_ngcontent-%COMP%]{background:#fff;padding:.5rem 1rem;border-bottom:1px solid #ddd;position:sticky;top:0;z-index:100}.controls[_ngcontent-%COMP%]{display:flex;justify-content:space-around;gap:.25rem;margin-bottom:.5rem}.page-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;font-size:.9rem}.page-info[_ngcontent-%COMP%]{font-weight:600;color:#007bff;margin:0 .5rem}.signature-summary[_ngcontent-%COMP%]{color:#28a745;font-size:.8rem}.btn[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1.2rem;border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer}.btn-nav[_ngcontent-%COMP%]{width:35px;height:35px;font-size:1rem;background:#007bff;color:#fff}.btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.btn-info[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-success[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn-warning[_ngcontent-%COMP%]{background:#ffc107;color:#212529}.main-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100vh - 120px)}.upload-area[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;text-align:center;padding:1rem}.upload-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:.5rem}.upload-icons[_ngcontent-%COMP%]{font-size:2rem;margin-top:1rem;opacity:.3}.pdf-viewer[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:1rem;display:flex;justify-content:center}.page-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 6px #00000014}.page-header[_ngcontent-%COMP%]{padding:.5rem;font-size:.9rem;display:flex;justify-content:space-between;background:#f1f3f5}.signature-count[_ngcontent-%COMP%]{color:#28a745;font-weight:600}.page-canvas-container[_ngcontent-%COMP%]{position:relative;margin:0 auto;max-width:100%;background:#fff;overflow:hidden}canvas[_ngcontent-%COMP%]{width:100%!important;height:auto!important;display:block}.placed-signature[_ngcontent-%COMP%]{position:absolute;border:1px solid transparent}.signature-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:fill}.delete-signature[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-6px;width:18px;height:18px;border:none;border-radius:50%;background:#dc3545;color:#fff;font-size:12px;display:none}.placed-signature[_ngcontent-%COMP%]:hover   .delete-signature[_ngcontent-%COMP%]{display:block}.resize-handle[_ngcontent-%COMP%]{position:absolute;width:10px;height:10px;background:#007bff;bottom:-5px;right:-5px;cursor:se-resize}.page-navigation[_ngcontent-%COMP%]{background:#fff;border-top:1px solid #ddd;padding:.5rem;position:sticky;bottom:0}.page-dots[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.25rem;max-width:100%;overflow-x:auto;padding:.25rem}.page-dot[_ngcontent-%COMP%]{min-width:35px;height:35px;border:1px solid #ddd;background:#fff;border-radius:6px;font-size:.8rem;cursor:pointer;position:relative;display:flex;align-items:center;justify-content:center;flex-shrink:0}.page-dot.active[_ngcontent-%COMP%]{background:#007bff;color:#fff;border-color:#007bff}.dot-signature-count[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;background:#28a745;color:#fff;font-size:.6rem;width:14px;height:14px;border-radius:50%;display:flex;align-items:center;justify-content:center}@media (max-width: 600px){.controls[_ngcontent-%COMP%]{justify-content:space-between;gap:.2rem}.btn[_ngcontent-%COMP%]{width:36px;height:36px;font-size:1rem}.btn-nav[_ngcontent-%COMP%]{width:30px;height:30px;font-size:.9rem}.page-controls[_ngcontent-%COMP%]{gap:.25rem}.page-info[_ngcontent-%COMP%]{font-size:.8rem;margin:0 .25rem}.signature-summary[_ngcontent-%COMP%]{font-size:.7rem}.main-content[_ngcontent-%COMP%]{height:calc(100vh - 140px)}.pdf-viewer[_ngcontent-%COMP%]{padding:.5rem}.page-dot[_ngcontent-%COMP%]{min-width:30px;height:30px;font-size:.7rem}.dot-signature-count[_ngcontent-%COMP%]{width:12px;height:12px;font-size:.5rem}}"]})}}return e})();Qf(Gp,jp).catch(e=>console.error(e));
