import{a as ge,b as Be,c as Vd,d as Lr,e as H0,f as ne}from"./chunk-4IDNTCH7.js";var Id=Lr(()=>{"use strict"});var p0=Lr((uZ,f0)=>{"use strict";var wF="bold|bolder|lighter|[1-9]00",IF="italic|oblique",TF="small-caps",AF="ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded",SF="px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q",h0=`'([^']+)'|"([^"]+)"|[\\w\\s-]+`,CF=new RegExp(`(${wF}) +`,"i"),DF=new RegExp(`(${IF}) +`,"i"),RF=new RegExp(`(${TF}) +`,"i"),PF=new RegExp(`(${AF}) +`,"i"),xF=new RegExp(`([\\d\\.]+)(${SF}) *((?:${h0})( *, *(?:${h0}))*)`),ey={},MF=16;f0.exports=t=>{if(ey[t])return ey[t];let e=xF.exec(t);if(!e)return;let n={weight:"normal",style:"normal",stretch:"normal",variant:"normal",size:parseFloat(e[1]),unit:e[2],family:e[3].replace(/["']/g,"").replace(/ *, */g,",")},r,i,s,o,c=t.substring(0,e.index);switch((r=CF.exec(c))&&(n.weight=r[1]),(i=DF.exec(c))&&(n.style=i[1]),(s=RF.exec(c))&&(n.variant=s[1]),(o=PF.exec(c))&&(n.stretch=o[1]),n.unit){case"pt":n.size/=.75;break;case"pc":n.size*=16;break;case"in":n.size*=96;break;case"cm":n.size*=96/2.54;break;case"mm":n.size*=96/25.4;break;case"%":break;case"em":case"rem":n.size*=MF/.75;break;case"q":n.size*=96/25.4/4;break}return ey[t]=n}});var g0=Lr(mc=>{"use strict";var kF=p0();mc.parseFont=kF;mc.createCanvas=function(t,e){return Object.assign(document.createElement("canvas"),{width:t,height:e})};mc.createImageData=function(t,e,n){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(t);case 2:return new ImageData(t,e);default:return new ImageData(t,e,n)}};mc.loadImage=function(t,e){return new Promise(function(n,r){let i=Object.assign(document.createElement("img"),e);function s(){i.onload=null,i.onerror=null}i.onload=function(){s(),n(i)},i.onerror=function(){s(),r(new Error('Failed to load the image "'+t+'"'))},i.src=t})}});var m0=Lr(()=>{"use strict"});var ty=Lr(()=>{"use strict"});var ny=Lr(()=>{"use strict"});var y0=Lr(()=>{"use strict"});var v0=Lr((exports,module)=>{"use strict";(function(e,n){typeof exports=="object"&&typeof module=="object"?module.exports=e.pdfjsLib=n():typeof define=="function"&&define.amd?define("pdfjs-dist/build/pdf",[],()=>e.pdfjsLib=n()):typeof exports=="object"?exports["pdfjs-dist/build/pdf"]=e.pdfjsLib=n():e["pdfjs-dist/build/pdf"]=e.pdfjsLib=n()})(globalThis,()=>(()=>{"use strict";var __webpack_modules__=[,((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=w,e.bytesToString=K,e.createValidAbsoluteUrl=M,e.getModificationDate=Ue,e.getUuid=Ad,e.getVerbosityLevel=he,e.info=oe,e.isArrayBuffer=$e,e.isArrayEqual=Rt,e.isNodeJS=void 0,e.normalizeUnicode=ns,e.objectFromMap=ee,e.objectSize=de,e.setVerbosityLevel=ae,e.shadow=H,e.string32=J,e.stringToBytes=Y,e.stringToPDFString=be,e.stringToUTF8String=Te,e.unreachable=x,e.utf8StringToString=xe,e.warn=q;let n=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=n;let r=[1,0,0,1,0,0];e.IDENTITY_MATRIX=r;let i=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=i;let s=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=s;let o=1.35;e.LINE_FACTOR=o;let c=.35;e.LINE_DESCENT_FACTOR=c;let l=c/o;e.BASELINE_FACTOR=l;let u={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=u;let d={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=d;let h="pdfjs_internal_editor_";e.AnnotationEditorPrefix=h;let f={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=f;let p={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=p;let m={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=m;let g={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=g;let _={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=_;let E={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=E;let C={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=C;let V={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=V;let k={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=k;let S={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=S;let P={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=P;let D={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=D;let A={O:"PageOpen",C:"PageClose"};e.PageActionEventType=A;let T={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=T;let O={NONE:0,BINARY:1};e.CMapCompressionType=O;let F={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=F;let W={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=W;let U=T.WARNINGS;function ae(le){Number.isInteger(le)&&(U=le)}function he(){return U}function oe(le){U>=T.INFOS&&console.log(`Info: ${le}`)}function q(le){U>=T.WARNINGS&&console.log(`Warning: ${le}`)}function x(le){throw new Error(le)}function w(le,Z){le||x(Z)}function I(le){switch(le?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function M(le,Z=null,Q=null){if(!le)return null;try{if(Q&&typeof le=="string"&&(Q.addDefaultProtocol&&le.startsWith("www.")&&le.match(/\./g)?.length>=2&&(le=`http://${le}`),Q.tryConvertEncoding))try{le=Te(le)}catch{}let me=Z?new URL(le,Z):new URL(le);if(I(me))return me}catch{}return null}function H(le,Z,Q,me=!1){return Object.defineProperty(le,Z,{value:Q,enumerable:!me,configurable:!0,writable:!1}),Q}let $=(function(){function Z(Q,me){this.constructor===Z&&x("Cannot initialize BaseException."),this.message=Q,this.name=me}return Z.prototype=new Error,Z.constructor=Z,Z})();e.BaseException=$;class G extends ${constructor(Z,Q){super(Z,"PasswordException"),this.code=Q}}e.PasswordException=G;class j extends ${constructor(Z,Q){super(Z,"UnknownErrorException"),this.details=Q}}e.UnknownErrorException=j;class v extends ${constructor(Z){super(Z,"InvalidPDFException")}}e.InvalidPDFException=v;class R extends ${constructor(Z){super(Z,"MissingPDFException")}}e.MissingPDFException=R;class N extends ${constructor(Z,Q){super(Z,"UnexpectedResponseException"),this.status=Q}}e.UnexpectedResponseException=N;class B extends ${constructor(Z){super(Z,"FormatError")}}e.FormatError=B;class z extends ${constructor(Z){super(Z,"AbortException")}}e.AbortException=z;function K(le){(typeof le!="object"||le?.length===void 0)&&x("Invalid argument for bytesToString");let Z=le.length,Q=8192;if(Z<Q)return String.fromCharCode.apply(null,le);let me=[];for(let He=0;He<Z;He+=Q){let ct=Math.min(He+Q,Z),gt=le.subarray(He,ct);me.push(String.fromCharCode.apply(null,gt))}return me.join("")}function Y(le){typeof le!="string"&&x("Invalid argument for stringToBytes");let Z=le.length,Q=new Uint8Array(Z);for(let me=0;me<Z;++me)Q[me]=le.charCodeAt(me)&255;return Q}function J(le){return String.fromCharCode(le>>24&255,le>>16&255,le>>8&255,le&255)}function de(le){return Object.keys(le).length}function ee(le){let Z=Object.create(null);for(let[Q,me]of le)Z[Q]=me;return Z}function re(){let le=new Uint8Array(4);return le[0]=1,new Uint32Array(le.buffer,0,1)[0]===1}function ie(){try{return new Function(""),!0}catch{return!1}}class se{static get isLittleEndian(){return H(this,"isLittleEndian",re())}static get isEvalSupported(){return H(this,"isEvalSupported",ie())}static get isOffscreenCanvasSupported(){return H(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?H(this,"platform",{isWin:!1,isMac:!1}):H(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return H(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}e.FeatureTest=se;let ce=[...Array(256).keys()].map(le=>le.toString(16).padStart(2,"0"));class pe{static makeHexColor(Z,Q,me){return`#${ce[Z]}${ce[Q]}${ce[me]}`}static scaleMinMax(Z,Q){let me;Z[0]?(Z[0]<0&&(me=Q[0],Q[0]=Q[1],Q[1]=me),Q[0]*=Z[0],Q[1]*=Z[0],Z[3]<0&&(me=Q[2],Q[2]=Q[3],Q[3]=me),Q[2]*=Z[3],Q[3]*=Z[3]):(me=Q[0],Q[0]=Q[2],Q[2]=me,me=Q[1],Q[1]=Q[3],Q[3]=me,Z[1]<0&&(me=Q[2],Q[2]=Q[3],Q[3]=me),Q[2]*=Z[1],Q[3]*=Z[1],Z[2]<0&&(me=Q[0],Q[0]=Q[1],Q[1]=me),Q[0]*=Z[2],Q[1]*=Z[2]),Q[0]+=Z[4],Q[1]+=Z[4],Q[2]+=Z[5],Q[3]+=Z[5]}static transform(Z,Q){return[Z[0]*Q[0]+Z[2]*Q[1],Z[1]*Q[0]+Z[3]*Q[1],Z[0]*Q[2]+Z[2]*Q[3],Z[1]*Q[2]+Z[3]*Q[3],Z[0]*Q[4]+Z[2]*Q[5]+Z[4],Z[1]*Q[4]+Z[3]*Q[5]+Z[5]]}static applyTransform(Z,Q){let me=Z[0]*Q[0]+Z[1]*Q[2]+Q[4],He=Z[0]*Q[1]+Z[1]*Q[3]+Q[5];return[me,He]}static applyInverseTransform(Z,Q){let me=Q[0]*Q[3]-Q[1]*Q[2],He=(Z[0]*Q[3]-Z[1]*Q[2]+Q[2]*Q[5]-Q[4]*Q[3])/me,ct=(-Z[0]*Q[1]+Z[1]*Q[0]+Q[4]*Q[1]-Q[5]*Q[0])/me;return[He,ct]}static getAxialAlignedBoundingBox(Z,Q){let me=this.applyTransform(Z,Q),He=this.applyTransform(Z.slice(2,4),Q),ct=this.applyTransform([Z[0],Z[3]],Q),gt=this.applyTransform([Z[2],Z[1]],Q);return[Math.min(me[0],He[0],ct[0],gt[0]),Math.min(me[1],He[1],ct[1],gt[1]),Math.max(me[0],He[0],ct[0],gt[0]),Math.max(me[1],He[1],ct[1],gt[1])]}static inverseTransform(Z){let Q=Z[0]*Z[3]-Z[1]*Z[2];return[Z[3]/Q,-Z[1]/Q,-Z[2]/Q,Z[0]/Q,(Z[2]*Z[5]-Z[4]*Z[3])/Q,(Z[4]*Z[1]-Z[5]*Z[0])/Q]}static singularValueDecompose2dScale(Z){let Q=[Z[0],Z[2],Z[1],Z[3]],me=Z[0]*Q[0]+Z[1]*Q[2],He=Z[0]*Q[1]+Z[1]*Q[3],ct=Z[2]*Q[0]+Z[3]*Q[2],gt=Z[2]*Q[1]+Z[3]*Q[3],cr=(me+gt)/2,pn=Math.sqrt((me+gt)**2-4*(me*gt-ct*He))/2,Sn=cr+pn||1,St=cr-pn||1;return[Math.sqrt(Sn),Math.sqrt(St)]}static normalizeRect(Z){let Q=Z.slice(0);return Z[0]>Z[2]&&(Q[0]=Z[2],Q[2]=Z[0]),Z[1]>Z[3]&&(Q[1]=Z[3],Q[3]=Z[1]),Q}static intersect(Z,Q){let me=Math.max(Math.min(Z[0],Z[2]),Math.min(Q[0],Q[2])),He=Math.min(Math.max(Z[0],Z[2]),Math.max(Q[0],Q[2]));if(me>He)return null;let ct=Math.max(Math.min(Z[1],Z[3]),Math.min(Q[1],Q[3])),gt=Math.min(Math.max(Z[1],Z[3]),Math.max(Q[1],Q[3]));return ct>gt?null:[me,ct,He,gt]}static bezierBoundingBox(Z,Q,me,He,ct,gt,cr,pn){let Sn=[],St=[[],[]],Kt,Cn,lr,lt,qn,fi,Et,rs;for(let To=0;To<2;++To){if(To===0?(Cn=6*Z-12*me+6*ct,Kt=-3*Z+9*me-9*ct+3*cr,lr=3*me-3*Z):(Cn=6*Q-12*He+6*gt,Kt=-3*Q+9*He-9*gt+3*pn,lr=3*He-3*Q),Math.abs(Kt)<1e-12){if(Math.abs(Cn)<1e-12)continue;lt=-lr/Cn,0<lt&&lt<1&&Sn.push(lt);continue}Et=Cn*Cn-4*lr*Kt,rs=Math.sqrt(Et),!(Et<0)&&(qn=(-Cn+rs)/(2*Kt),0<qn&&qn<1&&Sn.push(qn),fi=(-Cn-rs)/(2*Kt),0<fi&&fi<1&&Sn.push(fi))}let Dn=Sn.length,bt,pi=Dn;for(;Dn--;)lt=Sn[Dn],bt=1-lt,St[0][Dn]=bt*bt*bt*Z+3*bt*bt*lt*me+3*bt*lt*lt*ct+lt*lt*lt*cr,St[1][Dn]=bt*bt*bt*Q+3*bt*bt*lt*He+3*bt*lt*lt*gt+lt*lt*lt*pn;return St[0][pi]=Z,St[1][pi]=Q,St[0][pi+1]=cr,St[1][pi+1]=pn,St[0].length=St[1].length=pi+2,[Math.min(...St[0]),Math.min(...St[1]),Math.max(...St[0]),Math.max(...St[1])]}}e.Util=pe;let ve=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function be(le){if(le[0]>="\xEF"){let Q;if(le[0]==="\xFE"&&le[1]==="\xFF"?Q="utf-16be":le[0]==="\xFF"&&le[1]==="\xFE"?Q="utf-16le":le[0]==="\xEF"&&le[1]==="\xBB"&&le[2]==="\xBF"&&(Q="utf-8"),Q)try{let me=new TextDecoder(Q,{fatal:!0}),He=Y(le);return me.decode(He)}catch(me){q(`stringToPDFString: "${me}".`)}}let Z=[];for(let Q=0,me=le.length;Q<me;Q++){let He=ve[le.charCodeAt(Q)];Z.push(He?String.fromCharCode(He):le.charAt(Q))}return Z.join("")}function Te(le){return decodeURIComponent(escape(le))}function xe(le){return unescape(encodeURIComponent(le))}function $e(le){return typeof le=="object"&&le?.byteLength!==void 0}function Rt(le,Z){if(le.length!==Z.length)return!1;for(let Q=0,me=le.length;Q<me;Q++)if(le[Q]!==Z[Q])return!1;return!0}function Ue(le=new Date){return[le.getUTCFullYear().toString(),(le.getUTCMonth()+1).toString().padStart(2,"0"),le.getUTCDate().toString().padStart(2,"0"),le.getUTCHours().toString().padStart(2,"0"),le.getUTCMinutes().toString().padStart(2,"0"),le.getUTCSeconds().toString().padStart(2,"0")].join("")}class it{#e=!1;constructor(){this.promise=new Promise((Z,Q)=>{this.resolve=me=>{this.#e=!0,Z(me)},this.reject=me=>{this.#e=!0,Q(me)}})}get settled(){return this.#e}}e.PromiseCapability=it;let pt=null,fn=null;function ns(le){return pt||(pt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,fn=new Map([["\uFB05","\u017Ft"]])),le.replaceAll(pt,(Z,Q,me)=>Q?Q.normalize("NFKC"):fn.get(me))}function Ad(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();let le=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(le);else for(let Z=0;Z<32;Z++)le[Z]=Math.floor(Math.random()*255);return K(le)}let hi="pdfjs_internal_id_";e.AnnotationPrefix=hi}),((__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);let DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(t){if(typeof t=="string"||t instanceof URL?t={url:t}:(0,_util.isArrayBuffer)(t)&&(t={data:t}),typeof t!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");let e=new PDFDocumentLoadingTask,{docId:n}=e,r=t.url?getUrlProp(t.url):null,i=t.data?getDataProp(t.data):null,s=t.httpHeaders||null,o=t.withCredentials===!0,c=t.password??null,l=t.range instanceof PDFDataRangeTransport?t.range:null,u=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE,d=t.worker instanceof PDFWorker?t.worker:null,h=t.verbosity,f=typeof t.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(t.docBaseUrl)?t.docBaseUrl:null,p=typeof t.cMapUrl=="string"?t.cMapUrl:null,m=t.cMapPacked!==!1,g=t.CMapReaderFactory||DefaultCMapReaderFactory,_=typeof t.standardFontDataUrl=="string"?t.standardFontDataUrl:null,E=t.StandardFontDataFactory||DefaultStandardFontDataFactory,C=t.stopAtErrors!==!0,V=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,k=t.isEvalSupported!==!1,S=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!_util.isNodeJS,P=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,D=typeof t.disableFontFace=="boolean"?t.disableFontFace:_util.isNodeJS,A=t.fontExtraProperties===!0,T=t.enableXfa===!0,O=t.ownerDocument||globalThis.document,F=t.disableRange===!0,W=t.disableStream===!0,U=t.disableAutoFetch===!0,ae=t.pdfBug===!0,he=l?l.length:t.length??NaN,oe=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!_util.isNodeJS&&!D,q=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:g===_display_utils.DOMCMapReaderFactory&&E===_display_utils.DOMStandardFontDataFactory&&p&&_&&(0,_display_utils.isValidFetchUrl)(p,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(_,document.baseURI),x=t.canvasFactory||new DefaultCanvasFactory({ownerDocument:O}),w=t.filterFactory||new DefaultFilterFactory({docId:n,ownerDocument:O}),I=null;(0,_util.setVerbosityLevel)(h);let M={canvasFactory:x,filterFactory:w};if(q||(M.cMapReaderFactory=new g({baseUrl:p,isCompressed:m}),M.standardFontDataFactory=new E({baseUrl:_})),!d){let G={verbosity:h,port:_worker_options.GlobalWorkerOptions.workerPort};d=G.port?PDFWorker.fromPort(G):new PDFWorker(G),e._worker=d}let H={docId:n,apiVersion:"3.11.174",data:i,password:c,disableAutoFetch:U,rangeChunkSize:u,length:he,docBaseUrl:f,enableXfa:T,evaluatorOptions:{maxImageSize:V,disableFontFace:D,ignoreErrors:C,isEvalSupported:k,isOffscreenCanvasSupported:S,canvasMaxAreaInBytes:P,fontExtraProperties:A,useSystemFonts:oe,cMapUrl:q?p:null,standardFontDataUrl:q?_:null}},$={ignoreErrors:C,isEvalSupported:k,disableFontFace:D,fontExtraProperties:A,enableXfa:T,ownerDocument:O,disableAutoFetch:U,pdfBug:ae,styleElement:I};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");let G=_fetchDocument(d,H),j=new Promise(function(v){let R;l?R=new _transport_stream.PDFDataTransportStream({length:he,initialData:l.initialData,progressiveDone:l.progressiveDone,contentDispositionFilename:l.contentDispositionFilename,disableRange:F,disableStream:W},l):i||(R=(B=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(B):(0,_display_utils.isValidFetchUrl)(B.url)?new _displayFetch_stream.PDFFetchStream(B):new _displayNetwork.PDFNetworkStream(B))({url:r,length:he,httpHeaders:s,withCredentials:o,rangeChunkSize:u,disableRange:F,disableStream:W})),v(R)});return Promise.all([G,j]).then(function([v,R]){if(e.destroyed)throw new Error("Loading aborted");let N=new _message_handler.MessageHandler(n,v,d.port),B=new WorkerTransport(N,e,R,$,M);e._transport=B,N.send("Ready",null)})}).catch(e._capability.reject),e}function _fetchDocument(t,e){return ne(this,null,function*(){if(t.destroyed)throw new Error("Worker was destroyed");let n=yield t.messageHandler.sendWithPromise("GetDocRequest",e,e.data?[e.data.buffer]:null);if(t.destroyed)throw new Error("Worker was destroyed");return n})}function getUrlProp(t){if(t instanceof URL)return t.href;try{return new URL(t,window.location).href}catch{if(_util.isNodeJS&&typeof t=="string")return t}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(t){if(_util.isNodeJS&&typeof Buffer<"u"&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return(0,_util.stringToBytes)(t);if(typeof t=="object"&&!isNaN(t?.length)||(0,_util.isArrayBuffer)(t))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){return ne(this,null,function*(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),yield this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,n,r=!1,i=null){this.length=e,this.initialData=n,this.progressiveDone=r,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,n){for(let r of this._rangeListeners)r(e,n)}onDataProgress(e,n){this._readyCapability.promise.then(()=>{for(let r of this._progressListeners)r(e,n)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(let n of this._progressiveReadListeners)n(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,n){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,n){this._pdfInfo=e,this._transport=n,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(r=>{if(!r)return r;let i=[];for(let s in r)i.push(...r[s]);return i}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#e=null;#t=!1;constructor(e,n,r,i=!1){this._pageIndex=e,this._pageInfo=n,this._transport=r,this._stats=i?new _display_utils.StatTimer:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:n=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:s=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:n,offsetX:r,offsetY:i,dontFlip:s})}getAnnotations({intent:e="display"}={}){let n=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,n.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){return ne(this,null,function*(){return this._transport._htmlForXfa?.children[this._pageIndex]||null})}render({canvasContext:e,viewport:n,intent:r="display",annotationMode:i=_util.AnnotationMode.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:c=null,annotationCanvasMap:l=null,pageColors:u=null,printAnnotationStorage:d=null}){this._stats?.time("Overall");let h=this._transport.getRenderingIntent(r,i,d);this.#t=!1,this.#r(),c||(c=this._transport.getOptionalContentConfig());let f=this._intentStates.get(h.cacheKey);f||(f=Object.create(null),this._intentStates.set(h.cacheKey,f)),f.streamReaderCancelTimeout&&(clearTimeout(f.streamReaderCancelTimeout),f.streamReaderCancelTimeout=null);let p=!!(h.renderingIntent&_util.RenderingIntentFlag.PRINT);f.displayReadyCapability||(f.displayReadyCapability=new _util.PromiseCapability,f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(h));let m=E=>{f.renderTasks.delete(g),(this._maybeCleanupAfterRender||p)&&(this.#t=!0),this.#n(!p),E?(g.capability.reject(E),this._abortOperatorList({intentState:f,reason:E instanceof Error?E:new Error(E)})):g.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},g=new InternalRenderTask({callback:m,params:{canvasContext:e,viewport:n,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:f.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!p,pdfBug:this._pdfBug,pageColors:u});(f.renderTasks||=new Set).add(g);let _=g.task;return Promise.all([f.displayReadyCapability.promise,c]).then(([E,C])=>{if(this.destroyed){m();return}this._stats?.time("Rendering"),g.initializeGraphics({transparency:E,optionalContentConfig:C}),g.operatorListChanged()}).catch(m),_}getOperatorList({intent:e="display",annotationMode:n=_util.AnnotationMode.ENABLE,printAnnotationStorage:r=null}={}){function i(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(c))}let s=this._transport.getRenderingIntent(e,n,r,!0),o=this._intentStates.get(s.cacheKey);o||(o=Object.create(null),this._intentStates.set(s.cacheKey,o));let c;return o.opListReadCapability||(c=Object.create(null),c.operatorListChanged=i,o.opListReadCapability=new _util.PromiseCapability,(o.renderTasks||=new Set).add(c),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(s)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:n===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>_xfa_text.XfaText.textContent(r));let n=this.streamTextContent(e);return new Promise(function(r,i){function s(){o.read().then(function({value:l,done:u}){if(u){r(c);return}Object.assign(c.styles,l.styles),c.items.push(...l.items),s()},i)}let o=n.getReader(),c={items:[],styles:Object.create(null)};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let e=[];for(let n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(let r of n.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this.#t=!1,this.#r(),Promise.all(e)}cleanup(e=!1){this.#t=!0;let n=this.#n(!1);return e&&n&&(this._stats&&=new _display_utils.StatTimer),n}#n(e=!1){if(this.#r(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(let{renderTasks:n,operatorList:r}of this._intentStates.values())if(n.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#r(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,n){let r=this._intentStates.get(n);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(e))}_renderPageChunk(e,n){for(let r=0,i=e.length;r<i;r++)n.operatorList.fnArray.push(e.fnArray[r]),n.operatorList.argsArray.push(e.argsArray[r]);n.operatorList.lastChunk=e.lastChunk,n.operatorList.separateAnnots=e.separateAnnots;for(let r of n.renderTasks)r.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:n,annotationStorageSerializable:r}){let{map:i,transfers:s}=r,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:i},s).getReader(),l=this._intentStates.get(n);l.streamReader=c;let u=()=>{c.read().then(({value:d,done:h})=>{if(h){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,l),u())},d=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(let h of l.renderTasks)h.operatorListChanged();this.#n(!0)}if(l.displayReadyCapability)l.displayReadyCapability.reject(d);else if(l.opListReadCapability)l.opListReadCapability.reject(d);else throw d}})};u()}_abortOperatorList({intentState:e,reason:n,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(n instanceof _display_utils.RenderingCancelledException){let i=RENDERING_CANCELLED_TIMEOUT;n.extraDelay>0&&n.extraDelay<1e3&&(i+=n.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:n,force:!0})},i);return}}if(e.streamReader.cancel(new _util.AbortException(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(let[i,s]of this._intentStates)if(s===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#e=new Set;#t=Promise.resolve();postMessage(e,n){let r={data:structuredClone(e,n?{transfer:n}:null)};this.#t.then(()=>{for(let i of this.#e)i.call(this,r)})}addEventListener(e,n){this.#e.add(n)}removeEventListener(e,n){this.#e.delete(n)}terminate(){this.#e.clear()}}exports.LoopbackPort=LoopbackPort;let PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof Vd=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){let t=document?.currentScript?.src;t&&(PDFWorkerUtil.fallbackWorkerSrc=t.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(t,e){let n;try{if(n=new URL(t),!n.origin||n.origin==="null")return!1}catch{return!1}let r=new URL(e,n);return n.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(t){let e=`importScripts("${t}");`;return URL.createObjectURL(new Blob([e]))}}class PDFWorker{static#workerPorts;constructor({name:t=null,port:e=null,verbosity:n=(0,_util.getVerbosityLevel)()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,e){if(PDFWorker.#workerPorts?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new _message_handler.MessageHandler("main","worker",t),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:t}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,t)||(t=PDFWorkerUtil.createCDNWrapper(new URL(t,window.location).href));let e=new Worker(t),n=new _message_handler.MessageHandler("main","worker",e),r=()=>{e.removeEventListener("error",i),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=()=>{this._webWorker||r()};e.addEventListener("error",i),n.on("test",o=>{if(e.removeEventListener("error",i),this.destroyed){r();return}o?(this._messageHandler=n,this._port=e,this._webWorker=e,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),e.terminate())}),n.on("ready",o=>{if(e.removeEventListener("error",i),this.destroyed){r();return}try{s()}catch{this._setupFakeWorker()}});let s=()=>{let o=new Uint8Array;n.send("test",o,[o.buffer])};s();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}let e=new LoopbackPort;this._port=e;let n=`fake${PDFWorkerUtil.fakeWorkerId++}`,r=new _message_handler.MessageHandler(n+"_worker",n,e);t.setup(r,e);let i=new _message_handler.MessageHandler(n,n+"_worker",e);this._messageHandler=i,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");let e=this.#workerPorts?.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new PDFWorker(t)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){let loader=()=>ne(this,null,function*(){let mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof Vd=="function"){let worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#e=new Map;#t=new Map;#n=new Map;#r=null;constructor(e,n,r,i,s){this.messageHandler=e,this.loadingTask=n,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#a(e,n=null){let r=this.#e.get(e);if(r)return r;let i=this.messageHandler.sendWithPromise(e,n);return this.#e.set(e,i),i}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(e,n=_util.AnnotationMode.ENABLE,r=null,i=!1){let s=_util.RenderingIntentFlag.DISPLAY,o=_annotation_storage.SerializableEmpty;switch(e){case"any":s=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":s=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(n){case _util.AnnotationMode.DISABLE:s+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:s+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:s+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,o=(s&_util.RenderingIntentFlag.PRINT&&r instanceof _annotation_storage.PrintAnnotationStorage?r:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${n}`)}return i&&(s+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:s,cacheKey:`${s}_${o.hash}`,annotationStorageSerializable:o}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));let e=[];for(let r of this.#t.values())e.push(r._destroy());this.#t.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:e,loadingTask:n}=this;e.on("GetReader",(r,i)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){i.close();return}(0,_util.assert)(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",r=>{let i=new _util.PromiseCapability,s=this._fullReader;return s.headersReady.then(()=>{(!s.isStreamingSupported||!s.isRangeSupported)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),s.onProgress=o=>{n.onProgress?.({loaded:o.loaded,total:o.total})}),i.resolve({isStreamingSupported:s.isStreamingSupported,isRangeSupported:s.isRangeSupported,contentLength:s.contentLength})},i.reject),i.promise}),e.on("GetRangeReader",(r,i)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let s=this._networkStream.getRangeReader(r.begin,r.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:o,done:c}){if(c){i.close();return}(0,_util.assert)(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{s.cancel(o),i.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,n._capability.resolve(new PDFDocumentProxy(r,this))}),e.on("DocException",function(r){let i;switch(r.name){case"PasswordException":i=new _util.PasswordException(r.message,r.code);break;case"InvalidPDFException":i=new _util.InvalidPDFException(r.message);break;case"MissingPDFException":i=new _util.MissingPDFException(r.message);break;case"UnexpectedResponseException":i=new _util.UnexpectedResponseException(r.message,r.status);break;case"UnknownErrorException":i=new _util.UnknownErrorException(r.message,r.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}n._capability.reject(i)}),e.on("PasswordRequest",r=>{if(this.#r=new _util.PromiseCapability,n.onPassword){let i=s=>{s instanceof Error?this.#r.reject(s):this.#r.resolve({password:s})};try{n.onPassword(i,r.code)}catch(s){this.#r.reject(s)}}else this.#r.reject(new _util.PasswordException(r.message,r.code));return this.#r.promise}),e.on("DataLoaded",r=>{n.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,s])=>{if(!this.destroyed&&!this.commonObjs.has(r))switch(i){case"Font":let o=this._params;if("error"in s){let u=s.error;(0,_util.warn)(`Error during font loading: ${u}`),this.commonObjs.resolve(r,u);break}let c=o.pdfBug&&globalThis.FontInspector?.enabled?(u,d)=>globalThis.FontInspector.fontAdded(u,d):null,l=new _font_loader.FontFaceObject(s,{isEvalSupported:o.isEvalSupported,disableFontFace:o.disableFontFace,ignoreErrors:o.ignoreErrors,inspectFont:c});this.fontLoader.bind(l).catch(u=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!o.fontExtraProperties&&l.data&&(l.data=null),this.commonObjs.resolve(r,l)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,s);break;default:throw new Error(`Got unknown common object type ${i}`)}}),e.on("obj",([r,i,s,o])=>{if(this.destroyed)return;let c=this.#t.get(i);if(!c.objs.has(r))switch(s){case"Image":if(c.objs.resolve(r,o),o){let l;if(o.bitmap){let{width:u,height:d}=o;l=u*d*4}else l=o.data?.length||0;l>_util.MAX_IMAGE_SIZE_TO_CACHE&&(c._maybeCleanupAfterRender=!0)}break;case"Pattern":c.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${s}`)}}),e.on("DocProgress",r=>{this.destroyed||n.onProgress?.({loaded:r.loaded,total:r.total})}),e.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:e,transfers:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));let n=e-1,r=this.#n.get(n);if(r)return r;let i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");let o=new PDFPageProxy(n,s,this,this._params.pdfBug);return this.#t.set(n,o),o});return this.#n.set(n,i),i}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:n})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let e="GetMetadata",n=this.#e.get(e);if(n)return n;let r=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new _metadata.Metadata(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(e=!1){return ne(this,null,function*(){if(!this.destroyed){yield this.messageHandler.sendWithPromise("Cleanup",null);for(let n of this.#t.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0)}})}get loadingParams(){let{disableAutoFetch:e,enableXfa:n}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e,enableXfa:n})}}class PDFObjects{#e=Object.create(null);#t(e){return this.#e[e]||={capability:new _util.PromiseCapability,data:null}}get(e,n=null){if(n){let i=this.#t(e);return i.capability.promise.then(()=>n(i.data)),null}let r=this.#e[e];if(!r?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){return this.#e[e]?.capability.settled||!1}resolve(e,n=null){let r=this.#t(e);r.data=n,r.capability.resolve()}clear(){for(let e in this.#e){let{data:n}=this.#e[e];n?.bitmap?.close()}this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){let{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;let{annotationCanvasMap:n}=this.#e;return e.form||e.canvas&&n?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:e,params:n,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:o,pageIndex:c,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:f=null}){this.callback=e,this.params=n,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=c,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:r,viewport:i,transform:s,background:o}=this.params;this.gfx=new _canvas.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:i,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,n))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){return ne(this,null,function*(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback())))})}}let version="3.11.174";exports.version=version;let build="ce8716743";exports.build=build}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var r=n(1),i=n(4),s=n(8);let o=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=o;class c{#e=!1;#t=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(d,h){let f=this.#t.get(d);return f===void 0?h:Object.assign(h,f)}getRawValue(d){return this.#t.get(d)}remove(d){if(this.#t.delete(d),this.#t.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(let h of this.#t.values())if(h instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(d,h){let f=this.#t.get(d),p=!1;if(f!==void 0)for(let[m,g]of Object.entries(h))f[m]!==g&&(p=!0,f[m]=g);else p=!0,this.#t.set(d,h);p&&this.#n(),h instanceof i.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(h.constructor._type)}has(d){return this.#t.has(d)}getAll(){return this.#t.size>0?(0,r.objectFromMap)(this.#t):null}setAll(d){for(let[h,f]of Object.entries(d))this.setValue(h,f)}get size(){return this.#t.size}#n(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new l(this)}get serializable(){if(this.#t.size===0)return o;let d=new Map,h=new s.MurmurHash3_64,f=[],p=Object.create(null),m=!1;for(let[g,_]of this.#t){let E=_ instanceof i.AnnotationEditor?_.serialize(!1,p):_;E&&(d.set(g,E),h.update(`${g}:${JSON.stringify(E)}`),m||=!!E.bitmap)}if(m)for(let g of d.values())g.bitmap&&f.push(g.bitmap);return d.size>0?{map:d,hash:h.hexdigest(),transfers:f}:o}}e.AnnotationStorage=c;class l extends c{#e;constructor(d){super();let{map:h,hash:f,transfers:p}=d.serializable,m=structuredClone(h,p?{transfer:p}:null);this.#e={map:m,hash:f,transfers:p}}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}e.PrintAnnotationStorage=l}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var r=n(5),i=n(1),s=n(6);class o{#e="";#t=!1;#n=null;#r=null;#a=null;#o=!1;#s=null;#c=this.focusin.bind(this);#l=this.focusout.bind(this);#i=!1;#f=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#h=!1;#p=o._zIndex++;static _borderLineWidth=-1;static _colorManager=new r.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(u){this.constructor===o&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=u.parent,this.id=u.id,this.width=this.height=null,this.pageIndex=u.parent.pageIndex,this.name=u.name,this.div=null,this._uiManager=u.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=u.isCentered,this._structTreeParentId=null;let{rotation:d,rawDims:{pageWidth:h,pageHeight:f,pageX:p,pageY:m}}=this.parent.viewport;this.rotation=d,this.pageRotation=(360+d-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[h,f],this.pageTranslation=[p,m];let[g,_]=this.parentDimensions;this.x=u.x/g,this.y=u.y/_,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(u){let d=new c({id:u.parent.getNextId(),parent:u.parent,uiManager:u._uiManager});d.annotationElementId=u.annotationElementId,d.deleted=!0,d._uiManager.addToAnnotationStorage(d)}static initialize(u,d=null){if(o._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(f=>[f,u.get(f)])),d?.strings)for(let f of d.strings)o._l10nPromise.set(f,u.get(f));if(o._borderLineWidth!==-1)return;let h=getComputedStyle(document.documentElement);o._borderLineWidth=parseFloat(h.getPropertyValue("--outline-width"))||0}static updateDefaultParams(u,d){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(u){return!1}static paste(u,d){(0,i.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#h}set _isDraggable(u){this.#h=u,this.div?.classList.toggle("draggable",u)}center(){let[u,d]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*d/(u*2),this.y+=this.width*u/(d*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*d/(u*2),this.y-=this.width*u/(d*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(u){this._uiManager.addCommands(u)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(u){u!==null&&(this.pageIndex=u.pageIndex,this.pageDimensions=u.pageDimensions),this.parent=u}focusin(u){this._focusEventsAllowed&&(this.#i?this.#i=!1:this.parent.setSelected(this))}focusout(u){!this._focusEventsAllowed||!this.isAttachedToDOM||u.relatedTarget?.closest(`#${this.id}`)||(u.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(u,d,h,f){let[p,m]=this.parentDimensions;[h,f]=this.screenToPageTranslation(h,f),this.x=(u+h)/p,this.y=(d+f)/m,this.fixAndSetPosition()}#y([u,d],h,f){[h,f]=this.screenToPageTranslation(h,f),this.x+=h/u,this.y+=f/d,this.fixAndSetPosition()}translate(u,d){this.#y(this.parentDimensions,u,d)}translateInPage(u,d){this.#y(this.pageDimensions,u,d),this.div.scrollIntoView({block:"nearest"})}drag(u,d){let[h,f]=this.parentDimensions;if(this.x+=u/h,this.y+=d/f,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:E,y:C}=this.div.getBoundingClientRect();this.parent.findNewParent(this,E,C)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:p,y:m}=this,[g,_]=this.#m();p+=g,m+=_,this.div.style.left=`${(100*p).toFixed(2)}%`,this.div.style.top=`${(100*m).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#m(){let[u,d]=this.parentDimensions,{_borderLineWidth:h}=o,f=h/u,p=h/d;switch(this.rotation){case 90:return[-f,p];case 180:return[f,p];case 270:return[f,-p];default:return[-f,-p]}}fixAndSetPosition(){let[u,d]=this.pageDimensions,{x:h,y:f,width:p,height:m}=this;switch(p*=u,m*=d,h*=u,f*=d,this.rotation){case 0:h=Math.max(0,Math.min(u-p,h)),f=Math.max(0,Math.min(d-m,f));break;case 90:h=Math.max(0,Math.min(u-m,h)),f=Math.min(d,Math.max(p,f));break;case 180:h=Math.min(u,Math.max(p,h)),f=Math.min(d,Math.max(m,f));break;case 270:h=Math.min(u,Math.max(m,h)),f=Math.max(0,Math.min(d-p,f));break}this.x=h/=u,this.y=f/=d;let[g,_]=this.#m();h+=g,f+=_;let{style:E}=this.div;E.left=`${(100*h).toFixed(2)}%`,E.top=`${(100*f).toFixed(2)}%`,this.moveInDOM()}static#g(u,d,h){switch(h){case 90:return[d,-u];case 180:return[-u,-d];case 270:return[-d,u];default:return[u,d]}}screenToPageTranslation(u,d){return o.#g(u,d,this.parentRotation)}pageTranslationToScreen(u,d){return o.#g(u,d,360-this.parentRotation)}#u(u){switch(u){case 90:{let[d,h]=this.pageDimensions;return[0,-d/h,h/d,0]}case 180:return[-1,0,0,-1];case 270:{let[d,h]=this.pageDimensions;return[0,d/h,-h/d,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:u,pageDimensions:[d,h]}=this,f=d*u,p=h*u;return i.FeatureTest.isCSSRoundSupported?[Math.round(f),Math.round(p)]:[f,p]}setDims(u,d){let[h,f]=this.parentDimensions;this.div.style.width=`${(100*u/h).toFixed(2)}%`,this.#o||(this.div.style.height=`${(100*d/f).toFixed(2)}%`),this.#n?.classList.toggle("small",u<o.SMALL_EDITOR_SIZE||d<o.SMALL_EDITOR_SIZE)}fixDims(){let{style:u}=this.div,{height:d,width:h}=u,f=h.endsWith("%"),p=!this.#o&&d.endsWith("%");if(f&&p)return;let[m,g]=this.parentDimensions;f||(u.width=`${(100*parseFloat(h)/m).toFixed(2)}%`),!this.#o&&!p&&(u.height=`${(100*parseFloat(d)/g).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#v(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");let u=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||u.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(let d of u){let h=document.createElement("div");this.#s.append(h),h.classList.add("resizer",d),h.addEventListener("pointerdown",this.#I.bind(this,d)),h.addEventListener("contextmenu",s.noContextMenu)}this.div.prepend(this.#s)}#I(u,d){d.preventDefault();let{isMac:h}=i.FeatureTest.platform;if(d.button!==0||d.ctrlKey&&h)return;let f=this.#w.bind(this,u),p=this._isDraggable;this._isDraggable=!1;let m={passive:!0,capture:!0};window.addEventListener("pointermove",f,m);let g=this.x,_=this.y,E=this.width,C=this.height,V=this.parent.div.style.cursor,k=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(d.target).cursor;let S=()=>{this._isDraggable=p,window.removeEventListener("pointerup",S),window.removeEventListener("blur",S),window.removeEventListener("pointermove",f,m),this.parent.div.style.cursor=V,this.div.style.cursor=k;let P=this.x,D=this.y,A=this.width,T=this.height;P===g&&D===_&&A===E&&T===C||this.addCommands({cmd:()=>{this.width=A,this.height=T,this.x=P,this.y=D;let[O,F]=this.parentDimensions;this.setDims(O*A,F*T),this.fixAndSetPosition()},undo:()=>{this.width=E,this.height=C,this.x=g,this.y=_;let[O,F]=this.parentDimensions;this.setDims(O*E,F*C),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",S),window.addEventListener("blur",S)}#w(u,d){let[h,f]=this.parentDimensions,p=this.x,m=this.y,g=this.width,_=this.height,E=o.MIN_SIZE/h,C=o.MIN_SIZE/f,V=j=>Math.round(j*1e4)/1e4,k=this.#u(this.rotation),S=(j,v)=>[k[0]*j+k[2]*v,k[1]*j+k[3]*v],P=this.#u(360-this.rotation),D=(j,v)=>[P[0]*j+P[2]*v,P[1]*j+P[3]*v],A,T,O=!1,F=!1;switch(u){case"topLeft":O=!0,A=(j,v)=>[0,0],T=(j,v)=>[j,v];break;case"topMiddle":A=(j,v)=>[j/2,0],T=(j,v)=>[j/2,v];break;case"topRight":O=!0,A=(j,v)=>[j,0],T=(j,v)=>[0,v];break;case"middleRight":F=!0,A=(j,v)=>[j,v/2],T=(j,v)=>[0,v/2];break;case"bottomRight":O=!0,A=(j,v)=>[j,v],T=(j,v)=>[0,0];break;case"bottomMiddle":A=(j,v)=>[j/2,v],T=(j,v)=>[j/2,0];break;case"bottomLeft":O=!0,A=(j,v)=>[0,v],T=(j,v)=>[j,0];break;case"middleLeft":F=!0,A=(j,v)=>[0,v/2],T=(j,v)=>[j,v/2];break}let W=A(g,_),U=T(g,_),ae=S(...U),he=V(p+ae[0]),oe=V(m+ae[1]),q=1,x=1,[w,I]=this.screenToPageTranslation(d.movementX,d.movementY);if([w,I]=D(w/h,I/f),O){let j=Math.hypot(g,_);q=x=Math.max(Math.min(Math.hypot(U[0]-W[0]-w,U[1]-W[1]-I)/j,1/g,1/_),E/g,C/_)}else F?q=Math.max(E,Math.min(1,Math.abs(U[0]-W[0]-w)))/g:x=Math.max(C,Math.min(1,Math.abs(U[1]-W[1]-I)))/_;let M=V(g*q),H=V(_*x);ae=S(...T(M,H));let $=he-ae[0],G=oe-ae[1];this.width=M,this.height=H,this.x=$,this.y=G,this.setDims(h*M,f*H),this.fixAndSetPosition()}addAltTextButton(){return ne(this,null,function*(){if(this.#n)return;let u=this.#n=document.createElement("button");u.className="altText";let d=yield o._l10nPromise.get("editor_alt_text_button_label");u.textContent=d,u.setAttribute("aria-label",d),u.tabIndex="0",u.addEventListener("contextmenu",s.noContextMenu),u.addEventListener("pointerdown",h=>h.stopPropagation()),u.addEventListener("click",h=>{h.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),u.addEventListener("keydown",h=>{h.target===u&&h.key==="Enter"&&(h.preventDefault(),this._uiManager.editAltText(this))}),this.#S(),this.div.append(u),o.SMALL_EDITOR_SIZE||(o.SMALL_EDITOR_SIZE=Math.min(128,Math.round(u.getBoundingClientRect().width*1.4)))})}#S(){return ne(this,null,function*(){let u=this.#n;if(!u)return;if(!this.#e&&!this.#t){u.classList.remove("done"),this.#r?.remove();return}o._l10nPromise.get("editor_alt_text_edit_button_label").then(h=>{u.setAttribute("aria-label",h)});let d=this.#r;if(!d){this.#r=d=document.createElement("span"),d.className="tooltip",d.setAttribute("role","tooltip");let h=d.id=`alt-text-tooltip-${this.id}`;u.setAttribute("aria-describedby",h);let f=100;u.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#r.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},f)}),u.addEventListener("mouseleave",()=>{clearTimeout(this.#a),this.#a=null,this.#r?.classList.remove("show")})}u.classList.add("done"),d.innerText=this.#t?yield o._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#e,d.parentNode||u.append(d)})}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#e,decorative:this.#t}}set altTextData({altText:u,decorative:d}){this.#e===u&&this.#t===d||(this.#e=u,this.#t=d,this.#S())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#c),this.div.addEventListener("focusout",this.#l);let[u,d]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*d/u).toFixed(2)}%`,this.div.style.maxHeight=`${(100*u/d).toFixed(2)}%`);let[h,f]=this.getInitialTranslation();return this.translate(h,f),(0,r.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(u){let{isMac:d}=i.FeatureTest.platform;if(u.button!==0||u.ctrlKey&&d){u.preventDefault();return}this.#i=!0,this.#D(u)}#D(u){if(!this._isDraggable)return;let d=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let h,f;d&&(h={passive:!0,capture:!0},f=m=>{let[g,_]=this.screenToPageTranslation(m.movementX,m.movementY);this._uiManager.dragSelectedEditors(g,_)},window.addEventListener("pointermove",f,h));let p=()=>{if(window.removeEventListener("pointerup",p),window.removeEventListener("blur",p),d&&window.removeEventListener("pointermove",f,h),this.#i=!1,!this._uiManager.endDragSession()){let{isMac:m}=i.FeatureTest.platform;u.ctrlKey&&!m||u.shiftKey||u.metaKey&&m?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",p),window.addEventListener("blur",p)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(u,d,h){u.changeParent(this),this.x=d,this.y=h,this.fixAndSetPosition()}getRect(u,d){let h=this.parentScale,[f,p]=this.pageDimensions,[m,g]=this.pageTranslation,_=u/h,E=d/h,C=this.x*f,V=this.y*p,k=this.width*f,S=this.height*p;switch(this.rotation){case 0:return[C+_+m,p-V-E-S+g,C+_+k+m,p-V-E+g];case 90:return[C+E+m,p-V+_+g,C+E+S+m,p-V+_+k+g];case 180:return[C-_-k+m,p-V+E+g,C-_+m,p-V+E+S+g];case 270:return[C-E-S+m,p-V-_-k+g,C-E+m,p-V-_+g];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(u,d){let[h,f,p,m]=u,g=p-h,_=m-f;switch(this.rotation){case 0:return[h,d-m,g,_];case 90:return[h,d-f,_,g];case 180:return[p,d-f,g,_];case 270:return[p,d-m,_,g];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#c),this.div?.addEventListener("focusout",this.#l)}serialize(u=!1,d=null){(0,i.unreachable)("An editor must be serializable")}static deserialize(u,d,h){let f=new this.prototype.constructor({parent:d,id:d.getNextId(),uiManager:h});f.rotation=u.rotation;let[p,m]=f.pageDimensions,[g,_,E,C]=f.getRectInCurrentCoords(u.rect,m);return f.x=g/p,f.y=_/m,f.width=E/p,f.height=C/m,f}remove(){this.div.removeEventListener("focusin",this.#c),this.div.removeEventListener("focusout",this.#l),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#r=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#v(),this.#s.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(u,d){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(u){this.#f=u,this.parent&&(u?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(u,d){this.#o=!0;let h=u/d,{style:f}=this.div;f.aspectRatio=h,f.height="auto"}static get MIN_SIZE(){return 16}}e.AnnotationEditor=o;class c extends o{constructor(u){super(u),this.annotationElementId=u.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=s,e.opacityToHex=o;var r=n(1),i=n(6);function s(p,m,g){for(let _ of g)m.addEventListener(_,p[_].bind(p))}function o(p){return Math.round(Math.min(255,Math.max(1,255*p))).toString(16).padStart(2,"0")}class c{#e=0;getId(){return`${r.AnnotationEditorPrefix}${this.#e++}`}}class l{#e=(0,r.getUuid)();#t=0;#n=null;static get _isSVGFittingCanvas(){let m='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',_=new OffscreenCanvas(1,3).getContext("2d"),E=new Image;E.src=m;let C=E.decode().then(()=>(_.drawImage(E,0,0,1,1,0,0,1,3),new Uint32Array(_.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,r.shadow)(this,"_isSVGFittingCanvas",C)}#r(m,g){return ne(this,null,function*(){this.#n||=new Map;let _=this.#n.get(m);if(_===null)return null;if(_?.bitmap)return _.refCounter+=1,_;try{_||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let E;if(typeof g=="string"){_.url=g;let C=yield fetch(g);if(!C.ok)throw new Error(C.statusText);E=yield C.blob()}else E=_.file=g;if(E.type==="image/svg+xml"){let C=l._isSVGFittingCanvas,V=new FileReader,k=new Image,S=new Promise((P,D)=>{k.onload=()=>{_.bitmap=k,_.isSvg=!0,P()},V.onload=()=>ne(this,null,function*(){let A=_.svgUrl=V.result;k.src=(yield C)?`${A}#svgView(preserveAspectRatio(none))`:A}),k.onerror=V.onerror=D});V.readAsDataURL(E),yield S}else _.bitmap=yield createImageBitmap(E);_.refCounter=1}catch(E){console.error(E),_=null}return this.#n.set(m,_),_&&this.#n.set(_.id,_),_})}getFromFile(m){return ne(this,null,function*(){let{lastModified:g,name:_,size:E,type:C}=m;return this.#r(`${g}_${_}_${E}_${C}`,m)})}getFromUrl(m){return ne(this,null,function*(){return this.#r(m,m)})}getFromId(m){return ne(this,null,function*(){this.#n||=new Map;let g=this.#n.get(m);return g?g.bitmap?(g.refCounter+=1,g):g.file?this.getFromFile(g.file):this.getFromUrl(g.url):null})}getSvgUrl(m){let g=this.#n.get(m);return g?.isSvg?g.svgUrl:null}deleteId(m){this.#n||=new Map;let g=this.#n.get(m);g&&(g.refCounter-=1,g.refCounter===0&&(g.bitmap=null))}isValidId(m){return m.startsWith(`image_${this.#e}_`)}}class u{#e=[];#t=!1;#n;#r=-1;constructor(m=128){this.#n=m}add({cmd:m,undo:g,mustExec:_,type:E=NaN,overwriteIfSameType:C=!1,keepUndo:V=!1}){if(_&&m(),this.#t)return;let k={cmd:m,undo:g,type:E};if(this.#r===-1){this.#e.length>0&&(this.#e.length=0),this.#r=0,this.#e.push(k);return}if(C&&this.#e[this.#r].type===E){V&&(k.undo=this.#e[this.#r].undo),this.#e[this.#r]=k;return}let S=this.#r+1;S===this.#n?this.#e.splice(0,1):(this.#r=S,S<this.#e.length&&this.#e.splice(S)),this.#e.push(k)}undo(){this.#r!==-1&&(this.#t=!0,this.#e[this.#r].undo(),this.#t=!1,this.#r-=1)}redo(){this.#r<this.#e.length-1&&(this.#r+=1,this.#t=!0,this.#e[this.#r].cmd(),this.#t=!1)}hasSomethingToUndo(){return this.#r!==-1}hasSomethingToRedo(){return this.#r<this.#e.length-1}destroy(){this.#e=null}}e.CommandManager=u;class d{constructor(m){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:g}=r.FeatureTest.platform;for(let[_,E,C={}]of m)for(let V of _){let k=V.startsWith("mac+");g&&k?(this.callbacks.set(V.slice(4),{callback:E,options:C}),this.allKeys.add(V.split("+").at(-1))):!g&&!k&&(this.callbacks.set(V,{callback:E,options:C}),this.allKeys.add(V.split("+").at(-1)))}}#e(m){m.altKey&&this.buffer.push("alt"),m.ctrlKey&&this.buffer.push("ctrl"),m.metaKey&&this.buffer.push("meta"),m.shiftKey&&this.buffer.push("shift"),this.buffer.push(m.key);let g=this.buffer.join("+");return this.buffer.length=0,g}exec(m,g){if(!this.allKeys.has(g.key))return;let _=this.callbacks.get(this.#e(g));if(!_)return;let{callback:E,options:{bubbles:C=!1,args:V=[],checker:k=null}}=_;k&&!k(m,g)||(E.bind(m,...V)(),C||(g.stopPropagation(),g.preventDefault()))}}e.KeyboardManager=d;class h{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){let m=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(m),(0,r.shadow)(this,"_colors",m)}convert(m){let g=(0,i.getRGB)(m);if(!window.matchMedia("(forced-colors: active)").matches)return g;for(let[_,E]of this._colors)if(E.every((C,V)=>C===g[V]))return h._colorsMapping.get(_);return g}getHexCode(m){let g=this._colors.get(m);return g?r.Util.makeHexColor(...g):m}}e.ColorManager=h;let f=(()=>{class p{#e=null;#t=new Map;#n=new Map;#r=null;#a=null;#o=new u;#s=0;#c=new Set;#l=null;#i=null;#f=new Set;#d=null;#h=new c;#p=!1;#y=!1;#m=null;#g=r.AnnotationEditorType.NONE;#u=new Set;#v=null;#I=this.blur.bind(this);#w=this.focus.bind(this);#S=this.copy.bind(this);#D=this.cut.bind(this);#N=this.paste.bind(this);#O=this.keydown.bind(this);#F=this.onEditingAction.bind(this);#_=this.onPageChanging.bind(this);#k=this.onScaleChanging.bind(this);#R=this.onRotationChanging.bind(this);#P={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#E=[0,0];#C=null;#T=null;#L=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let g=p.prototype,_=V=>{let{activeElement:k}=document;return k&&V.#T.contains(k)&&V.hasSomethingToControl()},E=this.TRANSLATE_SMALL,C=this.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new d([[["ctrl+a","mac+meta+a"],g.selectAll],[["ctrl+z","mac+meta+z"],g.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],g.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],g.delete],[["Escape","mac+Escape"],g.unselectAll],[["ArrowLeft","mac+ArrowLeft"],g.translateSelectedEditors,{args:[-E,0],checker:_}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],g.translateSelectedEditors,{args:[-C,0],checker:_}],[["ArrowRight","mac+ArrowRight"],g.translateSelectedEditors,{args:[E,0],checker:_}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],g.translateSelectedEditors,{args:[C,0],checker:_}],[["ArrowUp","mac+ArrowUp"],g.translateSelectedEditors,{args:[0,-E],checker:_}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],g.translateSelectedEditors,{args:[0,-C],checker:_}],[["ArrowDown","mac+ArrowDown"],g.translateSelectedEditors,{args:[0,E],checker:_}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],g.translateSelectedEditors,{args:[0,C],checker:_}]]))}constructor(g,_,E,C,V,k){this.#T=g,this.#L=_,this.#r=E,this._eventBus=C,this._eventBus._on("editingaction",this.#F),this._eventBus._on("pagechanging",this.#_),this._eventBus._on("scalechanging",this.#k),this._eventBus._on("rotationchanging",this.#R),this.#a=V.annotationStorage,this.#d=V.filterFactory,this.#v=k,this.viewParameters={realScale:i.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#x(),this.#U(),this._eventBus._off("editingaction",this.#F),this._eventBus._off("pagechanging",this.#_),this._eventBus._off("scalechanging",this.#k),this._eventBus._off("rotationchanging",this.#R);for(let g of this.#n.values())g.destroy();this.#n.clear(),this.#t.clear(),this.#f.clear(),this.#e=null,this.#u.clear(),this.#o.destroy(),this.#r.destroy()}get hcmFilter(){return(0,r.shadow)(this,"hcmFilter",this.#v?this.#d.addHCMFilter(this.#v.foreground,this.#v.background):"none")}get direction(){return(0,r.shadow)(this,"direction",getComputedStyle(this.#T).direction)}editAltText(g){this.#r?.editAltText(this,g)}onPageChanging({pageNumber:g}){this.#s=g-1}focusMainContainer(){this.#T.focus()}findParent(g,_){for(let E of this.#n.values()){let{x:C,y:V,width:k,height:S}=E.div.getBoundingClientRect();if(g>=C&&g<=C+k&&_>=V&&_<=V+S)return E}return null}disableUserSelect(g=!1){this.#L.classList.toggle("noUserSelect",g)}addShouldRescale(g){this.#f.add(g)}removeShouldRescale(g){this.#f.delete(g)}onScaleChanging({scale:g}){this.commitOrRemove(),this.viewParameters.realScale=g*i.PixelsPerInch.PDF_TO_CSS_UNITS;for(let _ of this.#f)_.onScaleChanging()}onRotationChanging({pagesRotation:g}){this.commitOrRemove(),this.viewParameters.rotation=g}addToAnnotationStorage(g){!g.isEmpty()&&this.#a&&!this.#a.has(g.id)&&this.#a.setValue(g.id,g)}#V(){window.addEventListener("focus",this.#w),window.addEventListener("blur",this.#I)}#U(){window.removeEventListener("focus",this.#w),window.removeEventListener("blur",this.#I)}blur(){if(!this.hasSelection)return;let{activeElement:g}=document;for(let _ of this.#u)if(_.div.contains(g)){this.#m=[_,g],_._focusEventsAllowed=!1;break}}focus(){if(!this.#m)return;let[g,_]=this.#m;this.#m=null,_.addEventListener("focusin",()=>{g._focusEventsAllowed=!0},{once:!0}),_.focus()}#j(){window.addEventListener("keydown",this.#O,{capture:!0})}#x(){window.removeEventListener("keydown",this.#O,{capture:!0})}#M(){document.addEventListener("copy",this.#S),document.addEventListener("cut",this.#D),document.addEventListener("paste",this.#N)}#A(){document.removeEventListener("copy",this.#S),document.removeEventListener("cut",this.#D),document.removeEventListener("paste",this.#N)}addEditListeners(){this.#j(),this.#M()}removeEditListeners(){this.#x(),this.#A()}copy(g){if(g.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;let _=[];for(let E of this.#u){let C=E.serialize(!0);C&&_.push(C)}_.length!==0&&g.clipboardData.setData("application/pdfjs",JSON.stringify(_))}cut(g){this.copy(g),this.delete()}paste(g){g.preventDefault();let{clipboardData:_}=g;for(let V of _.items)for(let k of this.#i)if(k.isHandlingMimeForPasting(V.type)){k.paste(V,this.currentLayer);return}let E=_.getData("application/pdfjs");if(!E)return;try{E=JSON.parse(E)}catch(V){(0,r.warn)(`paste: "${V.message}".`);return}if(!Array.isArray(E))return;this.unselectAll();let C=this.currentLayer;try{let V=[];for(let P of E){let D=C.deserialize(P);if(!D)return;V.push(D)}let k=()=>{for(let P of V)this.#H(P);this.#z(V)},S=()=>{for(let P of V)P.remove()};this.addCommands({cmd:k,undo:S,mustExec:!0})}catch(V){(0,r.warn)(`paste: "${V.message}".`)}}keydown(g){this.getActive()?.shouldGetKeyboardEvents()||p._keyboardManager.exec(this,g)}onEditingAction(g){["undo","redo","delete","selectAll"].includes(g.name)&&this[g.name]()}#b(g){Object.entries(g).some(([E,C])=>this.#P[E]!==C)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#P,g)})}#B(g){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:g})}setEditingState(g){g?(this.#V(),this.#j(),this.#M(),this.#b({isEditing:this.#g!==r.AnnotationEditorType.NONE,isEmpty:this.#$(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#U(),this.#x(),this.#A(),this.#b({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(g){if(!this.#i){this.#i=g;for(let _ of this.#i)this.#B(_.defaultPropertiesToUpdate)}}getId(){return this.#h.getId()}get currentLayer(){return this.#n.get(this.#s)}getLayer(g){return this.#n.get(g)}get currentPageIndex(){return this.#s}addLayer(g){this.#n.set(g.pageIndex,g),this.#p?g.enable():g.disable()}removeLayer(g){this.#n.delete(g.pageIndex)}updateMode(g,_=null){if(this.#g!==g){if(this.#g=g,g===r.AnnotationEditorType.NONE){this.setEditingState(!1),this.#W();return}this.setEditingState(!0),this.#q(),this.unselectAll();for(let E of this.#n.values())E.updateMode(g);if(_){for(let E of this.#t.values())if(E.annotationElementId===_){this.setSelected(E),E.enterInEditMode();break}}}}updateToolbar(g){g!==this.#g&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:g})}updateParams(g,_){if(this.#i){if(g===r.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(g);return}for(let E of this.#u)E.updateParams(g,_);for(let E of this.#i)E.updateDefaultParams(g,_)}}enableWaiting(g=!1){if(this.#y!==g){this.#y=g;for(let _ of this.#n.values())g?_.disableClick():_.enableClick(),_.div.classList.toggle("waiting",g)}}#q(){if(!this.#p){this.#p=!0;for(let g of this.#n.values())g.enable()}}#W(){if(this.unselectAll(),this.#p){this.#p=!1;for(let g of this.#n.values())g.disable()}}getEditors(g){let _=[];for(let E of this.#t.values())E.pageIndex===g&&_.push(E);return _}getEditor(g){return this.#t.get(g)}addEditor(g){this.#t.set(g.id,g)}removeEditor(g){this.#t.delete(g.id),this.unselect(g),(!g.annotationElementId||!this.#c.has(g.annotationElementId))&&this.#a?.remove(g.id)}addDeletedAnnotationElement(g){this.#c.add(g.annotationElementId),g.deleted=!0}isDeletedAnnotationElement(g){return this.#c.has(g)}removeDeletedAnnotationElement(g){this.#c.delete(g.annotationElementId),g.deleted=!1}#H(g){let _=this.#n.get(g.pageIndex);_?_.addOrRebuild(g):this.addEditor(g)}setActiveEditor(g){this.#e!==g&&(this.#e=g,g&&this.#B(g.propertiesToUpdate))}toggleSelected(g){if(this.#u.has(g)){this.#u.delete(g),g.unselect(),this.#b({hasSelectedEditor:this.hasSelection});return}this.#u.add(g),g.select(),this.#B(g.propertiesToUpdate),this.#b({hasSelectedEditor:!0})}setSelected(g){for(let _ of this.#u)_!==g&&_.unselect();this.#u.clear(),this.#u.add(g),g.select(),this.#B(g.propertiesToUpdate),this.#b({hasSelectedEditor:!0})}isSelected(g){return this.#u.has(g)}unselect(g){g.unselect(),this.#u.delete(g),this.#b({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#u.size!==0}undo(){this.#o.undo(),this.#b({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#$()})}redo(){this.#o.redo(),this.#b({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#$()})}addCommands(g){this.#o.add(g),this.#b({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#$()})}#$(){if(this.#t.size===0)return!0;if(this.#t.size===1)for(let g of this.#t.values())return g.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;let g=[...this.#u],_=()=>{for(let C of g)C.remove()},E=()=>{for(let C of g)this.#H(C)};this.addCommands({cmd:_,undo:E,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#z(g){this.#u.clear();for(let _ of g)_.isEmpty()||(this.#u.add(_),_.select());this.#b({hasSelectedEditor:!0})}selectAll(){for(let g of this.#u)g.commit();this.#z(this.#t.values())}unselectAll(){if(this.#e){this.#e.commitOrRemove();return}if(this.hasSelection){for(let g of this.#u)g.unselect();this.#u.clear(),this.#b({hasSelectedEditor:!1})}}translateSelectedEditors(g,_,E=!1){if(E||this.commitOrRemove(),!this.hasSelection)return;this.#E[0]+=g,this.#E[1]+=_;let[C,V]=this.#E,k=[...this.#u],S=1e3;this.#C&&clearTimeout(this.#C),this.#C=setTimeout(()=>{this.#C=null,this.#E[0]=this.#E[1]=0,this.addCommands({cmd:()=>{for(let P of k)this.#t.has(P.id)&&P.translateInPage(C,V)},undo:()=>{for(let P of k)this.#t.has(P.id)&&P.translateInPage(-C,-V)},mustExec:!1})},S);for(let P of k)P.translateInPage(g,_)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#l=new Map;for(let g of this.#u)this.#l.set(g,{savedX:g.x,savedY:g.y,savedPageIndex:g.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#l)return!1;this.disableUserSelect(!1);let g=this.#l;this.#l=null;let _=!1;for(let[{x:C,y:V,pageIndex:k},S]of g)S.newX=C,S.newY=V,S.newPageIndex=k,_||=C!==S.savedX||V!==S.savedY||k!==S.savedPageIndex;if(!_)return!1;let E=(C,V,k,S)=>{if(this.#t.has(C.id)){let P=this.#n.get(S);P?C._setParentAndPosition(P,V,k):(C.pageIndex=S,C.x=V,C.y=k)}};return this.addCommands({cmd:()=>{for(let[C,{newX:V,newY:k,newPageIndex:S}]of g)E(C,V,k,S)},undo:()=>{for(let[C,{savedX:V,savedY:k,savedPageIndex:S}]of g)E(C,V,k,S)},mustExec:!0}),!0}dragSelectedEditors(g,_){if(this.#l)for(let E of this.#l.keys())E.drag(g,_)}rebuild(g){if(g.parent===null){let _=this.getLayer(g.pageIndex);_?(_.changeParent(g),_.addOrRebuild(g)):(this.addEditor(g),this.addToAnnotationStorage(g),g.rebuild())}else g.parent.addOrRebuild(g)}isActive(g){return this.#e===g}getActive(){return this.#e}getMode(){return this.#g}get imageManager(){return(0,r.shadow)(this,"imageManager",new l)}}return p})();e.AnnotationEditorUIManager=f}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=D,e.getColorValues=W,e.getCurrentTransform=U,e.getCurrentTransformInverse=ae,e.getFilenameFromUrl=E,e.getPdfFilenameFromUrl=C,e.getRGB=F,e.getXfaPageViewport=O,e.isDataScheme=g,e.isPdfFile=_,e.isValidFetchUrl=k,e.loadScript=P,e.noContextMenu=S,e.setLayerDimensions=he;var r=n(7),i=n(1);let s="http://www.w3.org/2000/svg";class o{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}e.PixelsPerInch=o;class c extends r.BaseFilterFactory{#e;#t;#n;#r;#a;#o;#s;#c;#l;#i;#f=0;constructor({docId:q,ownerDocument:x=globalThis.document}={}){super(),this.#n=q,this.#r=x}get#d(){return this.#e||=new Map}get#h(){if(!this.#t){let q=this.#r.createElement("div"),{style:x}=q;x.visibility="hidden",x.contain="strict",x.width=x.height=0,x.position="absolute",x.top=x.left=0,x.zIndex=-1;let w=this.#r.createElementNS(s,"svg");w.setAttribute("width",0),w.setAttribute("height",0),this.#t=this.#r.createElementNS(s,"defs"),q.append(w),w.append(this.#t),this.#r.body.append(q)}return this.#t}addFilter(q){if(!q)return"none";let x=this.#d.get(q);if(x)return x;let w,I,M,H;if(q.length===1){let v=q[0],R=new Array(256);for(let N=0;N<256;N++)R[N]=v[N]/255;H=w=I=M=R.join(",")}else{let[v,R,N]=q,B=new Array(256),z=new Array(256),K=new Array(256);for(let Y=0;Y<256;Y++)B[Y]=v[Y]/255,z[Y]=R[Y]/255,K[Y]=N[Y]/255;w=B.join(","),I=z.join(","),M=K.join(","),H=`${w}${I}${M}`}if(x=this.#d.get(H),x)return this.#d.set(q,x),x;let $=`g_${this.#n}_transfer_map_${this.#f++}`,G=`url(#${$})`;this.#d.set(q,G),this.#d.set(H,G);let j=this.#y($);return this.#g(w,I,M,j),G}addHCMFilter(q,x){let w=`${q}-${x}`;if(this.#o===w)return this.#s;if(this.#o=w,this.#s="none",this.#a?.remove(),!q||!x)return this.#s;let I=this.#u(q);q=i.Util.makeHexColor(...I);let M=this.#u(x);if(x=i.Util.makeHexColor(...M),this.#h.style.color="",q==="#000000"&&x==="#ffffff"||q===x)return this.#s;let H=new Array(256);for(let R=0;R<=255;R++){let N=R/255;H[R]=N<=.03928?N/12.92:((N+.055)/1.055)**2.4}let $=H.join(","),G=`g_${this.#n}_hcm_filter`,j=this.#c=this.#y(G);this.#g($,$,$,j),this.#p(j);let v=(R,N)=>{let B=I[R]/255,z=M[R]/255,K=new Array(N+1);for(let Y=0;Y<=N;Y++)K[Y]=B+Y/N*(z-B);return K.join(",")};return this.#g(v(0,5),v(1,5),v(2,5),j),this.#s=`url(#${G})`,this.#s}addHighlightHCMFilter(q,x,w,I){let M=`${q}-${x}-${w}-${I}`;if(this.#l===M)return this.#i;if(this.#l=M,this.#i="none",this.#c?.remove(),!q||!x)return this.#i;let[H,$]=[q,x].map(this.#u.bind(this)),G=Math.round(.2126*H[0]+.7152*H[1]+.0722*H[2]),j=Math.round(.2126*$[0]+.7152*$[1]+.0722*$[2]),[v,R]=[w,I].map(this.#u.bind(this));j<G&&([G,j,v,R]=[j,G,R,v]),this.#h.style.color="";let N=(K,Y,J)=>{let de=new Array(256),ee=(j-G)/J,re=K/255,ie=(Y-K)/(255*J),se=0;for(let ce=0;ce<=J;ce++){let pe=Math.round(G+ce*ee),ve=re+ce*ie;for(let be=se;be<=pe;be++)de[be]=ve;se=pe+1}for(let ce=se;ce<256;ce++)de[ce]=de[se-1];return de.join(",")},B=`g_${this.#n}_hcm_highlight_filter`,z=this.#c=this.#y(B);return this.#p(z),this.#g(N(v[0],R[0],5),N(v[1],R[1],5),N(v[2],R[2],5),z),this.#i=`url(#${B})`,this.#i}destroy(q=!1){q&&(this.#s||this.#i)||(this.#t&&(this.#t.parentNode.parentNode.remove(),this.#t=null),this.#e&&(this.#e.clear(),this.#e=null),this.#f=0)}#p(q){let x=this.#r.createElementNS(s,"feColorMatrix");x.setAttribute("type","matrix"),x.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),q.append(x)}#y(q){let x=this.#r.createElementNS(s,"filter");return x.setAttribute("color-interpolation-filters","sRGB"),x.setAttribute("id",q),this.#h.append(x),x}#m(q,x,w){let I=this.#r.createElementNS(s,x);I.setAttribute("type","discrete"),I.setAttribute("tableValues",w),q.append(I)}#g(q,x,w,I){let M=this.#r.createElementNS(s,"feComponentTransfer");I.append(M),this.#m(M,"feFuncR",q),this.#m(M,"feFuncG",x),this.#m(M,"feFuncB",w)}#u(q){return this.#h.style.color=q,F(getComputedStyle(this.#h).getPropertyValue("color"))}}e.DOMFilterFactory=c;class l extends r.BaseCanvasFactory{constructor({ownerDocument:q=globalThis.document}={}){super(),this._document=q}_createCanvas(q,x){let w=this._document.createElement("canvas");return w.width=q,w.height=x,w}}e.DOMCanvasFactory=l;function u(oe,q=!1){return ne(this,null,function*(){if(k(oe,document.baseURI)){let x=yield fetch(oe);if(!x.ok)throw new Error(x.statusText);return q?new Uint8Array(yield x.arrayBuffer()):(0,i.stringToBytes)(yield x.text())}return new Promise((x,w)=>{let I=new XMLHttpRequest;I.open("GET",oe,!0),q&&(I.responseType="arraybuffer"),I.onreadystatechange=()=>{if(I.readyState===XMLHttpRequest.DONE){if(I.status===200||I.status===0){let M;if(q&&I.response?M=new Uint8Array(I.response):!q&&I.responseText&&(M=(0,i.stringToBytes)(I.responseText)),M){x(M);return}}w(new Error(I.statusText))}},I.send(null)})})}class d extends r.BaseCMapReaderFactory{_fetchData(q,x){return u(q,this.isCompressed).then(w=>({cMapData:w,compressionType:x}))}}e.DOMCMapReaderFactory=d;class h extends r.BaseStandardFontDataFactory{_fetchData(q){return u(q,!0)}}e.DOMStandardFontDataFactory=h;class f extends r.BaseSVGFactory{_createSVG(q){return document.createElementNS(s,q)}}e.DOMSVGFactory=f;class p{constructor({viewBox:q,scale:x,rotation:w,offsetX:I=0,offsetY:M=0,dontFlip:H=!1}){this.viewBox=q,this.scale=x,this.rotation=w,this.offsetX=I,this.offsetY=M;let $=(q[2]+q[0])/2,G=(q[3]+q[1])/2,j,v,R,N;switch(w%=360,w<0&&(w+=360),w){case 180:j=-1,v=0,R=0,N=1;break;case 90:j=0,v=1,R=1,N=0;break;case 270:j=0,v=-1,R=-1,N=0;break;case 0:j=1,v=0,R=0,N=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}H&&(R=-R,N=-N);let B,z,K,Y;j===0?(B=Math.abs(G-q[1])*x+I,z=Math.abs($-q[0])*x+M,K=(q[3]-q[1])*x,Y=(q[2]-q[0])*x):(B=Math.abs($-q[0])*x+I,z=Math.abs(G-q[1])*x+M,K=(q[2]-q[0])*x,Y=(q[3]-q[1])*x),this.transform=[j*x,v*x,R*x,N*x,B-j*x*$-R*x*G,z-v*x*$-N*x*G],this.width=K,this.height=Y}get rawDims(){let{viewBox:q}=this;return(0,i.shadow)(this,"rawDims",{pageWidth:q[2]-q[0],pageHeight:q[3]-q[1],pageX:q[0],pageY:q[1]})}clone({scale:q=this.scale,rotation:x=this.rotation,offsetX:w=this.offsetX,offsetY:I=this.offsetY,dontFlip:M=!1}={}){return new p({viewBox:this.viewBox.slice(),scale:q,rotation:x,offsetX:w,offsetY:I,dontFlip:M})}convertToViewportPoint(q,x){return i.Util.applyTransform([q,x],this.transform)}convertToViewportRectangle(q){let x=i.Util.applyTransform([q[0],q[1]],this.transform),w=i.Util.applyTransform([q[2],q[3]],this.transform);return[x[0],x[1],w[0],w[1]]}convertToPdfPoint(q,x){return i.Util.applyInverseTransform([q,x],this.transform)}}e.PageViewport=p;class m extends i.BaseException{constructor(q,x=0){super(q,"RenderingCancelledException"),this.extraDelay=x}}e.RenderingCancelledException=m;function g(oe){let q=oe.length,x=0;for(;x<q&&oe[x].trim()==="";)x++;return oe.substring(x,x+5).toLowerCase()==="data:"}function _(oe){return typeof oe=="string"&&/\.pdf$/i.test(oe)}function E(oe,q=!1){return q||([oe]=oe.split(/[#?]/,1)),oe.substring(oe.lastIndexOf("/")+1)}function C(oe,q="document.pdf"){if(typeof oe!="string")return q;if(g(oe))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),q;let x=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,w=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,I=x.exec(oe),M=w.exec(I[1])||w.exec(I[2])||w.exec(I[3]);if(M&&(M=M[0],M.includes("%")))try{M=w.exec(decodeURIComponent(M))[0]}catch{}return M||q}class V{started=Object.create(null);times=[];time(q){q in this.started&&(0,i.warn)(`Timer is already running for ${q}`),this.started[q]=Date.now()}timeEnd(q){q in this.started||(0,i.warn)(`Timer has not been started for ${q}`),this.times.push({name:q,start:this.started[q],end:Date.now()}),delete this.started[q]}toString(){let q=[],x=0;for(let{name:w}of this.times)x=Math.max(w.length,x);for(let{name:w,start:I,end:M}of this.times)q.push(`${w.padEnd(x)} ${M-I}ms
`);return q.join("")}}e.StatTimer=V;function k(oe,q){try{let{protocol:x}=q?new URL(oe,q):new URL(oe);return x==="http:"||x==="https:"}catch{return!1}}function S(oe){oe.preventDefault()}function P(oe,q=!1){return new Promise((x,w)=>{let I=document.createElement("script");I.src=oe,I.onload=function(M){q&&I.remove(),x(M)},I.onerror=function(){w(new Error(`Cannot load script at: ${I.src}`))},(document.head||document.documentElement).append(I)})}function D(oe){console.log("Deprecated API usage: "+oe)}let A;class T{static toDateObject(q){if(!q||typeof q!="string")return null;A||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");let x=A.exec(q);if(!x)return null;let w=parseInt(x[1],10),I=parseInt(x[2],10);I=I>=1&&I<=12?I-1:0;let M=parseInt(x[3],10);M=M>=1&&M<=31?M:1;let H=parseInt(x[4],10);H=H>=0&&H<=23?H:0;let $=parseInt(x[5],10);$=$>=0&&$<=59?$:0;let G=parseInt(x[6],10);G=G>=0&&G<=59?G:0;let j=x[7]||"Z",v=parseInt(x[8],10);v=v>=0&&v<=23?v:0;let R=parseInt(x[9],10)||0;return R=R>=0&&R<=59?R:0,j==="-"?(H+=v,$+=R):j==="+"&&(H-=v,$-=R),new Date(Date.UTC(w,I,M,H,$,G))}}e.PDFDateString=T;function O(oe,{scale:q=1,rotation:x=0}){let{width:w,height:I}=oe.attributes.style,M=[0,0,parseInt(w),parseInt(I)];return new p({viewBox:M,scale:q,rotation:x})}function F(oe){if(oe.startsWith("#")){let q=parseInt(oe.slice(1),16);return[(q&16711680)>>16,(q&65280)>>8,q&255]}return oe.startsWith("rgb(")?oe.slice(4,-1).split(",").map(q=>parseInt(q)):oe.startsWith("rgba(")?oe.slice(5,-1).split(",").map(q=>parseInt(q)).slice(0,3):((0,i.warn)(`Not a valid color format: "${oe}"`),[0,0,0])}function W(oe){let q=document.createElement("span");q.style.visibility="hidden",document.body.append(q);for(let x of oe.keys()){q.style.color=x;let w=window.getComputedStyle(q).color;oe.set(x,F(w))}q.remove()}function U(oe){let{a:q,b:x,c:w,d:I,e:M,f:H}=oe.getTransform();return[q,x,w,I,M,H]}function ae(oe){let{a:q,b:x,c:w,d:I,e:M,f:H}=oe.getTransform().invertSelf();return[q,x,w,I,M,H]}function he(oe,q,x=!1,w=!0){if(q instanceof p){let{pageWidth:I,pageHeight:M}=q.rawDims,{style:H}=oe,$=i.FeatureTest.isCSSRoundSupported,G=`var(--scale-factor) * ${I}px`,j=`var(--scale-factor) * ${M}px`,v=$?`round(${G}, 1px)`:`calc(${G})`,R=$?`round(${j}, 1px)`:`calc(${j})`;!x||q.rotation%180===0?(H.width=v,H.height=R):(H.width=R,H.height=v)}w&&oe.setAttribute("data-main-rotation",q.rotation)}}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var r=n(1);class i{constructor(){this.constructor===i&&(0,r.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(d){return"none"}addHCMFilter(d,h){return"none"}addHighlightHCMFilter(d,h,f,p){return"none"}destroy(d=!1){}}e.BaseFilterFactory=i;class s{constructor(){this.constructor===s&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(d,h){if(d<=0||h<=0)throw new Error("Invalid canvas size");let f=this._createCanvas(d,h);return{canvas:f,context:f.getContext("2d")}}reset(d,h,f){if(!d.canvas)throw new Error("Canvas is not specified");if(h<=0||f<=0)throw new Error("Invalid canvas size");d.canvas.width=h,d.canvas.height=f}destroy(d){if(!d.canvas)throw new Error("Canvas is not specified");d.canvas.width=0,d.canvas.height=0,d.canvas=null,d.context=null}_createCanvas(d,h){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=s;class o{constructor({baseUrl:d=null,isCompressed:h=!0}){this.constructor===o&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=d,this.isCompressed=h}fetch(h){return ne(this,arguments,function*({name:d}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!d)throw new Error("CMap name must be specified.");let f=this.baseUrl+d+(this.isCompressed?".bcmap":""),p=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(f,p).catch(m=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${f}`)})})}_fetchData(d,h){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=o;class c{constructor({baseUrl:d=null}){this.constructor===c&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=d}fetch(h){return ne(this,arguments,function*({filename:d}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!d)throw new Error("Font filename must be specified.");let f=`${this.baseUrl}${d}`;return this._fetchData(f).catch(p=>{throw new Error(`Unable to load font data at: ${f}`)})})}_fetchData(d){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=c;class l{constructor(){this.constructor===l&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(d,h,f=!1){if(d<=0||h<=0)throw new Error("Invalid SVG dimensions");let p=this._createSVG("svg:svg");return p.setAttribute("version","1.1"),f||(p.setAttribute("width",`${d}px`),p.setAttribute("height",`${h}px`)),p.setAttribute("preserveAspectRatio","none"),p.setAttribute("viewBox",`0 0 ${d} ${h}`),p}createElement(d){if(typeof d!="string")throw new Error("Invalid SVG element type");return this._createSVG(d)}_createSVG(d){(0,r.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=l}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var r=n(1);let i=3285377520,s=4294901760,o=65535;class c{constructor(u){this.h1=u?u&4294967295:i,this.h2=u?u&4294967295:i}update(u){let d,h;if(typeof u=="string"){d=new Uint8Array(u.length*2),h=0;for(let D=0,A=u.length;D<A;D++){let T=u.charCodeAt(D);T<=255?d[h++]=T:(d[h++]=T>>>8,d[h++]=T&255)}}else if((0,r.isArrayBuffer)(u))d=u.slice(),h=d.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");let f=h>>2,p=h-f*4,m=new Uint32Array(d.buffer,0,f),g=0,_=0,E=this.h1,C=this.h2,V=3432918353,k=461845907,S=V&o,P=k&o;for(let D=0;D<f;D++)D&1?(g=m[D],g=g*V&s|g*S&o,g=g<<15|g>>>17,g=g*k&s|g*P&o,E^=g,E=E<<13|E>>>19,E=E*5+3864292196):(_=m[D],_=_*V&s|_*S&o,_=_<<15|_>>>17,_=_*k&s|_*P&o,C^=_,C=C<<13|C>>>19,C=C*5+3864292196);switch(g=0,p){case 3:g^=d[f*4+2]<<16;case 2:g^=d[f*4+1]<<8;case 1:g^=d[f*4],g=g*V&s|g*S&o,g=g<<15|g>>>17,g=g*k&s|g*P&o,f&1?E^=g:C^=g}this.h1=E,this.h2=C}hexdigest(){let u=this.h1,d=this.h2;return u^=d>>>1,u=u*3981806797&s|u*36045&o,d=d*4283543511&s|((d<<16|u>>>16)*2950163797&s)>>>16,u^=d>>>1,u=u*444984403&s|u*60499&o,d=d*3301882366&s|((d<<16|u>>>16)*3120437893&s)>>>16,u^=d>>>1,(u>>>0).toString(16).padStart(8,"0")+(d>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=c}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var r=n(1);class i{#e=new Set;constructor({ownerDocument:c=globalThis.document,styleElement:l=null}){this._document=c,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(c){this.nativeFontFaces.add(c),this._document.fonts.add(c)}removeNativeFontFace(c){this.nativeFontFaces.delete(c),this._document.fonts.delete(c)}insertRule(c){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let l=this.styleElement.sheet;l.insertRule(c,l.cssRules.length)}clear(){for(let c of this.nativeFontFaces)this._document.fonts.delete(c);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(c){return ne(this,null,function*(){if(!(!c||this.#e.has(c.loadedName))){if((0,r.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:l,src:u,style:d}=c,h=new FontFace(l,u,d);this.addNativeFontFace(h);try{yield h.load(),this.#e.add(l)}catch{(0,r.warn)(`Cannot load system font: ${c.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}(0,r.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}})}bind(c){return ne(this,null,function*(){if(c.attached||c.missingFile&&!c.systemFontInfo)return;if(c.attached=!0,c.systemFontInfo){yield this.loadSystemFont(c.systemFontInfo);return}if(this.isFontLoadingAPISupported){let u=c.createNativeFontFace();if(u){this.addNativeFontFace(u);try{yield u.loaded}catch(d){throw(0,r.warn)(`Failed to load font '${u.family}': '${d}'.`),c.disableFontFace=!0,d}}return}let l=c.createFontFaceRule();if(l){if(this.insertRule(l),this.isSyncFontLoadingSupported)return;yield new Promise(u=>{let d=this._queueLoadingCallback(u);this._prepareFontLoadEvent(c,d)})}})}get isFontLoadingAPISupported(){let c=!!this._document?.fonts;return(0,r.shadow)(this,"isFontLoadingAPISupported",c)}get isSyncFontLoadingSupported(){let c=!1;return(r.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(c=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",c)}_queueLoadingCallback(c){function l(){for((0,r.assert)(!d.done,"completeRequest() cannot be called twice."),d.done=!0;u.length>0&&u[0].done;){let h=u.shift();setTimeout(h.callback,0)}}let{loadingRequests:u}=this,d={done:!1,complete:l,callback:c};return u.push(d),d}get _loadTestFont(){let c=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,r.shadow)(this,"_loadTestFont",c)}_prepareFontLoadEvent(c,l){function u(O,F){return O.charCodeAt(F)<<24|O.charCodeAt(F+1)<<16|O.charCodeAt(F+2)<<8|O.charCodeAt(F+3)&255}function d(O,F,W,U){let ae=O.substring(0,F),he=O.substring(F+W);return ae+U+he}let h,f,p=this._document.createElement("canvas");p.width=1,p.height=1;let m=p.getContext("2d"),g=0;function _(O,F){if(++g>30){(0,r.warn)("Load test font never loaded."),F();return}if(m.font="30px "+O,m.fillText(".",0,20),m.getImageData(0,0,1,1).data[3]>0){F();return}setTimeout(_.bind(null,O,F))}let E=`lt${Date.now()}${this.loadTestFontId++}`,C=this._loadTestFont;C=d(C,976,E.length,E);let k=16,S=1482184792,P=u(C,k);for(h=0,f=E.length-3;h<f;h+=4)P=P-S+u(E,h)|0;h<E.length&&(P=P-S+u(E+"XXX",h)|0),C=d(C,k,4,(0,r.string32)(P));let D=`url(data:font/opentype;base64,${btoa(C)});`,A=`@font-face {font-family:"${E}";src:${D}}`;this.insertRule(A);let T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(let O of[c.loadedName,E]){let F=this._document.createElement("span");F.textContent="Hi",F.style.fontFamily=O,T.append(F)}this._document.body.append(T),_(E,()=>{T.remove(),l.complete()})}}e.FontLoader=i;class s{constructor(c,{isEvalSupported:l=!0,disableFontFace:u=!1,ignoreErrors:d=!1,inspectFont:h=null}){this.compiledGlyphs=Object.create(null);for(let f in c)this[f]=c[f];this.isEvalSupported=l!==!1,this.disableFontFace=u===!0,this.ignoreErrors=d===!0,this._inspectFont=h}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let c;if(!this.cssFontInfo)c=new FontFace(this.loadedName,this.data,{});else{let l={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(l.style=`oblique ${this.cssFontInfo.italicAngle}deg`),c=new FontFace(this.cssFontInfo.fontFamily,this.data,l)}return this._inspectFont?.(this),c}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let c=(0,r.bytesToString)(this.data),l=`url(data:${this.mimetype};base64,${btoa(c)});`,u;if(!this.cssFontInfo)u=`@font-face {font-family:"${this.loadedName}";src:${l}}`;else{let d=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(d+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),u=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${d}src:${l}}`}return this._inspectFont?.(this,l),u}getPathGenerator(c,l){if(this.compiledGlyphs[l]!==void 0)return this.compiledGlyphs[l];let u;try{u=c.get(this.loadedName+"_path_"+l)}catch(d){if(!this.ignoreErrors)throw d;return(0,r.warn)(`getPathGenerator - ignoring character: "${d}".`),this.compiledGlyphs[l]=function(h,f){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){let d=[];for(let h of u){let f=h.args!==void 0?h.args.join(","):"";d.push("c.",h.cmd,"(",f,`);
`)}return this.compiledGlyphs[l]=new Function("c","size",d.join(""))}return this.compiledGlyphs[l]=function(d,h){for(let f of u)f.cmd==="scale"&&(f.args=[h,-h]),d[f.cmd].apply(d,f.args)}}}e.FontFaceObject=s}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var r=n(7),i=n(1);let s=function(d){return new Promise((h,f)=>{Id().readFile(d,(m,g)=>{if(m||!g){f(new Error(m));return}h(new Uint8Array(g))})})};class o extends r.BaseFilterFactory{}e.NodeFilterFactory=o;class c extends r.BaseCanvasFactory{_createCanvas(h,f){return g0().createCanvas(h,f)}}e.NodeCanvasFactory=c;class l extends r.BaseCMapReaderFactory{_fetchData(h,f){return s(h).then(p=>({cMapData:p,compressionType:f}))}}e.NodeCMapReaderFactory=l;class u extends r.BaseStandardFontDataFactory{_fetchData(h){return s(h)}}e.NodeStandardFontDataFactory=u}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var r=n(1),i=n(6),s=n(12),o=n(13);let c=16,l=100,u=4096,d=15,h=10,f=1e3,p=16;function m(x,w){if(x._removeMirroring)throw new Error("Context is already forwarding operations.");x.__originalSave=x.save,x.__originalRestore=x.restore,x.__originalRotate=x.rotate,x.__originalScale=x.scale,x.__originalTranslate=x.translate,x.__originalTransform=x.transform,x.__originalSetTransform=x.setTransform,x.__originalResetTransform=x.resetTransform,x.__originalClip=x.clip,x.__originalMoveTo=x.moveTo,x.__originalLineTo=x.lineTo,x.__originalBezierCurveTo=x.bezierCurveTo,x.__originalRect=x.rect,x.__originalClosePath=x.closePath,x.__originalBeginPath=x.beginPath,x._removeMirroring=()=>{x.save=x.__originalSave,x.restore=x.__originalRestore,x.rotate=x.__originalRotate,x.scale=x.__originalScale,x.translate=x.__originalTranslate,x.transform=x.__originalTransform,x.setTransform=x.__originalSetTransform,x.resetTransform=x.__originalResetTransform,x.clip=x.__originalClip,x.moveTo=x.__originalMoveTo,x.lineTo=x.__originalLineTo,x.bezierCurveTo=x.__originalBezierCurveTo,x.rect=x.__originalRect,x.closePath=x.__originalClosePath,x.beginPath=x.__originalBeginPath,delete x._removeMirroring},x.save=function(){w.save(),this.__originalSave()},x.restore=function(){w.restore(),this.__originalRestore()},x.translate=function(M,H){w.translate(M,H),this.__originalTranslate(M,H)},x.scale=function(M,H){w.scale(M,H),this.__originalScale(M,H)},x.transform=function(M,H,$,G,j,v){w.transform(M,H,$,G,j,v),this.__originalTransform(M,H,$,G,j,v)},x.setTransform=function(M,H,$,G,j,v){w.setTransform(M,H,$,G,j,v),this.__originalSetTransform(M,H,$,G,j,v)},x.resetTransform=function(){w.resetTransform(),this.__originalResetTransform()},x.rotate=function(M){w.rotate(M),this.__originalRotate(M)},x.clip=function(M){w.clip(M),this.__originalClip(M)},x.moveTo=function(I,M){w.moveTo(I,M),this.__originalMoveTo(I,M)},x.lineTo=function(I,M){w.lineTo(I,M),this.__originalLineTo(I,M)},x.bezierCurveTo=function(I,M,H,$,G,j){w.bezierCurveTo(I,M,H,$,G,j),this.__originalBezierCurveTo(I,M,H,$,G,j)},x.rect=function(I,M,H,$){w.rect(I,M,H,$),this.__originalRect(I,M,H,$)},x.closePath=function(){w.closePath(),this.__originalClosePath()},x.beginPath=function(){w.beginPath(),this.__originalBeginPath()}}class g{constructor(w){this.canvasFactory=w,this.cache=Object.create(null)}getCanvas(w,I,M){let H;return this.cache[w]!==void 0?(H=this.cache[w],this.canvasFactory.reset(H,I,M)):(H=this.canvasFactory.create(I,M),this.cache[w]=H),H}delete(w){delete this.cache[w]}clear(){for(let w in this.cache){let I=this.cache[w];this.canvasFactory.destroy(I),delete this.cache[w]}}}function _(x,w,I,M,H,$,G,j,v,R){let[N,B,z,K,Y,J]=(0,i.getCurrentTransform)(x);if(B===0&&z===0){let re=G*N+Y,ie=Math.round(re),se=j*K+J,ce=Math.round(se),pe=(G+v)*N+Y,ve=Math.abs(Math.round(pe)-ie)||1,be=(j+R)*K+J,Te=Math.abs(Math.round(be)-ce)||1;return x.setTransform(Math.sign(N),0,0,Math.sign(K),ie,ce),x.drawImage(w,I,M,H,$,0,0,ve,Te),x.setTransform(N,B,z,K,Y,J),[ve,Te]}if(N===0&&K===0){let re=j*z+Y,ie=Math.round(re),se=G*B+J,ce=Math.round(se),pe=(j+R)*z+Y,ve=Math.abs(Math.round(pe)-ie)||1,be=(G+v)*B+J,Te=Math.abs(Math.round(be)-ce)||1;return x.setTransform(0,Math.sign(B),Math.sign(z),0,ie,ce),x.drawImage(w,I,M,H,$,0,0,Te,ve),x.setTransform(N,B,z,K,Y,J),[Te,ve]}x.drawImage(w,I,M,H,$,G,j,v,R);let de=Math.hypot(N,B),ee=Math.hypot(z,K);return[de*v,ee*R]}function E(x){let{width:w,height:I}=x;if(w>f||I>f)return null;let M=1e3,H=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),$=w+1,G=new Uint8Array($*(I+1)),j,v,R,N=w+7&-8,B=new Uint8Array(N*I),z=0;for(let ee of x.data){let re=128;for(;re>0;)B[z++]=ee&re?0:255,re>>=1}let K=0;for(z=0,B[z]!==0&&(G[0]=1,++K),v=1;v<w;v++)B[z]!==B[z+1]&&(G[v]=B[z]?2:1,++K),z++;for(B[z]!==0&&(G[v]=2,++K),j=1;j<I;j++){z=j*N,R=j*$,B[z-N]!==B[z]&&(G[R]=B[z]?1:8,++K);let ee=(B[z]?4:0)+(B[z-N]?8:0);for(v=1;v<w;v++)ee=(ee>>2)+(B[z+1]?4:0)+(B[z-N+1]?8:0),H[ee]&&(G[R+v]=H[ee],++K),z++;if(B[z-N]!==B[z]&&(G[R+v]=B[z]?2:4,++K),K>M)return null}for(z=N*(I-1),R=j*$,B[z]!==0&&(G[R]=8,++K),v=1;v<w;v++)B[z]!==B[z+1]&&(G[R+v]=B[z]?4:8,++K),z++;if(B[z]!==0&&(G[R+v]=4,++K),K>M)return null;let Y=new Int32Array([0,$,-1,0,-$,0,0,0,1]),J=new Path2D;for(j=0;K&&j<=I;j++){let ee=j*$,re=ee+w;for(;ee<re&&!G[ee];)ee++;if(ee===re)continue;J.moveTo(ee%$,j);let ie=ee,se=G[ee];do{let ce=Y[se];do ee+=ce;while(!G[ee]);let pe=G[ee];pe!==5&&pe!==10?(se=pe,G[ee]=0):(se=pe&51*se>>4,G[ee]&=se>>2|se<<2),J.lineTo(ee%$,ee/$|0),G[ee]||--K}while(ie!==ee);--j}return B=null,G=null,function(ee){ee.save(),ee.scale(1/w,-1/I),ee.translate(0,-I),ee.fill(J),ee.beginPath(),ee.restore()}}class C{constructor(w,I){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,w,I])}clone(){let w=Object.create(this);return w.clipBox=this.clipBox.slice(),w}setCurrentPoint(w,I){this.x=w,this.y=I}updatePathMinMax(w,I,M){[I,M]=r.Util.applyTransform([I,M],w),this.minX=Math.min(this.minX,I),this.minY=Math.min(this.minY,M),this.maxX=Math.max(this.maxX,I),this.maxY=Math.max(this.maxY,M)}updateRectMinMax(w,I){let M=r.Util.applyTransform(I,w),H=r.Util.applyTransform(I.slice(2),w);this.minX=Math.min(this.minX,M[0],H[0]),this.minY=Math.min(this.minY,M[1],H[1]),this.maxX=Math.max(this.maxX,M[0],H[0]),this.maxY=Math.max(this.maxY,M[1],H[1])}updateScalingPathMinMax(w,I){r.Util.scaleMinMax(w,I),this.minX=Math.min(this.minX,I[0]),this.maxX=Math.max(this.maxX,I[1]),this.minY=Math.min(this.minY,I[2]),this.maxY=Math.max(this.maxY,I[3])}updateCurvePathMinMax(w,I,M,H,$,G,j,v,R,N){let B=r.Util.bezierBoundingBox(I,M,H,$,G,j,v,R);if(N){N[0]=Math.min(N[0],B[0],B[2]),N[1]=Math.max(N[1],B[0],B[2]),N[2]=Math.min(N[2],B[1],B[3]),N[3]=Math.max(N[3],B[1],B[3]);return}this.updateRectMinMax(w,B)}getPathBoundingBox(w=s.PathType.FILL,I=null){let M=[this.minX,this.minY,this.maxX,this.maxY];if(w===s.PathType.STROKE){I||(0,r.unreachable)("Stroke bounding box must include transform.");let H=r.Util.singularValueDecompose2dScale(I),$=H[0]*this.lineWidth/2,G=H[1]*this.lineWidth/2;M[0]-=$,M[1]-=G,M[2]+=$,M[3]+=G}return M}updateClipFromPath(){let w=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(w||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(w){this.clipBox=w,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(w=s.PathType.FILL,I=null){return r.Util.intersect(this.clipBox,this.getPathBoundingBox(w,I))}}function V(x,w){if(typeof ImageData<"u"&&w instanceof ImageData){x.putImageData(w,0,0);return}let I=w.height,M=w.width,H=I%p,$=(I-H)/p,G=H===0?$:$+1,j=x.createImageData(M,p),v=0,R,N=w.data,B=j.data,z,K,Y,J;if(w.kind===r.ImageKind.GRAYSCALE_1BPP){let de=N.byteLength,ee=new Uint32Array(B.buffer,0,B.byteLength>>2),re=ee.length,ie=M+7>>3,se=4294967295,ce=r.FeatureTest.isLittleEndian?4278190080:255;for(z=0;z<G;z++){for(Y=z<$?p:H,R=0,K=0;K<Y;K++){let pe=de-v,ve=0,be=pe>ie?M:pe*8-7,Te=be&-8,xe=0,$e=0;for(;ve<Te;ve+=8)$e=N[v++],ee[R++]=$e&128?se:ce,ee[R++]=$e&64?se:ce,ee[R++]=$e&32?se:ce,ee[R++]=$e&16?se:ce,ee[R++]=$e&8?se:ce,ee[R++]=$e&4?se:ce,ee[R++]=$e&2?se:ce,ee[R++]=$e&1?se:ce;for(;ve<be;ve++)xe===0&&($e=N[v++],xe=128),ee[R++]=$e&xe?se:ce,xe>>=1}for(;R<re;)ee[R++]=0;x.putImageData(j,0,z*p)}}else if(w.kind===r.ImageKind.RGBA_32BPP){for(K=0,J=M*p*4,z=0;z<$;z++)B.set(N.subarray(v,v+J)),v+=J,x.putImageData(j,0,K),K+=p;z<G&&(J=M*H*4,B.set(N.subarray(v,v+J)),x.putImageData(j,0,K))}else if(w.kind===r.ImageKind.RGB_24BPP)for(Y=p,J=M*Y,z=0;z<G;z++){for(z>=$&&(Y=H,J=M*Y),R=0,K=J;K--;)B[R++]=N[v++],B[R++]=N[v++],B[R++]=N[v++],B[R++]=255;x.putImageData(j,0,z*p)}else throw new Error(`bad image kind: ${w.kind}`)}function k(x,w){if(w.bitmap){x.drawImage(w.bitmap,0,0);return}let I=w.height,M=w.width,H=I%p,$=(I-H)/p,G=H===0?$:$+1,j=x.createImageData(M,p),v=0,R=w.data,N=j.data;for(let B=0;B<G;B++){let z=B<$?p:H;({srcPos:v}=(0,o.convertBlackAndWhiteToRGBA)({src:R,srcPos:v,dest:N,width:M,height:z,nonBlackColor:0})),x.putImageData(j,0,B*p)}}function S(x,w){let I=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let M of I)x[M]!==void 0&&(w[M]=x[M]);x.setLineDash!==void 0&&(w.setLineDash(x.getLineDash()),w.lineDashOffset=x.lineDashOffset)}function P(x){if(x.strokeStyle=x.fillStyle="#000000",x.fillRule="nonzero",x.globalAlpha=1,x.lineWidth=1,x.lineCap="butt",x.lineJoin="miter",x.miterLimit=10,x.globalCompositeOperation="source-over",x.font="10px sans-serif",x.setLineDash!==void 0&&(x.setLineDash([]),x.lineDashOffset=0),!r.isNodeJS){let{filter:w}=x;w!=="none"&&w!==""&&(x.filter="none")}}function D(x,w,I,M){let H=x.length;for(let $=3;$<H;$+=4){let G=x[$];if(G===0)x[$-3]=w,x[$-2]=I,x[$-1]=M;else if(G<255){let j=255-G;x[$-3]=x[$-3]*G+w*j>>8,x[$-2]=x[$-2]*G+I*j>>8,x[$-1]=x[$-1]*G+M*j>>8}}}function A(x,w,I){let M=x.length,H=1/255;for(let $=3;$<M;$+=4){let G=I?I[x[$]]:x[$];w[$]=w[$]*G*H|0}}function T(x,w,I){let M=x.length;for(let H=3;H<M;H+=4){let $=x[H-3]*77+x[H-2]*152+x[H-1]*28;w[H]=I?w[H]*I[$>>8]>>8:w[H]*$>>16}}function O(x,w,I,M,H,$,G,j,v,R,N){let B=!!$,z=B?$[0]:0,K=B?$[1]:0,Y=B?$[2]:0,J=H==="Luminosity"?T:A,ee=Math.min(M,Math.ceil(1048576/I));for(let re=0;re<M;re+=ee){let ie=Math.min(ee,M-re),se=x.getImageData(j-R,re+(v-N),I,ie),ce=w.getImageData(j,re+v,I,ie);B&&D(se.data,z,K,Y),J(se.data,ce.data,G),w.putImageData(ce,j,re+v)}}function F(x,w,I,M){let H=M[0],$=M[1],G=M[2]-H,j=M[3]-$;G===0||j===0||(O(w.context,I,G,j,w.subtype,w.backdrop,w.transferMap,H,$,w.offsetX,w.offsetY),x.save(),x.globalAlpha=1,x.globalCompositeOperation="source-over",x.setTransform(1,0,0,1,0,0),x.drawImage(I.canvas,0,0),x.restore())}function W(x,w){let I=r.Util.singularValueDecompose2dScale(x);I[0]=Math.fround(I[0]),I[1]=Math.fround(I[1]);let M=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return w!==void 0?w:I[0]<=M||I[1]<=M}let U=["butt","round","square"],ae=["miter","round","bevel"],he={},oe={};class q{constructor(w,I,M,H,$,{optionalContentConfig:G,markedContentStack:j=null},v,R){this.ctx=w,this.current=new C(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=I,this.objs=M,this.canvasFactory=H,this.filterFactory=$,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=j||[],this.optionalContentConfig=G,this.cachedCanvases=new g(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=v,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=R,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(w,I=null){return typeof w=="string"?w.startsWith("g_")?this.commonObjs.get(w):this.objs.get(w):I}beginDrawing({transform:w,viewport:I,transparency:M=!1,background:H=null}){let $=this.ctx.canvas.width,G=this.ctx.canvas.height,j=this.ctx.fillStyle;if(this.ctx.fillStyle=H||"#ffffff",this.ctx.fillRect(0,0,$,G),this.ctx.fillStyle=j,M){let v=this.cachedCanvases.getCanvas("transparent",$,G);this.compositeCtx=this.ctx,this.transparentCanvas=v.canvas,this.ctx=v.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),P(this.ctx),w&&(this.ctx.transform(...w),this.outputScaleX=w[0],this.outputScaleY=w[0]),this.ctx.transform(...I.transform),this.viewportScale=I.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx)}executeOperatorList(w,I,M,H){let $=w.argsArray,G=w.fnArray,j=I||0,v=$.length;if(v===j)return j;let R=v-j>h&&typeof M=="function",N=R?Date.now()+d:0,B=0,z=this.commonObjs,K=this.objs,Y;for(;;){if(H!==void 0&&j===H.nextBreakPoint)return H.breakIt(j,M),j;if(Y=G[j],Y!==r.OPS.dependency)this[Y].apply(this,$[j]);else for(let J of $[j]){let de=J.startsWith("g_")?z:K;if(!de.has(J))return de.get(J,M),j}if(j++,j===v)return j;if(R&&++B>h){if(Date.now()>N)return M(),j;B=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let w of this._cachedBitmapsMap.values()){for(let I of w.values())typeof HTMLCanvasElement<"u"&&I instanceof HTMLCanvasElement&&(I.width=I.height=0);w.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){let w=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(w!=="none"){let I=this.ctx.filter;this.ctx.filter=w,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=I}}}_scaleImage(w,I){let M=w.width,H=w.height,$=Math.max(Math.hypot(I[0],I[1]),1),G=Math.max(Math.hypot(I[2],I[3]),1),j=M,v=H,R="prescale1",N,B;for(;$>2&&j>1||G>2&&v>1;){let z=j,K=v;$>2&&j>1&&(z=j>=16384?Math.floor(j/2)-1||1:Math.ceil(j/2),$/=j/z),G>2&&v>1&&(K=v>=16384?Math.floor(v/2)-1||1:Math.ceil(v)/2,G/=v/K),N=this.cachedCanvases.getCanvas(R,z,K),B=N.context,B.clearRect(0,0,z,K),B.drawImage(w,0,0,j,v,0,0,z,K),w=N.canvas,j=z,v=K,R=R==="prescale1"?"prescale2":"prescale1"}return{img:w,paintWidth:j,paintHeight:v}}_createMaskCanvas(w){let I=this.ctx,{width:M,height:H}=w,$=this.current.fillColor,G=this.current.patternFill,j=(0,i.getCurrentTransform)(I),v,R,N,B;if((w.bitmap||w.data)&&w.count>1){let ve=w.bitmap||w.data.buffer;R=JSON.stringify(G?j:[j.slice(0,4),$]),v=this._cachedBitmapsMap.get(ve),v||(v=new Map,this._cachedBitmapsMap.set(ve,v));let be=v.get(R);if(be&&!G){let Te=Math.round(Math.min(j[0],j[2])+j[4]),xe=Math.round(Math.min(j[1],j[3])+j[5]);return{canvas:be,offsetX:Te,offsetY:xe}}N=be}N||(B=this.cachedCanvases.getCanvas("maskCanvas",M,H),k(B.context,w));let z=r.Util.transform(j,[1/M,0,0,-1/H,0,0]);z=r.Util.transform(z,[1,0,0,1,0,-H]);let K=r.Util.applyTransform([0,0],z),Y=r.Util.applyTransform([M,H],z),J=r.Util.normalizeRect([K[0],K[1],Y[0],Y[1]]),de=Math.round(J[2]-J[0])||1,ee=Math.round(J[3]-J[1])||1,re=this.cachedCanvases.getCanvas("fillCanvas",de,ee),ie=re.context,se=Math.min(K[0],Y[0]),ce=Math.min(K[1],Y[1]);ie.translate(-se,-ce),ie.transform(...z),N||(N=this._scaleImage(B.canvas,(0,i.getCurrentTransformInverse)(ie)),N=N.img,v&&G&&v.set(R,N)),ie.imageSmoothingEnabled=W((0,i.getCurrentTransform)(ie),w.interpolate),_(ie,N,0,0,N.width,N.height,0,0,M,H),ie.globalCompositeOperation="source-in";let pe=r.Util.transform((0,i.getCurrentTransformInverse)(ie),[1,0,0,1,-se,-ce]);return ie.fillStyle=G?$.getPattern(I,this,pe,s.PathType.FILL):$,ie.fillRect(0,0,M,H),v&&!G&&(this.cachedCanvases.delete("fillCanvas"),v.set(R,re.canvas)),{canvas:re.canvas,offsetX:Math.round(se),offsetY:Math.round(ce)}}setLineWidth(w){w!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=w,this.ctx.lineWidth=w}setLineCap(w){this.ctx.lineCap=U[w]}setLineJoin(w){this.ctx.lineJoin=ae[w]}setMiterLimit(w){this.ctx.miterLimit=w}setDash(w,I){let M=this.ctx;M.setLineDash!==void 0&&(M.setLineDash(w),M.lineDashOffset=I)}setRenderingIntent(w){}setFlatness(w){}setGState(w){for(let[I,M]of w)switch(I){case"LW":this.setLineWidth(M);break;case"LC":this.setLineCap(M);break;case"LJ":this.setLineJoin(M);break;case"ML":this.setMiterLimit(M);break;case"D":this.setDash(M[0],M[1]);break;case"RI":this.setRenderingIntent(M);break;case"FL":this.setFlatness(M);break;case"Font":this.setFont(M[0],M[1]);break;case"CA":this.current.strokeAlpha=M;break;case"ca":this.current.fillAlpha=M,this.ctx.globalAlpha=M;break;case"BM":this.ctx.globalCompositeOperation=M;break;case"SMask":this.current.activeSMask=M?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(M);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let w=this.inSMaskMode;this.current.activeSMask&&!w?this.beginSMaskMode():!this.current.activeSMask&&w&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let w=this.ctx.canvas.width,I=this.ctx.canvas.height,M="smaskGroupAt"+this.groupLevel,H=this.cachedCanvases.getCanvas(M,w,I);this.suspendedCtx=this.ctx,this.ctx=H.context;let $=this.ctx;$.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),S(this.suspendedCtx,$),m($,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),S(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(w){if(!this.current.activeSMask)return;w?(w[0]=Math.floor(w[0]),w[1]=Math.floor(w[1]),w[2]=Math.ceil(w[2]),w[3]=Math.ceil(w[3])):w=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let I=this.current.activeSMask,M=this.suspendedCtx;F(M,I,this.ctx,w),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(S(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let w=this.current;this.stateStack.push(w),this.current=w.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),S(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(w,I,M,H,$,G){this.ctx.transform(w,I,M,H,$,G),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(w,I,M){let H=this.ctx,$=this.current,G=$.x,j=$.y,v,R,N=(0,i.getCurrentTransform)(H),B=N[0]===0&&N[3]===0||N[1]===0&&N[2]===0,z=B?M.slice(0):null;for(let K=0,Y=0,J=w.length;K<J;K++)switch(w[K]|0){case r.OPS.rectangle:G=I[Y++],j=I[Y++];let de=I[Y++],ee=I[Y++],re=G+de,ie=j+ee;H.moveTo(G,j),de===0||ee===0?H.lineTo(re,ie):(H.lineTo(re,j),H.lineTo(re,ie),H.lineTo(G,ie)),B||$.updateRectMinMax(N,[G,j,re,ie]),H.closePath();break;case r.OPS.moveTo:G=I[Y++],j=I[Y++],H.moveTo(G,j),B||$.updatePathMinMax(N,G,j);break;case r.OPS.lineTo:G=I[Y++],j=I[Y++],H.lineTo(G,j),B||$.updatePathMinMax(N,G,j);break;case r.OPS.curveTo:v=G,R=j,G=I[Y+4],j=I[Y+5],H.bezierCurveTo(I[Y],I[Y+1],I[Y+2],I[Y+3],G,j),$.updateCurvePathMinMax(N,v,R,I[Y],I[Y+1],I[Y+2],I[Y+3],G,j,z),Y+=6;break;case r.OPS.curveTo2:v=G,R=j,H.bezierCurveTo(G,j,I[Y],I[Y+1],I[Y+2],I[Y+3]),$.updateCurvePathMinMax(N,v,R,G,j,I[Y],I[Y+1],I[Y+2],I[Y+3],z),G=I[Y+2],j=I[Y+3],Y+=4;break;case r.OPS.curveTo3:v=G,R=j,G=I[Y+2],j=I[Y+3],H.bezierCurveTo(I[Y],I[Y+1],G,j,G,j),$.updateCurvePathMinMax(N,v,R,I[Y],I[Y+1],G,j,G,j,z),Y+=4;break;case r.OPS.closePath:H.closePath();break}B&&$.updateScalingPathMinMax(N,z),$.setCurrentPoint(G,j)}closePath(){this.ctx.closePath()}stroke(w=!0){let I=this.ctx,M=this.current.strokeColor;I.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof M=="object"&&M?.getPattern?(I.save(),I.strokeStyle=M.getPattern(I,this,(0,i.getCurrentTransformInverse)(I),s.PathType.STROKE),this.rescaleAndStroke(!1),I.restore()):this.rescaleAndStroke(!0)),w&&this.consumePath(this.current.getClippedPathBoundingBox()),I.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(w=!0){let I=this.ctx,M=this.current.fillColor,H=this.current.patternFill,$=!1;H&&(I.save(),I.fillStyle=M.getPattern(I,this,(0,i.getCurrentTransformInverse)(I),s.PathType.FILL),$=!0);let G=this.current.getClippedPathBoundingBox();this.contentVisible&&G!==null&&(this.pendingEOFill?(I.fill("evenodd"),this.pendingEOFill=!1):I.fill()),$&&I.restore(),w&&this.consumePath(G)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=he}eoClip(){this.pendingClip=oe}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let w=this.pendingTextPaths,I=this.ctx;if(w===void 0){I.beginPath();return}I.save(),I.beginPath();for(let M of w)I.setTransform(...M.transform),I.translate(M.x,M.y),M.addToPath(I,M.fontSize);I.restore(),I.clip(),I.beginPath(),delete this.pendingTextPaths}setCharSpacing(w){this.current.charSpacing=w}setWordSpacing(w){this.current.wordSpacing=w}setHScale(w){this.current.textHScale=w/100}setLeading(w){this.current.leading=-w}setFont(w,I){let M=this.commonObjs.get(w),H=this.current;if(!M)throw new Error(`Can't find font for ${w}`);if(H.fontMatrix=M.fontMatrix||r.FONT_IDENTITY_MATRIX,(H.fontMatrix[0]===0||H.fontMatrix[3]===0)&&(0,r.warn)("Invalid font matrix for font "+w),I<0?(I=-I,H.fontDirection=-1):H.fontDirection=1,this.current.font=M,this.current.fontSize=I,M.isType3Font)return;let $=M.loadedName||"sans-serif",G=M.systemFontInfo?.css||`"${$}", ${M.fallbackName}`,j="normal";M.black?j="900":M.bold&&(j="bold");let v=M.italic?"italic":"normal",R=I;I<c?R=c:I>l&&(R=l),this.current.fontSizeScale=I/R,this.ctx.font=`${v} ${j} ${R}px ${G}`}setTextRenderingMode(w){this.current.textRenderingMode=w}setTextRise(w){this.current.textRise=w}moveText(w,I){this.current.x=this.current.lineX+=w,this.current.y=this.current.lineY+=I}setLeadingMoveText(w,I){this.setLeading(-I),this.moveText(w,I)}setTextMatrix(w,I,M,H,$,G){this.current.textMatrix=[w,I,M,H,$,G],this.current.textMatrixScale=Math.hypot(w,I),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(w,I,M,H){let $=this.ctx,G=this.current,j=G.font,v=G.textRenderingMode,R=G.fontSize/G.fontSizeScale,N=v&r.TextRenderingMode.FILL_STROKE_MASK,B=!!(v&r.TextRenderingMode.ADD_TO_PATH_FLAG),z=G.patternFill&&!j.missingFile,K;(j.disableFontFace||B||z)&&(K=j.getPathGenerator(this.commonObjs,w)),j.disableFontFace||z?($.save(),$.translate(I,M),$.beginPath(),K($,R),H&&$.setTransform(...H),(N===r.TextRenderingMode.FILL||N===r.TextRenderingMode.FILL_STROKE)&&$.fill(),(N===r.TextRenderingMode.STROKE||N===r.TextRenderingMode.FILL_STROKE)&&$.stroke(),$.restore()):((N===r.TextRenderingMode.FILL||N===r.TextRenderingMode.FILL_STROKE)&&$.fillText(w,I,M),(N===r.TextRenderingMode.STROKE||N===r.TextRenderingMode.FILL_STROKE)&&$.strokeText(w,I,M)),B&&(this.pendingTextPaths||=[]).push({transform:(0,i.getCurrentTransform)($),x:I,y:M,fontSize:R,addToPath:K})}get isFontSubpixelAAEnabled(){let{context:w}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);w.scale(1.5,1),w.fillText("I",0,10);let I=w.getImageData(0,0,10,10).data,M=!1;for(let H=3;H<I.length;H+=4)if(I[H]>0&&I[H]<255){M=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",M)}showText(w){let I=this.current,M=I.font;if(M.isType3Font)return this.showType3Text(w);let H=I.fontSize;if(H===0)return;let $=this.ctx,G=I.fontSizeScale,j=I.charSpacing,v=I.wordSpacing,R=I.fontDirection,N=I.textHScale*R,B=w.length,z=M.vertical,K=z?1:-1,Y=M.defaultVMetrics,J=H*I.fontMatrix[0],de=I.textRenderingMode===r.TextRenderingMode.FILL&&!M.disableFontFace&&!I.patternFill;$.save(),$.transform(...I.textMatrix),$.translate(I.x,I.y+I.textRise),R>0?$.scale(N,-1):$.scale(N,1);let ee;if(I.patternFill){$.save();let pe=I.fillColor.getPattern($,this,(0,i.getCurrentTransformInverse)($),s.PathType.FILL);ee=(0,i.getCurrentTransform)($),$.restore(),$.fillStyle=pe}let re=I.lineWidth,ie=I.textMatrixScale;if(ie===0||re===0){let pe=I.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;(pe===r.TextRenderingMode.STROKE||pe===r.TextRenderingMode.FILL_STROKE)&&(re=this.getSinglePixelWidth())}else re/=ie;if(G!==1&&($.scale(G,G),re/=G),$.lineWidth=re,M.isInvalidPDFjsFont){let pe=[],ve=0;for(let be of w)pe.push(be.unicode),ve+=be.width;$.fillText(pe.join(""),0,0),I.x+=ve*J*N,$.restore(),this.compose();return}let se=0,ce;for(ce=0;ce<B;++ce){let pe=w[ce];if(typeof pe=="number"){se+=K*pe*H/1e3;continue}let ve=!1,be=(pe.isSpace?v:0)+j,Te=pe.fontChar,xe=pe.accent,$e,Rt,Ue=pe.width;if(z){let pt=pe.vmetric||Y,fn=-(pe.vmetric?pt[1]:Ue*.5)*J,ns=pt[2]*J;Ue=pt?-pt[0]:Ue,$e=fn/G,Rt=(se+ns)/G}else $e=se/G,Rt=0;if(M.remeasure&&Ue>0){let pt=$.measureText(Te).width*1e3/H*G;if(Ue<pt&&this.isFontSubpixelAAEnabled){let fn=Ue/pt;ve=!0,$.save(),$.scale(fn,1),$e/=fn}else Ue!==pt&&($e+=(Ue-pt)/2e3*H/G)}if(this.contentVisible&&(pe.isInFont||M.missingFile)){if(de&&!xe)$.fillText(Te,$e,Rt);else if(this.paintChar(Te,$e,Rt,ee),xe){let pt=$e+H*xe.offset.x/G,fn=Rt-H*xe.offset.y/G;this.paintChar(xe.fontChar,pt,fn,ee)}}let it=z?Ue*J-be*R:Ue*J+be*R;se+=it,ve&&$.restore()}z?I.y-=se:I.x+=se*N,$.restore(),this.compose()}showType3Text(w){let I=this.ctx,M=this.current,H=M.font,$=M.fontSize,G=M.fontDirection,j=H.vertical?1:-1,v=M.charSpacing,R=M.wordSpacing,N=M.textHScale*G,B=M.fontMatrix||r.FONT_IDENTITY_MATRIX,z=w.length,K=M.textRenderingMode===r.TextRenderingMode.INVISIBLE,Y,J,de,ee;if(!(K||$===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,I.save(),I.transform(...M.textMatrix),I.translate(M.x,M.y),I.scale(N,G),Y=0;Y<z;++Y){if(J=w[Y],typeof J=="number"){ee=j*J*$/1e3,this.ctx.translate(ee,0),M.x+=ee*N;continue}let re=(J.isSpace?R:0)+v,ie=H.charProcOperatorList[J.operatorListId];if(!ie){(0,r.warn)(`Type3 character "${J.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=J,this.save(),I.scale($,$),I.transform(...B),this.executeOperatorList(ie),this.restore()),de=r.Util.applyTransform([J.width,0],B)[0]*$+re,I.translate(de,0),M.x+=de*N}I.restore(),this.processingType3=null}}setCharWidth(w,I){}setCharWidthAndBounds(w,I,M,H,$,G){this.ctx.rect(M,H,$-M,G-H),this.ctx.clip(),this.endPath()}getColorN_Pattern(w){let I;if(w[0]==="TilingPattern"){let M=w[1],H=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),$={createCanvasGraphics:G=>new q(G,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};I=new s.TilingPattern(w,M,this.ctx,$,H)}else I=this._getPattern(w[1],w[2]);return I}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(w,I,M){let H=r.Util.makeHexColor(w,I,M);this.ctx.strokeStyle=H,this.current.strokeColor=H}setFillRGBColor(w,I,M){let H=r.Util.makeHexColor(w,I,M);this.ctx.fillStyle=H,this.current.fillColor=H,this.current.patternFill=!1}_getPattern(w,I=null){let M;return this.cachedPatterns.has(w)?M=this.cachedPatterns.get(w):(M=(0,s.getShadingPattern)(this.getObject(w)),this.cachedPatterns.set(w,M)),I&&(M.matrix=I),M}shadingFill(w){if(!this.contentVisible)return;let I=this.ctx;this.save();let M=this._getPattern(w);I.fillStyle=M.getPattern(I,this,(0,i.getCurrentTransformInverse)(I),s.PathType.SHADING);let H=(0,i.getCurrentTransformInverse)(I);if(H){let{width:$,height:G}=I.canvas,[j,v,R,N]=r.Util.getAxialAlignedBoundingBox([0,0,$,G],H);this.ctx.fillRect(j,v,R-j,N-v)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(w,I){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(w)&&w.length===6&&this.transform(...w),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),I)){let M=I[2]-I[0],H=I[3]-I[1];this.ctx.rect(I[0],I[1],M,H),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),I),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(w){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let I=this.ctx;w.isolated||(0,r.info)("TODO: Support non-isolated groups."),w.knockout&&(0,r.warn)("Knockout groups not supported.");let M=(0,i.getCurrentTransform)(I);if(w.matrix&&I.transform(...w.matrix),!w.bbox)throw new Error("Bounding box is required.");let H=r.Util.getAxialAlignedBoundingBox(w.bbox,(0,i.getCurrentTransform)(I)),$=[0,0,I.canvas.width,I.canvas.height];H=r.Util.intersect(H,$)||[0,0,0,0];let G=Math.floor(H[0]),j=Math.floor(H[1]),v=Math.max(Math.ceil(H[2])-G,1),R=Math.max(Math.ceil(H[3])-j,1),N=1,B=1;v>u&&(N=v/u,v=u),R>u&&(B=R/u,R=u),this.current.startNewPathAndClipBox([0,0,v,R]);let z="groupAt"+this.groupLevel;w.smask&&(z+="_smask_"+this.smaskCounter++%2);let K=this.cachedCanvases.getCanvas(z,v,R),Y=K.context;Y.scale(1/N,1/B),Y.translate(-G,-j),Y.transform(...M),w.smask?this.smaskStack.push({canvas:K.canvas,context:Y,offsetX:G,offsetY:j,scaleX:N,scaleY:B,subtype:w.smask.subtype,backdrop:w.smask.backdrop,transferMap:w.smask.transferMap||null,startTransformInverse:null}):(I.setTransform(1,0,0,1,0,0),I.translate(G,j),I.scale(N,B),I.save()),S(I,Y),this.ctx=Y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(I),this.groupLevel++}endGroup(w){if(!this.contentVisible)return;this.groupLevel--;let I=this.ctx,M=this.groupStack.pop();if(this.ctx=M,this.ctx.imageSmoothingEnabled=!1,w.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let H=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...H);let $=r.Util.getAxialAlignedBoundingBox([0,0,I.canvas.width,I.canvas.height],H);this.ctx.drawImage(I.canvas,0,0),this.ctx.restore(),this.compose($)}}beginAnnotation(w,I,M,H,$){if(this.#e(),P(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(I)&&I.length===4){let G=I[2]-I[0],j=I[3]-I[1];if($&&this.annotationCanvasMap){M=M.slice(),M[4]-=I[0],M[5]-=I[1],I=I.slice(),I[0]=I[1]=0,I[2]=G,I[3]=j;let[v,R]=r.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:N}=this,B=Math.ceil(G*this.outputScaleX*N),z=Math.ceil(j*this.outputScaleY*N);this.annotationCanvas=this.canvasFactory.create(B,z);let{canvas:K,context:Y}=this.annotationCanvas;this.annotationCanvasMap.set(w,K),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Y,this.ctx.save(),this.ctx.setTransform(v,0,0,-R,0,j*R),P(this.ctx)}else P(this.ctx),this.ctx.rect(I[0],I[1],G,j),this.ctx.clip(),this.endPath()}this.current=new C(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...M),this.transform(...H)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(w){if(!this.contentVisible)return;let I=w.count;w=this.getObject(w.data,w),w.count=I;let M=this.ctx,H=this.processingType3;if(H&&(H.compiled===void 0&&(H.compiled=E(w)),H.compiled)){H.compiled(M);return}let $=this._createMaskCanvas(w),G=$.canvas;M.save(),M.setTransform(1,0,0,1,0,0),M.drawImage(G,$.offsetX,$.offsetY),M.restore(),this.compose()}paintImageMaskXObjectRepeat(w,I,M=0,H=0,$,G){if(!this.contentVisible)return;w=this.getObject(w.data,w);let j=this.ctx;j.save();let v=(0,i.getCurrentTransform)(j);j.transform(I,M,H,$,0,0);let R=this._createMaskCanvas(w);j.setTransform(1,0,0,1,R.offsetX-v[4],R.offsetY-v[5]);for(let N=0,B=G.length;N<B;N+=2){let z=r.Util.transform(v,[I,M,H,$,G[N],G[N+1]]),[K,Y]=r.Util.applyTransform([0,0],z);j.drawImage(R.canvas,K,Y)}j.restore(),this.compose()}paintImageMaskXObjectGroup(w){if(!this.contentVisible)return;let I=this.ctx,M=this.current.fillColor,H=this.current.patternFill;for(let $ of w){let{data:G,width:j,height:v,transform:R}=$,N=this.cachedCanvases.getCanvas("maskCanvas",j,v),B=N.context;B.save();let z=this.getObject(G,$);k(B,z),B.globalCompositeOperation="source-in",B.fillStyle=H?M.getPattern(B,this,(0,i.getCurrentTransformInverse)(I),s.PathType.FILL):M,B.fillRect(0,0,j,v),B.restore(),I.save(),I.transform(...R),I.scale(1,-1),_(I,N.canvas,0,0,j,v,0,-1,1,1),I.restore()}this.compose()}paintImageXObject(w){if(!this.contentVisible)return;let I=this.getObject(w);if(!I){(0,r.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(I)}paintImageXObjectRepeat(w,I,M,H){if(!this.contentVisible)return;let $=this.getObject(w);if(!$){(0,r.warn)("Dependent image isn't ready yet");return}let G=$.width,j=$.height,v=[];for(let R=0,N=H.length;R<N;R+=2)v.push({transform:[I,0,0,M,H[R],H[R+1]],x:0,y:0,w:G,h:j});this.paintInlineImageXObjectGroup($,v)}applyTransferMapsToCanvas(w){return this.current.transferMaps!=="none"&&(w.filter=this.current.transferMaps,w.drawImage(w.canvas,0,0),w.filter="none"),w.canvas}applyTransferMapsToBitmap(w){if(this.current.transferMaps==="none")return w.bitmap;let{bitmap:I,width:M,height:H}=w,$=this.cachedCanvases.getCanvas("inlineImage",M,H),G=$.context;return G.filter=this.current.transferMaps,G.drawImage(I,0,0),G.filter="none",$.canvas}paintInlineImageXObject(w){if(!this.contentVisible)return;let I=w.width,M=w.height,H=this.ctx;if(this.save(),!r.isNodeJS){let{filter:j}=H;j!=="none"&&j!==""&&(H.filter="none")}H.scale(1/I,-1/M);let $;if(w.bitmap)$=this.applyTransferMapsToBitmap(w);else if(typeof HTMLElement=="function"&&w instanceof HTMLElement||!w.data)$=w;else{let v=this.cachedCanvases.getCanvas("inlineImage",I,M).context;V(v,w),$=this.applyTransferMapsToCanvas(v)}let G=this._scaleImage($,(0,i.getCurrentTransformInverse)(H));H.imageSmoothingEnabled=W((0,i.getCurrentTransform)(H),w.interpolate),_(H,G.img,0,0,G.paintWidth,G.paintHeight,0,-M,I,M),this.compose(),this.restore()}paintInlineImageXObjectGroup(w,I){if(!this.contentVisible)return;let M=this.ctx,H;if(w.bitmap)H=w.bitmap;else{let $=w.width,G=w.height,v=this.cachedCanvases.getCanvas("inlineImage",$,G).context;V(v,w),H=this.applyTransferMapsToCanvas(v)}for(let $ of I)M.save(),M.transform(...$.transform),M.scale(1,-1),_(M,H,$.x,$.y,$.w,$.h,0,-1,1,1),M.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(w){}markPointProps(w,I){}beginMarkedContent(w){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(w,I){w==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(I)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(w){let I=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(w);let M=this.ctx;this.pendingClip&&(I||(this.pendingClip===oe?M.clip("evenodd"):M.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),M.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let w=(0,i.getCurrentTransform)(this.ctx);if(w[1]===0&&w[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(w[0]),Math.abs(w[3]));else{let I=Math.abs(w[0]*w[3]-w[2]*w[1]),M=Math.hypot(w[0],w[2]),H=Math.hypot(w[1],w[3]);this._cachedGetSinglePixelWidth=Math.max(M,H)/I}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:w}=this.current,{a:I,b:M,c:H,d:$}=this.ctx.getTransform(),G,j;if(M===0&&H===0){let v=Math.abs(I),R=Math.abs($);if(v===R)if(w===0)G=j=1/v;else{let N=v*w;G=j=N<1?1/N:1}else if(w===0)G=1/v,j=1/R;else{let N=v*w,B=R*w;G=N<1?1/N:1,j=B<1?1/B:1}}else{let v=Math.abs(I*$-M*H),R=Math.hypot(I,M),N=Math.hypot(H,$);if(w===0)G=N/v,j=R/v;else{let B=w*v;G=N>B?N/B:1,j=R>B?R/B:1}}this._cachedScaleForStroking[0]=G,this._cachedScaleForStroking[1]=j}return this._cachedScaleForStroking}rescaleAndStroke(w){let{ctx:I}=this,{lineWidth:M}=this.current,[H,$]=this.getScaleForStroking();if(I.lineWidth=M||1,H===1&&$===1){I.stroke();return}let G=I.getLineDash();if(w&&I.save(),I.scale(H,$),G.length>0){let j=Math.max(H,$);I.setLineDash(G.map(v=>v/j)),I.lineDashOffset/=j}I.stroke(),w&&I.restore()}isContentVisible(){for(let w=this.markedContentStack.length-1;w>=0;w--)if(!this.markedContentStack[w].visible)return!1;return!0}}e.CanvasGraphics=q;for(let x in r.OPS)q.prototype[x]!==void 0&&(q.prototype[r.OPS[x]]=q.prototype[x])}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=p;var r=n(1),i=n(6);let s={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=s;function o(_,E){if(!E)return;let C=E[2]-E[0],V=E[3]-E[1],k=new Path2D;k.rect(E[0],E[1],C,V),_.clip(k)}class c{constructor(){this.constructor===c&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class l extends c{constructor(E){super(),this._type=E[1],this._bbox=E[2],this._colorStops=E[3],this._p0=E[4],this._p1=E[5],this._r0=E[6],this._r1=E[7],this.matrix=null}_createGradient(E){let C;this._type==="axial"?C=E.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(C=E.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let V of this._colorStops)C.addColorStop(V[0],V[1]);return C}getPattern(E,C,V,k){let S;if(k===s.STROKE||k===s.FILL){let P=C.current.getClippedPathBoundingBox(k,(0,i.getCurrentTransform)(E))||[0,0,0,0],D=Math.ceil(P[2]-P[0])||1,A=Math.ceil(P[3]-P[1])||1,T=C.cachedCanvases.getCanvas("pattern",D,A,!0),O=T.context;O.clearRect(0,0,O.canvas.width,O.canvas.height),O.beginPath(),O.rect(0,0,O.canvas.width,O.canvas.height),O.translate(-P[0],-P[1]),V=r.Util.transform(V,[1,0,0,1,P[0],P[1]]),O.transform(...C.baseTransform),this.matrix&&O.transform(...this.matrix),o(O,this._bbox),O.fillStyle=this._createGradient(O),O.fill(),S=E.createPattern(T.canvas,"no-repeat");let F=new DOMMatrix(V);S.setTransform(F)}else o(E,this._bbox),S=this._createGradient(E);return S}}function u(_,E,C,V,k,S,P,D){let A=E.coords,T=E.colors,O=_.data,F=_.width*4,W;A[C+1]>A[V+1]&&(W=C,C=V,V=W,W=S,S=P,P=W),A[V+1]>A[k+1]&&(W=V,V=k,k=W,W=P,P=D,D=W),A[C+1]>A[V+1]&&(W=C,C=V,V=W,W=S,S=P,P=W);let U=(A[C]+E.offsetX)*E.scaleX,ae=(A[C+1]+E.offsetY)*E.scaleY,he=(A[V]+E.offsetX)*E.scaleX,oe=(A[V+1]+E.offsetY)*E.scaleY,q=(A[k]+E.offsetX)*E.scaleX,x=(A[k+1]+E.offsetY)*E.scaleY;if(ae>=x)return;let w=T[S],I=T[S+1],M=T[S+2],H=T[P],$=T[P+1],G=T[P+2],j=T[D],v=T[D+1],R=T[D+2],N=Math.round(ae),B=Math.round(x),z,K,Y,J,de,ee,re,ie;for(let se=N;se<=B;se++){if(se<oe){let Te=se<ae?0:(ae-se)/(ae-oe);z=U-(U-he)*Te,K=w-(w-H)*Te,Y=I-(I-$)*Te,J=M-(M-G)*Te}else{let Te;se>x?Te=1:oe===x?Te=0:Te=(oe-se)/(oe-x),z=he-(he-q)*Te,K=H-(H-j)*Te,Y=$-($-v)*Te,J=G-(G-R)*Te}let ce;se<ae?ce=0:se>x?ce=1:ce=(ae-se)/(ae-x),de=U-(U-q)*ce,ee=w-(w-j)*ce,re=I-(I-v)*ce,ie=M-(M-R)*ce;let pe=Math.round(Math.min(z,de)),ve=Math.round(Math.max(z,de)),be=F*se+pe*4;for(let Te=pe;Te<=ve;Te++)ce=(z-Te)/(z-de),ce<0?ce=0:ce>1&&(ce=1),O[be++]=K-(K-ee)*ce|0,O[be++]=Y-(Y-re)*ce|0,O[be++]=J-(J-ie)*ce|0,O[be++]=255}}function d(_,E,C){let V=E.coords,k=E.colors,S,P;switch(E.type){case"lattice":let D=E.verticesPerRow,A=Math.floor(V.length/D)-1,T=D-1;for(S=0;S<A;S++){let O=S*D;for(let F=0;F<T;F++,O++)u(_,C,V[O],V[O+1],V[O+D],k[O],k[O+1],k[O+D]),u(_,C,V[O+D+1],V[O+1],V[O+D],k[O+D+1],k[O+1],k[O+D])}break;case"triangles":for(S=0,P=V.length;S<P;S+=3)u(_,C,V[S],V[S+1],V[S+2],k[S],k[S+1],k[S+2]);break;default:throw new Error("illegal figure")}}class h extends c{constructor(E){super(),this._coords=E[2],this._colors=E[3],this._figures=E[4],this._bounds=E[5],this._bbox=E[7],this._background=E[8],this.matrix=null}_createMeshCanvas(E,C,V){let D=Math.floor(this._bounds[0]),A=Math.floor(this._bounds[1]),T=Math.ceil(this._bounds[2])-D,O=Math.ceil(this._bounds[3])-A,F=Math.min(Math.ceil(Math.abs(T*E[0]*1.1)),3e3),W=Math.min(Math.ceil(Math.abs(O*E[1]*1.1)),3e3),U=T/F,ae=O/W,he={coords:this._coords,colors:this._colors,offsetX:-D,offsetY:-A,scaleX:1/U,scaleY:1/ae},oe=F+4,q=W+4,x=V.getCanvas("mesh",oe,q,!1),w=x.context,I=w.createImageData(F,W);if(C){let H=I.data;for(let $=0,G=H.length;$<G;$+=4)H[$]=C[0],H[$+1]=C[1],H[$+2]=C[2],H[$+3]=255}for(let H of this._figures)d(I,H,he);return w.putImageData(I,2,2),{canvas:x.canvas,offsetX:D-2*U,offsetY:A-2*ae,scaleX:U,scaleY:ae}}getPattern(E,C,V,k){o(E,this._bbox);let S;if(k===s.SHADING)S=r.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(E));else if(S=r.Util.singularValueDecompose2dScale(C.baseTransform),this.matrix){let D=r.Util.singularValueDecompose2dScale(this.matrix);S=[S[0]*D[0],S[1]*D[1]]}let P=this._createMeshCanvas(S,k===s.SHADING?null:this._background,C.cachedCanvases);return k!==s.SHADING&&(E.setTransform(...C.baseTransform),this.matrix&&E.transform(...this.matrix)),E.translate(P.offsetX,P.offsetY),E.scale(P.scaleX,P.scaleY),E.createPattern(P.canvas,"no-repeat")}}class f extends c{getPattern(){return"hotpink"}}function p(_){switch(_[0]){case"RadialAxial":return new l(_);case"Mesh":return new h(_);case"Dummy":return new f}throw new Error(`Unknown IR type: ${_[0]}`)}let m={COLORED:1,UNCOLORED:2},g=(()=>{class _{static MAX_PATTERN_SIZE=3e3;constructor(C,V,k,S,P){this.operatorList=C[2],this.matrix=C[3]||[1,0,0,1,0,0],this.bbox=C[4],this.xstep=C[5],this.ystep=C[6],this.paintType=C[7],this.tilingType=C[8],this.color=V,this.ctx=k,this.canvasGraphicsFactory=S,this.baseTransform=P}createPatternCanvas(C){let V=this.operatorList,k=this.bbox,S=this.xstep,P=this.ystep,D=this.paintType,A=this.tilingType,T=this.color,O=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+A);let F=k[0],W=k[1],U=k[2],ae=k[3],he=r.Util.singularValueDecompose2dScale(this.matrix),oe=r.Util.singularValueDecompose2dScale(this.baseTransform),q=[he[0]*oe[0],he[1]*oe[1]],x=this.getSizeAndScale(S,this.ctx.canvas.width,q[0]),w=this.getSizeAndScale(P,this.ctx.canvas.height,q[1]),I=C.cachedCanvases.getCanvas("pattern",x.size,w.size,!0),M=I.context,H=O.createCanvasGraphics(M);H.groupLevel=C.groupLevel,this.setFillAndStrokeStyleToContext(H,D,T);let $=F,G=W,j=U,v=ae;return F<0&&($=0,j+=Math.abs(F)),W<0&&(G=0,v+=Math.abs(W)),M.translate(-(x.scale*$),-(w.scale*G)),H.transform(x.scale,0,0,w.scale,0,0),M.save(),this.clipBbox(H,$,G,j,v),H.baseTransform=(0,i.getCurrentTransform)(H.ctx),H.executeOperatorList(V),H.endDrawing(),{canvas:I.canvas,scaleX:x.scale,scaleY:w.scale,offsetX:$,offsetY:G}}getSizeAndScale(C,V,k){C=Math.abs(C);let S=Math.max(_.MAX_PATTERN_SIZE,V),P=Math.ceil(C*k);return P>=S?P=S:k=P/C,{scale:k,size:P}}clipBbox(C,V,k,S,P){let D=S-V,A=P-k;C.ctx.rect(V,k,D,A),C.current.updateRectMinMax((0,i.getCurrentTransform)(C.ctx),[V,k,S,P]),C.clip(),C.endPath()}setFillAndStrokeStyleToContext(C,V,k){let S=C.ctx,P=C.current;switch(V){case m.COLORED:let D=this.ctx;S.fillStyle=D.fillStyle,S.strokeStyle=D.strokeStyle,P.fillColor=D.fillStyle,P.strokeColor=D.strokeStyle;break;case m.UNCOLORED:let A=r.Util.makeHexColor(k[0],k[1],k[2]);S.fillStyle=A,S.strokeStyle=A,P.fillColor=A,P.strokeColor=A;break;default:throw new r.FormatError(`Unsupported paint type: ${V}`)}}getPattern(C,V,k,S){let P=k;S!==s.SHADING&&(P=r.Util.transform(P,V.baseTransform),this.matrix&&(P=r.Util.transform(P,this.matrix)));let D=this.createPatternCanvas(V),A=new DOMMatrix(P);A=A.translate(D.offsetX,D.offsetY),A=A.scale(1/D.scaleX,1/D.scaleY);let T=C.createPattern(D.canvas,"repeat");return T.setTransform(A),T}}return _})();e.TilingPattern=g}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=s,e.convertToRGBA=i,e.grayToRGBA=c;var r=n(1);function i(l){switch(l.kind){case r.ImageKind.GRAYSCALE_1BPP:return s(l);case r.ImageKind.RGB_24BPP:return o(l)}return null}function s({src:l,srcPos:u=0,dest:d,width:h,height:f,nonBlackColor:p=4294967295,inverseDecode:m=!1}){let g=r.FeatureTest.isLittleEndian?4278190080:255,[_,E]=m?[p,g]:[g,p],C=h>>3,V=h&7,k=l.length;d=new Uint32Array(d.buffer);let S=0;for(let P=0;P<f;P++){for(let A=u+C;u<A;u++){let T=u<k?l[u]:255;d[S++]=T&128?E:_,d[S++]=T&64?E:_,d[S++]=T&32?E:_,d[S++]=T&16?E:_,d[S++]=T&8?E:_,d[S++]=T&4?E:_,d[S++]=T&2?E:_,d[S++]=T&1?E:_}if(V===0)continue;let D=u<k?l[u++]:255;for(let A=0;A<V;A++)d[S++]=D&1<<7-A?E:_}return{srcPos:u,destPos:S}}function o({src:l,srcPos:u=0,dest:d,destPos:h=0,width:f,height:p}){let m=0,g=l.length>>2,_=new Uint32Array(l.buffer,u,g);if(r.FeatureTest.isLittleEndian){for(;m<g-2;m+=3,h+=4){let E=_[m],C=_[m+1],V=_[m+2];d[h]=E|4278190080,d[h+1]=E>>>24|C<<8|4278190080,d[h+2]=C>>>16|V<<16|4278190080,d[h+3]=V>>>8|4278190080}for(let E=m*4,C=l.length;E<C;E+=3)d[h++]=l[E]|l[E+1]<<8|l[E+2]<<16|4278190080}else{for(;m<g-2;m+=3,h+=4){let E=_[m],C=_[m+1],V=_[m+2];d[h]=E|255,d[h+1]=E<<24|C>>>8|255,d[h+2]=C<<16|V>>>16|255,d[h+3]=V<<8|255}for(let E=m*4,C=l.length;E<C;E+=3)d[h++]=l[E]<<24|l[E+1]<<16|l[E+2]<<8|255}return{srcPos:u,destPos:h}}function c(l,u){if(r.FeatureTest.isLittleEndian)for(let d=0,h=l.length;d<h;d++)u[d]=l[d]*65793|4278190080;else for(let d=0,h=l.length;d<h;d++)u[d]=l[d]*16843008|255}}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;let n=Object.create(null);e.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var r=n(1);let i={UNKNOWN:0,DATA:1,ERROR:2},s={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function o(l){switch(l instanceof Error||typeof l=="object"&&l!==null||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),l.name){case"AbortException":return new r.AbortException(l.message);case"MissingPDFException":return new r.MissingPDFException(l.message);case"PasswordException":return new r.PasswordException(l.message,l.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(l.message,l.status);case"UnknownErrorException":return new r.UnknownErrorException(l.message,l.details);default:return new r.UnknownErrorException(l.message,l.toString())}}class c{constructor(u,d,h){this.sourceName=u,this.targetName=d,this.comObj=h,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=f=>{let p=f.data;if(p.targetName!==this.sourceName)return;if(p.stream){this.#t(p);return}if(p.callback){let g=p.callbackId,_=this.callbackCapabilities[g];if(!_)throw new Error(`Cannot resolve callback ${g}`);if(delete this.callbackCapabilities[g],p.callback===i.DATA)_.resolve(p.data);else if(p.callback===i.ERROR)_.reject(o(p.reason));else throw new Error("Unexpected callback case");return}let m=this.actionHandler[p.action];if(!m)throw new Error(`Unknown action from worker: ${p.action}`);if(p.callbackId){let g=this.sourceName,_=p.sourceName;new Promise(function(E){E(m(p.data))}).then(function(E){h.postMessage({sourceName:g,targetName:_,callback:i.DATA,callbackId:p.callbackId,data:E})},function(E){h.postMessage({sourceName:g,targetName:_,callback:i.ERROR,callbackId:p.callbackId,reason:o(E)})});return}if(p.streamId){this.#e(p);return}m(p.data)},h.addEventListener("message",this._onComObjOnMessage)}on(u,d){let h=this.actionHandler;if(h[u])throw new Error(`There is already an actionName called "${u}"`);h[u]=d}send(u,d,h){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,data:d},h)}sendWithPromise(u,d,h){let f=this.callbackId++,p=new r.PromiseCapability;this.callbackCapabilities[f]=p;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,callbackId:f,data:d},h)}catch(m){p.reject(m)}return p.promise}sendWithStream(u,d,h,f){let p=this.streamId++,m=this.sourceName,g=this.targetName,_=this.comObj;return new ReadableStream({start:E=>{let C=new r.PromiseCapability;return this.streamControllers[p]={controller:E,startCall:C,pullCall:null,cancelCall:null,isClosed:!1},_.postMessage({sourceName:m,targetName:g,action:u,streamId:p,data:d,desiredSize:E.desiredSize},f),C.promise},pull:E=>{let C=new r.PromiseCapability;return this.streamControllers[p].pullCall=C,_.postMessage({sourceName:m,targetName:g,stream:s.PULL,streamId:p,desiredSize:E.desiredSize}),C.promise},cancel:E=>{(0,r.assert)(E instanceof Error,"cancel must have a valid reason");let C=new r.PromiseCapability;return this.streamControllers[p].cancelCall=C,this.streamControllers[p].isClosed=!0,_.postMessage({sourceName:m,targetName:g,stream:s.CANCEL,streamId:p,reason:o(E)}),C.promise}},h)}#e(u){let d=u.streamId,h=this.sourceName,f=u.sourceName,p=this.comObj,m=this,g=this.actionHandler[u.action],_={enqueue(E,C=1,V){if(this.isCancelled)return;let k=this.desiredSize;this.desiredSize-=C,k>0&&this.desiredSize<=0&&(this.sinkCapability=new r.PromiseCapability,this.ready=this.sinkCapability.promise),p.postMessage({sourceName:h,targetName:f,stream:s.ENQUEUE,streamId:d,chunk:E},V)},close(){this.isCancelled||(this.isCancelled=!0,p.postMessage({sourceName:h,targetName:f,stream:s.CLOSE,streamId:d}),delete m.streamSinks[d])},error(E){(0,r.assert)(E instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,p.postMessage({sourceName:h,targetName:f,stream:s.ERROR,streamId:d,reason:o(E)}))},sinkCapability:new r.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:u.desiredSize,ready:null};_.sinkCapability.resolve(),_.ready=_.sinkCapability.promise,this.streamSinks[d]=_,new Promise(function(E){E(g(u.data,_))}).then(function(){p.postMessage({sourceName:h,targetName:f,stream:s.START_COMPLETE,streamId:d,success:!0})},function(E){p.postMessage({sourceName:h,targetName:f,stream:s.START_COMPLETE,streamId:d,reason:o(E)})})}#t(u){let d=u.streamId,h=this.sourceName,f=u.sourceName,p=this.comObj,m=this.streamControllers[d],g=this.streamSinks[d];switch(u.stream){case s.START_COMPLETE:u.success?m.startCall.resolve():m.startCall.reject(o(u.reason));break;case s.PULL_COMPLETE:u.success?m.pullCall.resolve():m.pullCall.reject(o(u.reason));break;case s.PULL:if(!g){p.postMessage({sourceName:h,targetName:f,stream:s.PULL_COMPLETE,streamId:d,success:!0});break}g.desiredSize<=0&&u.desiredSize>0&&g.sinkCapability.resolve(),g.desiredSize=u.desiredSize,new Promise(function(_){_(g.onPull?.())}).then(function(){p.postMessage({sourceName:h,targetName:f,stream:s.PULL_COMPLETE,streamId:d,success:!0})},function(_){p.postMessage({sourceName:h,targetName:f,stream:s.PULL_COMPLETE,streamId:d,reason:o(_)})});break;case s.ENQUEUE:if((0,r.assert)(m,"enqueue should have stream controller"),m.isClosed)break;m.controller.enqueue(u.chunk);break;case s.CLOSE:if((0,r.assert)(m,"close should have stream controller"),m.isClosed)break;m.isClosed=!0,m.controller.close(),this.#n(m,d);break;case s.ERROR:(0,r.assert)(m,"error should have stream controller"),m.controller.error(o(u.reason)),this.#n(m,d);break;case s.CANCEL_COMPLETE:u.success?m.cancelCall.resolve():m.cancelCall.reject(o(u.reason)),this.#n(m,d);break;case s.CANCEL:if(!g)break;new Promise(function(_){_(g.onCancel?.(o(u.reason)))}).then(function(){p.postMessage({sourceName:h,targetName:f,stream:s.CANCEL_COMPLETE,streamId:d,success:!0})},function(_){p.postMessage({sourceName:h,targetName:f,stream:s.CANCEL_COMPLETE,streamId:d,reason:o(_)})}),g.sinkCapability.reject(o(u.reason)),g.isCancelled=!0,delete this.streamSinks[d];break;default:throw new Error("Unexpected stream case")}}#n(u,d){return ne(this,null,function*(){yield Promise.allSettled([u.startCall?.promise,u.pullCall?.promise,u.cancelCall?.promise]),delete this.streamControllers[d]})}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=c}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=n(1);class i{#e;#t;constructor({parsedData:o,rawData:c}){this.#e=o,this.#t=c}getRaw(){return this.#t}get(o){return this.#e.get(o)??null}getAll(){return(0,r.objectFromMap)(this.#e)}has(o){return this.#e.has(o)}}e.Metadata=i}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var r=n(1),i=n(8);let s=Symbol("INTERNAL");class o{#e=!0;constructor(u,d){this.name=u,this.intent=d}get visible(){return this.#e}_setVisible(u,d){u!==s&&(0,r.unreachable)("Internal method `_setVisible` called."),this.#e=d}}class c{#e=null;#t=new Map;#n=null;#r=null;constructor(u){if(this.name=null,this.creator=null,u!==null){this.name=u.name,this.creator=u.creator,this.#r=u.order;for(let d of u.groups)this.#t.set(d.id,new o(d.name,d.intent));if(u.baseState==="OFF")for(let d of this.#t.values())d._setVisible(s,!1);for(let d of u.on)this.#t.get(d)._setVisible(s,!0);for(let d of u.off)this.#t.get(d)._setVisible(s,!1);this.#n=this.getHash()}}#a(u){let d=u.length;if(d<2)return!0;let h=u[0];for(let f=1;f<d;f++){let p=u[f],m;if(Array.isArray(p))m=this.#a(p);else if(this.#t.has(p))m=this.#t.get(p).visible;else return(0,r.warn)(`Optional content group not found: ${p}`),!0;switch(h){case"And":if(!m)return!1;break;case"Or":if(m)return!0;break;case"Not":return!m;default:return!0}}return h==="And"}isVisible(u){if(this.#t.size===0)return!0;if(!u)return(0,r.warn)("Optional content group not defined."),!0;if(u.type==="OCG")return this.#t.has(u.id)?this.#t.get(u.id).visible:((0,r.warn)(`Optional content group not found: ${u.id}`),!0);if(u.type==="OCMD"){if(u.expression)return this.#a(u.expression);if(!u.policy||u.policy==="AnyOn"){for(let d of u.ids){if(!this.#t.has(d))return(0,r.warn)(`Optional content group not found: ${d}`),!0;if(this.#t.get(d).visible)return!0}return!1}else if(u.policy==="AllOn"){for(let d of u.ids){if(!this.#t.has(d))return(0,r.warn)(`Optional content group not found: ${d}`),!0;if(!this.#t.get(d).visible)return!1}return!0}else if(u.policy==="AnyOff"){for(let d of u.ids){if(!this.#t.has(d))return(0,r.warn)(`Optional content group not found: ${d}`),!0;if(!this.#t.get(d).visible)return!0}return!1}else if(u.policy==="AllOff"){for(let d of u.ids){if(!this.#t.has(d))return(0,r.warn)(`Optional content group not found: ${d}`),!0;if(this.#t.get(d).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${u.policy}.`),!0}return(0,r.warn)(`Unknown group type ${u.type}.`),!0}setVisibility(u,d=!0){if(!this.#t.has(u)){(0,r.warn)(`Optional content group not found: ${u}`);return}this.#t.get(u)._setVisible(s,!!d),this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#r?this.#r.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,r.objectFromMap)(this.#t):null}getGroup(u){return this.#t.get(u)||null}getHash(){if(this.#e!==null)return this.#e;let u=new i.MurmurHash3_64;for(let[d,h]of this.#t)u.update(`${d}:${h.visible}`);return this.#e=u.hexdigest()}}e.OptionalContentConfig=c}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var r=n(1),i=n(6);class s{constructor({length:u,initialData:d,progressiveDone:h=!1,contentDispositionFilename:f=null,disableRange:p=!1,disableStream:m=!1},g){if((0,r.assert)(g,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=h,this._contentDispositionFilename=f,d?.length>0){let _=d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength?d.buffer:new Uint8Array(d).buffer;this._queuedChunks.push(_)}this._pdfDataRangeTransport=g,this._isStreamingSupported=!m,this._isRangeSupported=!p,this._contentLength=u,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((_,E)=>{this._onReceiveData({begin:_,chunk:E})}),this._pdfDataRangeTransport.addProgressListener((_,E)=>{this._onProgress({loaded:_,total:E})}),this._pdfDataRangeTransport.addProgressiveReadListener(_=>{this._onReceiveData({chunk:_})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:u,chunk:d}){let h=d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength?d.buffer:new Uint8Array(d).buffer;if(u===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(h):this._queuedChunks.push(h);else{let f=this._rangeReaders.some(function(p){return p._begin!==u?!1:(p._enqueue(h),!0)});(0,r.assert)(f,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(u){u.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:u.loaded}):this._fullRequestReader?.onProgress?.({loaded:u.loaded,total:u.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(u){let d=this._rangeReaders.indexOf(u);d>=0&&this._rangeReaders.splice(d,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let u=this._queuedChunks;return this._queuedChunks=null,new o(this,u,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(u,d){if(d<=this._progressiveDataLength)return null;let h=new c(this,u,d);return this._pdfDataRangeTransport.requestDataRange(u,d),this._rangeReaders.push(h),h}cancelAllRequests(u){this._fullRequestReader?.cancel(u);for(let d of this._rangeReaders.slice(0))d.cancel(u);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=s;class o{constructor(u,d,h=!1,f=null){this._stream=u,this._done=h||!1,this._filename=(0,i.isPdfFile)(f)?f:null,this._queuedChunks=d||[],this._loaded=0;for(let p of this._queuedChunks)this._loaded+=p.byteLength;this._requests=[],this._headersReady=Promise.resolve(),u._fullRequestReader=this,this.onProgress=null}_enqueue(u){this._done||(this._requests.length>0?this._requests.shift().resolve({value:u,done:!1}):this._queuedChunks.push(u),this._loaded+=u.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){return ne(this,null,function*(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let u=new r.PromiseCapability;return this._requests.push(u),u.promise})}cancel(u){this._done=!0;for(let d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class c{constructor(u,d,h){this._stream=u,this._begin=d,this._end=h,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(u){if(!this._done){if(this._requests.length===0)this._queuedChunk=u;else{this._requests.shift().resolve({value:u,done:!1});for(let h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){return ne(this,null,function*(){if(this._queuedChunk){let d=this._queuedChunk;return this._queuedChunk=null,{value:d,done:!1}}if(this._done)return{value:void 0,done:!0};let u=new r.PromiseCapability;return this._requests.push(u),u.promise})}cancel(u){this._done=!0;for(let d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var r=n(1),i=n(20);function s(h,f,p){return{method:"GET",headers:h,signal:p.signal,mode:"cors",credentials:f?"include":"same-origin",redirect:"follow"}}function o(h){let f=new Headers;for(let p in h){let m=h[p];m!==void 0&&f.append(p,m)}return f}function c(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:((0,r.warn)(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class l{constructor(f){this.source=f,this.isHttp=/^https?:/i.test(f.url),this.httpHeaders=this.isHttp&&f.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new u(this),this._fullRequestReader}getRangeReader(f,p){if(p<=this._progressiveDataLength)return null;let m=new d(this,f,p);return this._rangeRequestReaders.push(m),m}cancelAllRequests(f){this._fullRequestReader?.cancel(f);for(let p of this._rangeRequestReaders.slice(0))p.cancel(f)}}e.PDFFetchStream=l;class u{constructor(f){this._stream=f,this._reader=null,this._loaded=0,this._filename=null;let p=f.source;this._withCredentials=p.withCredentials||!1,this._contentLength=p.length,this._headersCapability=new r.PromiseCapability,this._disableRange=p.disableRange||!1,this._rangeChunkSize=p.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!p.disableStream,this._isRangeSupported=!p.disableRange,this._headers=o(this._stream.httpHeaders);let m=p.url;fetch(m,s(this._headers,this._withCredentials,this._abortController)).then(g=>{if(!(0,i.validateResponseStatus)(g.status))throw(0,i.createResponseStatusError)(g.status,m);this._reader=g.body.getReader(),this._headersCapability.resolve();let _=V=>g.headers.get(V),{allowRangeRequests:E,suggestedLength:C}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=E,this._contentLength=C||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(_),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return ne(this,null,function*(){yield this._headersCapability.promise;let{value:f,done:p}=yield this._reader.read();return p?{value:f,done:p}:(this._loaded+=f.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:c(f),done:!1})})}cancel(f){this._reader?.cancel(f),this._abortController.abort()}}class d{constructor(f,p,m){this._stream=f,this._reader=null,this._loaded=0;let g=f.source;this._withCredentials=g.withCredentials||!1,this._readCapability=new r.PromiseCapability,this._isStreamingSupported=!g.disableStream,this._abortController=new AbortController,this._headers=o(this._stream.httpHeaders),this._headers.append("Range",`bytes=${p}-${m-1}`);let _=g.url;fetch(_,s(this._headers,this._withCredentials,this._abortController)).then(E=>{if(!(0,i.validateResponseStatus)(E.status))throw(0,i.createResponseStatusError)(E.status,_);this._readCapability.resolve(),this._reader=E.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){return ne(this,null,function*(){yield this._readCapability.promise;let{value:f,done:p}=yield this._reader.read();return p?{value:f,done:p}:(this._loaded+=f.byteLength,this.onProgress?.({loaded:this._loaded}),{value:c(f),done:!1})})}cancel(f){this._reader?.cancel(f),this._abortController.abort()}}}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=l,e.extractFilenameFromHeader=c,e.validateRangeRequestCapabilities=o,e.validateResponseStatus=u;var r=n(1),i=n(21),s=n(6);function o({getResponseHeader:d,isHttp:h,rangeChunkSize:f,disableRange:p}){let m={allowRangeRequests:!1,suggestedLength:void 0},g=parseInt(d("Content-Length"),10);return!Number.isInteger(g)||(m.suggestedLength=g,g<=2*f)||p||!h||d("Accept-Ranges")!=="bytes"||(d("Content-Encoding")||"identity")!=="identity"||(m.allowRangeRequests=!0),m}function c(d){let h=d("Content-Disposition");if(h){let f=(0,i.getFilenameFromContentDispositionHeader)(h);if(f.includes("%"))try{f=decodeURIComponent(f)}catch{}if((0,s.isPdfFile)(f))return f}return null}function l(d,h){return d===404||d===0&&h.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+h+'".'):new r.UnexpectedResponseException(`Unexpected server response (${d}) while retrieving PDF "${h}".`,d)}function u(d){return d===200||d===206}}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=i;var r=n(1);function i(s){let o=!0,c=l("filename\\*","i").exec(s);if(c){c=c[1];let g=f(c);return g=unescape(g),g=p(g),g=m(g),d(g)}if(c=h(s),c){let g=m(c);return d(g)}if(c=l("filename","i").exec(s),c){c=c[1];let g=f(c);return g=m(g),d(g)}function l(g,_){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',_)}function u(g,_){if(g){if(!/^[\x00-\xFF]+$/.test(_))return _;try{let E=new TextDecoder(g,{fatal:!0}),C=(0,r.stringToBytes)(_);_=E.decode(C),o=!1}catch{}}return _}function d(g){return o&&/[\x80-\xff]/.test(g)&&(g=u("utf-8",g),o&&(g=u("iso-8859-1",g))),g}function h(g){let _=[],E,C=l("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(E=C.exec(g))!==null;){let[,k,S,P]=E;if(k=parseInt(k,10),k in _){if(k===0)break;continue}_[k]=[S,P]}let V=[];for(let k=0;k<_.length&&k in _;++k){let[S,P]=_[k];P=f(P),S&&(P=unescape(P),k===0&&(P=p(P))),V.push(P)}return V.join("")}function f(g){if(g.startsWith('"')){let _=g.slice(1).split('\\"');for(let E=0;E<_.length;++E){let C=_[E].indexOf('"');C!==-1&&(_[E]=_[E].slice(0,C),_.length=E+1),_[E]=_[E].replaceAll(/\\(.)/g,"$1")}g=_.join('"')}return g}function p(g){let _=g.indexOf("'");if(_===-1)return g;let E=g.slice(0,_),V=g.slice(_+1).replace(/^[^']*'/,"");return u(E,V)}function m(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(_,E,C,V){if(C==="q"||C==="Q")return V=V.replaceAll("_"," "),V=V.replaceAll(/=([0-9a-fA-F]{2})/g,function(k,S){return String.fromCharCode(parseInt(S,16))}),u(E,V);try{V=atob(V)}catch{}return u(E,V)})}return""}}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var r=n(1),i=n(20);let s=200,o=206;function c(f){let p=f.response;return typeof p!="string"?p:(0,r.stringToBytes)(p).buffer}class l{constructor(p,m={}){this.url=p,this.isHttp=/^https?:/i.test(p),this.httpHeaders=this.isHttp&&m.httpHeaders||Object.create(null),this.withCredentials=m.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(p,m,g){let _={begin:p,end:m};for(let E in g)_[E]=g[E];return this.request(_)}requestFull(p){return this.request(p)}request(p){let m=new XMLHttpRequest,g=this.currXhrId++,_=this.pendingRequests[g]={xhr:m};m.open("GET",this.url),m.withCredentials=this.withCredentials;for(let E in this.httpHeaders){let C=this.httpHeaders[E];C!==void 0&&m.setRequestHeader(E,C)}return this.isHttp&&"begin"in p&&"end"in p?(m.setRequestHeader("Range",`bytes=${p.begin}-${p.end-1}`),_.expectedStatus=o):_.expectedStatus=s,m.responseType="arraybuffer",p.onError&&(m.onerror=function(E){p.onError(m.status)}),m.onreadystatechange=this.onStateChange.bind(this,g),m.onprogress=this.onProgress.bind(this,g),_.onHeadersReceived=p.onHeadersReceived,_.onDone=p.onDone,_.onError=p.onError,_.onProgress=p.onProgress,m.send(null),g}onProgress(p,m){let g=this.pendingRequests[p];g&&g.onProgress?.(m)}onStateChange(p,m){let g=this.pendingRequests[p];if(!g)return;let _=g.xhr;if(_.readyState>=2&&g.onHeadersReceived&&(g.onHeadersReceived(),delete g.onHeadersReceived),_.readyState!==4||!(p in this.pendingRequests))return;if(delete this.pendingRequests[p],_.status===0&&this.isHttp){g.onError?.(_.status);return}let E=_.status||s;if(!(E===s&&g.expectedStatus===o)&&E!==g.expectedStatus){g.onError?.(_.status);return}let V=c(_);if(E===o){let k=_.getResponseHeader("Content-Range"),S=/bytes (\d+)-(\d+)\/(\d+)/.exec(k);g.onDone({begin:parseInt(S[1],10),chunk:V})}else V?g.onDone({begin:0,chunk:V}):g.onError?.(_.status)}getRequestXhr(p){return this.pendingRequests[p].xhr}isPendingRequest(p){return p in this.pendingRequests}abortRequest(p){let m=this.pendingRequests[p].xhr;delete this.pendingRequests[p],m.abort()}}class u{constructor(p){this._source=p,this._manager=new l(p.url,{httpHeaders:p.httpHeaders,withCredentials:p.withCredentials}),this._rangeChunkSize=p.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(p){let m=this._rangeRequestReaders.indexOf(p);m>=0&&this._rangeRequestReaders.splice(m,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new d(this._manager,this._source),this._fullRequestReader}getRangeReader(p,m){let g=new h(this._manager,p,m);return g.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(g),g}cancelAllRequests(p){this._fullRequestReader?.cancel(p);for(let m of this._rangeRequestReaders.slice(0))m.cancel(p)}}e.PDFNetworkStream=u;class d{constructor(p,m){this._manager=p;let g={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=m.url,this._fullRequestId=p.requestFull(g),this._headersReceivedCapability=new r.PromiseCapability,this._disableRange=m.disableRange||!1,this._contentLength=m.length,this._rangeChunkSize=m.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let p=this._fullRequestId,m=this._manager.getRequestXhr(p),g=C=>m.getResponseHeader(C),{allowRangeRequests:_,suggestedLength:E}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});_&&(this._isRangeSupported=!0),this._contentLength=E||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(g),this._isRangeSupported&&this._manager.abortRequest(p),this._headersReceivedCapability.resolve()}_onDone(p){if(p&&(this._requests.length>0?this._requests.shift().resolve({value:p.chunk,done:!1}):this._cachedChunks.push(p.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(p){this._storedError=(0,i.createResponseStatusError)(p,this._url),this._headersReceivedCapability.reject(this._storedError);for(let m of this._requests)m.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(p){this.onProgress?.({loaded:p.loaded,total:p.lengthComputable?p.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){return ne(this,null,function*(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let p=new r.PromiseCapability;return this._requests.push(p),p.promise})}cancel(p){this._done=!0,this._headersReceivedCapability.reject(p);for(let m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class h{constructor(p,m,g){this._manager=p;let _={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=p.url,this._requestId=p.requestRange(m,g,_),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(p){let m=p.chunk;this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunk=m,this._done=!0;for(let g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(p){this._storedError=(0,i.createResponseStatusError)(p,this._url);for(let m of this._requests)m.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(p){this.isStreamingSupported||this.onProgress?.({loaded:p.loaded})}get isStreamingSupported(){return!1}read(){return ne(this,null,function*(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let m=this._queuedChunk;return this._queuedChunk=null,{value:m,done:!1}}if(this._done)return{value:void 0,done:!0};let p=new r.PromiseCapability;return this._requests.push(p),p.promise})}cancel(p){this._done=!0;for(let m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var r=n(1),i=n(20);let s=/^file:\/\/\/[a-zA-Z]:\//;function o(g){let _=m0(),E=_.parse(g);return E.protocol==="file:"||E.host?E:/^[a-z]:[/\\]/i.test(g)?_.parse(`file:///${g}`):(E.host||(E.protocol="file:"),E)}class c{constructor(_){this.source=_,this.url=o(_.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&_.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new p(this):new h(this),this._fullRequestReader}getRangeReader(_,E){if(E<=this._progressiveDataLength)return null;let C=this.isFsUrl?new m(this,_,E):new f(this,_,E);return this._rangeRequestReaders.push(C),C}cancelAllRequests(_){this._fullRequestReader?.cancel(_);for(let E of this._rangeRequestReaders.slice(0))E.cancel(_)}}e.PDFNodeStream=c;class l{constructor(_){this._url=_.url,this._done=!1,this._storedError=null,this.onProgress=null;let E=_.source;this._contentLength=E.length,this._loaded=0,this._filename=null,this._disableRange=E.disableRange||!1,this._rangeChunkSize=E.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!E.disableStream,this._isRangeSupported=!E.disableRange,this._readableStream=null,this._readCapability=new r.PromiseCapability,this._headersCapability=new r.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return ne(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let _=this._readableStream.read();return _===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=_.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(_).buffer,done:!1})})}cancel(_){if(!this._readableStream){this._error(_);return}this._readableStream.destroy(_)}_error(_){this._storedError=_,this._readCapability.resolve()}_setReadableStream(_){this._readableStream=_,_.on("readable",()=>{this._readCapability.resolve()}),_.on("end",()=>{_.destroy(),this._done=!0,this._readCapability.resolve()}),_.on("error",E=>{this._error(E)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class u{constructor(_){this._url=_.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new r.PromiseCapability;let E=_.source;this._isStreamingSupported=!E.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){return ne(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let _=this._readableStream.read();return _===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=_.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(_).buffer,done:!1})})}cancel(_){if(!this._readableStream){this._error(_);return}this._readableStream.destroy(_)}_error(_){this._storedError=_,this._readCapability.resolve()}_setReadableStream(_){this._readableStream=_,_.on("readable",()=>{this._readCapability.resolve()}),_.on("end",()=>{_.destroy(),this._done=!0,this._readCapability.resolve()}),_.on("error",E=>{this._error(E)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function d(g,_){return{protocol:g.protocol,auth:g.auth,host:g.hostname,port:g.port,path:g.path,method:"GET",headers:_}}class h extends l{constructor(_){super(_);let E=C=>{if(C.statusCode===404){let P=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=P,this._headersCapability.reject(P);return}this._headersCapability.resolve(),this._setReadableStream(C);let V=P=>this._readableStream.headers[P.toLowerCase()],{allowRangeRequests:k,suggestedLength:S}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:V,isHttp:_.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=k,this._contentLength=S||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(V)};if(this._request=null,this._url.protocol==="http:"){let C=ty();this._request=C.request(d(this._url,_.httpHeaders),E)}else{let C=ny();this._request=C.request(d(this._url,_.httpHeaders),E)}this._request.on("error",C=>{this._storedError=C,this._headersCapability.reject(C)}),this._request.end()}}class f extends u{constructor(_,E,C){super(_),this._httpHeaders={};for(let k in _.httpHeaders){let S=_.httpHeaders[k];S!==void 0&&(this._httpHeaders[k]=S)}this._httpHeaders.Range=`bytes=${E}-${C-1}`;let V=k=>{if(k.statusCode===404){let S=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=S;return}this._setReadableStream(k)};if(this._request=null,this._url.protocol==="http:"){let k=ty();this._request=k.request(d(this._url,this._httpHeaders),V)}else{let k=ny();this._request=k.request(d(this._url,this._httpHeaders),V)}this._request.on("error",k=>{this._storedError=k}),this._request.end()}}class p extends l{constructor(_){super(_);let E=decodeURIComponent(this._url.path);s.test(this._url.href)&&(E=E.replace(/^\//,""));let C=Id();C.lstat(E,(V,k)=>{if(V){V.code==="ENOENT"&&(V=new r.MissingPDFException(`Missing PDF "${E}".`)),this._storedError=V,this._headersCapability.reject(V);return}this._contentLength=k.size,this._setReadableStream(C.createReadStream(E)),this._headersCapability.resolve()})}}class m extends u{constructor(_,E,C){super(_);let V=decodeURIComponent(this._url.path);s.test(this._url.href)&&(V=V.replace(/^\//,""));let k=Id();this._setReadableStream(k.createReadStream(V,{start:E,end:C-1}))}}}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var r=n(6),i=n(1);let s={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},o="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/1999/xlink",l=["butt","round","square"],u=["miter","round","bevel"],d=function(k,S="",P=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!P)return URL.createObjectURL(new Blob([k],{type:S}));let D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",A=`data:${S};base64,`;for(let T=0,O=k.length;T<O;T+=3){let F=k[T]&255,W=k[T+1]&255,U=k[T+2]&255,ae=F>>2,he=(F&3)<<4|W>>4,oe=T+1<O?(W&15)<<2|U>>6:64,q=T+2<O?U&63:64;A+=D[ae]+D[he]+D[oe]+D[q]}return A},h=(function(){let k=new Uint8Array([137,80,78,71,13,10,26,10]),S=12,P=new Int32Array(256);for(let U=0;U<256;U++){let ae=U;for(let he=0;he<8;he++)ae=ae&1?3988292384^ae>>1&2147483647:ae>>1&2147483647;P[U]=ae}function D(U,ae,he){let oe=-1;for(let q=ae;q<he;q++){let x=(oe^U[q])&255,w=P[x];oe=oe>>>8^w}return oe^-1}function A(U,ae,he,oe){let q=oe,x=ae.length;he[q]=x>>24&255,he[q+1]=x>>16&255,he[q+2]=x>>8&255,he[q+3]=x&255,q+=4,he[q]=U.charCodeAt(0)&255,he[q+1]=U.charCodeAt(1)&255,he[q+2]=U.charCodeAt(2)&255,he[q+3]=U.charCodeAt(3)&255,q+=4,he.set(ae,q),q+=ae.length;let w=D(he,oe+4,q);he[q]=w>>24&255,he[q+1]=w>>16&255,he[q+2]=w>>8&255,he[q+3]=w&255}function T(U,ae,he){let oe=1,q=0;for(let x=ae;x<he;++x)oe=(oe+(U[x]&255))%65521,q=(q+oe)%65521;return q<<16|oe}function O(U){if(!i.isNodeJS)return F(U);try{let ae=parseInt(process.versions.node)>=8?U:Buffer.from(U),he=y0().deflateSync(ae,{level:9});return he instanceof Uint8Array?he:new Uint8Array(he)}catch(ae){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+ae)}return F(U)}function F(U){let ae=U.length,he=65535,oe=Math.ceil(ae/he),q=new Uint8Array(2+ae+oe*5+4),x=0;q[x++]=120,q[x++]=156;let w=0;for(;ae>he;)q[x++]=0,q[x++]=255,q[x++]=255,q[x++]=0,q[x++]=0,q.set(U.subarray(w,w+he),x),x+=he,w+=he,ae-=he;q[x++]=1,q[x++]=ae&255,q[x++]=ae>>8&255,q[x++]=~ae&65535&255,q[x++]=(~ae&65535)>>8&255,q.set(U.subarray(w),x),x+=U.length-w;let I=T(U,0,U.length);return q[x++]=I>>24&255,q[x++]=I>>16&255,q[x++]=I>>8&255,q[x++]=I&255,q}function W(U,ae,he,oe){let q=U.width,x=U.height,w,I,M,H=U.data;switch(ae){case i.ImageKind.GRAYSCALE_1BPP:I=0,w=1,M=q+7>>3;break;case i.ImageKind.RGB_24BPP:I=2,w=8,M=q*3;break;case i.ImageKind.RGBA_32BPP:I=6,w=8,M=q*4;break;default:throw new Error("invalid format")}let $=new Uint8Array((1+M)*x),G=0,j=0;for(let K=0;K<x;++K)$[G++]=0,$.set(H.subarray(j,j+M),G),j+=M,G+=M;if(ae===i.ImageKind.GRAYSCALE_1BPP&&oe){G=0;for(let K=0;K<x;K++){G++;for(let Y=0;Y<M;Y++)$[G++]^=255}}let v=new Uint8Array([q>>24&255,q>>16&255,q>>8&255,q&255,x>>24&255,x>>16&255,x>>8&255,x&255,w,I,0,0,0]),R=O($),N=k.length+S*3+v.length+R.length,B=new Uint8Array(N),z=0;return B.set(k,z),z+=k.length,A("IHDR",v,B,z),z+=S+v.length,A("IDATA",R,B,z),z+=S+R.length,A("IEND",new Uint8Array(0),B,z),d(B,"image/png",he)}return function(ae,he,oe){let q=ae.kind===void 0?i.ImageKind.GRAYSCALE_1BPP:ae.kind;return W(ae,q,he,oe)}})();class f{constructor(){this.fontSizeScale=1,this.fontWeight=s.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=s.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(S,P){this.x=S,this.y=P}}function p(k){let S=[],P=[];for(let D of k){if(D.fn==="save"){S.push({fnId:92,fn:"group",items:[]}),P.push(S),S=S.at(-1).items;continue}D.fn==="restore"?S=P.pop():S.push(D)}return S}function m(k){if(Number.isInteger(k))return k.toString();let S=k.toFixed(10),P=S.length-1;if(S[P]!=="0")return S;do P--;while(S[P]==="0");return S.substring(0,S[P]==="."?P:P+1)}function g(k){if(k[4]===0&&k[5]===0){if(k[1]===0&&k[2]===0)return k[0]===1&&k[3]===1?"":`scale(${m(k[0])} ${m(k[3])})`;if(k[0]===k[3]&&k[1]===-k[2]){let S=Math.acos(k[0])*180/Math.PI;return`rotate(${m(S)})`}}else if(k[0]===1&&k[1]===0&&k[2]===0&&k[3]===1)return`translate(${m(k[4])} ${m(k[5])})`;return`matrix(${m(k[0])} ${m(k[1])} ${m(k[2])} ${m(k[3])} ${m(k[4])} ${m(k[5])})`}let _=0,E=0,C=0;class V{constructor(S,P,D=!1){(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new f,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=S,this.objs=P,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!D,this._operatorIdMapping=[];for(let A in i.OPS)this._operatorIdMapping[i.OPS[A]]=A}getObject(S,P=null){return typeof S=="string"?S.startsWith("g_")?this.commonObjs.get(S):this.objs.get(S):P}save(){this.transformStack.push(this.transformMatrix);let S=this.current;this.extraStack.push(S),this.current=S.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(S){this.save(),this.executeOpTree(S),this.restore()}loadDependencies(S){let P=S.fnArray,D=S.argsArray;for(let A=0,T=P.length;A<T;A++)if(P[A]===i.OPS.dependency)for(let O of D[A]){let F=O.startsWith("g_")?this.commonObjs:this.objs,W=new Promise(U=>{F.get(O,U)});this.current.dependencies.push(W)}return Promise.all(this.current.dependencies)}transform(S,P,D,A,T,O){let F=[S,P,D,A,T,O];this.transformMatrix=i.Util.transform(this.transformMatrix,F),this.tgrp=null}getSVG(S,P){this.viewport=P;let D=this._initialize(P);return this.loadDependencies(S).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(S)),D))}convertOpList(S){let P=this._operatorIdMapping,D=S.argsArray,A=S.fnArray,T=[];for(let O=0,F=A.length;O<F;O++){let W=A[O];T.push({fnId:W,fn:P[W],args:D[O]})}return p(T)}executeOpTree(S){for(let P of S){let D=P.fn,A=P.fnId,T=P.args;switch(A|0){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(T);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(T[0],T[1]);break;case i.OPS.setFont:this.setFont(T);break;case i.OPS.showText:this.showText(T[0]);break;case i.OPS.showSpacedText:this.showText(T[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(T[0],T[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(T[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(T[0]);break;case i.OPS.setHScale:this.setHScale(T[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(T[0],T[1],T[2],T[3],T[4],T[5]);break;case i.OPS.setTextRise:this.setTextRise(T[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(T[0]);break;case i.OPS.setLineWidth:this.setLineWidth(T[0]);break;case i.OPS.setLineJoin:this.setLineJoin(T[0]);break;case i.OPS.setLineCap:this.setLineCap(T[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(T[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(T[0],T[1],T[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(T[0],T[1],T[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(T);break;case i.OPS.setFillColorN:this.setFillColorN(T);break;case i.OPS.shadingFill:this.shadingFill(T[0]);break;case i.OPS.setDash:this.setDash(T[0],T[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(T[0]);break;case i.OPS.setFlatness:this.setFlatness(T[0]);break;case i.OPS.setGState:this.setGState(T[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(T[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(T[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(T[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(T[0],T[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(T[0],T[1],T[2],T[3],T[4],T[5]);break;case i.OPS.constructPath:this.constructPath(T[0],T[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(P.items);break;default:(0,i.warn)(`Unimplemented operator ${D}`);break}}}setWordSpacing(S){this.current.wordSpacing=S}setCharSpacing(S){this.current.charSpacing=S}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(S,P,D,A,T,O){let F=this.current;F.textMatrix=F.lineMatrix=[S,P,D,A,T,O],F.textMatrixScale=Math.hypot(S,P),F.x=F.lineX=0,F.y=F.lineY=0,F.xcoords=[],F.ycoords=[],F.tspan=this.svgFactory.createElement("svg:tspan"),F.tspan.setAttributeNS(null,"font-family",F.fontFamily),F.tspan.setAttributeNS(null,"font-size",`${m(F.fontSize)}px`),F.tspan.setAttributeNS(null,"y",m(-F.y)),F.txtElement=this.svgFactory.createElement("svg:text"),F.txtElement.append(F.tspan)}beginText(){let S=this.current;S.x=S.lineX=0,S.y=S.lineY=0,S.textMatrix=i.IDENTITY_MATRIX,S.lineMatrix=i.IDENTITY_MATRIX,S.textMatrixScale=1,S.tspan=this.svgFactory.createElement("svg:tspan"),S.txtElement=this.svgFactory.createElement("svg:text"),S.txtgrp=this.svgFactory.createElement("svg:g"),S.xcoords=[],S.ycoords=[]}moveText(S,P){let D=this.current;D.x=D.lineX+=S,D.y=D.lineY+=P,D.xcoords=[],D.ycoords=[],D.tspan=this.svgFactory.createElement("svg:tspan"),D.tspan.setAttributeNS(null,"font-family",D.fontFamily),D.tspan.setAttributeNS(null,"font-size",`${m(D.fontSize)}px`),D.tspan.setAttributeNS(null,"y",m(-D.y))}showText(S){let P=this.current,D=P.font,A=P.fontSize;if(A===0)return;let T=P.fontSizeScale,O=P.charSpacing,F=P.wordSpacing,W=P.fontDirection,U=P.textHScale*W,ae=D.vertical,he=ae?1:-1,oe=D.defaultVMetrics,q=A*P.fontMatrix[0],x=0;for(let M of S){if(M===null){x+=W*F;continue}else if(typeof M=="number"){x+=he*M*A/1e3;continue}let H=(M.isSpace?F:0)+O,$=M.fontChar,G,j,v=M.width;if(ae){let N,B=M.vmetric||oe;N=M.vmetric?B[1]:v*.5,N=-N*q;let z=B[2]*q;v=B?-B[0]:v,G=N/T,j=(x+z)/T}else G=x/T,j=0;(M.isInFont||D.missingFile)&&(P.xcoords.push(P.x+G),ae&&P.ycoords.push(-P.y+j),P.tspan.textContent+=$);let R=ae?v*q-H*W:v*q+H*W;x+=R}P.tspan.setAttributeNS(null,"x",P.xcoords.map(m).join(" ")),ae?P.tspan.setAttributeNS(null,"y",P.ycoords.map(m).join(" ")):P.tspan.setAttributeNS(null,"y",m(-P.y)),ae?P.y-=x:P.x+=x*U,P.tspan.setAttributeNS(null,"font-family",P.fontFamily),P.tspan.setAttributeNS(null,"font-size",`${m(P.fontSize)}px`),P.fontStyle!==s.fontStyle&&P.tspan.setAttributeNS(null,"font-style",P.fontStyle),P.fontWeight!==s.fontWeight&&P.tspan.setAttributeNS(null,"font-weight",P.fontWeight);let w=P.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(w===i.TextRenderingMode.FILL||w===i.TextRenderingMode.FILL_STROKE?(P.fillColor!==s.fillColor&&P.tspan.setAttributeNS(null,"fill",P.fillColor),P.fillAlpha<1&&P.tspan.setAttributeNS(null,"fill-opacity",P.fillAlpha)):P.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?P.tspan.setAttributeNS(null,"fill","transparent"):P.tspan.setAttributeNS(null,"fill","none"),w===i.TextRenderingMode.STROKE||w===i.TextRenderingMode.FILL_STROKE){let M=1/(P.textMatrixScale||1);this._setStrokeAttributes(P.tspan,M)}let I=P.textMatrix;P.textRise!==0&&(I=I.slice(),I[5]+=P.textRise),P.txtElement.setAttributeNS(null,"transform",`${g(I)} scale(${m(U)}, -1)`),P.txtElement.setAttributeNS(o,"xml:space","preserve"),P.txtElement.append(P.tspan),P.txtgrp.append(P.txtElement),this._ensureTransformGroup().append(P.txtElement)}setLeadingMoveText(S,P){this.setLeading(-P),this.moveText(S,P)}addFontStyle(S){if(!S.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));let P=d(S.data,S.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${S.loadedName}"; src: url(${P}); }
`}setFont(S){let P=this.current,D=this.commonObjs.get(S[0]),A=S[1];P.font=D,this.embedFonts&&!D.missingFile&&!this.embeddedFonts[D.loadedName]&&(this.addFontStyle(D),this.embeddedFonts[D.loadedName]=D),P.fontMatrix=D.fontMatrix||i.FONT_IDENTITY_MATRIX;let T="normal";D.black?T="900":D.bold&&(T="bold");let O=D.italic?"italic":"normal";A<0?(A=-A,P.fontDirection=-1):P.fontDirection=1,P.fontSize=A,P.fontFamily=D.loadedName,P.fontWeight=T,P.fontStyle=O,P.tspan=this.svgFactory.createElement("svg:tspan"),P.tspan.setAttributeNS(null,"y",m(-P.y)),P.xcoords=[],P.ycoords=[]}endText(){let S=this.current;S.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&S.txtElement?.hasChildNodes()&&(S.element=S.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(S){S>0&&(this.current.lineWidth=S)}setLineCap(S){this.current.lineCap=l[S]}setLineJoin(S){this.current.lineJoin=u[S]}setMiterLimit(S){this.current.miterLimit=S}setStrokeAlpha(S){this.current.strokeAlpha=S}setStrokeRGBColor(S,P,D){this.current.strokeColor=i.Util.makeHexColor(S,P,D)}setFillAlpha(S){this.current.fillAlpha=S}setFillRGBColor(S,P,D){this.current.fillColor=i.Util.makeHexColor(S,P,D),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(S){this.current.strokeColor=this._makeColorN_Pattern(S)}setFillColorN(S){this.current.fillColor=this._makeColorN_Pattern(S)}shadingFill(S){let{width:P,height:D}=this.viewport,A=i.Util.inverseTransform(this.transformMatrix),[T,O,F,W]=i.Util.getAxialAlignedBoundingBox([0,0,P,D],A),U=this.svgFactory.createElement("svg:rect");U.setAttributeNS(null,"x",T),U.setAttributeNS(null,"y",O),U.setAttributeNS(null,"width",F-T),U.setAttributeNS(null,"height",W-O),U.setAttributeNS(null,"fill",this._makeShadingPattern(S)),this.current.fillAlpha<1&&U.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(U)}_makeColorN_Pattern(S){return S[0]==="TilingPattern"?this._makeTilingPattern(S):this._makeShadingPattern(S)}_makeTilingPattern(S){let P=S[1],D=S[2],A=S[3]||i.IDENTITY_MATRIX,[T,O,F,W]=S[4],U=S[5],ae=S[6],he=S[7],oe=`shading${C++}`,[q,x,w,I]=i.Util.normalizeRect([...i.Util.applyTransform([T,O],A),...i.Util.applyTransform([F,W],A)]),[M,H]=i.Util.singularValueDecompose2dScale(A),$=U*M,G=ae*H,j=this.svgFactory.createElement("svg:pattern");j.setAttributeNS(null,"id",oe),j.setAttributeNS(null,"patternUnits","userSpaceOnUse"),j.setAttributeNS(null,"width",$),j.setAttributeNS(null,"height",G),j.setAttributeNS(null,"x",`${q}`),j.setAttributeNS(null,"y",`${x}`);let v=this.svg,R=this.transformMatrix,N=this.current.fillColor,B=this.current.strokeColor,z=this.svgFactory.create(w-q,I-x);if(this.svg=z,this.transformMatrix=A,he===2){let K=i.Util.makeHexColor(...P);this.current.fillColor=K,this.current.strokeColor=K}return this.executeOpTree(this.convertOpList(D)),this.svg=v,this.transformMatrix=R,this.current.fillColor=N,this.current.strokeColor=B,j.append(z.childNodes[0]),this.defs.append(j),`url(#${oe})`}_makeShadingPattern(S){switch(typeof S=="string"&&(S=this.objs.get(S)),S[0]){case"RadialAxial":let P=`shading${C++}`,D=S[3],A;switch(S[1]){case"axial":let T=S[4],O=S[5];A=this.svgFactory.createElement("svg:linearGradient"),A.setAttributeNS(null,"id",P),A.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),A.setAttributeNS(null,"x1",T[0]),A.setAttributeNS(null,"y1",T[1]),A.setAttributeNS(null,"x2",O[0]),A.setAttributeNS(null,"y2",O[1]);break;case"radial":let F=S[4],W=S[5],U=S[6],ae=S[7];A=this.svgFactory.createElement("svg:radialGradient"),A.setAttributeNS(null,"id",P),A.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),A.setAttributeNS(null,"cx",W[0]),A.setAttributeNS(null,"cy",W[1]),A.setAttributeNS(null,"r",ae),A.setAttributeNS(null,"fx",F[0]),A.setAttributeNS(null,"fy",F[1]),A.setAttributeNS(null,"fr",U);break;default:throw new Error(`Unknown RadialAxial type: ${S[1]}`)}for(let T of D){let O=this.svgFactory.createElement("svg:stop");O.setAttributeNS(null,"offset",T[0]),O.setAttributeNS(null,"stop-color",T[1]),A.append(O)}return this.defs.append(A),`url(#${P})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${S[0]}`)}}setDash(S,P){this.current.dashArray=S,this.current.dashPhase=P}constructPath(S,P){let D=this.current,A=D.x,T=D.y,O=[],F=0;for(let W of S)switch(W|0){case i.OPS.rectangle:A=P[F++],T=P[F++];let U=P[F++],ae=P[F++],he=A+U,oe=T+ae;O.push("M",m(A),m(T),"L",m(he),m(T),"L",m(he),m(oe),"L",m(A),m(oe),"Z");break;case i.OPS.moveTo:A=P[F++],T=P[F++],O.push("M",m(A),m(T));break;case i.OPS.lineTo:A=P[F++],T=P[F++],O.push("L",m(A),m(T));break;case i.OPS.curveTo:A=P[F+4],T=P[F+5],O.push("C",m(P[F]),m(P[F+1]),m(P[F+2]),m(P[F+3]),m(A),m(T)),F+=6;break;case i.OPS.curveTo2:O.push("C",m(A),m(T),m(P[F]),m(P[F+1]),m(P[F+2]),m(P[F+3])),A=P[F+2],T=P[F+3],F+=4;break;case i.OPS.curveTo3:A=P[F+2],T=P[F+3],O.push("C",m(P[F]),m(P[F+1]),m(A),m(T),m(A),m(T)),F+=4;break;case i.OPS.closePath:O.push("Z");break}O=O.join(" "),D.path&&S.length>0&&S[0]!==i.OPS.rectangle&&S[0]!==i.OPS.moveTo?O=D.path.getAttributeNS(null,"d")+O:(D.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(D.path)),D.path.setAttributeNS(null,"d",O),D.path.setAttributeNS(null,"fill","none"),D.element=D.path,D.setCurrentPoint(A,T)}endPath(){let S=this.current;if(S.path=null,!this.pendingClip)return;if(!S.element){this.pendingClip=null;return}let P=`clippath${_++}`,D=this.svgFactory.createElement("svg:clipPath");D.setAttributeNS(null,"id",P),D.setAttributeNS(null,"transform",g(this.transformMatrix));let A=S.element.cloneNode(!0);if(this.pendingClip==="evenodd"?A.setAttributeNS(null,"clip-rule","evenodd"):A.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,D.append(A),this.defs.append(D),S.activeClipUrl){S.clipGroup=null;for(let T of this.extraStack)T.clipGroup=null;D.setAttributeNS(null,"clip-path",S.activeClipUrl)}S.activeClipUrl=`url(#${P})`,this.tgrp=null}clip(S){this.pendingClip=S}closePath(){let S=this.current;if(S.path){let P=`${S.path.getAttributeNS(null,"d")}Z`;S.path.setAttributeNS(null,"d",P)}}setLeading(S){this.current.leading=-S}setTextRise(S){this.current.textRise=S}setTextRenderingMode(S){this.current.textRenderingMode=S}setHScale(S){this.current.textHScale=S/100}setRenderingIntent(S){}setFlatness(S){}setGState(S){for(let[P,D]of S)switch(P){case"LW":this.setLineWidth(D);break;case"LC":this.setLineCap(D);break;case"LJ":this.setLineJoin(D);break;case"ML":this.setMiterLimit(D);break;case"D":this.setDash(D[0],D[1]);break;case"RI":this.setRenderingIntent(D);break;case"FL":this.setFlatness(D);break;case"Font":this.setFont(D);break;case"CA":this.setStrokeAlpha(D);break;case"ca":this.setFillAlpha(D);break;default:(0,i.warn)(`Unimplemented graphic state operator ${P}`);break}}fill(){let S=this.current;S.element&&(S.element.setAttributeNS(null,"fill",S.fillColor),S.element.setAttributeNS(null,"fill-opacity",S.fillAlpha),this.endPath())}stroke(){let S=this.current;S.element&&(this._setStrokeAttributes(S.element),S.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(S,P=1){let D=this.current,A=D.dashArray;P!==1&&A.length>0&&(A=A.map(function(T){return P*T})),S.setAttributeNS(null,"stroke",D.strokeColor),S.setAttributeNS(null,"stroke-opacity",D.strokeAlpha),S.setAttributeNS(null,"stroke-miterlimit",m(D.miterLimit)),S.setAttributeNS(null,"stroke-linecap",D.lineCap),S.setAttributeNS(null,"stroke-linejoin",D.lineJoin),S.setAttributeNS(null,"stroke-width",m(P*D.lineWidth)+"px"),S.setAttributeNS(null,"stroke-dasharray",A.map(m).join(" ")),S.setAttributeNS(null,"stroke-dashoffset",m(P*D.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){let S=this.svgFactory.createElement("svg:rect");S.setAttributeNS(null,"x","0"),S.setAttributeNS(null,"y","0"),S.setAttributeNS(null,"width","1px"),S.setAttributeNS(null,"height","1px"),S.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(S)}paintImageXObject(S){let P=this.getObject(S);if(!P){(0,i.warn)(`Dependent image with object ID ${S} is not ready yet`);return}this.paintInlineImageXObject(P)}paintInlineImageXObject(S,P){let D=S.width,A=S.height,T=h(S,this.forceDataSchema,!!P),O=this.svgFactory.createElement("svg:rect");O.setAttributeNS(null,"x","0"),O.setAttributeNS(null,"y","0"),O.setAttributeNS(null,"width",m(D)),O.setAttributeNS(null,"height",m(A)),this.current.element=O,this.clip("nonzero");let F=this.svgFactory.createElement("svg:image");F.setAttributeNS(c,"xlink:href",T),F.setAttributeNS(null,"x","0"),F.setAttributeNS(null,"y",m(-A)),F.setAttributeNS(null,"width",m(D)+"px"),F.setAttributeNS(null,"height",m(A)+"px"),F.setAttributeNS(null,"transform",`scale(${m(1/D)} ${m(-1/A)})`),P?P.append(F):this._ensureTransformGroup().append(F)}paintImageMaskXObject(S){let P=this.getObject(S.data,S);if(P.bitmap){(0,i.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}let D=this.current,A=P.width,T=P.height,O=D.fillColor;D.maskId=`mask${E++}`;let F=this.svgFactory.createElement("svg:mask");F.setAttributeNS(null,"id",D.maskId);let W=this.svgFactory.createElement("svg:rect");W.setAttributeNS(null,"x","0"),W.setAttributeNS(null,"y","0"),W.setAttributeNS(null,"width",m(A)),W.setAttributeNS(null,"height",m(T)),W.setAttributeNS(null,"fill",O),W.setAttributeNS(null,"mask",`url(#${D.maskId})`),this.defs.append(F),this._ensureTransformGroup().append(W),this.paintInlineImageXObject(P,F)}paintFormXObjectBegin(S,P){if(Array.isArray(S)&&S.length===6&&this.transform(S[0],S[1],S[2],S[3],S[4],S[5]),P){let D=P[2]-P[0],A=P[3]-P[1],T=this.svgFactory.createElement("svg:rect");T.setAttributeNS(null,"x",P[0]),T.setAttributeNS(null,"y",P[1]),T.setAttributeNS(null,"width",m(D)),T.setAttributeNS(null,"height",m(A)),this.current.element=T,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(S){let P=this.svgFactory.create(S.width,S.height),D=this.svgFactory.createElement("svg:defs");P.append(D),this.defs=D;let A=this.svgFactory.createElement("svg:g");return A.setAttributeNS(null,"transform",g(S.transform)),P.append(A),this.svg=A,P}_ensureClipGroup(){if(!this.current.clipGroup){let S=this.svgFactory.createElement("svg:g");S.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(S),this.current.clipGroup=S}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",g(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=V}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class n{static textContent(i){let s=[],o={items:s,styles:Object.create(null)};function c(l){if(!l)return;let u=null,d=l.name;if(d==="#text")u=l.value;else if(n.shouldBuildText(d))l?.attributes?.textContent?u=l.attributes.textContent:l.value&&(u=l.value);else return;if(u!==null&&s.push({str:u}),!!l.children)for(let h of l.children)c(h)}return c(i),o}static shouldBuildText(i){return!(i==="textarea"||i==="input"||i==="option"||i==="select")}}e.XfaText=n}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=g,e.updateTextLayer=_;var r=n(1),i=n(6);let s=1e5,o=30,c=.8,l=new Map;function u(E,C){let V;if(C&&r.FeatureTest.isOffscreenCanvasSupported)V=new OffscreenCanvas(E,E).getContext("2d",{alpha:!1});else{let k=document.createElement("canvas");k.width=k.height=E,V=k.getContext("2d",{alpha:!1})}return V}function d(E,C){let V=l.get(E);if(V)return V;let k=u(o,C);k.font=`${o}px ${E}`;let S=k.measureText(""),P=S.fontBoundingBoxAscent,D=Math.abs(S.fontBoundingBoxDescent);if(P){let T=P/(P+D);return l.set(E,T),k.canvas.width=k.canvas.height=0,T}k.strokeStyle="red",k.clearRect(0,0,o,o),k.strokeText("g",0,0);let A=k.getImageData(0,0,o,o).data;D=0;for(let T=A.length-1-3;T>=0;T-=4)if(A[T]>0){D=Math.ceil(T/4/o);break}k.clearRect(0,0,o,o),k.strokeText("A",0,o),A=k.getImageData(0,0,o,o).data,P=0;for(let T=0,O=A.length;T<O;T+=4)if(A[T]>0){P=o-Math.floor(T/4/o);break}if(k.canvas.width=k.canvas.height=0,P){let T=P/(P+D);return l.set(E,T),T}return l.set(E,c),c}function h(E,C,V){let k=document.createElement("span"),S={angle:0,canvasWidth:0,hasText:C.str!=="",hasEOL:C.hasEOL,fontSize:0};E._textDivs.push(k);let P=r.Util.transform(E._transform,C.transform),D=Math.atan2(P[1],P[0]),A=V[C.fontName];A.vertical&&(D+=Math.PI/2);let T=Math.hypot(P[2],P[3]),O=T*d(A.fontFamily,E._isOffscreenCanvasSupported),F,W;D===0?(F=P[4],W=P[5]-O):(F=P[4]+O*Math.sin(D),W=P[5]-O*Math.cos(D));let U="calc(var(--scale-factor)*",ae=k.style;E._container===E._rootContainer?(ae.left=`${(100*F/E._pageWidth).toFixed(2)}%`,ae.top=`${(100*W/E._pageHeight).toFixed(2)}%`):(ae.left=`${U}${F.toFixed(2)}px)`,ae.top=`${U}${W.toFixed(2)}px)`),ae.fontSize=`${U}${T.toFixed(2)}px)`,ae.fontFamily=A.fontFamily,S.fontSize=T,k.setAttribute("role","presentation"),k.textContent=C.str,k.dir=C.dir,E._fontInspectorEnabled&&(k.dataset.fontName=C.fontName),D!==0&&(S.angle=D*(180/Math.PI));let he=!1;if(C.str.length>1)he=!0;else if(C.str!==" "&&C.transform[0]!==C.transform[3]){let oe=Math.abs(C.transform[0]),q=Math.abs(C.transform[3]);oe!==q&&Math.max(oe,q)/Math.min(oe,q)>1.5&&(he=!0)}he&&(S.canvasWidth=A.vertical?C.height:C.width),E._textDivProperties.set(k,S),E._isReadableStream&&E._layoutText(k)}function f(E){let{div:C,scale:V,properties:k,ctx:S,prevFontSize:P,prevFontFamily:D}=E,{style:A}=C,T="";if(k.canvasWidth!==0&&k.hasText){let{fontFamily:O}=A,{canvasWidth:F,fontSize:W}=k;(P!==W||D!==O)&&(S.font=`${W*V}px ${O}`,E.prevFontSize=W,E.prevFontFamily=O);let{width:U}=S.measureText(C.textContent);U>0&&(T=`scaleX(${F*V/U})`)}k.angle!==0&&(T=`rotate(${k.angle}deg) ${T}`),T.length>0&&(A.transform=T)}function p(E){if(E._canceled)return;let C=E._textDivs,V=E._capability;if(C.length>s){V.resolve();return}if(!E._isReadableStream)for(let S of C)E._layoutText(S);V.resolve()}class m{constructor({textContentSource:C,container:V,viewport:k,textDivs:S,textDivProperties:P,textContentItemsStr:D,isOffscreenCanvasSupported:A}){this._textContentSource=C,this._isReadableStream=C instanceof ReadableStream,this._container=this._rootContainer=V,this._textDivs=S||[],this._textContentItemsStr=D||[],this._isOffscreenCanvasSupported=A,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=P||new WeakMap,this._canceled=!1,this._capability=new r.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:k.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:u(0,A)};let{pageWidth:T,pageHeight:O,pageX:F,pageY:W}=k.rawDims;this._transform=[1,0,0,-1,-F,W+O],this._pageWidth=T,this._pageHeight=O,(0,i.setLayerDimensions)(V,k),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new r.AbortException("TextLayer task cancelled."))}_processItems(C,V){for(let k of C){if(k.str===void 0){if(k.type==="beginMarkedContentProps"||k.type==="beginMarkedContent"){let S=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),k.id!==null&&this._container.setAttribute("id",`${k.id}`),S.append(this._container)}else k.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(k.str),h(this,k,V)}}_layoutText(C){let V=this._layoutTextParams.properties=this._textDivProperties.get(C);if(this._layoutTextParams.div=C,f(this._layoutTextParams),V.hasText&&this._container.append(C),V.hasEOL){let k=document.createElement("br");k.setAttribute("role","presentation"),this._container.append(k)}}_render(){let C=new r.PromiseCapability,V=Object.create(null);if(this._isReadableStream){let k=()=>{this._reader.read().then(({value:S,done:P})=>{if(P){C.resolve();return}Object.assign(V,S.styles),this._processItems(S.items,V),k()},C.reject)};this._reader=this._textContentSource.getReader(),k()}else if(this._textContentSource){let{items:k,styles:S}=this._textContentSource;this._processItems(k,S),C.resolve()}else throw new Error('No "textContentSource" parameter specified.');C.promise.then(()=>{V=null,p(this)},this._capability.reject)}}e.TextLayerRenderTask=m;function g(E){!E.textContentSource&&(E.textContent||E.textContentStream)&&((0,i.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),E.textContentSource=E.textContent||E.textContentStream);let{container:C,viewport:V}=E,k=getComputedStyle(C),S=k.getPropertyValue("visibility"),P=parseFloat(k.getPropertyValue("--scale-factor"));S==="visible"&&(!P||Math.abs(P-V.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");let D=new m(E);return D._render(),D}function _({container:E,viewport:C,textDivs:V,textDivProperties:k,isOffscreenCanvasSupported:S,mustRotate:P=!0,mustRescale:D=!0}){if(P&&(0,i.setLayerDimensions)(E,{rotation:C.rotation}),D){let A=u(0,S),O={prevFontSize:null,prevFontFamily:null,div:null,scale:C.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:A};for(let F of V)O.properties=k.get(F),O.div=F,f(O)}}}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var r=n(1),i=n(4),s=n(28),o=n(33),c=n(6),l=n(34);let u=(()=>{class d{#e;#t=!1;#n=null;#r=this.pointerup.bind(this);#a=this.pointerdown.bind(this);#o=new Map;#s=!1;#c=!1;#l=!1;#i;static _initialized=!1;constructor({uiManager:f,pageIndex:p,div:m,accessibilityManager:g,annotationLayer:_,viewport:E,l10n:C}){let V=[s.FreeTextEditor,o.InkEditor,l.StampEditor];if(!d._initialized){d._initialized=!0;for(let k of V)k.initialize(C)}f.registerEditorTypes(V),this.#i=f,this.pageIndex=p,this.div=m,this.#e=g,this.#n=_,this.viewport=E,this.#i.addLayer(this)}get isEmpty(){return this.#o.size===0}updateToolbar(f){this.#i.updateToolbar(f)}updateMode(f=this.#i.getMode()){this.#p(),f===r.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),f!==r.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",f===r.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",f===r.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",f===r.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(f){if(!f&&this.#i.getMode()!==r.AnnotationEditorType.INK)return;if(!f){for(let m of this.#o.values())if(m.isEmpty()){m.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(f){this.#i.setEditingState(f)}addCommands(f){this.#i.addCommands(f)}enable(){this.div.style.pointerEvents="auto";let f=new Set;for(let m of this.#o.values())m.enableEditing(),m.annotationElementId&&f.add(m.annotationElementId);if(!this.#n)return;let p=this.#n.getEditableAnnotations();for(let m of p){if(m.hide(),this.#i.isDeletedAnnotationElement(m.data.id)||f.has(m.data.id))continue;let g=this.deserialize(m);g&&(this.addOrRebuild(g),g.enableEditing())}}disable(){this.#l=!0,this.div.style.pointerEvents="none";let f=new Set;for(let p of this.#o.values()){if(p.disableEditing(),!p.annotationElementId||p.serialize()!==null){f.add(p.annotationElementId);continue}this.getEditableAnnotation(p.annotationElementId)?.show(),p.remove()}if(this.#n){let p=this.#n.getEditableAnnotations();for(let m of p){let{id:g}=m.data;f.has(g)||this.#i.isDeletedAnnotationElement(g)||m.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#l=!1}getEditableAnnotation(f){return this.#n?.getEditableAnnotation(f)||null}setActiveEditor(f){this.#i.getActive()!==f&&this.#i.setActiveEditor(f)}enableClick(){this.div.addEventListener("pointerdown",this.#a),this.div.addEventListener("pointerup",this.#r)}disableClick(){this.div.removeEventListener("pointerdown",this.#a),this.div.removeEventListener("pointerup",this.#r)}attach(f){this.#o.set(f.id,f);let{annotationElementId:p}=f;p&&this.#i.isDeletedAnnotationElement(p)&&this.#i.removeDeletedAnnotationElement(f)}detach(f){this.#o.delete(f.id),this.#e?.removePointerInTextLayer(f.contentDiv),!this.#l&&f.annotationElementId&&this.#i.addDeletedAnnotationElement(f)}remove(f){this.detach(f),this.#i.removeEditor(f),f.div.contains(document.activeElement)&&setTimeout(()=>{this.#i.focusMainContainer()},0),f.div.remove(),f.isAttachedToDOM=!1,this.#c||this.addInkEditorIfNeeded(!1)}changeParent(f){f.parent!==this&&(f.annotationElementId&&(this.#i.addDeletedAnnotationElement(f.annotationElementId),i.AnnotationEditor.deleteAnnotationElement(f),f.annotationElementId=null),this.attach(f),f.parent?.detach(f),f.setParent(this),f.div&&f.isAttachedToDOM&&(f.div.remove(),this.div.append(f.div)))}add(f){if(this.changeParent(f),this.#i.addEditor(f),this.attach(f),!f.isAttachedToDOM){let p=f.render();this.div.append(p),f.isAttachedToDOM=!0}f.fixAndSetPosition(),f.onceAdded(),this.#i.addToAnnotationStorage(f)}moveEditorInDOM(f){if(!f.isAttachedToDOM)return;let{activeElement:p}=document;f.div.contains(p)&&(f._focusEventsAllowed=!1,setTimeout(()=>{f.div.contains(document.activeElement)?f._focusEventsAllowed=!0:(f.div.addEventListener("focusin",()=>{f._focusEventsAllowed=!0},{once:!0}),p.focus())},0)),f._structTreeParentId=this.#e?.moveElementInDOM(this.div,f.div,f.contentDiv,!0)}addOrRebuild(f){f.needsToBeRebuilt()?f.rebuild():this.add(f)}addUndoableEditor(f){let p=()=>f._uiManager.rebuild(f),m=()=>{f.remove()};this.addCommands({cmd:p,undo:m,mustExec:!1})}getNextId(){return this.#i.getId()}#f(f){switch(this.#i.getMode()){case r.AnnotationEditorType.FREETEXT:return new s.FreeTextEditor(f);case r.AnnotationEditorType.INK:return new o.InkEditor(f);case r.AnnotationEditorType.STAMP:return new l.StampEditor(f)}return null}pasteEditor(f,p){this.#i.updateToolbar(f),this.#i.updateMode(f);let{offsetX:m,offsetY:g}=this.#h(),_=this.getNextId(),E=this.#f(ge({parent:this,id:_,x:m,y:g,uiManager:this.#i,isCentered:!0},p));E&&this.add(E)}deserialize(f){switch(f.annotationType??f.annotationEditorType){case r.AnnotationEditorType.FREETEXT:return s.FreeTextEditor.deserialize(f,this,this.#i);case r.AnnotationEditorType.INK:return o.InkEditor.deserialize(f,this,this.#i);case r.AnnotationEditorType.STAMP:return l.StampEditor.deserialize(f,this,this.#i)}return null}#d(f,p){let m=this.getNextId(),g=this.#f({parent:this,id:m,x:f.offsetX,y:f.offsetY,uiManager:this.#i,isCentered:p});return g&&this.add(g),g}#h(){let{x:f,y:p,width:m,height:g}=this.div.getBoundingClientRect(),_=Math.max(0,f),E=Math.max(0,p),C=Math.min(window.innerWidth,f+m),V=Math.min(window.innerHeight,p+g),k=(_+C)/2-f,S=(E+V)/2-p,[P,D]=this.viewport.rotation%180===0?[k,S]:[S,k];return{offsetX:P,offsetY:D}}addNewEditor(){this.#d(this.#h(),!0)}setSelected(f){this.#i.setSelected(f)}toggleSelected(f){this.#i.toggleSelected(f)}isSelected(f){return this.#i.isSelected(f)}unselect(f){this.#i.unselect(f)}pointerup(f){let{isMac:p}=r.FeatureTest.platform;if(!(f.button!==0||f.ctrlKey&&p)&&f.target===this.div&&this.#s){if(this.#s=!1,!this.#t){this.#t=!0;return}if(this.#i.getMode()===r.AnnotationEditorType.STAMP){this.#i.unselectAll();return}this.#d(f,!1)}}pointerdown(f){if(this.#s){this.#s=!1;return}let{isMac:p}=r.FeatureTest.platform;if(f.button!==0||f.ctrlKey&&p||f.target!==this.div)return;this.#s=!0;let m=this.#i.getActive();this.#t=!m||m.isEmpty()}findNewParent(f,p,m){let g=this.#i.findParent(p,m);return g===null||g===this?!1:(g.changeParent(f),!0)}destroy(){this.#i.getActive()?.parent===this&&(this.#i.commitOrRemove(),this.#i.setActiveEditor(null));for(let f of this.#o.values())this.#e?.removePointerInTextLayer(f.contentDiv),f.setParent(null),f.isAttachedToDOM=!1,f.div.remove();this.div=null,this.#o.clear(),this.#i.removeLayer(this)}#p(){this.#c=!0;for(let f of this.#o.values())f.isEmpty()&&f.remove();this.#c=!1}render({viewport:f}){this.viewport=f,(0,c.setLayerDimensions)(this.div,f);for(let p of this.#i.getEditors(this.pageIndex))this.add(p);this.updateMode()}update({viewport:f}){this.#i.commitOrRemove(),this.viewport=f,(0,c.setLayerDimensions)(this.div,{rotation:f.rotation}),this.updateMode()}get pageDimensions(){let{pageWidth:f,pageHeight:p}=this.viewport.rawDims;return[f,p]}}return d})();e.AnnotationEditorLayer=u}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var r=n(1),i=n(5),s=n(4),o=n(29);let c=(()=>{class l extends s.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#r=this.editorDivKeydown.bind(this);#a;#o="";#s=`${this.id}-editor`;#c;#l=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let d=l.prototype,h=m=>m.isEmpty(),f=i.AnnotationEditorUIManager.TRANSLATE_SMALL,p=i.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new i.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],d.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],d.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],d._translateEmpty,{args:[-f,0],checker:h}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],d._translateEmpty,{args:[-p,0],checker:h}],[["ArrowRight","mac+ArrowRight"],d._translateEmpty,{args:[f,0],checker:h}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],d._translateEmpty,{args:[p,0],checker:h}],[["ArrowUp","mac+ArrowUp"],d._translateEmpty,{args:[0,-f],checker:h}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],d._translateEmpty,{args:[0,-p],checker:h}],[["ArrowDown","mac+ArrowDown"],d._translateEmpty,{args:[0,f],checker:h}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],d._translateEmpty,{args:[0,p],checker:h}]]))}static _type="freetext";constructor(d){super(Be(ge({},d),{name:"freeTextEditor"})),this.#a=d.color||l._defaultColor||s.AnnotationEditor._defaultLineColor,this.#c=d.fontSize||l._defaultFontSize}static initialize(d){s.AnnotationEditor.initialize(d,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});let h=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(h.getPropertyValue("--freetext-padding"))}static updateDefaultParams(d,h){switch(d){case r.AnnotationEditorParamsType.FREETEXT_SIZE:l._defaultFontSize=h;break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:l._defaultColor=h;break}}updateParams(d,h){switch(d){case r.AnnotationEditorParamsType.FREETEXT_SIZE:this.#i(h);break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(h);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,l._defaultFontSize],[r.AnnotationEditorParamsType.FREETEXT_COLOR,l._defaultColor||s.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,this.#c],[r.AnnotationEditorParamsType.FREETEXT_COLOR,this.#a]]}#i(d){let h=p=>{this.editorDiv.style.fontSize=`calc(${p}px * var(--scale-factor))`,this.translate(0,-(p-this.#c)*this.parentScale),this.#c=p,this.#h()},f=this.#c;this.addCommands({cmd:()=>{h(d)},undo:()=>{h(f)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(d){let h=this.#a;this.addCommands({cmd:()=>{this.#a=this.editorDiv.style.color=d},undo:()=>{this.#a=this.editorDiv.style.color=h},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(d,h){this._uiManager.translateSelectedEditors(d,h,!0)}getInitialTranslation(){let d=this.parentScale;return[-l._internalPadding*d,-(l._internalPadding+this.#c)*d]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(r.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#r),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#s),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#r),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(d){this._focusEventsAllowed&&(super.focusin(d),d.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#m();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){let d=this.editorDiv.getElementsByTagName("div");if(d.length===0)return this.editorDiv.innerText;let h=[];for(let f of d)h.push(f.innerText.replace(/\r\n?|\n/,""));return h.join(`
`)}#h(){let[d,h]=this.parentDimensions,f;if(this.isAttachedToDOM)f=this.div.getBoundingClientRect();else{let{currentLayer:p,div:m}=this,g=m.style.display;m.style.display="hidden",p.div.append(this.div),f=m.getBoundingClientRect(),m.remove(),m.style.display=g}this.rotation%180===this.parentRotation%180?(this.width=f.width/d,this.height=f.height/h):(this.width=f.height/d,this.height=f.width/h),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let d=this.#o,h=this.#o=this.#d().trimEnd();if(d===h)return;let f=p=>{if(this.#o=p,!p){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{f(h)},undo:()=>{f(d)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(d){this.enterInEditMode()}keydown(d){d.target===this.div&&d.key==="Enter"&&(this.enterInEditMode(),d.preventDefault())}editorDivKeydown(d){l._keyboardManager.exec(this,d)}editorDivFocus(d){this.isEditing=!0}editorDivBlur(d){this.isEditing=!1}editorDivInput(d){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let d,h;this.width&&(d=this.x,h=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#s),this.enableEditing(),s.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(p=>this.editorDiv?.setAttribute("aria-label",p)),s.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(p=>this.editorDiv?.setAttribute("default-content",p)),this.editorDiv.contentEditable=!0;let{style:f}=this.editorDiv;if(f.fontSize=`calc(${this.#c}px * var(--scale-factor))`,f.color=this.#a,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){let[p,m]=this.parentDimensions;if(this.annotationElementId){let{position:g}=this.#l,[_,E]=this.getInitialTranslation();[_,E]=this.pageTranslationToScreen(_,E);let[C,V]=this.pageDimensions,[k,S]=this.pageTranslation,P,D;switch(this.rotation){case 0:P=d+(g[0]-k)/C,D=h+this.height-(g[1]-S)/V;break;case 90:P=d+(g[0]-k)/C,D=h-(g[1]-S)/V,[_,E]=[E,-_];break;case 180:P=d-this.width+(g[0]-k)/C,D=h-(g[1]-S)/V,[_,E]=[-_,-E];break;case 270:P=d+(g[0]-k-this.height*V)/C,D=h+(g[1]-S-this.width*C)/V,[_,E]=[-E,_];break}this.setAt(P*p,D*m,_,E)}else this.setAt(d*p,h*m,this.width*p,this.height*m);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#o)for(let d of this.#o.split(`
`)){let h=document.createElement("div");h.append(d?document.createTextNode(d):document.createElement("br")),this.editorDiv.append(h)}}get contentDiv(){return this.editorDiv}static deserialize(d,h,f){let p=null;if(d instanceof o.FreeTextAnnotationElement){let{data:{defaultAppearanceData:{fontSize:g,fontColor:_},rect:E,rotation:C,id:V},textContent:k,textPosition:S,parent:{page:{pageNumber:P}}}=d;if(!k||k.length===0)return null;p=d={annotationType:r.AnnotationEditorType.FREETEXT,color:Array.from(_),fontSize:g,value:k.join(`
`),position:S,pageIndex:P-1,rect:E,rotation:C,id:V,deleted:!1}}let m=super.deserialize(d,h,f);return m.#c=d.fontSize,m.#a=r.Util.makeHexColor(...d.color),m.#o=d.value,m.annotationElementId=d.id||null,m.#l=p,m}serialize(d=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};let h=l._internalPadding*this.parentScale,f=this.getRect(h,h),p=s.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#a),m={annotationType:r.AnnotationEditorType.FREETEXT,color:p,fontSize:this.#c,value:this.#o,pageIndex:this.pageIndex,rect:f,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return d?m:this.annotationElementId&&!this.#y(m)?null:(m.id=this.annotationElementId,m)}#y(d){let{value:h,fontSize:f,color:p,rect:m,pageIndex:g}=this.#l;return d.value!==h||d.fontSize!==f||d.rect.some((_,E)=>Math.abs(_-m[E])>=1)||d.color.some((_,E)=>_!==p[E])||d.pageIndex!==g}#m(d=!1){if(!this.annotationElementId)return;if(this.#h(),!d&&(this.width===0||this.height===0)){setTimeout(()=>this.#m(!0),0);return}let h=l._internalPadding*this.parentScale;this.#l.rect=this.getRect(h,h)}}return l})();e.FreeTextEditor=c}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var r=n(1),i=n(6),s=n(3),o=n(30),c=n(31),l=n(32);let u=1e3,d=9,h=new WeakSet;function f(j){return{width:j[2]-j[0],height:j[3]-j[1]}}class p{static create(v){switch(v.data.annotationType){case r.AnnotationType.LINK:return new g(v);case r.AnnotationType.TEXT:return new _(v);case r.AnnotationType.WIDGET:switch(v.data.fieldType){case"Tx":return new C(v);case"Btn":return v.data.radioButton?new S(v):v.data.checkBox?new k(v):new P(v);case"Ch":return new D(v);case"Sig":return new V(v)}return new E(v);case r.AnnotationType.POPUP:return new A(v);case r.AnnotationType.FREETEXT:return new O(v);case r.AnnotationType.LINE:return new F(v);case r.AnnotationType.SQUARE:return new W(v);case r.AnnotationType.CIRCLE:return new U(v);case r.AnnotationType.POLYLINE:return new ae(v);case r.AnnotationType.CARET:return new oe(v);case r.AnnotationType.INK:return new q(v);case r.AnnotationType.POLYGON:return new he(v);case r.AnnotationType.HIGHLIGHT:return new x(v);case r.AnnotationType.UNDERLINE:return new w(v);case r.AnnotationType.SQUIGGLY:return new I(v);case r.AnnotationType.STRIKEOUT:return new M(v);case r.AnnotationType.STAMP:return new H(v);case r.AnnotationType.FILEATTACHMENT:return new $(v);default:return new m(v)}}}class m{#e=!1;constructor(v,{isRenderable:R=!1,ignoreBorder:N=!1,createQuadrilaterals:B=!1}={}){this.isRenderable=R,this.data=v.data,this.layer=v.layer,this.linkService=v.linkService,this.downloadManager=v.downloadManager,this.imageResourcesPath=v.imageResourcesPath,this.renderForms=v.renderForms,this.svgFactory=v.svgFactory,this.annotationStorage=v.annotationStorage,this.enableScripting=v.enableScripting,this.hasJSActions=v.hasJSActions,this._fieldObjects=v.fieldObjects,this.parent=v.parent,R&&(this.container=this._createContainer(N)),B&&this._createQuadrilaterals()}static _hasPopupData({titleObj:v,contentsObj:R,richText:N}){return!!(v?.str||R?.str||N?.str)}get hasPopupData(){return m._hasPopupData(this.data)}_createContainer(v){let{data:R,parent:{page:N,viewport:B}}=this,z=document.createElement("section");z.setAttribute("data-annotation-id",R.id),this instanceof E||(z.tabIndex=u),z.style.zIndex=this.parent.zIndex++,this.data.popupRef&&z.setAttribute("aria-haspopup","dialog"),R.noRotate&&z.classList.add("norotate");let{pageWidth:K,pageHeight:Y,pageX:J,pageY:de}=B.rawDims;if(!R.rect||this instanceof A){let{rotation:ce}=R;return!R.hasOwnCanvas&&ce!==0&&this.setRotation(ce,z),z}let{width:ee,height:re}=f(R.rect),ie=r.Util.normalizeRect([R.rect[0],N.view[3]-R.rect[1]+N.view[1],R.rect[2],N.view[3]-R.rect[3]+N.view[1]]);if(!v&&R.borderStyle.width>0){z.style.borderWidth=`${R.borderStyle.width}px`;let ce=R.borderStyle.horizontalCornerRadius,pe=R.borderStyle.verticalCornerRadius;if(ce>0||pe>0){let be=`calc(${ce}px * var(--scale-factor)) / calc(${pe}px * var(--scale-factor))`;z.style.borderRadius=be}else if(this instanceof S){let be=`calc(${ee}px * var(--scale-factor)) / calc(${re}px * var(--scale-factor))`;z.style.borderRadius=be}switch(R.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:z.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:z.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:z.style.borderBottomStyle="solid";break;default:break}let ve=R.borderColor||null;ve?(this.#e=!0,z.style.borderColor=r.Util.makeHexColor(ve[0]|0,ve[1]|0,ve[2]|0)):z.style.borderWidth=0}z.style.left=`${100*(ie[0]-J)/K}%`,z.style.top=`${100*(ie[1]-de)/Y}%`;let{rotation:se}=R;return R.hasOwnCanvas||se===0?(z.style.width=`${100*ee/K}%`,z.style.height=`${100*re/Y}%`):this.setRotation(se,z),z}setRotation(v,R=this.container){if(!this.data.rect)return;let{pageWidth:N,pageHeight:B}=this.parent.viewport.rawDims,{width:z,height:K}=f(this.data.rect),Y,J;v%180===0?(Y=100*z/N,J=100*K/B):(Y=100*K/N,J=100*z/B),R.style.width=`${Y}%`,R.style.height=`${J}%`,R.setAttribute("data-main-rotation",(360-v)%360)}get _commonActions(){let v=(R,N,B)=>{let z=B.detail[R],K=z[0],Y=z.slice(1);B.target.style[N]=o.ColorConverters[`${K}_HTML`](Y),this.annotationStorage.setValue(this.data.id,{[N]:o.ColorConverters[`${K}_rgb`](Y)})};return(0,r.shadow)(this,"_commonActions",{display:R=>{let{display:N}=R.detail,B=N%2===1;this.container.style.visibility=B?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:B,noPrint:N===1||N===2})},print:R=>{this.annotationStorage.setValue(this.data.id,{noPrint:!R.detail.print})},hidden:R=>{let{hidden:N}=R.detail;this.container.style.visibility=N?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:N,noView:N})},focus:R=>{setTimeout(()=>R.target.focus({preventScroll:!1}),0)},userName:R=>{R.target.title=R.detail.userName},readonly:R=>{R.target.disabled=R.detail.readonly},required:R=>{this._setRequired(R.target,R.detail.required)},bgColor:R=>{v("bgColor","backgroundColor",R)},fillColor:R=>{v("fillColor","backgroundColor",R)},fgColor:R=>{v("fgColor","color",R)},textColor:R=>{v("textColor","color",R)},borderColor:R=>{v("borderColor","borderColor",R)},strokeColor:R=>{v("strokeColor","borderColor",R)},rotation:R=>{let N=R.detail.rotation;this.setRotation(N),this.annotationStorage.setValue(this.data.id,{rotation:N})}})}_dispatchEventFromSandbox(v,R){let N=this._commonActions;for(let B of Object.keys(R.detail))(v[B]||N[B])?.(R)}_setDefaultPropertiesFromJS(v){if(!this.enableScripting)return;let R=this.annotationStorage.getRawValue(this.data.id);if(!R)return;let N=this._commonActions;for(let[B,z]of Object.entries(R)){let K=N[B];if(K){let Y={detail:{[B]:z},target:v};K(Y),delete R[B]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:v}=this.data;if(!v)return;let[R,N,B,z]=this.data.rect;if(v.length===1){let[,{x:pe,y:ve},{x:be,y:Te}]=v[0];if(B===pe&&z===ve&&R===be&&N===Te)return}let{style:K}=this.container,Y;if(this.#e){let{borderColor:pe,borderWidth:ve}=K;K.borderWidth=0,Y=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${pe}" stroke-width="${ve}">`],this.container.classList.add("hasBorder")}let J=B-R,de=z-N,{svgFactory:ee}=this,re=ee.createElement("svg");re.classList.add("quadrilateralsContainer"),re.setAttribute("width",0),re.setAttribute("height",0);let ie=ee.createElement("defs");re.append(ie);let se=ee.createElement("clipPath"),ce=`clippath_${this.data.id}`;se.setAttribute("id",ce),se.setAttribute("clipPathUnits","objectBoundingBox"),ie.append(se);for(let[,{x:pe,y:ve},{x:be,y:Te}]of v){let xe=ee.createElement("rect"),$e=(be-R)/J,Rt=(z-ve)/de,Ue=(pe-be)/J,it=(ve-Te)/de;xe.setAttribute("x",$e),xe.setAttribute("y",Rt),xe.setAttribute("width",Ue),xe.setAttribute("height",it),se.append(xe),Y?.push(`<rect vector-effect="non-scaling-stroke" x="${$e}" y="${Rt}" width="${Ue}" height="${it}"/>`)}this.#e&&(Y.push("</g></svg>')"),K.backgroundImage=Y.join("")),this.container.append(re),this.container.style.clipPath=`url(#${ce})`}_createPopup(){let{container:v,data:R}=this;v.setAttribute("aria-haspopup","dialog");let N=new A({data:{color:R.color,titleObj:R.titleObj,modificationDate:R.modificationDate,contentsObj:R.contentsObj,richText:R.richText,parentRect:R.rect,borderStyle:0,id:`popup_${R.id}`,rotation:R.rotation},parent:this.parent,elements:[this]});this.parent.div.append(N.render())}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(v,R=null){let N=[];if(this._fieldObjects){let B=this._fieldObjects[v];if(B)for(let{page:z,id:K,exportValues:Y}of B){if(z===-1||K===R)continue;let J=typeof Y=="string"?Y:null,de=document.querySelector(`[data-element-id="${K}"]`);if(de&&!h.has(de)){(0,r.warn)(`_getElementsByName - element not allowed: ${K}`);continue}N.push({id:K,exportValue:J,domElement:de})}return N}for(let B of document.getElementsByName(v)){let{exportValue:z}=B,K=B.getAttribute("data-element-id");K!==R&&h.has(B)&&N.push({id:K,exportValue:z,domElement:B})}return N}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let v=this.getElementsToTriggerPopup();if(Array.isArray(v))for(let R of v)R.classList.add("highlightArea");else v.classList.add("highlightArea")}_editOnDoubleClick(){let{annotationEditorType:v,data:{id:R}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:v,editId:R})})}}class g extends m{constructor(v,R=null){super(v,{isRenderable:!0,ignoreBorder:!!R?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=v.data.isTooltipOnly}render(){let{data:v,linkService:R}=this,N=document.createElement("a");N.setAttribute("data-element-id",v.id);let B=!1;return v.url?(R.addLinkAttributes(N,v.url,v.newWindow),B=!0):v.action?(this._bindNamedAction(N,v.action),B=!0):v.attachment?(this._bindAttachment(N,v.attachment),B=!0):v.setOCGState?(this.#t(N,v.setOCGState),B=!0):v.dest?(this._bindLink(N,v.dest),B=!0):(v.actions&&(v.actions.Action||v.actions["Mouse Up"]||v.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(N,v),B=!0),v.resetForm?(this._bindResetFormAction(N,v.resetForm),B=!0):this.isTooltipOnly&&!B&&(this._bindLink(N,""),B=!0)),this.container.classList.add("linkAnnotation"),B&&this.container.append(N),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(v,R){v.href=this.linkService.getDestinationHash(R),v.onclick=()=>(R&&this.linkService.goToDestination(R),!1),(R||R==="")&&this.#e()}_bindNamedAction(v,R){v.href=this.linkService.getAnchorUrl(""),v.onclick=()=>(this.linkService.executeNamedAction(R),!1),this.#e()}_bindAttachment(v,R){v.href=this.linkService.getAnchorUrl(""),v.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,R.content,R.filename),!1),this.#e()}#t(v,R){v.href=this.linkService.getAnchorUrl(""),v.onclick=()=>(this.linkService.executeSetOCGState(R),!1),this.#e()}_bindJSAction(v,R){v.href=this.linkService.getAnchorUrl("");let N=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let B of Object.keys(R.actions)){let z=N.get(B);z&&(v[z]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R.id,name:B}}),!1))}v.onclick||(v.onclick=()=>!1),this.#e()}_bindResetFormAction(v,R){let N=v.onclick;if(N||(v.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),N||(v.onclick=()=>!1);return}v.onclick=()=>{N?.();let{fields:B,refs:z,include:K}=R,Y=[];if(B.length!==0||z.length!==0){let ee=new Set(z);for(let re of B){let ie=this._fieldObjects[re]||[];for(let{id:se}of ie)ee.add(se)}for(let re of Object.values(this._fieldObjects))for(let ie of re)ee.has(ie.id)===K&&Y.push(ie)}else for(let ee of Object.values(this._fieldObjects))Y.push(...ee);let J=this.annotationStorage,de=[];for(let ee of Y){let{id:re}=ee;switch(de.push(re),ee.type){case"text":{let se=ee.defaultValue||"";J.setValue(re,{value:se});break}case"checkbox":case"radiobutton":{let se=ee.defaultValue===ee.exportValues;J.setValue(re,{value:se});break}case"combobox":case"listbox":{let se=ee.defaultValue||"";J.setValue(re,{value:se});break}default:continue}let ie=document.querySelector(`[data-element-id="${re}"]`);if(ie){if(!h.has(ie)){(0,r.warn)(`_bindResetFormAction - element not allowed: ${re}`);continue}}else continue;ie.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:de,name:"ResetForm"}}),!1}}}class _ extends m{constructor(v){super(v,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let v=document.createElement("img");return v.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",v.alt="[{{type}} Annotation]",v.dataset.l10nId="text_annotation_type",v.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(v),this.container}}class E extends m{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(v){this.data.hasOwnCanvas&&(v.previousSibling?.nodeName==="CANVAS"&&(v.previousSibling.hidden=!0),v.hidden=!1)}_getKeyModifier(v){let{isWin:R,isMac:N}=r.FeatureTest.platform;return R&&v.ctrlKey||N&&v.metaKey}_setEventListener(v,R,N,B,z){N.includes("mouse")?v.addEventListener(N,K=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:B,value:z(K),shift:K.shiftKey,modifier:this._getKeyModifier(K)}})}):v.addEventListener(N,K=>{if(N==="blur"){if(!R.focused||!K.relatedTarget)return;R.focused=!1}else if(N==="focus"){if(R.focused)return;R.focused=!0}z&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:B,value:z(K)}})})}_setEventListeners(v,R,N,B){for(let[z,K]of N)(K==="Action"||this.data.actions?.[K])&&((K==="Focus"||K==="Blur")&&(R||={focused:!1}),this._setEventListener(v,R,z,K,B),K==="Focus"&&!this.data.actions?.Blur?this._setEventListener(v,R,"blur","Blur",null):K==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(v,R,"focus","Focus",null))}_setBackgroundColor(v){let R=this.data.backgroundColor||null;v.style.backgroundColor=R===null?"transparent":r.Util.makeHexColor(R[0],R[1],R[2])}_setTextStyle(v){let R=["left","center","right"],{fontColor:N}=this.data.defaultAppearanceData,B=this.data.defaultAppearanceData.fontSize||d,z=v.style,K,Y=2,J=de=>Math.round(10*de)/10;if(this.data.multiLine){let de=Math.abs(this.data.rect[3]-this.data.rect[1]-Y),ee=Math.round(de/(r.LINE_FACTOR*B))||1,re=de/ee;K=Math.min(B,J(re/r.LINE_FACTOR))}else{let de=Math.abs(this.data.rect[3]-this.data.rect[1]-Y);K=Math.min(B,J(de/r.LINE_FACTOR))}z.fontSize=`calc(${K}px * var(--scale-factor))`,z.color=r.Util.makeHexColor(N[0],N[1],N[2]),this.data.textAlignment!==null&&(z.textAlign=R[this.data.textAlignment])}_setRequired(v,R){R?v.setAttribute("required",!0):v.removeAttribute("required"),v.setAttribute("aria-required",R)}}class C extends E{constructor(v){let R=v.renderForms||!v.data.hasAppearance&&!!v.data.fieldValue;super(v,{isRenderable:R})}setPropertyOnSiblings(v,R,N,B){let z=this.annotationStorage;for(let K of this._getElementsByName(v.name,v.id))K.domElement&&(K.domElement[R]=N),z.setValue(K.id,{[B]:N})}render(){let v=this.annotationStorage,R=this.data.id;this.container.classList.add("textWidgetAnnotation");let N=null;if(this.renderForms){let B=v.getValue(R,{value:this.data.fieldValue}),z=B.value||"",K=v.getValue(R,{charLimit:this.data.maxLen}).charLimit;K&&z.length>K&&(z=z.slice(0,K));let Y=B.formattedValue||this.data.textContent?.join(`
`)||null;Y&&this.data.comb&&(Y=Y.replaceAll(/\s+/g,""));let J={userValue:z,formattedValue:Y,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(N=document.createElement("textarea"),N.textContent=Y??z,this.data.doNotScroll&&(N.style.overflowY="hidden")):(N=document.createElement("input"),N.type="text",N.setAttribute("value",Y??z),this.data.doNotScroll&&(N.style.overflowX="hidden")),this.data.hasOwnCanvas&&(N.hidden=!0),h.add(N),N.setAttribute("data-element-id",R),N.disabled=this.data.readOnly,N.name=this.data.fieldName,N.tabIndex=u,this._setRequired(N,this.data.required),K&&(N.maxLength=K),N.addEventListener("input",ee=>{v.setValue(R,{value:ee.target.value}),this.setPropertyOnSiblings(N,"value",ee.target.value,"value"),J.formattedValue=null}),N.addEventListener("resetform",ee=>{let re=this.data.defaultFieldValue??"";N.value=J.userValue=re,J.formattedValue=null});let de=ee=>{let{formattedValue:re}=J;re!=null&&(ee.target.value=re),ee.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){N.addEventListener("focus",re=>{if(J.focused)return;let{target:ie}=re;J.userValue&&(ie.value=J.userValue),J.lastCommittedValue=ie.value,J.commitKey=1,J.focused=!0}),N.addEventListener("updatefromsandbox",re=>{this.showElementAndHideCanvas(re.target);let ie={value(se){J.userValue=se.detail.value??"",v.setValue(R,{value:J.userValue.toString()}),se.target.value=J.userValue},formattedValue(se){let{formattedValue:ce}=se.detail;J.formattedValue=ce,ce!=null&&se.target!==document.activeElement&&(se.target.value=ce),v.setValue(R,{formattedValue:ce})},selRange(se){se.target.setSelectionRange(...se.detail.selRange)},charLimit:se=>{let{charLimit:ce}=se.detail,{target:pe}=se;if(ce===0){pe.removeAttribute("maxLength");return}pe.setAttribute("maxLength",ce);let ve=J.userValue;!ve||ve.length<=ce||(ve=ve.slice(0,ce),pe.value=J.userValue=ve,v.setValue(R,{value:ve}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:ve,willCommit:!0,commitKey:1,selStart:pe.selectionStart,selEnd:pe.selectionEnd}}))}};this._dispatchEventFromSandbox(ie,re)}),N.addEventListener("keydown",re=>{J.commitKey=1;let ie=-1;if(re.key==="Escape"?ie=0:re.key==="Enter"&&!this.data.multiLine?ie=2:re.key==="Tab"&&(J.commitKey=3),ie===-1)return;let{value:se}=re.target;J.lastCommittedValue!==se&&(J.lastCommittedValue=se,J.userValue=se,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:se,willCommit:!0,commitKey:ie,selStart:re.target.selectionStart,selEnd:re.target.selectionEnd}}))});let ee=de;de=null,N.addEventListener("blur",re=>{if(!J.focused||!re.relatedTarget)return;J.focused=!1;let{value:ie}=re.target;J.userValue=ie,J.lastCommittedValue!==ie&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:ie,willCommit:!0,commitKey:J.commitKey,selStart:re.target.selectionStart,selEnd:re.target.selectionEnd}}),ee(re)}),this.data.actions?.Keystroke&&N.addEventListener("beforeinput",re=>{J.lastCommittedValue=null;let{data:ie,target:se}=re,{value:ce,selectionStart:pe,selectionEnd:ve}=se,be=pe,Te=ve;switch(re.inputType){case"deleteWordBackward":{let xe=ce.substring(0,pe).match(/\w*[^\w]*$/);xe&&(be-=xe[0].length);break}case"deleteWordForward":{let xe=ce.substring(pe).match(/^[^\w]*\w*/);xe&&(Te+=xe[0].length);break}case"deleteContentBackward":pe===ve&&(be-=1);break;case"deleteContentForward":pe===ve&&(Te+=1);break}re.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:ce,change:ie||"",willCommit:!1,selStart:be,selEnd:Te}})}),this._setEventListeners(N,J,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],re=>re.target.value)}if(de&&N.addEventListener("blur",de),this.data.comb){let re=(this.data.rect[2]-this.data.rect[0])/K;N.classList.add("comb"),N.style.letterSpacing=`calc(${re}px * var(--scale-factor) - 1ch)`}}else N=document.createElement("div"),N.textContent=this.data.fieldValue,N.style.verticalAlign="middle",N.style.display="table-cell";return this._setTextStyle(N),this._setBackgroundColor(N),this._setDefaultPropertiesFromJS(N),this.container.append(N),this.container}}class V extends E{constructor(v){super(v,{isRenderable:!!v.data.hasOwnCanvas})}}class k extends E{constructor(v){super(v,{isRenderable:v.renderForms})}render(){let v=this.annotationStorage,R=this.data,N=R.id,B=v.getValue(N,{value:R.exportValue===R.fieldValue}).value;typeof B=="string"&&(B=B!=="Off",v.setValue(N,{value:B})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let z=document.createElement("input");return h.add(z),z.setAttribute("data-element-id",N),z.disabled=R.readOnly,this._setRequired(z,this.data.required),z.type="checkbox",z.name=R.fieldName,B&&z.setAttribute("checked",!0),z.setAttribute("exportValue",R.exportValue),z.tabIndex=u,z.addEventListener("change",K=>{let{name:Y,checked:J}=K.target;for(let de of this._getElementsByName(Y,N)){let ee=J&&de.exportValue===R.exportValue;de.domElement&&(de.domElement.checked=ee),v.setValue(de.id,{value:ee})}v.setValue(N,{value:J})}),z.addEventListener("resetform",K=>{let Y=R.defaultFieldValue||"Off";K.target.checked=Y===R.exportValue}),this.enableScripting&&this.hasJSActions&&(z.addEventListener("updatefromsandbox",K=>{let Y={value(J){J.target.checked=J.detail.value!=="Off",v.setValue(N,{value:J.target.checked})}};this._dispatchEventFromSandbox(Y,K)}),this._setEventListeners(z,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],K=>K.target.checked)),this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class S extends E{constructor(v){super(v,{isRenderable:v.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let v=this.annotationStorage,R=this.data,N=R.id,B=v.getValue(N,{value:R.fieldValue===R.buttonValue}).value;typeof B=="string"&&(B=B!==R.buttonValue,v.setValue(N,{value:B}));let z=document.createElement("input");if(h.add(z),z.setAttribute("data-element-id",N),z.disabled=R.readOnly,this._setRequired(z,this.data.required),z.type="radio",z.name=R.fieldName,B&&z.setAttribute("checked",!0),z.tabIndex=u,z.addEventListener("change",K=>{let{name:Y,checked:J}=K.target;for(let de of this._getElementsByName(Y,N))v.setValue(de.id,{value:!1});v.setValue(N,{value:J})}),z.addEventListener("resetform",K=>{let Y=R.defaultFieldValue;K.target.checked=Y!=null&&Y===R.buttonValue}),this.enableScripting&&this.hasJSActions){let K=R.buttonValue;z.addEventListener("updatefromsandbox",Y=>{let J={value:de=>{let ee=K===de.detail.value;for(let re of this._getElementsByName(de.target.name)){let ie=ee&&re.id===N;re.domElement&&(re.domElement.checked=ie),v.setValue(re.id,{value:ie})}}};this._dispatchEventFromSandbox(J,Y)}),this._setEventListeners(z,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Y=>Y.target.checked)}return this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class P extends g{constructor(v){super(v,{ignoreBorder:v.data.hasAppearance})}render(){let v=super.render();v.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(v.title=this.data.alternativeText);let R=v.lastChild;return this.enableScripting&&this.hasJSActions&&R&&(this._setDefaultPropertiesFromJS(R),R.addEventListener("updatefromsandbox",N=>{this._dispatchEventFromSandbox({},N)})),v}}class D extends E{constructor(v){super(v,{isRenderable:v.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let v=this.annotationStorage,R=this.data.id,N=v.getValue(R,{value:this.data.fieldValue}),B=document.createElement("select");h.add(B),B.setAttribute("data-element-id",R),B.disabled=this.data.readOnly,this._setRequired(B,this.data.required),B.name=this.data.fieldName,B.tabIndex=u;let z=this.data.combo&&this.data.options.length>0;this.data.combo||(B.size=this.data.options.length,this.data.multiSelect&&(B.multiple=!0)),B.addEventListener("resetform",ee=>{let re=this.data.defaultFieldValue;for(let ie of B.options)ie.selected=ie.value===re});for(let ee of this.data.options){let re=document.createElement("option");re.textContent=ee.displayValue,re.value=ee.exportValue,N.value.includes(ee.exportValue)&&(re.setAttribute("selected",!0),z=!1),B.append(re)}let K=null;if(z){let ee=document.createElement("option");ee.value=" ",ee.setAttribute("hidden",!0),ee.setAttribute("selected",!0),B.prepend(ee),K=()=>{ee.remove(),B.removeEventListener("input",K),K=null},B.addEventListener("input",K)}let Y=ee=>{let re=ee?"value":"textContent",{options:ie,multiple:se}=B;return se?Array.prototype.filter.call(ie,ce=>ce.selected).map(ce=>ce[re]):ie.selectedIndex===-1?null:ie[ie.selectedIndex][re]},J=Y(!1),de=ee=>{let re=ee.target.options;return Array.prototype.map.call(re,ie=>({displayValue:ie.textContent,exportValue:ie.value}))};return this.enableScripting&&this.hasJSActions?(B.addEventListener("updatefromsandbox",ee=>{let re={value(ie){K?.();let se=ie.detail.value,ce=new Set(Array.isArray(se)?se:[se]);for(let pe of B.options)pe.selected=ce.has(pe.value);v.setValue(R,{value:Y(!0)}),J=Y(!1)},multipleSelection(ie){B.multiple=!0},remove(ie){let se=B.options,ce=ie.detail.remove;se[ce].selected=!1,B.remove(ce),se.length>0&&Array.prototype.findIndex.call(se,ve=>ve.selected)===-1&&(se[0].selected=!0),v.setValue(R,{value:Y(!0),items:de(ie)}),J=Y(!1)},clear(ie){for(;B.length!==0;)B.remove(0);v.setValue(R,{value:null,items:[]}),J=Y(!1)},insert(ie){let{index:se,displayValue:ce,exportValue:pe}=ie.detail.insert,ve=B.children[se],be=document.createElement("option");be.textContent=ce,be.value=pe,ve?ve.before(be):B.append(be),v.setValue(R,{value:Y(!0),items:de(ie)}),J=Y(!1)},items(ie){let{items:se}=ie.detail;for(;B.length!==0;)B.remove(0);for(let ce of se){let{displayValue:pe,exportValue:ve}=ce,be=document.createElement("option");be.textContent=pe,be.value=ve,B.append(be)}B.options.length>0&&(B.options[0].selected=!0),v.setValue(R,{value:Y(!0),items:de(ie)}),J=Y(!1)},indices(ie){let se=new Set(ie.detail.indices);for(let ce of ie.target.options)ce.selected=se.has(ce.index);v.setValue(R,{value:Y(!0)}),J=Y(!1)},editable(ie){ie.target.disabled=!ie.detail.editable}};this._dispatchEventFromSandbox(re,ee)}),B.addEventListener("input",ee=>{let re=Y(!0);v.setValue(R,{value:re}),ee.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:R,name:"Keystroke",value:J,changeEx:re,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(B,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ee=>ee.target.value)):B.addEventListener("input",function(ee){v.setValue(R,{value:Y(!0)})}),this.data.combo&&this._setTextStyle(B),this._setBackgroundColor(B),this._setDefaultPropertiesFromJS(B),this.container.append(B),this.container}}class A extends m{constructor(v){let{data:R,elements:N}=v;super(v,{isRenderable:m._hasPopupData(R)}),this.elements=N}render(){this.container.classList.add("popupAnnotation");let v=new T({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),R=[];for(let N of this.elements)N.popup=v,R.push(N.data.id),N.addHighlightArea();return this.container.setAttribute("aria-controls",R.map(N=>`${r.AnnotationPrefix}${N}`).join(",")),this.container}}class T{#e=null;#t=this.#u.bind(this);#n=this.#w.bind(this);#r=this.#I.bind(this);#a=this.#v.bind(this);#o=null;#s=null;#c=null;#l=null;#i=null;#f=null;#d=!1;#h=null;#p=null;#y=null;#m=null;#g=!1;constructor({container:v,color:R,elements:N,titleObj:B,modificationDate:z,contentsObj:K,richText:Y,parent:J,rect:de,parentRect:ee,open:re}){this.#s=v,this.#m=B,this.#c=K,this.#y=Y,this.#i=J,this.#o=R,this.#p=de,this.#f=ee,this.#l=N;let ie=i.PDFDateString.toDateObject(z);ie&&(this.#e=J.l10n.get("annotation_date_string",{date:ie.toLocaleDateString(),time:ie.toLocaleTimeString()})),this.trigger=N.flatMap(se=>se.getElementsToTriggerPopup());for(let se of this.trigger)se.addEventListener("click",this.#a),se.addEventListener("mouseenter",this.#r),se.addEventListener("mouseleave",this.#n),se.classList.add("popupTriggerArea");for(let se of N)se.container?.addEventListener("keydown",this.#t);this.#s.hidden=!0,re&&this.#v()}render(){if(this.#h)return;let{page:{view:v},viewport:{rawDims:{pageWidth:R,pageHeight:N,pageX:B,pageY:z}}}=this.#i,K=this.#h=document.createElement("div");if(K.className="popup",this.#o){let xe=K.style.outlineColor=r.Util.makeHexColor(...this.#o);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?K.style.backgroundColor=`color-mix(in srgb, ${xe} 30%, white)`:K.style.backgroundColor=r.Util.makeHexColor(...this.#o.map(Rt=>Math.floor(.7*(255-Rt)+Rt)))}let Y=document.createElement("span");Y.className="header";let J=document.createElement("h1");if(Y.append(J),{dir:J.dir,str:J.textContent}=this.#m,K.append(Y),this.#e){let xe=document.createElement("span");xe.classList.add("popupDate"),this.#e.then($e=>{xe.textContent=$e}),Y.append(xe)}let de=this.#c,ee=this.#y;if(ee?.str&&(!de?.str||de.str===ee.str))l.XfaLayer.render({xfaHtml:ee.html,intent:"richText",div:K}),K.lastChild.classList.add("richText","popupContent");else{let xe=this._formatContents(de);K.append(xe)}let re=!!this.#f,ie=re?this.#f:this.#p;for(let xe of this.#l)if(!ie||r.Util.intersect(xe.data.rect,ie)!==null){ie=xe.data.rect,re=!0;break}let se=r.Util.normalizeRect([ie[0],v[3]-ie[1]+v[1],ie[2],v[3]-ie[3]+v[1]]),pe=re?ie[2]-ie[0]+5:0,ve=se[0]+pe,be=se[1],{style:Te}=this.#s;Te.left=`${100*(ve-B)/R}%`,Te.top=`${100*(be-z)/N}%`,this.#s.append(K)}_formatContents({str:v,dir:R}){let N=document.createElement("p");N.classList.add("popupContent"),N.dir=R;let B=v.split(/(?:\r\n?|\n)/);for(let z=0,K=B.length;z<K;++z){let Y=B[z];N.append(document.createTextNode(Y)),z<K-1&&N.append(document.createElement("br"))}return N}#u(v){v.altKey||v.shiftKey||v.ctrlKey||v.metaKey||(v.key==="Enter"||v.key==="Escape"&&this.#d)&&this.#v()}#v(){this.#d=!this.#d,this.#d?(this.#I(),this.#s.addEventListener("click",this.#a),this.#s.addEventListener("keydown",this.#t)):(this.#w(),this.#s.removeEventListener("click",this.#a),this.#s.removeEventListener("keydown",this.#t))}#I(){this.#h||this.render(),this.isVisible?this.#d&&this.#s.classList.add("focused"):(this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#w(){this.#s.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#g=this.isVisible,this.#g&&(this.#s.hidden=!0)}maybeShow(){this.#g&&(this.#g=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class O extends m{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0}),this.textContent=v.data.textContent,this.textPosition=v.data.textPosition,this.annotationEditorType=r.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let v=document.createElement("div");v.classList.add("annotationTextContent"),v.setAttribute("role","comment");for(let R of this.textContent){let N=document.createElement("span");N.textContent=R,v.append(N)}this.container.append(v)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=O;class F extends m{#e=null;constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let v=this.data,{width:R,height:N}=f(v.rect),B=this.svgFactory.create(R,N,!0),z=this.#e=this.svgFactory.createElement("svg:line");return z.setAttribute("x1",v.rect[2]-v.lineCoordinates[0]),z.setAttribute("y1",v.rect[3]-v.lineCoordinates[1]),z.setAttribute("x2",v.rect[2]-v.lineCoordinates[2]),z.setAttribute("y2",v.rect[3]-v.lineCoordinates[3]),z.setAttribute("stroke-width",v.borderStyle.width||1),z.setAttribute("stroke","transparent"),z.setAttribute("fill","transparent"),B.append(z),this.container.append(B),!v.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class W extends m{#e=null;constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let v=this.data,{width:R,height:N}=f(v.rect),B=this.svgFactory.create(R,N,!0),z=v.borderStyle.width,K=this.#e=this.svgFactory.createElement("svg:rect");return K.setAttribute("x",z/2),K.setAttribute("y",z/2),K.setAttribute("width",R-z),K.setAttribute("height",N-z),K.setAttribute("stroke-width",z||1),K.setAttribute("stroke","transparent"),K.setAttribute("fill","transparent"),B.append(K),this.container.append(B),!v.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class U extends m{#e=null;constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let v=this.data,{width:R,height:N}=f(v.rect),B=this.svgFactory.create(R,N,!0),z=v.borderStyle.width,K=this.#e=this.svgFactory.createElement("svg:ellipse");return K.setAttribute("cx",R/2),K.setAttribute("cy",N/2),K.setAttribute("rx",R/2-z/2),K.setAttribute("ry",N/2-z/2),K.setAttribute("stroke-width",z||1),K.setAttribute("stroke","transparent"),K.setAttribute("fill","transparent"),B.append(K),this.container.append(B),!v.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class ae extends m{#e=null;constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let v=this.data,{width:R,height:N}=f(v.rect),B=this.svgFactory.create(R,N,!0),z=[];for(let Y of v.vertices){let J=Y.x-v.rect[0],de=v.rect[3]-Y.y;z.push(J+","+de)}z=z.join(" ");let K=this.#e=this.svgFactory.createElement(this.svgElementName);return K.setAttribute("points",z),K.setAttribute("stroke-width",v.borderStyle.width||1),K.setAttribute("stroke","transparent"),K.setAttribute("fill","transparent"),B.append(K),this.container.append(B),!v.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class he extends ae{constructor(v){super(v),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class oe extends m{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class q extends m{#e=[];constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=r.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);let v=this.data,{width:R,height:N}=f(v.rect),B=this.svgFactory.create(R,N,!0);for(let z of v.inkLists){let K=[];for(let J of z){let de=J.x-v.rect[0],ee=v.rect[3]-J.y;K.push(`${de},${ee}`)}K=K.join(" ");let Y=this.svgFactory.createElement(this.svgElementName);this.#e.push(Y),Y.setAttribute("points",K),Y.setAttribute("stroke-width",v.borderStyle.width||1),Y.setAttribute("stroke","transparent"),Y.setAttribute("fill","transparent"),!v.popupRef&&this.hasPopupData&&this._createPopup(),B.append(Y)}return this.container.append(B),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}e.InkAnnotationElement=q;class x extends m{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class w extends m{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class I extends m{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class M extends m{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class H extends m{constructor(v){super(v,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=H;class $ extends m{#e=null;constructor(v){super(v,{isRenderable:!0});let{filename:R,content:N}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(R,!0),this.content=N,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:R,content:N})}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:v,data:R}=this,N;R.hasAppearance||R.fillAlpha===0?N=document.createElement("div"):(N=document.createElement("img"),N.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(R.name)?"paperclip":"pushpin"}.svg`,R.fillAlpha&&R.fillAlpha<1&&(N.style=`filter: opacity(${Math.round(R.fillAlpha*100)}%);`)),N.addEventListener("dblclick",this.#t.bind(this)),this.#e=N;let{isMac:B}=r.FeatureTest.platform;return v.addEventListener("keydown",z=>{z.key==="Enter"&&(B?z.metaKey:z.ctrlKey)&&this.#t()}),!R.popupRef&&this.hasPopupData?this._createPopup():N.classList.add("popupTriggerArea"),v.append(N),v}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class G{#e=null;#t=null;#n=new Map;constructor({div:v,accessibilityManager:R,annotationCanvasMap:N,l10n:B,page:z,viewport:K}){this.div=v,this.#e=R,this.#t=N,this.l10n=B,this.page=z,this.viewport=K,this.zIndex=0,this.l10n||=c.NullL10n}#r(v,R){let N=v.firstChild||v;N.id=`${r.AnnotationPrefix}${R}`,this.div.append(v),this.#e?.moveElementInDOM(this.div,v,N,!1)}render(v){return ne(this,null,function*(){let{annotations:R}=v,N=this.div;(0,i.setLayerDimensions)(N,this.viewport);let B=new Map,z={data:null,layer:N,linkService:v.linkService,downloadManager:v.downloadManager,imageResourcesPath:v.imageResourcesPath||"",renderForms:v.renderForms!==!1,svgFactory:new i.DOMSVGFactory,annotationStorage:v.annotationStorage||new s.AnnotationStorage,enableScripting:v.enableScripting===!0,hasJSActions:v.hasJSActions,fieldObjects:v.fieldObjects,parent:this,elements:null};for(let K of R){if(K.noHTML)continue;let Y=K.annotationType===r.AnnotationType.POPUP;if(Y){let ee=B.get(K.id);if(!ee)continue;z.elements=ee}else{let{width:ee,height:re}=f(K.rect);if(ee<=0||re<=0)continue}z.data=K;let J=p.create(z);if(!J.isRenderable)continue;if(!Y&&K.popupRef){let ee=B.get(K.popupRef);ee?ee.push(J):B.set(K.popupRef,[J])}J.annotationEditorType>0&&this.#n.set(J.data.id,J);let de=J.render();K.hidden&&(de.style.visibility="hidden"),this.#r(de,K.id)}this.#a(),yield this.l10n.translate(N)})}update({viewport:v}){let R=this.div;this.viewport=v,(0,i.setLayerDimensions)(R,{rotation:v.rotation}),this.#a(),R.hidden=!1}#a(){if(!this.#t)return;let v=this.div;for(let[R,N]of this.#t){let B=v.querySelector(`[data-annotation-id="${R}"]`);if(!B)continue;let{firstChild:z}=B;z?z.nodeName==="CANVAS"?z.replaceWith(N):z.before(N):B.append(N)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(v){return this.#n.get(v)}}e.AnnotationLayer=G}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function n(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function r(s){return Math.max(0,Math.min(255,255*s))}class i{static CMYK_G([o,c,l,u]){return["G",1-Math.min(1,.3*o+.59*l+.11*c+u)]}static G_CMYK([o]){return["CMYK",0,0,0,1-o]}static G_RGB([o]){return["RGB",o,o,o]}static G_rgb([o]){return o=r(o),[o,o,o]}static G_HTML([o]){let c=n(o);return`#${c}${c}${c}`}static RGB_G([o,c,l]){return["G",.3*o+.59*c+.11*l]}static RGB_rgb(o){return o.map(r)}static RGB_HTML(o){return`#${o.map(n).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([o,c,l,u]){return["RGB",1-Math.min(1,o+u),1-Math.min(1,l+u),1-Math.min(1,c+u)]}static CMYK_rgb([o,c,l,u]){return[r(1-Math.min(1,o+u)),r(1-Math.min(1,l+u)),r(1-Math.min(1,c+u))]}static CMYK_HTML(o){let c=this.CMYK_RGB(o).slice(1);return this.RGB_HTML(c)}static RGB_CMYK([o,c,l]){let u=1-o,d=1-c,h=1-l,f=Math.min(u,d,h);return["CMYK",u,d,h,f]}}e.ColorConverters=i}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=r;let n={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xD7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xD7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing\u2026",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};n.print_progress_percent="{{progress}}%";function r(c,l){switch(c){case"find_match_count":c=`find_match_count[${l.total===1?"one":"other"}]`;break;case"find_match_count_limit":c=`find_match_count_limit[${l.limit===1?"one":"other"}]`;break}return n[c]||""}function i(c,l){return l?c.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(u,d)=>d in l?l[d]:"{{"+d+"}}"):c}let s={getLanguage(){return ne(this,null,function*(){return"en-us"})},getDirection(){return ne(this,null,function*(){return"ltr"})},get(d){return ne(this,arguments,function*(c,l=null,u=r(c,l)){return i(u,l)})},translate(c){return ne(this,null,function*(){})}};e.NullL10n=s}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var r=n(25);class i{static setupStorage(o,c,l,u,d){let h=u.getValue(c,{value:null});switch(l.name){case"textarea":if(h.value!==null&&(o.textContent=h.value),d==="print")break;o.addEventListener("input",f=>{u.setValue(c,{value:f.target.value})});break;case"input":if(l.attributes.type==="radio"||l.attributes.type==="checkbox"){if(h.value===l.attributes.xfaOn?o.setAttribute("checked",!0):h.value===l.attributes.xfaOff&&o.removeAttribute("checked"),d==="print")break;o.addEventListener("change",f=>{u.setValue(c,{value:f.target.checked?f.target.getAttribute("xfaOn"):f.target.getAttribute("xfaOff")})})}else{if(h.value!==null&&o.setAttribute("value",h.value),d==="print")break;o.addEventListener("input",f=>{u.setValue(c,{value:f.target.value})})}break;case"select":if(h.value!==null){o.setAttribute("value",h.value);for(let f of l.children)f.attributes.value===h.value?f.attributes.selected=!0:f.attributes.hasOwnProperty("selected")&&delete f.attributes.selected}o.addEventListener("input",f=>{let p=f.target.options,m=p.selectedIndex===-1?"":p[p.selectedIndex].value;u.setValue(c,{value:m})});break}}static setAttributes({html:o,element:c,storage:l=null,intent:u,linkService:d}){let{attributes:h}=c,f=o instanceof HTMLAnchorElement;h.type==="radio"&&(h.name=`${h.name}-${u}`);for(let[p,m]of Object.entries(h))if(m!=null)switch(p){case"class":m.length&&o.setAttribute(p,m.join(" "));break;case"dataId":break;case"id":o.setAttribute("data-element-id",m);break;case"style":Object.assign(o.style,m);break;case"textContent":o.textContent=m;break;default:(!f||p!=="href"&&p!=="newWindow")&&o.setAttribute(p,m)}f&&d.addLinkAttributes(o,h.href,h.newWindow),l&&h.dataId&&this.setupStorage(o,h.dataId,c,l)}static render(o){let c=o.annotationStorage,l=o.linkService,u=o.xfaHtml,d=o.intent||"display",h=document.createElement(u.name);u.attributes&&this.setAttributes({html:h,element:u,intent:d,linkService:l});let f=[[u,-1,h]],p=o.div;if(p.append(h),o.viewport){let g=`matrix(${o.viewport.transform.join(",")})`;p.style.transform=g}d!=="richText"&&p.setAttribute("class","xfaLayer xfaFont");let m=[];for(;f.length>0;){let[g,_,E]=f.at(-1);if(_+1===g.children.length){f.pop();continue}let C=g.children[++f.at(-1)[1]];if(C===null)continue;let{name:V}=C;if(V==="#text"){let S=document.createTextNode(C.value);m.push(S),E.append(S);continue}let k=C?.attributes?.xmlns?document.createElementNS(C.attributes.xmlns,V):document.createElement(V);if(E.append(k),C.attributes&&this.setAttributes({html:k,element:C,storage:c,intent:d,linkService:l}),C.children&&C.children.length>0)f.push([C,-1,k]);else if(C.value){let S=document.createTextNode(C.value);r.XfaText.shouldBuildText(V)&&m.push(S),k.append(S)}}for(let g of p.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:m}}static update(o){let c=`matrix(${o.viewport.transform.join(",")})`;o.div.style.transform=c,o.div.hidden=!1}}e.XfaLayer=i}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var r=n(1),i=n(4),s=n(29),o=n(6),c=n(5);let l=(()=>{class u extends i.AnnotationEditor{#e=0;#t=0;#n=this.canvasPointermove.bind(this);#r=this.canvasPointerleave.bind(this);#a=this.canvasPointerup.bind(this);#o=this.canvasPointerdown.bind(this);#s=new Path2D;#c=!1;#l=!1;#i=!1;#f=null;#d=0;#h=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(h){super(Be(ge({},h),{name:"inkEditor"})),this.color=h.color||null,this.thickness=h.thickness||null,this.opacity=h.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(h){i.AnnotationEditor.initialize(h,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(h,f){switch(h){case r.AnnotationEditorParamsType.INK_THICKNESS:u._defaultThickness=f;break;case r.AnnotationEditorParamsType.INK_COLOR:u._defaultColor=f;break;case r.AnnotationEditorParamsType.INK_OPACITY:u._defaultOpacity=f/100;break}}updateParams(h,f){switch(h){case r.AnnotationEditorParamsType.INK_THICKNESS:this.#y(f);break;case r.AnnotationEditorParamsType.INK_COLOR:this.#m(f);break;case r.AnnotationEditorParamsType.INK_OPACITY:this.#g(f);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,u._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,u._defaultColor||i.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(u._defaultOpacity*100)]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||u._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,this.color||u._defaultColor||i.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??u._defaultOpacity))]]}#y(h){let f=this.thickness;this.addCommands({cmd:()=>{this.thickness=h,this.#A()},undo:()=>{this.thickness=f,this.#A()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(h){let f=this.color;this.addCommands({cmd:()=>{this.color=h,this.#_()},undo:()=>{this.color=f,this.#_()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(h){h/=100;let f=this.opacity;this.addCommands({cmd:()=>{this.opacity=h,this.#_()},undo:()=>{this.opacity=f,this.#_()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#R(),this.#P()),this.isAttachedToDOM||(this.parent.add(this),this.#E()),this.#A()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(h){!this.parent&&h?this._uiManager.removeShouldRescale(this):this.parent&&h===null&&this._uiManager.addShouldRescale(this),super.setParent(h)}onScaleChanging(){let[h,f]=this.parentDimensions,p=this.width*h,m=this.height*f;this.setDimensions(p,m)}enableEditMode(){this.#c||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#o))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#o))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#u(){let{parentRotation:h,parentDimensions:[f,p]}=this;switch(h){case 90:return[0,p,p,f];case 180:return[f,p,f,p];case 270:return[f,0,p,f];default:return[0,0,f,p]}}#v(){let{ctx:h,color:f,opacity:p,thickness:m,parentScale:g,scaleFactor:_}=this;h.lineWidth=m*g/_,h.lineCap="round",h.lineJoin="round",h.miterLimit=10,h.strokeStyle=`${f}${(0,c.opacityToHex)(p)}`}#I(h,f){this.canvas.addEventListener("contextmenu",o.noContextMenu),this.canvas.addEventListener("pointerleave",this.#r),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#a),this.canvas.removeEventListener("pointerdown",this.#o),this.isEditing=!0,this.#i||(this.#i=!0,this.#E(),this.thickness||=u._defaultThickness,this.color||=u._defaultColor||i.AnnotationEditor._defaultLineColor,this.opacity??=u._defaultOpacity),this.currentPath.push([h,f]),this.#l=!1,this.#v(),this.#p=()=>{this.#N(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#w(h,f){let[p,m]=this.currentPath.at(-1);if(this.currentPath.length>1&&h===p&&f===m)return;let g=this.currentPath,_=this.#s;if(g.push([h,f]),this.#l=!0,g.length<=2){_.moveTo(...g[0]),_.lineTo(h,f);return}g.length===3&&(this.#s=_=new Path2D,_.moveTo(...g[0])),this.#O(_,...g.at(-3),...g.at(-2),h,f)}#S(){if(this.currentPath.length===0)return;let h=this.currentPath.at(-1);this.#s.lineTo(...h)}#D(h,f){this.#p=null,h=Math.min(Math.max(h,0),this.canvas.width),f=Math.min(Math.max(f,0),this.canvas.height),this.#w(h,f),this.#S();let p;if(this.currentPath.length!==1)p=this.#F();else{let C=[h,f];p=[[C,C.slice(),C.slice(),C]]}let m=this.#s,g=this.currentPath;this.currentPath=[],this.#s=new Path2D;let _=()=>{this.allRawPaths.push(g),this.paths.push(p),this.bezierPath2D.push(m),this.rebuild()},E=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#R(),this.#P()),this.#A())};this.addCommands({cmd:_,undo:E,mustExec:!0})}#N(){if(!this.#l)return;this.#l=!1;let h=Math.ceil(this.thickness*this.parentScale),f=this.currentPath.slice(-3),p=f.map(k=>k[0]),m=f.map(k=>k[1]),g=Math.min(...p)-h,_=Math.max(...p)+h,E=Math.min(...m)-h,C=Math.max(...m)+h,{ctx:V}=this;V.save(),V.clearRect(0,0,this.canvas.width,this.canvas.height);for(let k of this.bezierPath2D)V.stroke(k);V.stroke(this.#s),V.restore()}#O(h,f,p,m,g,_,E){let C=(f+m)/2,V=(p+g)/2,k=(m+_)/2,S=(g+E)/2;h.bezierCurveTo(C+2*(m-C)/3,V+2*(g-V)/3,k+2*(m-k)/3,S+2*(g-S)/3,k,S)}#F(){let h=this.currentPath;if(h.length<=2)return[[h[0],h[0],h.at(-1),h.at(-1)]];let f=[],p,[m,g]=h[0];for(p=1;p<h.length-2;p++){let[P,D]=h[p],[A,T]=h[p+1],O=(P+A)/2,F=(D+T)/2,W=[m+2*(P-m)/3,g+2*(D-g)/3],U=[O+2*(P-O)/3,F+2*(D-F)/3];f.push([[m,g],W,U,[O,F]]),[m,g]=[O,F]}let[_,E]=h[p],[C,V]=h[p+1],k=[m+2*(_-m)/3,g+2*(E-g)/3],S=[C+2*(_-C)/3,V+2*(E-V)/3];return f.push([[m,g],k,S,[C,V]]),f}#_(){if(this.isEmpty()){this.#T();return}this.#v();let{canvas:h,ctx:f}=this;f.setTransform(1,0,0,1,0,0),f.clearRect(0,0,h.width,h.height),this.#T();for(let p of this.bezierPath2D)f.stroke(p)}commit(){this.#c||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#c=!0,this.div.classList.add("disabled"),this.#A(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(h){this._focusEventsAllowed&&(super.focusin(h),this.enableEditMode())}canvasPointerdown(h){h.button!==0||!this.isInEditMode()||this.#c||(this.setInForeground(),h.preventDefault(),h.type!=="mouse"&&this.div.focus(),this.#I(h.offsetX,h.offsetY))}canvasPointermove(h){h.preventDefault(),this.#w(h.offsetX,h.offsetY)}canvasPointerup(h){h.preventDefault(),this.#k(h)}canvasPointerleave(h){this.#k(h)}#k(h){this.canvas.removeEventListener("pointerleave",this.#r),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#a),this.canvas.addEventListener("pointerdown",this.#o),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",o.noContextMenu)},10),this.#D(h.offsetX,h.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#R(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",i.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(h=>this.canvas?.setAttribute("aria-label",h)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#P(){this.#f=new ResizeObserver(h=>{let f=h[0].contentRect;f.width&&f.height&&this.setDimensions(f.width,f.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#c}render(){if(this.div)return this.div;let h,f;this.width&&(h=this.x,f=this.y),super.render(),i.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(E=>this.div?.setAttribute("aria-label",E));let[p,m,g,_]=this.#u();if(this.setAt(p,m,0,0),this.setDims(g,_),this.#R(),this.width){let[E,C]=this.parentDimensions;this.setAspectRatio(this.width*E,this.height*C),this.setAt(h*E,f*C,this.width*E,this.height*C),this.#i=!0,this.#E(),this.setDims(this.width*E,this.height*C),this.#_(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#P(),this.div}#E(){if(!this.#i)return;let[h,f]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*h),this.canvas.height=Math.ceil(this.height*f),this.#T()}setDimensions(h,f){let p=Math.round(h),m=Math.round(f);if(this.#d===p&&this.#h===m)return;this.#d=p,this.#h=m,this.canvas.style.visibility="hidden";let[g,_]=this.parentDimensions;this.width=h/g,this.height=f/_,this.fixAndSetPosition(),this.#c&&this.#C(h,f),this.#E(),this.#_(),this.canvas.style.visibility="visible",this.fixDims()}#C(h,f){let p=this.#M(),m=(h-p)/this.#t,g=(f-p)/this.#e;this.scaleFactor=Math.min(m,g)}#T(){let h=this.#M()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+h,this.translationY*this.scaleFactor+h)}static#L(h){let f=new Path2D;for(let p=0,m=h.length;p<m;p++){let[g,_,E,C]=h[p];p===0&&f.moveTo(...g),f.bezierCurveTo(_[0],_[1],E[0],E[1],C[0],C[1])}return f}static#V(h,f,p){let[m,g,_,E]=f;switch(p){case 0:for(let C=0,V=h.length;C<V;C+=2)h[C]+=m,h[C+1]=E-h[C+1];break;case 90:for(let C=0,V=h.length;C<V;C+=2){let k=h[C];h[C]=h[C+1]+m,h[C+1]=k+g}break;case 180:for(let C=0,V=h.length;C<V;C+=2)h[C]=_-h[C],h[C+1]+=g;break;case 270:for(let C=0,V=h.length;C<V;C+=2){let k=h[C];h[C]=_-h[C+1],h[C+1]=E-k}break;default:throw new Error("Invalid rotation")}return h}static#U(h,f,p){let[m,g,_,E]=f;switch(p){case 0:for(let C=0,V=h.length;C<V;C+=2)h[C]-=m,h[C+1]=E-h[C+1];break;case 90:for(let C=0,V=h.length;C<V;C+=2){let k=h[C];h[C]=h[C+1]-g,h[C+1]=k-m}break;case 180:for(let C=0,V=h.length;C<V;C+=2)h[C]=_-h[C],h[C+1]-=g;break;case 270:for(let C=0,V=h.length;C<V;C+=2){let k=h[C];h[C]=E-h[C+1],h[C+1]=_-k}break;default:throw new Error("Invalid rotation")}return h}#j(h,f,p,m){let g=[],_=this.thickness/2,E=h*f+_,C=h*p+_;for(let V of this.paths){let k=[],S=[];for(let P=0,D=V.length;P<D;P++){let[A,T,O,F]=V[P],W=h*A[0]+E,U=h*A[1]+C,ae=h*T[0]+E,he=h*T[1]+C,oe=h*O[0]+E,q=h*O[1]+C,x=h*F[0]+E,w=h*F[1]+C;P===0&&(k.push(W,U),S.push(W,U)),k.push(ae,he,oe,q,x,w),S.push(ae,he),P===D-1&&S.push(x,w)}g.push({bezier:u.#V(k,m,this.rotation),points:u.#V(S,m,this.rotation)})}return g}#x(){let h=1/0,f=-1/0,p=1/0,m=-1/0;for(let g of this.paths)for(let[_,E,C,V]of g){let k=r.Util.bezierBoundingBox(..._,...E,...C,...V);h=Math.min(h,k[0]),p=Math.min(p,k[1]),f=Math.max(f,k[2]),m=Math.max(m,k[3])}return[h,p,f,m]}#M(){return this.#c?Math.ceil(this.thickness*this.parentScale):0}#A(h=!1){if(this.isEmpty())return;if(!this.#c){this.#_();return}let f=this.#x(),p=this.#M();this.#t=Math.max(i.AnnotationEditor.MIN_SIZE,f[2]-f[0]),this.#e=Math.max(i.AnnotationEditor.MIN_SIZE,f[3]-f[1]);let m=Math.ceil(p+this.#t*this.scaleFactor),g=Math.ceil(p+this.#e*this.scaleFactor),[_,E]=this.parentDimensions;this.width=m/_,this.height=g/E,this.setAspectRatio(m,g);let C=this.translationX,V=this.translationY;this.translationX=-f[0],this.translationY=-f[1],this.#E(),this.#_(),this.#d=m,this.#h=g,this.setDims(m,g);let k=h?p/this.scaleFactor/2:0;this.translate(C-this.translationX-k,V-this.translationY-k)}static deserialize(h,f,p){if(h instanceof s.InkAnnotationElement)return null;let m=super.deserialize(h,f,p);m.thickness=h.thickness,m.color=r.Util.makeHexColor(...h.color),m.opacity=h.opacity;let[g,_]=m.pageDimensions,E=m.width*g,C=m.height*_,V=m.parentScale,k=h.thickness/2;m.#c=!0,m.#d=Math.round(E),m.#h=Math.round(C);let{paths:S,rect:P,rotation:D}=h;for(let{bezier:T}of S){T=u.#U(T,P,D);let O=[];m.paths.push(O);let F=V*(T[0]-k),W=V*(T[1]-k);for(let ae=2,he=T.length;ae<he;ae+=6){let oe=V*(T[ae]-k),q=V*(T[ae+1]-k),x=V*(T[ae+2]-k),w=V*(T[ae+3]-k),I=V*(T[ae+4]-k),M=V*(T[ae+5]-k);O.push([[F,W],[oe,q],[x,w],[I,M]]),F=I,W=M}let U=this.#L(O);m.bezierPath2D.push(U)}let A=m.#x();return m.#t=Math.max(i.AnnotationEditor.MIN_SIZE,A[2]-A[0]),m.#e=Math.max(i.AnnotationEditor.MIN_SIZE,A[3]-A[1]),m.#C(E,C),m}serialize(){if(this.isEmpty())return null;let h=this.getRect(0,0),f=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:r.AnnotationEditorType.INK,color:f,thickness:this.thickness,opacity:this.opacity,paths:this.#j(this.scaleFactor/this.parentScale,this.translationX,this.translationY,h),pageIndex:this.pageIndex,rect:h,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}return u})();e.InkEditor=l}),((t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var r=n(1),i=n(4),s=n(6),o=n(29);let c=(()=>{class l extends i.AnnotationEditor{#e=null;#t=null;#n=null;#r=null;#a=null;#o=null;#s=null;#c=null;#l=!1;#i=!1;static _type="stamp";constructor(d){super(Be(ge({},d),{name:"stampEditor"})),this.#r=d.bitmapUrl,this.#a=d.bitmapFile}static initialize(d){i.AnnotationEditor.initialize(d)}static get supportedTypes(){let d=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,r.shadow)(this,"supportedTypes",d.map(h=>`image/${h}`))}static get supportedTypesStr(){return(0,r.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(d){return this.supportedTypes.includes(d)}static paste(d,h){h.pasteEditor(r.AnnotationEditorType.STAMP,{bitmapFile:d.getAsFile()})}#f(d,h=!1){if(!d){this.remove();return}this.#e=d.bitmap,h||(this.#t=d.id,this.#l=d.isSvg),this.#p()}#d(){this.#n=null,this._uiManager.enableWaiting(!1),this.#o&&this.div.focus()}#h(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(h=>this.#f(h,!0)).finally(()=>this.#d());return}if(this.#r){let h=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(h).then(f=>this.#f(f)).finally(()=>this.#d());return}if(this.#a){let h=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(h).then(f=>this.#f(f)).finally(()=>this.#d());return}let d=document.createElement("input");d.type="file",d.accept=l.supportedTypesStr,this.#n=new Promise(h=>{d.addEventListener("change",()=>ne(this,null,function*(){if(!d.files||d.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let f=yield this._uiManager.imageManager.getFromFile(d.files[0]);this.#f(f)}h()})),d.addEventListener("cancel",()=>{this.remove(),h()})}).finally(()=>this.#d()),d.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#o?.remove(),this.#o=null,this.#s?.disconnect(),this.#s=null),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#h();return}super.rebuild(),this.div!==null&&(this.#t&&this.#h(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#r||this.#a)}get isResizable(){return!0}render(){if(this.div)return this.div;let d,h;if(this.width&&(d=this.x,h=this.y),super.render(),this.div.hidden=!0,this.#e?this.#p():this.#h(),this.width){let[f,p]=this.parentDimensions;this.setAt(d*f,h*p,this.width*f,this.height*p)}return this.div}#p(){let{div:d}=this,{width:h,height:f}=this.#e,[p,m]=this.pageDimensions,g=.75;if(this.width)h=this.width*p,f=this.height*m;else if(h>g*p||f>g*m){let V=Math.min(g*p/h,g*m/f);h*=V,f*=V}let[_,E]=this.parentDimensions;this.setDims(h*_/p,f*E/m),this._uiManager.enableWaiting(!1);let C=this.#o=document.createElement("canvas");d.append(C),d.hidden=!1,this.#g(h,f),this.#v(),this.#i||(this.parent.addUndoableEditor(this),this.#i=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#y(d,h){let[f,p]=this.parentDimensions;this.width=d/f,this.height=h/p,this.setDims(d,h),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#c!==null&&clearTimeout(this.#c);let m=200;this.#c=setTimeout(()=>{this.#c=null,this.#g(d,h)},m)}#m(d,h){let{width:f,height:p}=this.#e,m=f,g=p,_=this.#e;for(;m>2*d||g>2*h;){let E=m,C=g;m>2*d&&(m=m>=16384?Math.floor(m/2)-1:Math.ceil(m/2)),g>2*h&&(g=g>=16384?Math.floor(g/2)-1:Math.ceil(g/2));let V=new OffscreenCanvas(m,g);V.getContext("2d").drawImage(_,0,0,E,C,0,0,m,g),_=V.transferToImageBitmap()}return _}#g(d,h){d=Math.ceil(d),h=Math.ceil(h);let f=this.#o;if(!f||f.width===d&&f.height===h)return;f.width=d,f.height=h;let p=this.#l?this.#e:this.#m(d,h),m=f.getContext("2d");m.filter=this._uiManager.hcmFilter,m.drawImage(p,0,0,p.width,p.height,0,0,d,h)}#u(d){if(d){if(this.#l){let p=this._uiManager.imageManager.getSvgUrl(this.#t);if(p)return p}let h=document.createElement("canvas");return{width:h.width,height:h.height}=this.#e,h.getContext("2d").drawImage(this.#e,0,0),h.toDataURL()}if(this.#l){let[h,f]=this.pageDimensions,p=Math.round(this.width*h*s.PixelsPerInch.PDF_TO_CSS_UNITS),m=Math.round(this.height*f*s.PixelsPerInch.PDF_TO_CSS_UNITS),g=new OffscreenCanvas(p,m);return g.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,p,m),g.transferToImageBitmap()}return structuredClone(this.#e)}#v(){this.#s=new ResizeObserver(d=>{let h=d[0].contentRect;h.width&&h.height&&this.#y(h.width,h.height)}),this.#s.observe(this.div)}static deserialize(d,h,f){if(d instanceof o.StampAnnotationElement)return null;let p=super.deserialize(d,h,f),{rect:m,bitmapUrl:g,bitmapId:_,isSvg:E,accessibilityData:C}=d;_&&f.imageManager.isValidId(_)?p.#t=_:p.#r=g,p.#l=E;let[V,k]=p.pageDimensions;return p.width=(m[2]-m[0])/V,p.height=(m[3]-m[1])/k,C&&(p.altTextData=C),p}serialize(d=!1,h=null){if(this.isEmpty())return null;let f={annotationType:r.AnnotationEditorType.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#l,structTreeParentId:this._structTreeParentId};if(d)return f.bitmapUrl=this.#u(!0),f.accessibilityData=this.altTextData,f;let{decorative:p,altText:m}=this.altTextData;if(!p&&m&&(f.accessibilityData={type:"Figure",alt:m}),h===null)return f;h.stamps||=new Map;let g=this.#l?(f.rect[2]-f.rect[0])*(f.rect[3]-f.rect[1]):null;if(!h.stamps.has(this.#t))h.stamps.set(this.#t,{area:g,serialized:f}),f.bitmap=this.#u(!1);else if(this.#l){let _=h.stamps.get(this.#t);g>_.area&&(_.area=g,_.serialized.bitmap.close(),_.serialized.bitmap=this.#u(!1))}return f}}return l})();e.StampEditor=c})],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return s.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return o.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return c.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"DOMSVGFactory",{enumerable:!0,get:function(){return r.DOMSVGFactory}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return l.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return n.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return u.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return r.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(t,"noContextMenu",{enumerable:!0,get:function(){return r.noContextMenu}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return i.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return r.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return i.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return n.version}});var e=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),r=__w_pdfjs_require__(6),i=__w_pdfjs_require__(26),s=__w_pdfjs_require__(27),o=__w_pdfjs_require__(5),c=__w_pdfjs_require__(29),l=__w_pdfjs_require__(14),u=__w_pdfjs_require__(32);let d="3.11.174",h="ce8716743"})(),__webpack_exports__})())});var Ud;function Pc(){return Ud}function Wn(t){let e=Ud;return Ud=t,e}var $y=Symbol("NotFound");function cs(t){return t===$y||t?.name==="\u0275NotFound"}var jt=null,xc=!1,jd=1,z0=null,Yt=Symbol("SIGNAL");function Me(t){let e=jt;return jt=t,e}function kc(){return jt}var No={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Oo(t){if(xc)throw new Error("");if(jt===null)return;jt.consumerOnSignalRead(t);let e=jt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=jt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:jt.producers,n!==void 0&&n.producer===t)){jt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===jt&&(!r||W0(i,jt)))return;let s=ls(jt),o={producer:t,consumer:jt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};jt.producersTail=o,e!==void 0?e.nextProducer=o:jt.producers=o,s&&Wy(t,o)}function Hy(){jd++}function Bd(t){if(!(ls(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===jd)){if(!t.producerMustRecompute(t)&&!Lo(t)){Mc(t);return}t.producerRecomputeValue(t),Mc(t)}}function $d(t){if(t.consumers===void 0)return;let e=xc;xc=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||q0(r)}}finally{xc=e}}function Hd(){return jt?.consumerAllowSignalWrites!==!1}function q0(t){t.dirty=!0,$d(t),t.consumerMarkedDirty?.(t)}function Mc(t){t.dirty=!1,t.lastCleanEpoch=jd}function Fo(t){return t&&zy(t),Me(t)}function zy(t){t.producersTail=void 0,t.recomputing=!0}function Nc(t,e){Me(e),t&&qy(t)}function qy(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(ls(t))do n=zd(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Lo(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Bd(n),r!==n.version))return!0}return!1}function Vo(t){if(ls(t)){let e=t.producers;for(;e!==void 0;)e=zd(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function Wy(t,e){let n=t.consumersTail,r=ls(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)Wy(i.producer,i)}function zd(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!ls(e)){let s=e.producers;for(;s!==void 0;)s=zd(s)}return n}function ls(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function qd(t){z0?.(t)}function W0(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Wd(t,e){return Object.is(t,e)}function G0(){throw new Error}var Gy=G0;function Ky(t){Gy(t)}function Gd(t){Gy=t}var K0=null;function Kd(t,e){let n=Object.create(Oc);n.value=t,e!==void 0&&(n.equal=e);let r=()=>Yy(n);return r[Yt]=n,qd(n),[r,o=>us(n,o),o=>Yd(n,o)]}function Yy(t){return Oo(t),t.value}function us(t,e){Hd()||Ky(t),t.equal(t.value,e)||(t.value=e,Y0(t))}function Yd(t,e){Hd()||Ky(t),us(t,e(t.value))}var Oc=Be(ge({},No),{equal:Wd,value:void 0,kind:"signal"});function Y0(t){t.version++,Hy(),$d(t),K0?.(t)}function Re(t){return typeof t=="function"}function ds(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Fc=ds(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function vi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var rt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Re(r))try{r()}catch(s){e=s instanceof Fc?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Xy(s)}catch(o){e=e??[],o instanceof Fc?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Fc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Xy(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&vi(n,e)}remove(e){let{_finalizers:n}=this;n&&vi(n,e),e instanceof t&&e._removeParent(this)}};rt.EMPTY=(()=>{let t=new rt;return t.closed=!0,t})();var Xd=rt.EMPTY;function Lc(t){return t instanceof rt||t&&"closed"in t&&Re(t.remove)&&Re(t.add)&&Re(t.unsubscribe)}function Xy(t){Re(t)?t():t.unsubscribe()}var Pn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var hs={setTimeout(t,e,...n){let{delegate:r}=hs;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=hs;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Vc(t){hs.setTimeout(()=>{let{onUnhandledError:e}=Pn;if(e)e(t);else throw t})}function _i(){}var Qy=Qd("C",void 0,void 0);function Zy(t){return Qd("E",void 0,t)}function Jy(t){return Qd("N",t,void 0)}function Qd(t,e,n){return{kind:t,value:e,error:n}}var Ei=null;function fs(t){if(Pn.useDeprecatedSynchronousErrorHandling){let e=!Ei;if(e&&(Ei={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Ei;if(Ei=null,n)throw r}}else t()}function ev(t){Pn.useDeprecatedSynchronousErrorHandling&&Ei&&(Ei.errorThrown=!0,Ei.error=t)}var bi=class extends rt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Lc(e)&&e.add(this)):this.destination=Z0}static create(e,n,r){return new ps(e,n,r)}next(e){this.isStopped?Jd(Jy(e),this):this._next(e)}error(e){this.isStopped?Jd(Zy(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Jd(Qy,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},X0=Function.prototype.bind;function Zd(t,e){return X0.call(t,e)}var eh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Uc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Uc(r)}else Uc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Uc(n)}}},ps=class extends bi{constructor(e,n,r){super();let i;if(Re(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Pn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Zd(e.next,s),error:e.error&&Zd(e.error,s),complete:e.complete&&Zd(e.complete,s)}):i=e}this.destination=new eh(i)}};function Uc(t){Pn.useDeprecatedSynchronousErrorHandling?ev(t):Vc(t)}function Q0(t){throw t}function Jd(t,e){let{onStoppedNotification:n}=Pn;n&&hs.setTimeout(()=>n(t,e))}var Z0={closed:!0,next:_i,error:Q0,complete:_i};var gs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function an(t){return t}function th(...t){return nh(t)}function nh(t){return t.length===0?an:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Ie=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=eA(n)?n:new ps(n,r,i);return fs(()=>{let{operator:o,source:c}=this;s.add(o?o.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=tv(r),new r((i,s)=>{let o=new ps({next:c=>{try{n(c)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[gs](){return this}pipe(...n){return nh(n)(this)}toPromise(n){return n=tv(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function tv(t){var e;return(e=t??Pn.Promise)!==null&&e!==void 0?e:Promise}function J0(t){return t&&Re(t.next)&&Re(t.error)&&Re(t.complete)}function eA(t){return t&&t instanceof bi||J0(t)&&Lc(t)}function rh(t){return Re(t?.lift)}function Fe(t){return e=>{if(rh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ne(t,e,n,r,i){return new ih(t,e,n,r,i)}var ih=class extends bi{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(c){try{n(c)}catch(l){e.error(l)}}:super._next,this._error=i?function(c){try{i(c)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ms(){return Fe((t,e)=>{let n=null;t._refCount++;let r=Ne(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ys=class extends Ie{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,rh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new rt;let n=this.getSubject();e.add(this.source.subscribe(Ne(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=rt.EMPTY)}return e}refCount(){return ms()(this)}};var nv=ds(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ot=(()=>{class t extends Ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new jc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new nv}next(n){fs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){fs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){fs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Xd:(this.currentObservers=null,s.push(n),new rt(()=>{this.currentObservers=null,vi(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new Ie;return n.source=this,n}}return t.create=(e,n)=>new jc(e,n),t})(),jc=class extends ot{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Xd}};var ut=class extends ot{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var sh={now(){return(sh.delegate||Date).now()},delegate:void 0};var Bc=class extends rt{constructor(e,n){super()}schedule(e,n=0){return this}};var Uo={setInterval(t,e,...n){let{delegate:r}=Uo;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Uo;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var vs=class extends Bc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Uo.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Uo.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,vi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var _s=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};_s.now=sh.now;var Es=class extends _s{constructor(e,n=_s.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var oh=new Es(vs);var $c=class extends vs{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Hc=class extends Es{};var ah=new Hc($c);var Xt=new Ie(t=>t.complete());function rv(t){return t&&Re(t.schedule)}function iv(t){return t[t.length-1]}function zc(t){return Re(iv(t))?t.pop():void 0}function Vr(t){return rv(iv(t))?t.pop():void 0}function ch(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ov(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function c(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(c,l)}u((r=r.apply(t,e||[])).next())})}function sv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wi(t){return this instanceof wi?(this.v=t,this):new wi(t)}function av(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(m){return Promise.resolve(m).then(p,h)}}function c(p,m){r[p]&&(i[p]=function(g){return new Promise(function(_,E){s.push([p,g,_,E])>1||l(p,g)})},m&&(i[p]=m(i[p])))}function l(p,m){try{u(r[p](m))}catch(g){f(s[0][3],g)}}function u(p){p.value instanceof wi?Promise.resolve(p.value.v).then(d,h):f(s[0][2],p)}function d(p){l("next",p)}function h(p){l("throw",p)}function f(p,m){p(m),s.shift(),s.length&&l(s[0][0],s[0][1])}}function cv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof sv=="function"?sv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(c,l){o=t[s](o),i(c,l,o.done,o.value)})}}function i(s,o,c,l){Promise.resolve(l).then(function(u){s({value:u,done:c})},o)}}var qc=t=>t&&typeof t.length=="number"&&typeof t!="function";function Wc(t){return Re(t?.then)}function Gc(t){return Re(t[gs])}function Kc(t){return Symbol.asyncIterator&&Re(t?.[Symbol.asyncIterator])}function Yc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function tA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Xc=tA();function Qc(t){return Re(t?.[Xc])}function Zc(t){return av(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield wi(n.read());if(i)return yield wi(void 0);yield yield wi(r)}}finally{n.releaseLock()}})}function Jc(t){return Re(t?.getReader)}function mt(t){if(t instanceof Ie)return t;if(t!=null){if(Gc(t))return nA(t);if(qc(t))return rA(t);if(Wc(t))return iA(t);if(Kc(t))return lv(t);if(Qc(t))return sA(t);if(Jc(t))return oA(t)}throw Yc(t)}function nA(t){return new Ie(e=>{let n=t[gs]();if(Re(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function rA(t){return new Ie(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function iA(t){return new Ie(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Vc)})}function sA(t){return new Ie(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function lv(t){return new Ie(e=>{aA(t,e).catch(n=>e.error(n))})}function oA(t){return lv(Zc(t))}function aA(t,e){var n,r,i,s;return ov(this,void 0,void 0,function*(){try{for(n=cv(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Qt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Ur(t,e=0){return Fe((n,r)=>{n.subscribe(Ne(r,i=>Qt(r,t,()=>r.next(i),e),()=>Qt(r,t,()=>r.complete(),e),i=>Qt(r,t,()=>r.error(i),e)))})}function jr(t,e=0){return Fe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function uv(t,e){return mt(t).pipe(jr(e),Ur(e))}function dv(t,e){return mt(t).pipe(jr(e),Ur(e))}function hv(t,e){return new Ie(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function fv(t,e){return new Ie(n=>{let r;return Qt(n,e,()=>{r=t[Xc](),Qt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>Re(r?.return)&&r.return()})}function el(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ie(n=>{Qt(n,e,()=>{let r=t[Symbol.asyncIterator]();Qt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function pv(t,e){return el(Zc(t),e)}function gv(t,e){if(t!=null){if(Gc(t))return uv(t,e);if(qc(t))return hv(t,e);if(Wc(t))return dv(t,e);if(Kc(t))return el(t,e);if(Qc(t))return fv(t,e);if(Jc(t))return pv(t,e)}throw Yc(t)}function at(t,e){return e?gv(t,e):mt(t)}function we(...t){let e=Vr(t);return at(t,e)}function bs(t,e){let n=Re(t)?t:()=>t,r=i=>i.error(n());return new Ie(e?i=>e.schedule(r,0,i):r)}function lh(t){return!!t&&(t instanceof Ie||Re(t.lift)&&Re(t.subscribe))}var hr=ds(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Ce(t,e){return Fe((n,r)=>{let i=0;n.subscribe(Ne(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:cA}=Array;function lA(t,e){return cA(e)?t(...e):t(e)}function tl(t){return Ce(e=>lA(t,e))}var{isArray:uA}=Array,{getPrototypeOf:dA,prototype:hA,keys:fA}=Object;function nl(t){if(t.length===1){let e=t[0];if(uA(e))return{args:e,keys:null};if(pA(e)){let n=fA(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function pA(t){return t&&typeof t=="object"&&dA(t)===hA}function rl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function il(...t){let e=Vr(t),n=zc(t),{args:r,keys:i}=nl(t);if(r.length===0)return at([],e);let s=new Ie(gA(r,e,i?o=>rl(i,o):an));return n?s.pipe(tl(n)):s}function gA(t,e,n=an){return r=>{mv(e,()=>{let{length:i}=t,s=new Array(i),o=i,c=i;for(let l=0;l<i;l++)mv(e,()=>{let u=at(t[l],e),d=!1;u.subscribe(Ne(r,h=>{s[l]=h,d||(d=!0,c--),c||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function mv(t,e,n){t?Qt(n,t,e):e()}function yv(t,e,n,r,i,s,o,c){let l=[],u=0,d=0,h=!1,f=()=>{h&&!l.length&&!u&&e.complete()},p=g=>u<r?m(g):l.push(g),m=g=>{s&&e.next(g),u++;let _=!1;mt(n(g,d++)).subscribe(Ne(e,E=>{i?.(E),s?p(E):e.next(E)},()=>{_=!0},void 0,()=>{if(_)try{for(u--;l.length&&u<r;){let E=l.shift();o?Qt(e,o,()=>m(E)):m(E)}f()}catch(E){e.error(E)}}))};return t.subscribe(Ne(e,p,()=>{h=!0,f()})),()=>{c?.()}}function wt(t,e,n=1/0){return Re(e)?wt((r,i)=>Ce((s,o)=>e(r,s,i,o))(mt(t(r,i))),n):(typeof e=="number"&&(n=e),Fe((r,i)=>yv(r,i,t,n)))}function vv(t=1/0){return wt(an,t)}function _v(){return vv(1)}function ws(...t){return _v()(at(t,Vr(t)))}function jo(t){return new Ie(e=>{mt(t()).subscribe(e)})}function uh(...t){let e=zc(t),{args:n,keys:r}=nl(t),i=new Ie(s=>{let{length:o}=n;if(!o){s.complete();return}let c=new Array(o),l=o,u=o;for(let d=0;d<o;d++){let h=!1;mt(n[d]).subscribe(Ne(s,f=>{h||(h=!0,u--),c[d]=f},()=>l--,void 0,()=>{(!l||!h)&&(u||s.next(r?rl(r,c):c),s.complete())}))}});return e?i.pipe(tl(e)):i}var fr=new Ie(_i);function $t(t,e){return Fe((n,r)=>{let i=0;n.subscribe(Ne(r,s=>t.call(e,s,i++)&&r.next(s)))})}function gn(t){return Fe((e,n)=>{let r=null,i=!1,s;r=e.subscribe(Ne(n,void 0,void 0,o=>{s=mt(t(o,gn(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Ev(t,e,n,r,i){return(s,o)=>{let c=n,l=e,u=0;s.subscribe(Ne(o,d=>{let h=u++;l=c?t(l,d,h):(c=!0,d),r&&o.next(l)},i&&(()=>{c&&o.next(l),o.complete()})))}}function Is(t,e){return Re(e)?wt(t,e,1):wt(t,1)}function Br(t){return Fe((e,n)=>{let r=!1;e.subscribe(Ne(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Ht(t){return t<=0?()=>Xt:Fe((e,n)=>{let r=0;e.subscribe(Ne(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function sl(t=mA){return Fe((e,n)=>{let r=!1;e.subscribe(Ne(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function mA(){return new hr}function Bo(t){return Fe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function pr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?$t((i,s)=>t(i,s,r)):an,Ht(1),n?Br(e):sl(()=>new hr))}function Ts(t){return t<=0?()=>Xt:Fe((e,n)=>{let r=[];e.subscribe(Ne(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function dh(t,e){let n=arguments.length>=2;return r=>r.pipe(t?$t((i,s)=>t(i,s,r)):an,Ts(1),n?Br(e):sl(()=>new hr))}function hh(t,e){return Fe(Ev(t,e,arguments.length>=2,!0))}function fh(...t){let e=Vr(t);return Fe((n,r)=>{(e?ws(t,n,e):ws(t,n)).subscribe(r)})}function dt(t,e){return Fe((n,r)=>{let i=null,s=0,o=!1,c=()=>o&&!i&&r.complete();n.subscribe(Ne(r,l=>{i?.unsubscribe();let u=0,d=s++;mt(t(l,d)).subscribe(i=Ne(r,h=>r.next(e?e(l,h,d,u++):h),()=>{i=null,c()}))},()=>{o=!0,c()}))})}function ol(t){return Fe((e,n)=>{mt(t).subscribe(Ne(n,()=>n.complete(),_i)),!n.closed&&e.subscribe(n)})}function yt(t,e,n){let r=Re(t)||e||n?{next:t,error:e,complete:n}:t;return r?Fe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let c=!0;i.subscribe(Ne(s,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),s.next(l)},()=>{var l;c=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},l=>{var u;c=!1,(u=r.error)===null||u===void 0||u.call(r,l),s.error(l)},()=>{var l,u;c&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):an}function bv(t){let e=Me(null);try{return t()}finally{Me(e)}}var Ss=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Sh=new Ss("20.3.15");var dl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ye=class extends Error{code;constructor(e,n){super(zr(e,n)),this.code=e}};function yA(t){return`NG0${Math.abs(t)}`}function zr(t,e){return`${yA(t)}${e?": "+e:""}`}function Ge(t){for(let e in t)if(t[e]===Ge)return e;throw Error("")}function mr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(mr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Ch(t,e){return t?e?`${t} ${e}`:t:e||""}var vA=Ge({__forward_ref__:Ge});function hl(t){return t.__forward_ref__=hl,t.toString=function(){return mr(this())},t}function Zt(t){return Dh(t)?t():t}function Dh(t){return typeof t=="function"&&t.hasOwnProperty(vA)&&t.__forward_ref__===hl}function _e(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ci(t){return{providers:t.providers||[],imports:t.imports||[]}}function qo(t){return _A(t,fl)}function Rh(t){return qo(t)!==null}function _A(t,e){return t.hasOwnProperty(e)&&t[e]||null}function EA(t){let e=t?.[fl]??null;return e||null}function gh(t){return t&&t.hasOwnProperty(cl)?t[cl]:null}var fl=Ge({\u0275prov:Ge}),cl=Ge({\u0275inj:Ge}),Ee=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=_e({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ph(t){return t&&!!t.\u0275providers}var xh=Ge({\u0275cmp:Ge}),Mh=Ge({\u0275dir:Ge}),kh=Ge({\u0275pipe:Ge}),Nh=Ge({\u0275mod:Ge}),Ho=Ge({\u0275fac:Ge}),Di=Ge({__NG_ELEMENT_ID__:Ge}),Iv=Ge({__NG_ENV_ID__:Ge});function Cs(t){return typeof t=="string"?t:t==null?"":String(t)}function Av(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Cs(t)}var Sv=Ge({ngErrorCode:Ge}),bA=Ge({ngErrorMessage:Ge}),wA=Ge({ngTokenPath:Ge});function Oh(t,e){return Cv("",-200,e)}function pl(t,e){throw new ye(-201,!1)}function Cv(t,e,n){let r=new ye(e,t);return r[Sv]=e,r[bA]=t,n&&(r[wA]=n),r}function IA(t){return t[Sv]}var mh;function Dv(){return mh}function cn(t){let e=mh;return mh=t,e}function Fh(t,e,n){let r=qo(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;pl(t,"Injector")}var TA={},Ii=TA,yh="__NG_DI_FLAG__",vh=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Ti(n)||0;try{return this.injector.get(e,r&8?null:Ii,r)}catch(i){if(cs(i))return i;throw i}}};function AA(t,e=0){let n=Pc();if(n===void 0)throw new ye(-203,!1);if(n===null)return Fh(t,void 0,e);{let r=SA(e),i=n.retrieve(t,r);if(cs(i)){if(r.optional)return null;throw i}return i}}function Se(t,e=0){return(Dv()||AA)(Zt(t),e)}function ue(t,e){return Se(t,Ti(e))}function Ti(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function SA(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function _h(t){let e=[];for(let n=0;n<t.length;n++){let r=Zt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new ye(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let c=r[o],l=CA(c);typeof l=="number"?l===-1?i=c.token:s|=l:i=c}e.push(Se(i,s))}else e.push(Se(r))}return e}function Rv(t,e){return t[yh]=e,t.prototype[yh]=e,t}function CA(t){return t[yh]}function Ai(t,e){let n=t.hasOwnProperty(Ho);return n?t[Ho]:null}function Pv(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function xv(t){return t.flat(Number.POSITIVE_INFINITY)}function gl(t,e){t.forEach(n=>Array.isArray(n)?gl(n,e):e(n))}function Lh(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Wo(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Mv(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function kv(t,e,n){let r=Ds(t,e);return r>=0?t[r|1]=n:(r=~r,Mv(t,r,e,n)),r}function ml(t,e){let n=Ds(t,e);if(n>=0)return t[n|1]}function Ds(t,e){return DA(t,e,1)}function DA(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Ri={},mn=[],qr=new Ee(""),Vh=new Ee("",-1),Uh=new Ee(""),zo=class{get(e,n=Ii){if(n===Ii){let i=Cv("",-201);throw i.name="\u0275NotFound",i}return n}};function jh(t){return t[Nh]||null}function Wr(t){return t[xh]||null}function Bh(t){return t[Mh]||null}function Nv(t){return t[kh]||null}function Jt(t){return{\u0275providers:t}}function Ov(...t){return{\u0275providers:$h(!0,t),\u0275fromNgModule:!0}}function $h(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return gl(e,o=>{let c=o;ll(c,s,[],r)&&(i||=[],i.push(c))}),i!==void 0&&Fv(i,s),n}function Fv(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Hh(i,s=>{e(s,r)})}}function ll(t,e,n,r){if(t=Zt(t),!t)return!1;let i=null,s=gh(t),o=!s&&Wr(t);if(!s&&!o){let l=t.ngModule;if(s=gh(l),s)i=l;else return!1}else{if(o&&!o.standalone)return!1;i=t}let c=r.has(i);if(o){if(c)return!1;if(r.add(i),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of l)ll(u,e,n,r)}}else if(s){if(s.imports!=null&&!c){r.add(i);let u;try{gl(s.imports,d=>{ll(d,e,n,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&Fv(u,e)}if(!c){let u=Ai(i)||(()=>new i);e({provide:i,useFactory:u,deps:mn},i),e({provide:Uh,useValue:i,multi:!0},i),e({provide:qr,useValue:()=>Se(i),multi:!0},i)}let l=s.providers;if(l!=null&&!c){let u=t;Hh(l,d=>{e(d,u)})}}else return!1;return i!==t&&t.providers!==void 0}function Hh(t,e){for(let n of t)Ph(n)&&(n=n.\u0275providers),Array.isArray(n)?Hh(n,e):e(n)}var RA=Ge({provide:String,useValue:Ge});function Lv(t){return t!==null&&typeof t=="object"&&RA in t}function PA(t){return!!(t&&t.useExisting)}function xA(t){return!!(t&&t.useFactory)}function ul(t){return typeof t=="function"}var Go=new Ee(""),al={},Tv={},ph;function Ko(){return ph===void 0&&(ph=new zo),ph}var It=class{},Si=class extends It{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,bh(e,o=>this.processProvider(o)),this.records.set(Vh,As(void 0,this)),i.has("environment")&&this.records.set(It,As(void 0,this));let s=this.records.get(Go);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Uh,mn,{self:!0}))}retrieve(e,n){let r=Ti(n)||0;try{return this.get(e,Ii,r)}catch(i){if(cs(i))return i;throw i}}destroy(){$o(this),this._destroyed=!0;let e=Me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Me(e)}}onDestroy(e){return $o(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){$o(this);let n=Wn(this),r=cn(void 0),i;try{return e()}finally{Wn(n),cn(r)}}get(e,n=Ii,r){if($o(this),e.hasOwnProperty(Iv))return e[Iv](this);let i=Ti(r),s,o=Wn(this),c=cn(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let d=FA(e)&&qo(e);d&&this.injectableDefInScope(d)?u=As(Eh(e),al):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let l=i&2?Ko():this.parent;return n=i&8&&n===Ii?null:n,l.get(e,n)}catch(l){let u=IA(l);throw u===-200||u===-201?new ye(u,null):l}finally{cn(c),Wn(o)}}resolveInjectorInitializers(){let e=Me(null),n=Wn(this),r=cn(void 0),i;try{let s=this.get(qr,mn,{self:!0});for(let o of s)o()}finally{Wn(n),cn(r),Me(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(mr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Zt(e);let n=ul(e)?e:Zt(e&&e.provide),r=kA(e);if(!ul(e)&&e.multi===!0){let i=this.records.get(n);i||(i=As(void 0,al,!0),i.factory=()=>_h(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=Me(null);try{if(n.value===Tv)throw Oh(mr(e));return n.value===al&&(n.value=Tv,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&OA(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Me(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Zt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Eh(t){let e=qo(t),n=e!==null?e.factory:Ai(t);if(n!==null)return n;if(t instanceof Ee)throw new ye(204,!1);if(t instanceof Function)return MA(t);throw new ye(204,!1)}function MA(t){if(t.length>0)throw new ye(204,!1);let n=EA(t);return n!==null?()=>n.factory(t):()=>new t}function kA(t){if(Lv(t))return As(void 0,t.useValue);{let e=Vv(t);return As(e,al)}}function Vv(t,e,n){let r;if(ul(t)){let i=Zt(t);return Ai(i)||Eh(i)}else if(Lv(t))r=()=>Zt(t.useValue);else if(xA(t))r=()=>t.useFactory(..._h(t.deps||[]));else if(PA(t))r=(i,s)=>Se(Zt(t.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Zt(t&&(t.useClass||t.provide));if(NA(t))r=()=>new i(..._h(t.deps));else return Ai(i)||Eh(i)}return r}function $o(t){if(t.destroyed)throw new ye(205,!1)}function As(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function NA(t){return!!t.deps}function OA(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function FA(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function bh(t,e){for(let n of t)Array.isArray(n)?bh(n,e):n&&Ph(n)?bh(n.\u0275providers,e):e(n)}function Tt(t,e){let n;t instanceof Si?($o(t),n=t):n=new vh(t);let r,i=Wn(n),s=cn(void 0);try{return e()}finally{Wn(i),cn(s)}}function Uv(){return Dv()!==void 0||Pc()!=null}var xn=0,Ae=1,De=2,Ct=3,yn=4,vn=5,Yo=6,Rs=7,Bt=8,Gr=9,Kn=10,At=11,Ps=12,zh=13,Pi=14,_n=15,Kr=16,xi=17,Yn=18,Xo=19,qh=20,gr=21,yl=22,Qo=23,ln=24,vl=25,Zo=26,en=27,jv=1;var Yr=7,Jo=8,Mi=9,zt=10;function yr(t){return Array.isArray(t)&&typeof t[jv]=="object"}function Mn(t){return Array.isArray(t)&&t[jv]===!0}function Wh(t){return(t.flags&4)!==0}function Xr(t){return t.componentOffset>-1}function xs(t){return(t.flags&1)===1}function ki(t){return!!t.template}function Ms(t){return(t[De]&512)!==0}function Ni(t){return(t[De]&256)===256}var Bv="svg",$v="math";function En(t){for(;Array.isArray(t);)t=t[xn];return t}function Gh(t,e){return En(e[t])}function Xn(t,e){return En(e[t.index])}function _l(t,e){return t.data[e]}function kn(t,e){let n=e[t];return yr(n)?n:n[xn]}function Hv(t){return(t[De]&4)===4}function El(t){return(t[De]&128)===128}function zv(t){return Mn(t[Ct])}function ea(t,e){return e==null?null:t[e]}function Kh(t){t[xi]=0}function Yh(t){t[De]&1024||(t[De]|=1024,El(t)&&na(t))}function qv(t,e){for(;t>0;)e=e[Pi],t--;return e}function ta(t){return!!(t[De]&9216||t[ln]?.dirty)}function bl(t){t[Kn].changeDetectionScheduler?.notify(8),t[De]&64&&(t[De]|=1024),ta(t)&&na(t)}function na(t){t[Kn].changeDetectionScheduler?.notify(0);let e=$r(t);for(;e!==null&&!(e[De]&8192||(e[De]|=8192,!El(e)));)e=$r(e)}function Xh(t,e){if(Ni(t))throw new ye(911,!1);t[gr]===null&&(t[gr]=[]),t[gr].push(e)}function Wv(t,e){if(t[gr]===null)return;let n=t[gr].indexOf(e);n!==-1&&t[gr].splice(n,1)}function $r(t){let e=t[Ct];return Mn(e)?e[Ct]:e}function Qh(t){return t[Rs]??=[]}function Zh(t){return t.cleanup??=[]}function Gv(t,e,n,r){let i=Qh(e);i.push(n),t.firstCreatePass&&Zh(t).push(r,i.length-1)}var ke={lFrame:l_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var wh=!1;function Kv(){return ke.lFrame.elementDepthCount}function Yv(){ke.lFrame.elementDepthCount++}function Xv(){ke.lFrame.elementDepthCount--}function wl(){return ke.bindingsEnabled}function Qv(){return ke.skipHydrationRootTNode!==null}function Zv(t){return ke.skipHydrationRootTNode===t}function Jv(){ke.skipHydrationRootTNode=null}function et(){return ke.lFrame.lView}function Nn(){return ke.lFrame.tView}function qt(t){return ke.lFrame.contextLView=t,t[Bt]}function Wt(t){return ke.lFrame.contextLView=null,t}function bn(){let t=Jh();for(;t!==null&&t.type===64;)t=t.parent;return t}function Jh(){return ke.lFrame.currentTNode}function e_(){let t=ke.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ks(t,e){let n=ke.lFrame;n.currentTNode=t,n.isParent=e}function ef(){return ke.lFrame.isParent}function t_(){ke.lFrame.isParent=!1}function tf(){return wh}function nf(t){let e=wh;return wh=t,e}function n_(){return ke.lFrame.bindingIndex}function r_(t){return ke.lFrame.bindingIndex=t}function rf(){return ke.lFrame.bindingIndex++}function sf(t){let e=ke.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function i_(){return ke.lFrame.inI18n}function s_(t,e){let n=ke.lFrame;n.bindingIndex=n.bindingRootIndex=t,Il(e)}function o_(){return ke.lFrame.currentDirectiveIndex}function Il(t){ke.lFrame.currentDirectiveIndex=t}function a_(t){let e=ke.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function of(){return ke.lFrame.currentQueryIndex}function Tl(t){ke.lFrame.currentQueryIndex=t}function LA(t){let e=t[Ae];return e.type===2?e.declTNode:e.type===1?t[vn]:null}function af(t,e,n){if(n&4){let i=e,s=t;for(;i=i.parent,i===null&&!(n&1);)if(i=LA(s),i===null||(s=s[Pi],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=ke.lFrame=c_();return r.currentTNode=e,r.lView=t,!0}function Al(t){let e=c_(),n=t[Ae];ke.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function c_(){let t=ke.lFrame,e=t===null?null:t.child;return e===null?l_(t):e}function l_(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function u_(){let t=ke.lFrame;return ke.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var cf=u_;function Sl(){let t=u_();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function d_(t){return(ke.lFrame.contextLView=qv(t,ke.lFrame.contextLView))[Bt]}function Qr(){return ke.lFrame.selectedIndex}function Zr(t){ke.lFrame.selectedIndex=t}function h_(){let t=ke.lFrame;return _l(t.tView,t.selectedIndex)}function f_(){return ke.lFrame.currentNamespace}var p_=!0;function Cl(){return p_}function ra(t){p_=t}function Ih(t,e=null,n=null,r){let i=lf(t,e,n,r);return i.resolveInjectorInitializers(),i}function lf(t,e=null,n=null,r,i=new Set){let s=[n||mn,Ov(t)];return r=r||(typeof t=="object"?void 0:mr(t)),new Si(s,e||Ko(),r||null,i)}var vt=class t{static THROW_IF_NOT_FOUND=Ii;static NULL=new zo;static create(e,n){if(Array.isArray(e))return Ih({name:""},n,e,"");{let r=e.name??"";return Ih({name:r},e.parent,e.providers,r)}}static \u0275prov=_e({token:t,providedIn:"any",factory:()=>Se(Vh)});static __NG_ELEMENT_ID__=-1},xt=new Ee(""),Oi=(()=>{class t{static __NG_ELEMENT_ID__=VA;static __NG_ENV_ID__=n=>n}return t})(),Th=class extends Oi{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Ni(this._lView)}onDestroy(e){let n=this._lView;return Xh(n,e),()=>Wv(n,e)}};function VA(){return new Th(et())}var Gn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},un=new Ee("",{providedIn:"root",factory:()=>{let t=ue(It),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Gn),e.handleError(n))}}}),g_={provide:qr,useValue:()=>void ue(Gn),multi:!0};function Ns(t,e){let[n,r,i]=Kd(t,e?.equal),s=n,o=s[Yt];return s.set=r,s.update=i,s.asReadonly=m_.bind(s),s}function m_(){let t=this[Yt];if(t.readonlyFn===void 0){let e=()=>this();e[Yt]=t,t.readonlyFn=e}return t.readonlyFn}var Hr=class{},ia=new Ee("",{providedIn:"root",factory:()=>!1});var uf=new Ee(""),df=new Ee(""),Qn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ut(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Ie(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=_e({token:t,providedIn:"root",factory:()=>new t})}return t})(),Os=(()=>{class t{internalPendingTasks=ue(Qn);scheduler=ue(Hr);errorHandler=ue(un);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=_e({token:t,providedIn:"root",factory:()=>new t})}return t})();function sa(...t){}var hf=(()=>{class t{static \u0275prov=_e({token:t,providedIn:"root",factory:()=>new Ah})}return t})(),Ah=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function $s(t){return{toString:t}.toString()}var Dl="__parameters__";function YA(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function XA(t,e,n){return $s(()=>{let r=YA(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return c.annotation=o,c;function c(l,u,d){let h=l.hasOwnProperty(Dl)?l[Dl]:Object.defineProperty(l,Dl,{value:[]})[Dl];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(o),l}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var tn=Rv(XA("Optional"),8);function QA(t){return typeof t=="function"}var Nl=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Y_(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Yl=(()=>{let t=()=>X_;return t.ngInherit=!0,t})();function X_(t){return t.type.prototype.ngOnChanges&&(t.setInput=JA),ZA}function ZA(){let t=Z_(this),e=t?.current;if(e){let n=t.previous;if(n===Ri)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function JA(t,e,n,r,i){let s=this.declaredInputs[r],o=Z_(t)||eS(t,{previous:Ri,current:null}),c=o.current||(o.current={}),l=o.previous,u=l[s];c[s]=new Nl(u&&u.currentValue,n,l===Ri),Y_(t,e,i,n)}var Q_="__ngSimpleChanges__";function Z_(t){return t[Q_]||null}function eS(t,e){return t[Q_]=e}var y_=[];var Ze=function(t,e=null,n){for(let r=0;r<y_.length;r++){let i=y_[r];i(t,e,n)}};function tS(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=X_(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function J_(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:c,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:d}=s;o&&(t.contentHooks??=[]).push(-n,o),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),l&&(t.viewHooks??=[]).push(-n,l),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function Pl(t,e,n){eE(t,e,3,n)}function xl(t,e,n,r){(t[De]&3)===n&&eE(t,e,n,r)}function ff(t,e){let n=t[De];(n&3)===e&&(n&=16383,n+=1,t[De]=n)}function eE(t,e,n,r){let i=r!==void 0?t[xi]&65535:0,s=r??-1,o=e.length-1,c=0;for(let l=i;l<o;l++)if(typeof e[l+1]=="number"){if(c=e[l],r!=null&&c>=r)break}else e[l]<0&&(t[xi]+=65536),(c<s||s==-1)&&(nS(t,n,e,l),t[xi]=(t[xi]&4294901760)+l+2),l++}function v_(t,e){Ze(4,t,e);let n=Me(null);try{e.call(t)}finally{Me(n),Ze(5,t,e)}}function nS(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],c=t[o];i?t[De]>>14<t[xi]>>16&&(t[De]&3)===e&&(t[De]+=16384,v_(c,s)):v_(c,s)}var Ls=-1,ca=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function rS(t){return(t.flags&8)!==0}function iS(t){return(t.flags&16)!==0}function sS(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],c=n[r++];t.setAttribute(e,o,c,s)}else{let s=i,o=n[++r];aS(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function oS(t){return t===3||t===4||t===6}function aS(t){return t.charCodeAt(0)===64}function $f(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?__(t,n,i,null,e[++r]):__(t,n,i,null,null))}}return t}function __(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let c=t[s++];if(typeof c=="number"){if(c===e){o=-1;break}else if(c>e){o=s-1;break}}}for(;s<t.length;){let c=t[s];if(typeof c=="number")break;if(c===n){i!==null&&(t[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),i!==null&&t.splice(s++,0,i)}function tE(t){return t!==Ls}function Ol(t){return t&32767}function cS(t){return t>>16}function Fl(t,e){let n=cS(t),r=e;for(;n>0;)r=r[Pi],n--;return r}var Ef=!0;function E_(t){let e=Ef;return Ef=t,e}var lS=256,nE=lS-1,rE=5,uS=0,Zn={};function dS(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Di)&&(r=n[Di]),r==null&&(r=n[Di]=uS++);let i=r&nE,s=1<<i;e.data[t+(i>>rE)]|=s}function iE(t,e){let n=sE(t,e);if(n!==-1)return n;let r=e[Ae];r.firstCreatePass&&(t.injectorIndex=e.length,pf(r.data,t),pf(e,null),pf(r.blueprint,null));let i=Hf(t,e),s=t.injectorIndex;if(tE(i)){let o=Ol(i),c=Fl(i,e),l=c[Ae].data;for(let u=0;u<8;u++)e[s+u]=c[o+u]|l[o+u]}return e[s+8]=i,s}function pf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function sE(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Hf(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=uE(i),r===null)return Ls;if(n++,i=i[Pi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ls}function hS(t,e,n){dS(t,e,n)}function oE(t,e,n){if(n&8||t!==void 0)return t;pl(e,"NodeInjector")}function aE(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Gr],s=cn(void 0);try{return i?i.get(e,r,n&8):Fh(e,r,n&8)}finally{cn(s)}}return oE(r,e,n)}function cE(t,e,n,r=0,i){if(t!==null){if(e[De]&2048&&!(r&2)){let o=mS(t,e,n,r,Zn);if(o!==Zn)return o}let s=lE(t,e,n,r,Zn);if(s!==Zn)return s}return aE(e,n,r,i)}function lE(t,e,n,r,i){let s=pS(n);if(typeof s=="function"){if(!af(e,t,r))return r&1?oE(i,n,r):aE(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&8))pl(n);else return o}finally{cf()}}else if(typeof s=="number"){let o=null,c=sE(t,e),l=Ls,u=r&1?e[_n][vn]:null;for((c===-1||r&4)&&(l=c===-1?Hf(t,e):e[c+8],l===Ls||!w_(r,!1)?c=-1:(o=e[Ae],c=Ol(l),e=Fl(l,e)));c!==-1;){let d=e[Ae];if(b_(s,c,d.data)){let h=fS(c,e,n,o,r,u);if(h!==Zn)return h}l=e[c+8],l!==Ls&&w_(r,e[Ae].data[c+8]===u)&&b_(s,c,e)?(o=d,c=Ol(l),e=Fl(l,e)):c=-1}}return i}function fS(t,e,n,r,i,s){let o=e[Ae],c=o.data[t+8],l=r==null?Xr(c)&&Ef:r!=o&&(c.type&3)!==0,u=i&1&&s===c,d=Ml(c,o,n,l,u);return d!==null?Ll(e,o,d,c,i):Zn}function Ml(t,e,n,r,i){let s=t.providerIndexes,o=e.data,c=s&1048575,l=t.directiveStart,u=t.directiveEnd,d=s>>20,h=r?c:c+d,f=i?c+d:u;for(let p=h;p<f;p++){let m=o[p];if(p<l&&n===m||p>=l&&m.type===n)return p}if(i){let p=o[l];if(p&&ki(p)&&p.type===n)return l}return null}function Ll(t,e,n,r,i){let s=t[n],o=e.data;if(s instanceof ca){let c=s;if(c.resolving){let p=Av(o[n]);throw Oh(p)}let l=E_(c.canSeeViewProviders);c.resolving=!0;let u=o[n].type||o[n],d,h=c.injectImpl?cn(c.injectImpl):null,f=af(t,r,0);try{s=t[n]=c.factory(void 0,i,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&tS(n,o[n],e)}finally{h!==null&&cn(h),E_(l),c.resolving=!1,cf()}}return s}function pS(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Di)?t[Di]:void 0;return typeof e=="number"?e>=0?e&nE:gS:e}function b_(t,e,n){let r=1<<t;return!!(n[e+(t>>rE)]&r)}function w_(t,e){return!(t&2)&&!(t&1&&e)}var Fi=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return cE(this._tNode,this._lView,e,Ti(r),n)}};function gS(){return new Fi(bn(),et())}function Xl(t){return $s(()=>{let e=t.prototype.constructor,n=e[Ho]||bf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Ho]||bf(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function bf(t){return Dh(t)?()=>{let e=bf(Zt(t));return e&&e()}:Ai(t)}function mS(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[De]&2048&&!Ms(o);){let c=lE(s,o,n,r|2,Zn);if(c!==Zn)return c;let l=s.parent;if(!l){let u=o[qh];if(u){let d=u.get(n,Zn,r);if(d!==Zn)return d}l=uE(o),o=o[Pi]}s=l}return i}function uE(t){let e=t[Ae],n=e.type;return n===2?e.declTNode:n===1?t[vn]:null}function yS(){return Hs(bn(),et())}function Hs(t,e){return new zs(Xn(t,e))}var zs=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=yS}return t})();function vS(t){return t instanceof zs?t.nativeElement:t}function _S(){return this._results[Symbol.iterator]()}var Vl=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ot}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=xv(e);(this._changesDetected=!Pv(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=_S};function dE(t){return(t.flags&128)===128}var zf=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(zf||{}),hE=new Map,ES=0;function bS(){return ES++}function wS(t){hE.set(t[Xo],t)}function wf(t){hE.delete(t[Xo])}var I_="__ngContext__";function Vs(t,e){yr(e)?(t[I_]=e[Xo],wS(e)):t[I_]=e}function fE(t){return gE(t[Ps])}function pE(t){return gE(t[yn])}function gE(t){for(;t!==null&&!Mn(t);)t=t[yn];return t}var If;function qf(t){If=t}function mE(){if(If!==void 0)return If;if(typeof document<"u")return document;throw new ye(210,!1)}var Ql=new Ee("",{providedIn:"root",factory:()=>IS}),IS="ng",Zl=new Ee(""),ji=new Ee("",{providedIn:"platform",factory:()=>"unknown"});var Jl=new Ee("",{providedIn:"root",factory:()=>mE().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var TS="h",AS="b";var yE=!1,vE=new Ee("",{providedIn:"root",factory:()=>yE});var SS=(t,e,n,r)=>{};function CS(t,e,n,r){SS(t,e,n,r)}function Wf(t){return(t.flags&32)===32}var DS=()=>null;function _E(t,e,n=!1){return DS(t,e,n)}function EE(t,e){let n=t.contentQueries;if(n!==null){let r=Me(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let c=t.data[o];Tl(s),c.contentQueries(2,e[o],o)}}}finally{Me(r)}}}function Tf(t,e,n){Tl(0);let r=Me(null);try{e(t,n)}finally{Me(r)}}function Gf(t,e,n){if(Wh(e)){let r=Me(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let c=t.data[o];if(c.contentQueries){let l=n[o];c.contentQueries(1,l,o)}}}finally{Me(r)}}}var vr=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(vr||{});var Ul=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${dl})`}};function Kf(t){return t instanceof Ul?t.changingThisBreaksApplicationSecurity:t}function bE(t,e){let n=wE(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${dl})`)}return n===e}function wE(t){return t instanceof Ul&&t.getTypeName()||null}var RS=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function IE(t){return t=String(t),t.match(RS)?t:"unsafe:"+t}var PS=/^>|^->|<!--|-->|--!>|<!-$/g,xS=/(<|>)/g,MS="\u200B$1\u200B";function kS(t){return t.replace(PS,e=>e.replace(xS,MS))}function NS(t,e){return t.createText(e)}function OS(t,e,n){t.setValue(e,n)}function FS(t,e){return t.createComment(kS(e))}function TE(t,e,n){return t.createElement(e,n)}function jl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function AE(t,e,n){t.appendChild(e,n)}function T_(t,e,n,r,i){r!==null?jl(t,e,n,r,i):AE(t,e,n)}function LS(t,e,n,r){t.removeChild(null,e,n,r)}function VS(t,e,n){t.setAttribute(e,"style",n)}function US(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function SE(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&sS(t,e,r),i!==null&&US(t,e,i),s!==null&&VS(t,e,s)}var Yf=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Yf||{});function Xf(t){let e=jS();return e?e.sanitize(Yf.URL,t)||"":bE(t,"URL")?Kf(t):IE(Cs(t))}function jS(){let t=et();return t&&t[Kn].sanitizer}function CE(t){return t instanceof Function?t():t}function BS(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}var DE="ng-template";function $S(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&BS(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Qf(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Qf(t){return t.type===4&&t.value!==DE}function HS(t,e,n){let r=t.type===4&&!n?DE:t.value;return e===r}function zS(t,e,n){let r=4,i=t.attrs,s=i!==null?GS(i):0,o=!1;for(let c=0;c<e.length;c++){let l=e[c];if(typeof l=="number"){if(!o&&!On(r)&&!On(l))return!1;if(o&&On(l))continue;o=!1,r=l|r&1;continue}if(!o)if(r&4){if(r=2|r&1,l!==""&&!HS(t,l,n)||l===""&&e.length===1){if(On(r))return!1;o=!0}}else if(r&8){if(i===null||!$S(t,i,l,n)){if(On(r))return!1;o=!0}}else{let u=e[++c],d=qS(l,i,Qf(t),n);if(d===-1){if(On(r))return!1;o=!0;continue}if(u!==""){let h;if(d>s?h="":h=i[d+1].toLowerCase(),r&2&&u!==h){if(On(r))return!1;o=!0}}}}return On(r)||o}function On(t){return(t&1)===0}function qS(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return KS(e,t)}function WS(t,e,n=!1){for(let r=0;r<e.length;r++)if(zS(t,e[r],n))return!0;return!1}function GS(t){for(let e=0;e<t.length;e++){let n=t[e];if(oS(n))return e}return t.length}function KS(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function A_(t,e){return t?":not("+e.trim()+")":e}function YS(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let c=t[++n];i+="["+o+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!On(o)&&(e+=A_(s,i),i=""),r=o,s=s||!On(r);n++}return i!==""&&(e+=A_(s,i)),e}function XS(t){return t.map(YS).join(",")}function QS(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!On(i))break;i=s}r++}return n.length&&e.push(1,...n),e}var er={};function Zf(t,e,n,r,i,s,o,c,l,u,d){let h=en+r,f=h+i,p=ZS(h,f),m=typeof u=="function"?u():u;return p[Ae]={type:t,blueprint:p,template:n,queries:null,viewQuery:c,declTNode:e,data:p.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1,ssrId:d}}function ZS(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:er);return n}function JS(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Zf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Jf(t,e,n,r,i,s,o,c,l,u,d){let h=e.blueprint.slice();return h[xn]=i,h[De]=r|4|128|8|64|1024,(u!==null||t&&t[De]&2048)&&(h[De]|=2048),Kh(h),h[Ct]=h[Pi]=t,h[Bt]=n,h[Kn]=o||t&&t[Kn],h[At]=c||t&&t[At],h[Gr]=l||t&&t[Gr]||null,h[vn]=s,h[Xo]=bS(),h[Yo]=d,h[qh]=u,h[_n]=e.type==2?t[_n]:h,h}function eC(t,e,n){let r=Xn(e,t),i=JS(n),s=t[Kn].rendererFactory,o=ep(t,Jf(t,i,null,RE(n),r,e,null,s.createRenderer(r,n),null,null,null));return t[e.index]=o}function RE(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function PE(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ep(t,e){return t[Ps]?t[zh][yn]=e:t[Ps]=e,t[zh]=e,e}function Je(t=1){xE(Nn(),et(),Qr()+t,!1)}function xE(t,e,n,r){if(!r)if((e[De]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Pl(e,s,n)}else{let s=t.preOrderHooks;s!==null&&xl(e,s,0,n)}Zr(n)}var eu=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(eu||{});function Af(t,e,n,r){let i=Me(null);try{let[s,o,c]=t.inputs[n],l=null;(o&eu.SignalBased)!==0&&(l=e[s][Yt]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):c!==null&&(r=c.call(e,r)),t.setInput!==null?t.setInput(e,l,r,n,s):Y_(e,l,s,r)}finally{Me(i)}}var Jn=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Jn||{}),tC;function tp(t,e){return tC(t,e)}var Us=new Set,np=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(np||{}),fa=new Ee(""),S_=new Set;function tu(t){S_.has(t)||(S_.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var ME=!1,Sf=class extends ot{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Uv()&&(this.destroyRef=ue(Oi,{optional:!0})??void 0,this.pendingTasks=ue(Qn,{optional:!0})??void 0)}emit(e){let n=Me(null);try{super.next(e)}finally{Me(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let c=super.subscribe({next:i,error:s,complete:o});return e instanceof rt&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Gt=Sf;function kE(t){let e,n;function r(){t=sa;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function C_(t){return queueMicrotask(()=>t()),()=>{t=sa}}var rp="isAngularZone",Bl=rp+"_ID",nC=0,ze=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Gt(!1);onMicrotaskEmpty=new Gt(!1);onStable=new Gt(!1);onError=new Gt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=ME}=e;if(typeof Zone>"u")throw new ye(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,sC(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(rp)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new ye(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new ye(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,rC,sa,sa);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},rC={};function ip(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function iC(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){kE(()=>{t.callbackScheduled=!1,Cf(t),t.isCheckStableRunning=!0,ip(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Cf(t)}function sC(t){let e=()=>{iC(t)},n=nC++;t._inner=t._inner.fork({name:"angular",properties:{[rp]:!0,[Bl]:n,[Bl+n]:!0},onInvokeTask:(r,i,s,o,c,l)=>{if(oC(l))return r.invokeTask(s,o,c,l);try{return D_(t),r.invokeTask(s,o,c,l)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),R_(t)}},onInvoke:(r,i,s,o,c,l,u)=>{try{return D_(t),r.invoke(s,o,c,l,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!aC(l)&&e(),R_(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Cf(t),ip(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Cf(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function D_(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function R_(t){t._nesting--,ip(t)}var $l=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Gt;onMicrotaskEmpty=new Gt;onStable=new Gt;onError=new Gt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function oC(t){return NE(t,"__ignore_ng_zone__")}function aC(t){return NE(t,"__scheduler_tick__")}function NE(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var OE=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=_e({token:t,providedIn:"root",factory:()=>new t})}return t})();var cC=new Ee("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function FE(t,e,n){let r=t.get(cC);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function lC(t,e){for(let[n,r]of e)FE(t,r.animateFns)}function P_(t,e,n,r){let i=t?.[Zo]?.enter;e!==null&&i&&i.has(n.index)&&lC(r,i)}function Fs(t,e,n,r,i,s,o,c){if(i!=null){let l,u=!1;Mn(i)?l=i:yr(i)&&(u=!0,i=i[xn]);let d=En(i);t===0&&r!==null?(P_(c,r,s,n),o==null?AE(e,r,d):jl(e,r,d,o||null,!0)):t===1&&r!==null?(P_(c,r,s,n),jl(e,r,d,o||null,!0)):t===2?x_(c,s,n,h=>{LS(e,d,u,h)}):t===3&&x_(c,s,n,()=>{e.destroyNode(d)}),l!=null&&wC(e,t,n,l,s,r,o)}}function uC(t,e){LE(t,e),e[xn]=null,e[vn]=null}function dC(t,e,n,r,i,s){r[xn]=i,r[vn]=e,nu(t,r,n,1,i,s)}function LE(t,e){e[Kn].changeDetectionScheduler?.notify(9),nu(t,e,e[At],2,null,null)}function hC(t){let e=t[Ps];if(!e)return gf(t[Ae],t);for(;e;){let n=null;if(yr(e))n=e[Ps];else{let r=e[zt];r&&(n=r)}if(!n){for(;e&&!e[yn]&&e!==t;)yr(e)&&gf(e[Ae],e),e=e[Ct];e===null&&(e=t),yr(e)&&gf(e[Ae],e),n=e&&e[yn]}e=n}}function sp(t,e){let n=t[Mi],r=n.indexOf(e);n.splice(r,1)}function VE(t,e){if(Ni(e))return;let n=e[At];n.destroyNode&&nu(t,e,n,3,null,null),hC(e)}function gf(t,e){if(Ni(e))return;let n=Me(null);try{e[De]&=-129,e[De]|=256,e[ln]&&Vo(e[ln]),gC(t,e),pC(t,e),e[Ae].type===1&&e[At].destroy();let r=e[Kr];if(r!==null&&Mn(e[Ct])){r!==e[Ct]&&sp(r,e);let i=e[Yn];i!==null&&i.detachView(t)}wf(e)}finally{Me(n)}}function x_(t,e,n,r){let i=t?.[Zo];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&Us.add(t),FE(n,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),c=[];if(o){for(let l=0;l<o.animateFns.length;l++){let u=o.animateFns[l],{promise:d}=u();c.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),fC(t,r)}else t&&Us.delete(t),r(!1)},i)}function fC(t,e){let n=t[Zo]?.running;if(n){n.then(()=>{t[Zo].running=void 0,Us.delete(t),e(!0)});return}e(!1)}function pC(t,e){let n=t.cleanup,r=e[Rs];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let c=n[o+3];c>=0?r[c]():r[-c].unsubscribe(),o+=2}else{let c=r[n[o+1]];n[o].call(c)}r!==null&&(e[Rs]=null);let i=e[gr];if(i!==null){e[gr]=null;for(let o=0;o<i.length;o++){let c=i[o];c()}}let s=e[Qo];if(s!==null){e[Qo]=null;for(let o of s)o.destroy()}}function gC(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ca)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let c=i[s[o]],l=s[o+1];Ze(4,c,l);try{l.call(c)}finally{Ze(5,c,l)}}else{Ze(4,i,s);try{s.call(i)}finally{Ze(5,i,s)}}}}}function mC(t,e,n){return yC(t,e.parent,n)}function yC(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[xn];if(Xr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===vr.None||i===vr.Emulated)return null}return Xn(r,n)}function vC(t,e,n){return EC(t,e,n)}function _C(t,e,n){return t.type&40?Xn(t,n):null}var EC=_C,M_;function op(t,e,n,r){let i=mC(t,r,e),s=e[At],o=r.parent||e[vn],c=vC(o,r,e);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)T_(s,i,n[l],c,!1);else T_(s,i,n,c,!1);M_!==void 0&&M_(s,r,e,n,i)}function oa(t,e){if(e!==null){let n=e.type;if(n&3)return Xn(e,t);if(n&4)return Df(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return oa(t,r);{let i=t[e.index];return Mn(i)?Df(-1,i):En(i)}}else{if(n&128)return oa(t,e.next);if(n&32)return tp(e,t)()||En(t[e.index]);{let r=UE(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=$r(t[_n]);return oa(i,r)}else return oa(t,e.next)}}}return null}function UE(t,e){if(e!==null){let r=t[_n][vn],i=e.projection;return r.projection[i]}return null}function Df(t,e){let n=zt+t+1;if(n<e.length){let r=e[n],i=r[Ae].firstChild;if(i!==null)return oa(r,i)}return e[Yr]}function ap(t,e,n,r,i,s,o){for(;n!=null;){let c=r[Gr];if(n.type===128){n=n.next;continue}let l=r[n.index],u=n.type;if(o&&e===0&&(l&&Vs(En(l),r),n.flags|=2),!Wf(n))if(u&8)ap(t,e,n.child,r,i,s,!1),Fs(e,t,c,i,l,n,s,r);else if(u&32){let d=tp(n,r),h;for(;h=d();)Fs(e,t,c,i,h,n,s,r);Fs(e,t,c,i,l,n,s,r)}else u&16?bC(t,e,r,n,i,s):Fs(e,t,c,i,l,n,s,r);n=o?n.projectionNext:n.next}}function nu(t,e,n,r,i,s){ap(n,r,t.firstChild,e,i,s,!1)}function bC(t,e,n,r,i,s){let o=n[_n],l=o[vn].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let d=l[u];Fs(e,t,n[Gr],i,d,r,s,n)}else{let u=l,d=o[Ct];dE(r)&&(u.flags|=128),ap(t,e,u,d,i,s,!0)}}function wC(t,e,n,r,i,s,o){let c=r[Yr],l=En(r);c!==l&&Fs(e,t,n,s,c,i,o);for(let u=zt;u<r.length;u++){let d=r[u];nu(d[Ae],d,t,e,s,c)}}function IC(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Jn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Jn.Important),t.setStyle(n,r,i,s))}}function jE(t,e,n,r,i){let s=Qr(),o=r&2;try{Zr(-1),o&&e.length>en&&xE(t,e,en,!1),Ze(o?2:0,i,n),n(r,i)}finally{Zr(s),Ze(o?3:1,i,n)}}function ru(t,e,n){xC(t,e,n),(n.flags&64)===64&&MC(t,e,n)}function cp(t,e,n=Xn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],c=o===-1?n(e,t):t[o];t[i++]=c}}}function TC(t,e,n,r){let s=r.get(vE,yE)||n===vr.ShadowDom,o=t.selectRootElement(e,s);return AC(o),o}function AC(t){SC(t)}var SC=()=>null;function CC(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function DC(t,e,n,r,i,s){let o=e[Ae];if(up(t,o,e,n,r)){Xr(t)&&PC(e,t.index);return}t.type&3&&(n=CC(n)),RC(t,e,n,r,i,s)}function RC(t,e,n,r,i,s){if(t.type&3){let o=Xn(t,e);r=s!=null?s(r,t.value||"",n):r,i.setProperty(o,n,r)}else t.type&12}function PC(t,e){let n=kn(e,t);n[De]&16||(n[De]|=64)}function xC(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Xr(n)&&eC(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||iE(n,e);let s=n.initialInputs;for(let o=r;o<i;o++){let c=t.data[o],l=Ll(e,t,o,n);if(Vs(l,e),s!==null&&NC(e,o-r,l,c,n,s),ki(c)){let u=kn(n.index,e);u[Bt]=Ll(e,t,o,n)}}}function MC(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=o_();try{Zr(s);for(let c=r;c<i;c++){let l=t.data[c],u=e[c];Il(c),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&kC(l,u)}}finally{Zr(-1),Il(o)}}function kC(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function lp(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let s=n[i];WS(e,s.selectors,!1)&&(r??=[],ki(s)?r.unshift(s):r.push(s))}return r}function NC(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let c=0;c<o.length;c+=2){let l=o[c],u=o[c+1];Af(r,n,l,u)}}function BE(t,e,n,r,i){let s=en+n,o=e[Ae],c=i(o,e,t,r,n);e[s]=c,ks(t,!0);let l=t.type===2;return l?(SE(e[At],c,t),(Kv()===0||xs(t))&&Vs(c,e),Yv()):Vs(c,e),Cl()&&(!l||!Wf(t))&&op(o,e,c,t),t}function $E(t){let e=t;return ef()?t_():(e=e.parent,ks(e,!1)),e}function OC(t,e){let n=t[Gr];if(!n)return;let r;try{r=n.get(un,null)}catch{r=null}r?.(e)}function up(t,e,n,r,i){let s=t.inputs?.[r],o=t.hostDirectiveInputs?.[r],c=!1;if(o)for(let l=0;l<o.length;l+=2){let u=o[l],d=o[l+1],h=e.data[u];Af(h,n[u],d,i),c=!0}if(s)for(let l of s){let u=n[l],d=e.data[l];Af(d,u,r,i),c=!0}return c}function FC(t,e){let n=kn(e,t),r=n[Ae];LC(r,n);let i=n[xn];i!==null&&n[Yo]===null&&(n[Yo]=_E(i,n[Gr])),Ze(18),dp(r,n,n[Bt]),Ze(19,n[Bt])}function LC(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function dp(t,e,n){Al(e);try{let r=t.viewQuery;r!==null&&Tf(1,r,n);let i=t.template;i!==null&&jE(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Yn]?.finishViewCreation(t),t.staticContentQueries&&EE(t,e),t.staticViewQueries&&Tf(2,t.viewQuery,n);let s=t.components;s!==null&&VC(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[De]&=-5,Sl()}}function VC(t,e){for(let n=0;n<e.length;n++)FC(t,e[n])}function UC(t,e,n,r){let i=Me(null);try{let s=e.tView,c=t[De]&4096?4096:16,l=Jf(t,s,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];l[Kr]=u;let d=t[Yn];return d!==null&&(l[Yn]=d.createEmbeddedView(s)),dp(s,l,n),l}finally{Me(i)}}function k_(t,e){return!e||e.firstChild===null||dE(t)}function la(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(En(s)),Mn(s)&&HE(s,r);let o=n.type;if(o&8)la(t,e,n.child,r);else if(o&32){let c=tp(n,e),l;for(;l=c();)r.push(l)}else if(o&16){let c=UE(e,n);if(Array.isArray(c))r.push(...c);else{let l=$r(e[_n]);la(l[Ae],l,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function HE(t,e){for(let n=zt;n<t.length;n++){let r=t[n],i=r[Ae].firstChild;i!==null&&la(r[Ae],r,i,e)}t[Yr]!==t[xn]&&e.push(t[Yr])}function zE(t){if(t[vl]!==null){for(let e of t[vl])e.impl.addSequence(e);t[vl].length=0}}var qE=[];function jC(t){return t[ln]??BC(t)}function BC(t){let e=qE.pop()??Object.create(HC);return e.lView=t,e}function $C(t){t.lView[ln]!==t&&(t.lView=null,qE.push(t))}var HC=Be(ge({},No),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{na(t.lView)},consumerOnSignalRead(){this.lView[ln]=this}});function zC(t){let e=t[ln]??Object.create(qC);return e.lView=t,e}var qC=Be(ge({},No),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=$r(t.lView);for(;e&&!WE(e[Ae]);)e=$r(e);e&&Yh(e)},consumerOnSignalRead(){this.lView[ln]=this}});function WE(t){return t.type!==2}function GE(t){if(t[Qo]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Qo])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[De]&8192)}}var WC=100;function KE(t,e=0){let r=t[Kn].rendererFactory,i=!1;i||r.begin?.();try{GC(t,e)}finally{i||r.end?.()}}function GC(t,e){let n=tf();try{nf(!0),Rf(t,e);let r=0;for(;ta(t);){if(r===WC)throw new ye(103,!1);r++,Rf(t,1)}}finally{nf(n)}}function KC(t,e,n,r){if(Ni(e))return;let i=e[De],s=!1,o=!1;Al(e);let c=!0,l=null,u=null;s||(WE(t)?(u=jC(e),l=Fo(u)):kc()===null?(c=!1,u=zC(e),l=Fo(u)):e[ln]&&(Vo(e[ln]),e[ln]=null));try{Kh(e),r_(t.bindingStartIndex),n!==null&&jE(t,e,n,2,r);let d=(i&3)===3;if(!s)if(d){let p=t.preOrderCheckHooks;p!==null&&Pl(e,p,null)}else{let p=t.preOrderHooks;p!==null&&xl(e,p,0,null),ff(e,0)}if(o||YC(e),GE(e),YE(e,0),t.contentQueries!==null&&EE(t,e),!s)if(d){let p=t.contentCheckHooks;p!==null&&Pl(e,p)}else{let p=t.contentHooks;p!==null&&xl(e,p,1),ff(e,1)}QC(t,e);let h=t.components;h!==null&&QE(e,h,0);let f=t.viewQuery;if(f!==null&&Tf(2,f,r),!s)if(d){let p=t.viewCheckHooks;p!==null&&Pl(e,p)}else{let p=t.viewHooks;p!==null&&xl(e,p,2),ff(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[yl]){for(let p of e[yl])p();e[yl]=null}s||(zE(e),e[De]&=-73)}catch(d){throw s||na(e),d}finally{u!==null&&(Nc(u,l),c&&$C(u)),Sl()}}function YE(t,e){for(let n=fE(t);n!==null;n=pE(n))for(let r=zt;r<n.length;r++){let i=n[r];XE(i,e)}}function YC(t){for(let e=fE(t);e!==null;e=pE(e)){if(!(e[De]&2))continue;let n=e[Mi];for(let r=0;r<n.length;r++){let i=n[r];Yh(i)}}}function XC(t,e,n){Ze(18);let r=kn(e,t);XE(r,n),Ze(19,r[Bt])}function XE(t,e){El(t)&&Rf(t,e)}function Rf(t,e){let r=t[Ae],i=t[De],s=t[ln],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Lo(s)),o||=!1,s&&(s.dirty=!1),t[De]&=-9217,o)KC(r,t,r.template,t[Bt]);else if(i&8192){let c=Me(null);try{GE(t),YE(t,1);let l=r.components;l!==null&&QE(t,l,1),zE(t)}finally{Me(c)}}}function QE(t,e,n){for(let r=0;r<e.length;r++)XC(t,e[r],n)}function QC(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Zr(~i);else{let s=i,o=n[++r],c=n[++r];s_(o,s);let l=e[s];Ze(24,l),c(2,l),Ze(25,l)}}}finally{Zr(-1)}}function hp(t,e){let n=tf()?64:1088;for(t[Kn].changeDetectionScheduler?.notify(e);t;){t[De]|=n;let r=$r(t);if(Ms(t)&&!r)return t;t=r}return null}function ZE(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function ZC(t,e,n,r=!0){let i=e[Ae];if(JC(i,e,t,n),r){let o=Df(n,t),c=e[At],l=c.parentNode(t[Yr]);l!==null&&dC(i,t[vn],c,e,l,o)}let s=e[Yo];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Pf(t,e){if(t.length<=zt)return;let n=zt+e,r=t[n];if(r){let i=r[Kr];i!==null&&i!==t&&sp(i,r),e>0&&(t[n-1][yn]=r[yn]);let s=Wo(t,zt+e);uC(r[Ae],r);let o=s[Yn];o!==null&&o.detachView(s[Ae]),r[Ct]=null,r[yn]=null,r[De]&=-129}return r}function JC(t,e,n,r){let i=zt+r,s=n.length;r>0&&(n[i-1][yn]=e),r<s-zt?(e[yn]=n[i],Lh(n,zt+r,e)):(n.push(e),e[yn]=null),e[Ct]=n;let o=e[Kr];o!==null&&n!==o&&JE(o,e);let c=e[Yn];c!==null&&c.insertView(t),bl(e),e[De]|=128}function JE(t,e){let n=t[Mi],r=e[Ct];if(yr(r))t[De]|=2;else{let i=r[Ct][_n];e[_n]!==i&&(t[De]|=2)}n===null?t[Mi]=[e]:n.push(e)}var Jr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[Ae];return la(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Bt]}set context(e){this._lView[Bt]=e}get destroyed(){return Ni(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ct];if(Mn(e)){let n=e[Jo],r=n?n.indexOf(this):-1;r>-1&&(Pf(e,r),Wo(n,r))}this._attachedToViewContainer=!1}VE(this._lView[Ae],this._lView)}onDestroy(e){Xh(this._lView,e)}markForCheck(){hp(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[De]&=-129}reattach(){bl(this._lView),this._lView[De]|=128}detectChanges(){this._lView[De]|=1024,KE(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ye(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ms(this._lView),n=this._lView[Kr];n!==null&&!e&&sp(n,this._lView),LE(this._lView[Ae],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ye(902,!1);this._appRef=e;let n=Ms(this._lView),r=this._lView[Kr];r!==null&&!n&&JE(r,this._lView),bl(this._lView)}};var ei=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=eD;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let s=UC(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Jr(s)}}return t})();function eD(){return fp(bn(),et())}function fp(t,e){return t.type&4?new ei(e,t,Hs(t,e)):null}function pp(t,e,n,r,i){let s=t.data[e];if(s===null)s=tD(t,e,n,r,i),i_()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=e_();s.injectorIndex=o===null?-1:o.injectorIndex}return ks(s,!0),s}function tD(t,e,n,r,i){let s=Jh(),o=ef(),c=o?s:s&&s.parent,l=t.data[e]=rD(t,c,n,e,r,i);return nD(t,l,s,o),l}function nD(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function rD(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,c=0;return Qv()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var KH=new RegExp(`^(\\d+)*(${AS}|${TS})*(.*)`);var iD=()=>null;function N_(t,e){return iD(t,e)}var eb=class{},iu=class{},xf=class{resolveComponentFactory(e){throw new ye(917,!1)}},pa=class{static NULL=new xf},Li=class{};var tb=(()=>{class t{static \u0275prov=_e({token:t,providedIn:"root",factory:()=>null})}return t})();var kl={},Mf=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,kl,r);return i!==kl||n===kl?i:this.parentInjector.get(e,n,r)}};function O_(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let c=e[o];if(typeof c=="number")s=c;else if(s==1)i=Ch(i,c);else if(s==2){let l=c,u=e[++o];r=Ch(r,l+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Fn(t,e=0){let n=et();if(n===null)return Se(t,e);let r=bn();return cE(r,n,Zt(t),e)}function nb(t,e,n,r,i){let s=r===null?null:{"":-1},o=i(t,n);if(o!==null){let c=o,l=null,u=null;for(let d of o)if(d.resolveHostDirectives!==null){[c,l,u]=d.resolveHostDirectives(o);break}aD(t,e,n,c,s,l,u)}s!==null&&r!==null&&sD(n,r,s)}function sD(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new ye(-301,!1);r.push(e[i],s)}}function oD(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function aD(t,e,n,r,i,s,o){let c=r.length,l=!1;for(let f=0;f<c;f++){let p=r[f];!l&&ki(p)&&(l=!0,oD(t,n,f)),hS(iE(n,e),t,p.type)}fD(n,t.data.length,c);for(let f=0;f<c;f++){let p=r[f];p.providersResolver&&p.providersResolver(p)}let u=!1,d=!1,h=PE(t,e,c,null);c>0&&(n.directiveToIndex=new Map);for(let f=0;f<c;f++){let p=r[f];if(n.mergedAttrs=$f(n.mergedAttrs,p.hostAttrs),lD(t,n,e,h,p),hD(h,p,i),o!==null&&o.has(p)){let[g,_]=o.get(p);n.directiveToIndex.set(p.type,[h,g+n.directiveStart,_+n.directiveStart])}else(s===null||!s.has(p))&&n.directiveToIndex.set(p.type,h);p.contentQueries!==null&&(n.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(n.flags|=64);let m=p.type.prototype;!u&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),u=!0),!d&&(m.ngOnChanges||m.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),d=!0),h++}cD(t,n,s)}function cD(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))F_(0,e,i,r),F_(1,e,i,r),V_(e,r,!1);else{let s=n.get(i);L_(0,e,s,r),L_(1,e,s,r),V_(e,r,!0)}}}function F_(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;t===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),rb(e,s)}}function L_(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],c;t===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[o]??=[],c[o].push(r,s),rb(e,o)}}function rb(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function V_(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:s}=t;if(r===null||!n&&i===null||n&&s===null||Qf(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let o=null,c=0;for(;c<r.length;){let l=r[c];if(l===0){c+=4;continue}else if(l===5){c+=2;continue}else if(typeof l=="number")break;if(!n&&i.hasOwnProperty(l)){let u=i[l];for(let d of u)if(d===e){o??=[],o.push(l,r[c+1]);break}}else if(n&&s.hasOwnProperty(l)){let u=s[l];for(let d=0;d<u.length;d+=2)if(u[d]===e){o??=[],o.push(u[d+1],r[c+1]);break}}c+=2}t.initialInputs??=[],t.initialInputs.push(o)}function lD(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Ai(i.type,!0)),o=new ca(s,ki(i),Fn,null);t.blueprint[r]=o,n[r]=o,uD(t,e,r,PE(t,n,i.hostVars,er),i)}function uD(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let c=~e.index;dD(o)!=c&&o.push(c),o.push(n,r,s)}}function dD(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function hD(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ki(e)&&(n[""]=t)}}function fD(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function gp(t,e,n,r,i,s,o,c){let l=e[Ae],u=l.consts,d=ea(u,o),h=pp(l,t,n,r,d);return s&&nb(l,e,h,ea(u,c),i),h.mergedAttrs=$f(h.mergedAttrs,h.attrs),h.attrs!==null&&O_(h,h.attrs,!1),h.mergedAttrs!==null&&O_(h,h.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,h),h}function mp(t,e){J_(t,e),Wh(e)&&t.queries.elementEnd(e)}function yp(t){return sb(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function ib(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function sb(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function ua(t,e,n){if(n===er)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function pD(t,e,n,r){let i=ua(t,e,n);return ua(t,e+1,r)||i}function mf(t,e,n){return function r(i){let s=Xr(t)?kn(t.index,e):e;hp(s,5);let o=e[Bt],c=U_(e,o,n,i),l=r.__ngNextListenerFn__;for(;l;)c=U_(e,o,l,i)&&c,l=l.__ngNextListenerFn__;return c}}function U_(t,e,n,r){let i=Me(null);try{return Ze(6,e,n),n(r)!==!1}catch(s){return OC(t,s),!1}finally{Ze(7,e,n),Me(i)}}function gD(t,e,n,r,i,s,o,c){let l=xs(t),u=!1,d=null;if(!r&&l&&(d=yD(e,n,s,t.index)),d!==null){let h=d.__ngLastListenerFn__||d;h.__ngNextListenerFn__=o,d.__ngLastListenerFn__=o,u=!0}else{let h=Xn(t,n),f=r?r(h):h;CS(n,f,s,c);let p=i.listen(f,s,c);if(!mD(s)){let m=r?g=>r(En(g[t.index])):t.index;ob(m,e,n,s,c,p,!1)}}return u}function mD(t){return t.startsWith("animation")||t.startsWith("transition")}function yD(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let c=e[Rs],l=i[s+2];return c&&c.length>l?c[l]:null}typeof o=="string"&&(s+=2)}return null}function ob(t,e,n,r,i,s,o){let c=e.firstCreatePass?Zh(e):null,l=Qh(n),u=l.length;l.push(i,s),c&&c.push(r,t,u,(u+1)*(o?-1:1))}function j_(t,e,n,r,i,s){let o=e[n],c=e[Ae],u=c.data[n].outputs[r],h=o[u].subscribe(s);ob(t.index,c,e,i,s,h,!0)}var kf=Symbol("BINDING");var Hl=class extends pa{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Wr(e);return new js(n,this.ngModule)}};function vD(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],s={propName:n,templateName:e,isSignal:(r&eu.SignalBased)!==0};return i&&(s.transform=i),s})}function _D(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function ED(t,e,n){let r=e instanceof It?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Mf(n,r):n}function bD(t){let e=t.get(Li,null);if(e===null)throw new ye(407,!1);let n=t.get(tb,null),r=t.get(Hr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function wD(t,e){let n=ab(t);return TE(e,n,n==="svg"?Bv:n==="math"?$v:null)}function ab(t){return(t.selectors[0][0]||"div").toLowerCase()}var js=class extends iu{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=vD(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=_D(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=XS(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,s,o){Ze(22);let c=Me(null);try{let l=this.componentDef,u=ID(r,l,o,s),d=ED(l,i||this.ngModule,e),h=bD(d),f=h.rendererFactory.createRenderer(null,l),p=r?TC(f,r,l.encapsulation,d):wD(l,f),m=o?.some(B_)||s?.some(E=>typeof E!="function"&&E.bindings.some(B_)),g=Jf(null,u,null,512|RE(l),null,null,h,f,d,null,_E(p,d,!0));g[en]=p,Al(g);let _=null;try{let E=gp(en,g,2,"#host",()=>u.directiveRegistry,!0,0);SE(f,p,E),Vs(p,g),ru(u,g,E),Gf(u,E,g),mp(u,E),n!==void 0&&AD(E,this.ngContentSelectors,n),_=kn(E.index,g),g[Bt]=_[Bt],dp(u,g,null)}catch(E){throw _!==null&&wf(_),wf(g),E}finally{Ze(23),Sl()}return new zl(this.componentType,g,!!m)}finally{Me(c)}}};function ID(t,e,n,r){let i=t?["ng-version","20.3.15"]:QS(e.selectors[0]),s=null,o=null,c=0;if(n)for(let d of n)c+=d[kf].requiredVars,d.create&&(d.targetIdx=0,(s??=[]).push(d)),d.update&&(d.targetIdx=0,(o??=[]).push(d));if(r)for(let d=0;d<r.length;d++){let h=r[d];if(typeof h!="function")for(let f of h.bindings){c+=f[kf].requiredVars;let p=d+1;f.create&&(f.targetIdx=p,(s??=[]).push(f)),f.update&&(f.targetIdx=p,(o??=[]).push(f))}}let l=[e];if(r)for(let d of r){let h=typeof d=="function"?d:d.type,f=Bh(h);l.push(f)}return Zf(0,null,TD(s,o),1,c,l,null,null,null,[i],null)}function TD(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function B_(t){let e=t[kf].kind;return e==="input"||e==="twoWay"}var zl=class extends eb{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=_l(n[Ae],en),this.location=Hs(this._tNode,n),this.instance=kn(this._tNode.index,n)[Bt],this.hostView=this.changeDetectorRef=new Jr(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,s=up(r,i[Ae],i,e,n);this.previousInputValues.set(e,n);let o=kn(r.index,i);hp(o,1)}get injector(){return new Fi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function AD(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null&&s.length?Array.from(s):null)}}var _r=(()=>{class t{static __NG_ELEMENT_ID__=SD}return t})();function SD(){let t=bn();return lb(t,et())}var CD=_r,cb=class extends CD{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Hs(this._hostTNode,this._hostLView)}get injector(){return new Fi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Hf(this._hostTNode,this._hostLView);if(tE(e)){let n=Fl(e,this._hostLView),r=Ol(e),i=n[Ae].data[r+8];return new Fi(i,n)}else return new Fi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=$_(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-zt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=N_(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(c,i,k_(this._hostTNode,o)),c}createComponent(e,n,r,i,s,o,c){let l=e&&!QA(e),u;if(l)u=n;else{let _=n||{};u=_.index,r=_.injector,i=_.projectableNodes,s=_.environmentInjector||_.ngModuleRef,o=_.directives,c=_.bindings}let d=l?e:new js(Wr(e)),h=r||this.parentInjector;if(!s&&d.ngModule==null){let E=(l?h:this.parentInjector).get(It,null);E&&(s=E)}let f=Wr(d.componentType??{}),p=N_(this._lContainer,f?.id??null),m=p?.firstChild??null,g=d.create(h,i,m,s,o,c);return this.insertImpl(g.hostView,u,k_(this._hostTNode,p)),g}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(zv(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let l=i[Ct],u=new cb(l,l[vn],l[Ct]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return ZC(o,i,s,r),e.attachToViewContainerRef(),Lh(yf(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=$_(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Pf(this._lContainer,n);r&&(Wo(yf(this._lContainer),n),VE(r[Ae],r))}detach(e){let n=this._adjustIndex(e,-1),r=Pf(this._lContainer,n);return r&&Wo(yf(this._lContainer),n)!=null?new Jr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function $_(t){return t[Jo]}function yf(t){return t[Jo]||(t[Jo]=[])}function lb(t,e){let n,r=e[t.index];return Mn(r)?n=r:(n=ZE(r,e,null,t),e[t.index]=n,ep(e,n)),RD(n,e,t,r),new cb(n,t,e)}function DD(t,e){let n=t[At],r=n.createComment(""),i=Xn(e,t),s=n.parentNode(i);return jl(n,s,r,n.nextSibling(i),!1),r}var RD=MD,PD=()=>!1;function xD(t,e,n){return PD(t,e,n)}function MD(t,e,n,r){if(t[Yr])return;let i;n.type&8?i=En(r):i=DD(e,n),t[Yr]=i}var Nf=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Of=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),c=this.queries[o.indexInDeclarationView];i.push(c.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)vp(e,n).matches!==null&&this.queries[n].setDirty()}},Ff=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=jD(e):this.predicate=e}},Lf=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Vf=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,kD(n,s)),this.matchTNodeWithReadOption(e,n,Ml(n,e,s,!1,!1))}else r===ei?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Ml(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===zs||i===_r||i===ei&&n.type&4)this.addMatch(n.index,-2);else{let s=Ml(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function kD(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function ND(t,e){return t.type&11?Hs(t,e):t.type&4?fp(t,e):null}function OD(t,e,n,r){return n===-1?ND(e,t):n===-2?FD(t,e,r):Ll(t,t[Ae],n,e)}function FD(t,e,n){if(n===zs)return Hs(e,t);if(n===ei)return fp(e,t);if(n===_r)return lb(e,t)}function ub(t,e,n,r){let i=e[Yn].queries[r];if(i.matches===null){let s=t.data,o=n.matches,c=[];for(let l=0;o!==null&&l<o.length;l+=2){let u=o[l];if(u<0)c.push(null);else{let d=s[u];c.push(OD(e,d,o[l+1],n.metadata.read))}}i.matches=c}return i.matches}function Uf(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=ub(t,e,i,n);for(let c=0;c<s.length;c+=2){let l=s[c];if(l>0)r.push(o[c/2]);else{let u=s[c+1],d=e[-l];for(let h=zt;h<d.length;h++){let f=d[h];f[Kr]===f[Ct]&&Uf(f[Ae],f,u,r)}if(d[Mi]!==null){let h=d[Mi];for(let f=0;f<h.length;f++){let p=h[f];Uf(p[Ae],p,u,r)}}}}}return r}function LD(t,e){return t[Yn].queries[e].queryList}function VD(t,e,n){let r=new Vl((n&4)===4);return Gv(t,e,r,r.destroy),(e[Yn]??=new Of).queries.push(new Nf(r))-1}function UD(t,e,n){let r=Nn();return r.firstCreatePass&&(BD(r,new Ff(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),VD(r,et(),e)}function jD(t){return t.split(",").map(e=>e.trim())}function BD(t,e,n){t.queries===null&&(t.queries=new Lf),t.queries.track(new Vf(e,n))}function vp(t,e){return t.queries.getByIndex(e)}function $D(t,e){let n=t[Ae],r=vp(n,e);return r.crossesNgTemplate?Uf(n,t,e,[]):ub(n,t,r,e)}var Vi=class{},su=class{};var ql=class extends Vi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Hl(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let s=jh(e);this._bootstrapComponents=CE(s.bootstrap),this._r3Injector=lf(e,n,[{provide:Vi,useValue:this},{provide:pa,useValue:this.componentFactoryResolver},...r],mr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Wl=class extends su{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new ql(this.moduleType,e,[])}};var da=class extends Vi{injector;componentFactoryResolver=new Hl(this);instance=null;constructor(e){super();let n=new Si([...e.providers,{provide:Vi,useValue:this},{provide:pa,useValue:this.componentFactoryResolver}],e.parent||Ko(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ga(t,e,n=null){return new da({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var HD=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=$h(!1,n.type),i=r.length>0?ga([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=_e({token:t,providedIn:"environment",factory:()=>new t(Se(It))})}return t})();function ma(t){return $s(()=>{let e=db(t),n=Be(ge({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===zf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(HD).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||vr.Emulated,styles:t.styles||mn,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&tu("NgStandalone"),hb(n);let r=t.dependencies;return n.directiveDefs=H_(r,zD),n.pipeDefs=H_(r,Nv),n.id=GD(n),n})}function zD(t){return Wr(t)||Bh(t)}function qs(t){return $s(()=>({type:t.type,bootstrap:t.bootstrap||mn,declarations:t.declarations||mn,imports:t.imports||mn,exports:t.exports||mn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function qD(t,e){if(t==null)return Ri;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,c,l;Array.isArray(i)?(c=i[0],s=i[1],o=i[2]??s,l=i[3]||null):(s=i,o=i,c=eu.None,l=null),n[s]=[r,c,l],e[s]=o}return n}function WD(t){if(t==null)return Ri;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Ws(t){return $s(()=>{let e=db(t);return hb(e),e})}function db(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Ri,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||mn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:qD(t.inputs,e),outputs:WD(t.outputs),debugInfo:null}}function hb(t){t.features?.forEach(e=>e(t))}function H_(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let s=e(i);s!==null&&r.push(s)}return r}:null}function GD(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function KD(t,e,n,r,i,s,o,c){if(n.firstCreatePass){t.mergedAttrs=$f(t.mergedAttrs,t.attrs);let d=t.tView=Zf(2,t,i,s,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),d.queries=n.queries.embeddedTView(t))}c&&(t.flags|=c),ks(t,!1);let l=XD(n,e,t,r);Cl()&&op(n,e,l,t),Vs(l,e);let u=ZE(l,e,l,t);e[r+en]=u,ep(e,u),xD(u,t,e)}function YD(t,e,n,r,i,s,o,c,l,u,d){let h=n+en,f;return e.firstCreatePass?(f=pp(e,h,4,o||null,c||null),wl()&&nb(e,t,f,ea(e.consts,u),lp),J_(e,f)):f=e.data[h],KD(f,t,e,n,r,i,s,l),xs(f)&&ru(e,t,f),u!=null&&cp(t,f,d),f}function ti(t,e,n,r,i,s,o,c){let l=et(),u=Nn(),d=ea(u.consts,s);return YD(l,u,t,e,n,r,i,d,void 0,o,c),ti}var XD=QD;function QD(t,e,n,r){return ra(!0),e[At].createComment("")}var _p=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Ep=new Ee("");function Gs(t){return!!t&&typeof t.then=="function"}function bp(t){return!!t&&typeof t.subscribe=="function"}var wp=new Ee("");function ou(t){return Jt([{provide:wp,multi:!0,useValue:t}])}var Ip=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=ue(wp,{optional:!0})??[];injector=ue(vt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=Tt(this.injector,i);if(Gs(s))n.push(s);else if(bp(s)){let o=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),au=new Ee("");function fb(){Gd(()=>{let t="";throw new ye(600,t)})}function pb(t){return t.isBoundToModule}var ZD=10;var tr=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=ue(un);afterRenderManager=ue(OE);zonelessEnabled=ue(ia);rootEffectScheduler=ue(hf);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ot;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=ue(Qn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ce(n=>!n))}constructor(){ue(fa,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=ue(It);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=vt.NULL){return this._injector.get(ze).run(()=>{Ze(10);let o=n instanceof iu;if(!this._injector.get(Ip).done){let m="";throw new ye(405,m)}let l;o?l=n:l=this._injector.get(pa).resolveComponentFactory(n),this.componentTypes.push(l.componentType);let u=pb(l)?void 0:this._injector.get(Vi),d=r||l.selector,h=l.create(i,[],d,u),f=h.location.nativeElement,p=h.injector.get(Ep,null);return p?.registerApplication(f),h.onDestroy(()=>{this.detachView(h.hostView),aa(this.components,h),p?.unregisterApplication(f)}),this._loadComponent(h),Ze(11,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ze(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(np.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new ye(101,!1);let n=Me(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Me(n),this.afterTick.next(),Ze(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Li,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<ZD;)Ze(14),this.synchronizeOnce(),Ze(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ta(i))continue;let s=r&&!this.zonelessEnabled?0:1;KE(i,s),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ta(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;aa(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(au,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>aa(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new ye(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function aa(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var tz=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function ht(t,e,n){let r=et(),i=rf();if(ua(r,i,e)){let s=Nn(),o=h_();DC(o,r,t,e,r[At],n)}return ht}function z_(t,e,n,r,i){up(e,t,n,i?"class":"style",r)}function Ye(t,e,n,r){let i=et(),s=i[Ae],o=t+en,c=s.firstCreatePass?gp(o,i,2,e,lp,wl(),n,r):s.data[o];if(BE(c,i,t,e,JD),xs(c)){let l=i[Ae];ru(l,i,c),Gf(l,c,i)}return r!=null&&cp(i,c),Ye}function Xe(){let t=Nn(),e=bn(),n=$E(e);return t.firstCreatePass&&mp(t,n),Zv(n)&&Jv(),Xv(),n.classesWithoutHost!=null&&rS(n)&&z_(t,n,et(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&iS(n)&&z_(t,n,et(),n.stylesWithoutHost,!1),Xe}function Er(t,e,n,r){return Ye(t,e,n,r),Xe(),Er}var JD=(t,e,n,r,i)=>(ra(!0),TE(e[At],r,f_()));function cu(t,e,n){let r=et(),i=r[Ae],s=t+en,o=i.firstCreatePass?gp(s,r,8,"ng-container",lp,wl(),e,n):i.data[s];if(BE(o,r,t,"ng-container",eR),xs(o)){let c=r[Ae];ru(c,r,o),Gf(c,o,r)}return n!=null&&cp(r,o),cu}function lu(){let t=Nn(),e=bn(),n=$E(e);return t.firstCreatePass&&mp(t,n),lu}var eR=(t,e,n,r,i)=>(ra(!0),FS(e[At],""));function uu(){return et()}var ya="en-US";var tR=ya;function gb(t){typeof t=="string"&&(tR=t.toLowerCase().replace(/_/g,"-"))}function wn(t,e,n){let r=et(),i=Nn(),s=bn();return nR(i,r,r[At],s,t,e,n),wn}function nR(t,e,n,r,i,s,o){let c=!0,l=null;if((r.type&3||o)&&(l??=mf(r,e,s),gD(r,t,e,o,n,i,s,l)&&(c=!1)),c){let u=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let h=0;h<d.length;h+=2){let f=d[h],p=d[h+1];l??=mf(r,e,s),j_(r,e,f,p,i,l)}if(u&&u.length)for(let h of u)l??=mf(r,e,s),j_(r,e,h,i,i,l)}}function Mt(t=1){return d_(t)}function Tp(t,e,n){UD(t,e,n)}function Ap(t){let e=et(),n=Nn(),r=of();Tl(r+1);let i=vp(n,r);if(t.dirty&&Hv(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=$D(e,r);t.reset(s,vS),t.notifyOnChanges()}return!0}return!1}function Sp(){return LD(et(),of())}function Rl(t,e){return t<<17|e<<2}function Ui(t){return t>>17&32767}function rR(t){return(t&2)==2}function iR(t,e){return t&131071|e<<17}function jf(t){return t|2}function Bs(t){return(t&131068)>>2}function vf(t,e){return t&-131069|e<<2}function sR(t){return(t&1)===1}function Bf(t){return t|1}function oR(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,c=Ui(o),l=Bs(o);t[r]=n;let u=!1,d;if(Array.isArray(n)){let h=n;d=h[1],(d===null||Ds(h,d)>0)&&(u=!0)}else d=n;if(i)if(l!==0){let f=Ui(t[c+1]);t[r+1]=Rl(f,c),f!==0&&(t[f+1]=vf(t[f+1],r)),t[c+1]=iR(t[c+1],r)}else t[r+1]=Rl(c,0),c!==0&&(t[c+1]=vf(t[c+1],r)),c=r;else t[r+1]=Rl(l,0),c===0?c=r:t[l+1]=vf(t[l+1],r),l=r;u&&(t[r+1]=jf(t[r+1])),q_(t,d,r,!0),q_(t,d,r,!1),aR(e,d,t,r,s),o=Rl(c,l),s?e.classBindings=o:e.styleBindings=o}function aR(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Ds(s,e)>=0&&(n[r+1]=Bf(n[r+1]))}function q_(t,e,n,r){let i=t[n+1],s=e===null,o=r?Ui(i):Bs(i),c=!1;for(;o!==0&&(c===!1||s);){let l=t[o],u=t[o+1];cR(l,e)&&(c=!0,t[o+1]=r?Bf(u):jf(u)),o=r?Ui(u):Bs(u)}c&&(t[n+1]=r?jf(i):Bf(i))}function cR(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Ds(t,e)>=0:!1}function va(t,e,n){return lR(t,e,n,!1),va}function lR(t,e,n,r){let i=et(),s=Nn(),o=sf(2);if(s.firstUpdatePass&&dR(s,t,o,r),e!==er&&ua(i,o,e)){let c=s.data[Qr()];mR(s,c,i,i[At],t,i[o+1]=yR(e,n),r,o)}}function uR(t,e){return e>=t.expandoStartIndex}function dR(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Qr()],o=uR(t,n);vR(s,r)&&e===null&&!o&&(e=!1),e=hR(i,s,e,r),oR(i,s,e,n,o,r)}}function hR(t,e,n,r){let i=a_(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=_f(null,t,e,n,r),n=ha(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=_f(i,t,e,n,r),s===null){let l=fR(t,e,r);l!==void 0&&Array.isArray(l)&&(l=_f(null,t,e,l[1],r),l=ha(l,e.attrs,r),pR(t,e,r,l))}else s=gR(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function fR(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Bs(r)!==0)return t[Ui(r)]}function pR(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Ui(i)]=r}function gR(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=ha(r,o,n)}return ha(r,e.attrs,n)}function _f(t,e,n,r,i){let s=null,o=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<o&&(s=e[c],r=ha(r,s.hostAttrs,i),s!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function ha(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),kv(t,o,n?!0:e[++s]))}return t===void 0?null:t}function mR(t,e,n,r,i,s,o,c){if(!(e.type&3))return;let l=t.data,u=l[c+1],d=sR(u)?W_(l,e,n,i,Bs(u),o):void 0;if(!Gl(d)){Gl(s)||rR(u)&&(s=W_(l,null,n,i,c,o));let h=Gh(Qr(),n);IC(r,o,h,i,s)}}function W_(t,e,n,r,i,s){let o=e===null,c;for(;i>0;){let l=t[i],u=Array.isArray(l),d=u?l[1]:l,h=d===null,f=n[i+1];f===er&&(f=h?mn:void 0);let p=h?ml(f,r):d===r?f:void 0;if(u&&!Gl(p)&&(p=ml(l,r)),Gl(p)&&(c=p,o))return c;let m=t[i+1];i=o?Ui(m):Bs(m)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(c=ml(l,r))}return c}function Gl(t){return t!==void 0}function yR(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=mr(Kf(t)))),t}function vR(t,e){return(t.flags&(e?8:16))!==0}function ft(t,e=""){let n=et(),r=Nn(),i=t+en,s=r.firstCreatePass?pp(r,i,1,e,null):r.data[i],o=_R(r,n,s,e,t);n[i]=o,Cl()&&op(r,n,o,s),ks(s,!1)}var _R=(t,e,n,r,i)=>(ra(!0),NS(e[At],r));function ER(t,e,n,r=""){return ua(t,rf(),n)?e+Cs(n)+r:er}function bR(t,e,n,r,i,s=""){let o=n_(),c=pD(t,o,n,i);return sf(2),c?e+Cs(n)+r+Cs(i)+s:er}function _a(t){return Ea("",t),_a}function Ea(t,e,n){let r=et(),i=ER(r,t,e,n);return i!==er&&mb(r,Qr(),i),Ea}function ba(t,e,n,r,i){let s=et(),o=bR(s,t,e,n,r,i);return o!==er&&mb(s,Qr(),o),ba}function mb(t,e,n){let r=Gh(e,t);OS(t[At],r,n)}var Kl=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Cp=(()=>{class t{compileModuleSync(n){return new Wl(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=jh(n),s=CE(i.declarations).reduce((o,c)=>{let l=Wr(c);return l&&o.push(new js(l)),o},[]);return new Kl(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var wR=(()=>{class t{zone=ue(ze);changeDetectionScheduler=ue(Hr);applicationRef=ue(tr);applicationErrorHandler=ue(un);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),yb=new Ee("",{factory:()=>!1});function Dp({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ze(Be(ge({},Pp()),{scheduleInRootZone:n})),[{provide:ze,useFactory:t},{provide:qr,multi:!0,useFactory:()=>{let r=ue(wR,{optional:!0});return()=>r.initialize()}},{provide:qr,multi:!0,useFactory:()=>{let r=ue(IR);return()=>{r.initialize()}}},e===!0?{provide:uf,useValue:!0}:[],{provide:df,useValue:n??ME},{provide:un,useFactory:()=>{let r=ue(ze),i=ue(It),s;return o=>{r.runOutsideAngular(()=>{i.destroyed&&!s?setTimeout(()=>{throw o}):(s??=i.get(Gn),s.handleError(o))})}}}]}function Rp(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=Dp({ngZoneFactory:()=>{let i=Pp(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&tu("NgZone_CoalesceEvent"),new ze(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Jt([{provide:yb,useValue:!0},{provide:ia,useValue:!1},r])}function Pp(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var IR=(()=>{class t{subscription=new rt;initialized=!1;zone=ue(ze);pendingTasks=ue(Qn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ze.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ze.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var vb=(()=>{class t{applicationErrorHandler=ue(un);appRef=ue(tr);taskService=ue(Qn);ngZone=ue(ze);zonelessEnabled=ue(ia);tracing=ue(fa,{optional:!0});disableScheduling=ue(uf,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new rt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Bl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(ue(df,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof $l||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?C_:kE;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Bl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,C_(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function TR(){return typeof $localize<"u"&&$localize.locale||ya}var du=new Ee("",{providedIn:"root",factory:()=>ue(du,{optional:!0,skipSelf:!0})||TR()});function br(t){return bv(t)}var _b=class{[Yt];constructor(e){this[Yt]=e}destroy(){this[Yt].destroy()}};var Ib=Symbol("InputSignalNode#UNSET"),$R=Be(ge({},Oc),{transformFn:void 0,applyValueToInputSignal(t,e){us(t,e)}});function Tb(t,e){let n=Object.create($R);n.value=t,n.transformFn=e?.transform;function r(){if(Oo(n),n.value===Ib){let i=null;throw new ye(-950,i)}return n.value}return r[Yt]=n,r}var HR=new Ee("");HR.__NG_ELEMENT_ID__=t=>{let e=bn();if(e===null)throw new ye(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new ye(204,!1)};function Eb(t,e){return Tb(t,e)}function zR(t){return Tb(Ib,t)}var Ab=(Eb.required=zR,Eb);var xp=new Ee(""),qR=new Ee("");function wa(t){return!t.moduleRef}function WR(t){let e=wa(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ze);return n.run(()=>{wa(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(un),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),wa(t)){let s=()=>e.destroy(),o=t.platformInjector.get(xp);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(xp);o.add(s),t.moduleRef.onDestroy(()=>{aa(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return KR(r,n,()=>{let s=e.get(Qn),o=s.add(),c=e.get(Ip);return c.runInitializers(),c.donePromise.then(()=>{let l=e.get(du,ya);if(gb(l||ya),!e.get(qR,!0))return wa(t)?e.get(tr):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(wa(t)){let d=e.get(tr);return t.rootComponent!==void 0&&d.bootstrap(t.rootComponent),d}else return GR?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void s.remove(o))})})}var GR;function KR(t,e,n){try{let r=n();return Gs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var hu=null;function YR(t=[],e){return vt.create({name:e,providers:[{provide:Go,useValue:"platform"},{provide:xp,useValue:new Set([()=>hu=null])},...t]})}function XR(t=[]){if(hu)return hu;let e=YR(t);return hu=e,fb(),QR(e),e}function QR(t){let e=t.get(Zl,null);Tt(t,()=>{e?.forEach(n=>n())})}function Ia(){return!1}var Fp=(()=>{class t{static __NG_ELEMENT_ID__=ZR}return t})();function ZR(t){return JR(bn(),et(),(t&16)===16)}function JR(t,e,n){if(Xr(t)&&!n){let r=kn(t.index,e);return new Jr(r,r)}else if(t.type&175){let r=e[_n];return new Jr(r,e)}return null}var Mp=class{constructor(){}supports(e){return yp(e)}create(e){return new kp(e)}},eP=(t,e)=>e,kp=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||eP}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<bb(r,i,s)?n:r,c=bb(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let u=c-i,d=l-i;if(u!=d){for(let f=0;f<u;f++){let p=f<s.length?s[f]:s[f]=0,m=p+f;d<=m&&m<u&&(s[f]=p+1)}let h=o.previousIndex;s[h]=d-u}}c!==l&&e(o,c,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!yp(e))throw new ye(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)s=e[c],o=this._trackByFn(c,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,c),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,c)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,ib(e,c=>{o=this._trackByFn(i,c),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,c,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,c,o,i)),Object.is(n.item,c)||this._addIdentityChange(n,c)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Np(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new fu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new fu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Np=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},Op=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},fu=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Op,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function bb(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function wb(){return new Lp([new Mp])}var Lp=(()=>{class t{factories;static \u0275prov=_e({token:t,providedIn:"root",factory:wb});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:()=>{let r=ue(t,{optional:!0,skipSelf:!0});return t.create(n,r||wb())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new ye(901,!1)}}return t})();function Sb(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Ze(8);try{let s=i?.injector??XR(r),o=[Dp({}),{provide:Hr,useExisting:vb},g_,...n||[]],c=new da({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return WR({r3Injector:c.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{Ze(9)}}var Rb=null;function wr(){return Rb}function Vp(t){Rb??=t}var Ta=class{},Up=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>ue(Pb),providedIn:"platform"})}return t})();var Pb=(()=>{class t extends Up{_location;_history;_doc=ue(xt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return wr().getBaseHref(this._doc)}onPopState(n){let r=wr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=wr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function xb(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function Cb(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function ni(t){return t&&t[0]!=="?"?`?${t}`:t}var pu=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>ue(kb),providedIn:"root"})}return t})(),Mb=new Ee(""),kb=(()=>{class t extends pu{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ue(xt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return xb(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+ni(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+ni(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+ni(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Se(Up),Se(Mb,8))};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ks=(()=>{class t{_subject=new ot;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=rP(Cb(Db(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ni(r))}normalize(n){return t.stripTrailingSlash(nP(this._basePath,Db(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ni(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ni(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ni;static joinWithSlash=xb;static stripTrailingSlash=Cb;static \u0275fac=function(r){return new(r||t)(Se(pu))};static \u0275prov=_e({token:t,factory:()=>tP(),providedIn:"root"})}return t})();function tP(){return new Ks(Se(pu))}function nP(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Db(t){return t.replace(/\/index.html$/,"")}function rP(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var gu=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},yu=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new gu(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let c=r.get(s);r.move(c,o),Nb(c,i)}});for(let i=0,s=r.length;i<s;i++){let c=r.get(i).context;c.index=i,c.count=s,c.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);Nb(s,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(Fn(_r),Fn(ei),Fn(Lp))};static \u0275dir=Ws({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function Nb(t,e){t.context.$implicit=e.item}var jp=(()=>{class t{_viewContainer;_context=new mu;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Ob(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Ob(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(Fn(_r),Fn(ei))};static \u0275dir=Ws({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),mu=class{$implicit=null;ngIf=null};function Ob(t,e){if(t&&!t.createEmbeddedView)throw new ye(2020,!1)}var vu=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=qs({type:t});static \u0275inj=Ci({})}return t})();function Bp(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Aa=class{};var Fb="browser";var Sa=class{_doc;constructor(e){this._doc=e}manager},_u=(()=>{class t extends Sa{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,s){return n.addEventListener(r,i,s),()=>this.removeEventListener(n,r,i,s)}removeEventListener(n,r,i,s){return n.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||t)(Se(xt))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),bu=new Ee(""),Wp=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(o=>{o.manager=this});let i=n.filter(o=>!(o instanceof _u));this._plugins=i.slice().reverse();let s=n.find(o=>o instanceof _u);s&&this._plugins.push(s)}addEventListener(n,r,i,s){return this._findPluginFor(r).addEventListener(n,r,i,s)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new ye(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(Se(bu),Se(ze))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),$p="ng-app-id";function Lb(t){for(let e of t)e.remove()}function Vb(t,e){let n=e.createElement("style");return n.textContent=t,n}function sP(t,e,n,r){let i=t.head?.querySelectorAll(`style[${$p}="${e}"],link[${$p}="${e}"]`);if(i)for(let s of i)s.removeAttribute($p),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&n.set(s.textContent,{usage:0,elements:[s]})}function zp(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Gp=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,sP(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,Vb);r?.forEach(i=>this.addUsage(i,this.external,zp))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let s=r.get(n);s?s.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(Lb(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Lb(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,Vb(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,zp(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(Se(xt),Se(Ql),Se(Jl,8),Se(ji))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),Hp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Kp=/%COMP%/g;var jb="%COMP%",oP=`_nghost-${jb}`,aP=`_ngcontent-${jb}`,cP=!0,lP=new Ee("",{providedIn:"root",factory:()=>cP});function uP(t){return aP.replace(Kp,t)}function dP(t){return oP.replace(Kp,t)}function Bb(t,e){return e.map(n=>n.replace(Kp,t))}var Yp=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,s,o,c,l=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new Ca(n,o,c,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Eu?i.applyToHost(n):i instanceof Da&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case vr.Emulated:s=new Eu(l,u,r,this.appId,d,o,c,h,f);break;case vr.ShadowDom:return new qp(l,u,n,r,o,c,this.nonce,h,f);default:s=new Da(l,u,r,d,o,c,h,f);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(Se(Wp),Se(Gp),Se(Ql),Se(lP),Se(xt),Se(ze),Se(Jl),Se(fa,8))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),Ca=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,s){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Hp[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Ub(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Ub(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ye(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Hp[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Hp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Jn.DashCase|Jn.Important)?e.style.setProperty(n,r,i&Jn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Jn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=wr().getGlobalEventTarget(this.doc,e),!e))throw new ye(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,n,s)),this.eventManager.addEventListener(e,n,s,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function Ub(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var qp=class extends Ca{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,s,o,c,l,u){super(e,s,o,l,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=Bb(i.id,d);for(let f of d){let p=document.createElement("style");c&&p.setAttribute("nonce",c),p.textContent=f,this.shadowRoot.appendChild(p)}let h=i.getExternalStyles?.();if(h)for(let f of h){let p=zp(f,s);c&&p.setAttribute("nonce",c),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Da=class extends Ca{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,s,o,c,l,u){super(e,s,o,c,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?Bb(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Us.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Eu=class extends Da{contentAttr;hostAttr;constructor(e,n,r,i,s,o,c,l,u){let d=i+"-"+r.id;super(e,n,r,s,o,c,l,u,d),this.contentAttr=uP(d),this.hostAttr=dP(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var wu=class t extends Ta{supportsDOMEvents=!0;static makeCurrent(){Vp(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=hP();return n==null?null:fP(n)}resetBaseElement(){Ra=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Bp(document.cookie,e)}},Ra=null;function hP(){return Ra=Ra||document.head.querySelector("base"),Ra?Ra.getAttribute("href"):null}function fP(t){return new URL(t,document.baseURI).pathname}var pP=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),$b=["alt","control","meta","shift"],gP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mP={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Hb=(()=>{class t extends Sa{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,s){let o=t.parseEventName(r),c=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>wr().onAndCancel(n,o.domEventName,c,s))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),o="code."),$b.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),o+=u+".")}),o+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(n,r){let i=gP[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),$b.forEach(o=>{if(o!==i){let c=mP[o];c(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(Se(xt))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();function Xp(t,e,n){let r=ge({rootComponent:t,platformRef:n?.platformRef},yP(e));return Sb(r)}function yP(t){return{appProviders:[...wP,...t?.providers??[]],platformProviders:bP}}function vP(){wu.makeCurrent()}function _P(){return new Gn}function EP(){return qf(document),document}var bP=[{provide:ji,useValue:Fb},{provide:Zl,useValue:vP,multi:!0},{provide:xt,useFactory:EP}];var wP=[{provide:Go,useValue:"root"},{provide:Gn,useFactory:_P},{provide:bu,useClass:_u,multi:!0,deps:[xt]},{provide:bu,useClass:Hb,multi:!0,deps:[xt]},Yp,Gp,Wp,{provide:Li,useExisting:Yp},{provide:Aa,useClass:pP},[]];var zb=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(Se(xt))};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Pe="primary",$a=Symbol("RouteTitle"),tg=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function eo(t){return new tg(t)}function TP(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],c=t[s];if(o[0]===":")i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function AP(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!nr(t[n],e[n]))return!1;return!0}function nr(t,e){let n=t?ng(t):void 0,r=e?ng(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Zb(t[i],e[i]))return!1;return!0}function ng(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Zb(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function Jb(t){return t.length>0?t[t.length-1]:null}function Ar(t){return lh(t)?t:Gs(t)?at(Promise.resolve(t)):we(t)}var SP={exact:tw,subset:nw},ew={exact:CP,subset:DP,ignored:()=>!0};function qb(t,e,n){return SP[n.paths](t.root,e.root,n.matrixParams)&&ew[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function CP(t,e){return nr(t,e)}function tw(t,e,n){if(!$i(t.segments,e.segments)||!Au(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!tw(t.children[r],e.children[r],n))return!1;return!0}function DP(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Zb(t[n],e[n]))}function nw(t,e,n){return rw(t,e,e.segments,n)}function rw(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!$i(i,n)||e.hasChildren()||!Au(i,n,r))}else if(t.segments.length===n.length){if(!$i(t.segments,n)||!Au(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!nw(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!$i(t.segments,i)||!Au(t.segments,i,r)||!t.children[Pe]?!1:rw(t.children[Pe],e,s,r)}}function Au(t,e,n){return e.every((r,i)=>ew[n](t[i].parameters,r.parameters))}var Tr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ke([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=eo(this.queryParams),this._queryParamMap}toString(){return xP.serialize(this)}},Ke=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Su(this)}},Bi=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=eo(this.parameters),this._parameterMap}toString(){return sw(this)}};function RP(t,e){return $i(t,e)&&t.every((n,r)=>nr(n.parameters,e[r].parameters))}function $i(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function PP(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Pe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Pe&&(n=n.concat(e(i,r)))}),n}var Vu=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>new to,providedIn:"root"})}return t})(),to=class{parse(e){let n=new ig(e);return new Tr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Pa(e.root,!0)}`,r=NP(e.queryParams),i=typeof e.fragment=="string"?`#${MP(e.fragment)}`:"";return`${n}${r}${i}`}},xP=new to;function Su(t){return t.segments.map(e=>sw(e)).join("/")}function Pa(t,e){if(!t.hasChildren())return Su(t);if(e){let n=t.children[Pe]?Pa(t.children[Pe],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==Pe&&r.push(`${i}:${Pa(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=PP(t,(r,i)=>i===Pe?[Pa(t.children[Pe],!1)]:[`${i}:${Pa(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Pe]!=null?`${Su(t)}/${n[0]}`:`${Su(t)}/(${n.join("//")})`}}function iw(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Iu(t){return iw(t).replace(/%3B/gi,";")}function MP(t){return encodeURI(t)}function rg(t){return iw(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cu(t){return decodeURIComponent(t)}function Wb(t){return Cu(t.replace(/\+/g,"%20"))}function sw(t){return`${rg(t.path)}${kP(t.parameters)}`}function kP(t){return Object.entries(t).map(([e,n])=>`;${rg(e)}=${rg(n)}`).join("")}function NP(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Iu(n)}=${Iu(i)}`).join("&"):`${Iu(n)}=${Iu(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var OP=/^[^\/()?;#]+/;function Qp(t){let e=t.match(OP);return e?e[0]:""}var FP=/^[^\/()?;=#]+/;function LP(t){let e=t.match(FP);return e?e[0]:""}var VP=/^[^=?&#]+/;function UP(t){let e=t.match(VP);return e?e[0]:""}var jP=/^[^&#]+/;function BP(t){let e=t.match(jP);return e?e[0]:""}var ig=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ke([],{}):new Ke([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Pe]=new Ke(e,n)),r}parseSegment(){let e=Qp(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ye(4009,!1);return this.capture(e),new Bi(Cu(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=LP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Qp(this.remaining);i&&(r=i,this.capture(r))}e[Cu(n)]=Cu(r)}parseQueryParam(e){let n=UP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=BP(this.remaining);o&&(r=o,this.capture(r))}let i=Wb(n),s=Wb(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Qp(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ye(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Pe);let o=this.parseChildren();n[s??Pe]=Object.keys(o).length===1&&o[Pe]?o[Pe]:new Ke([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ye(4011,!1)}};function ow(t){return t.segments.length>0?new Ke([],{[Pe]:t}):t}function aw(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=aw(i);if(r===Pe&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Ke(t.segments,e);return $P(n)}function $P(t){if(t.numberOfChildren===1&&t.children[Pe]){let e=t.children[Pe];return new Ke(t.segments.concat(e.segments),e.children)}return t}function no(t){return t instanceof Tr}function HP(t,e,n=null,r=null){let i=cw(t);return lw(i,e,n,r)}function cw(t){let e;function n(s){let o={};for(let l of s.children){let u=n(l);o[l.outlet]=u}let c=new Ke(s.url,o);return s===t&&(e=c),c}let r=n(t.root),i=ow(r);return e??i}function lw(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Zp(i,i,i,n,r);let s=zP(e);if(s.toRoot())return Zp(i,i,new Ke([],{}),n,r);let o=qP(s,i,t),c=o.processChildren?Ma(o.segmentGroup,o.index,s.commands):dw(o.segmentGroup,o.index,s.commands);return Zp(i,o.segmentGroup,c,n,r)}function Du(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Oa(t){return typeof t=="object"&&t!=null&&t.outlets}function Zp(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([l,u])=>{s[l]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let o;t===e?o=n:o=uw(t,e,n);let c=ow(aw(o));return new Tr(c,s,i)}function uw(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=uw(s,e,n)}),new Ke(t.segments,r)}var Ru=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Du(r[0]))throw new ye(4003,!1);let i=r.find(Oa);if(i&&i!==Jb(r))throw new ye(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function zP(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ru(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,u])=>{c[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?n=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new Ru(n,e,r)}var Qs=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function qP(t,e,n){if(t.isAbsolute)return new Qs(e,!0,0);if(!n)return new Qs(e,!1,NaN);if(n.parent===null)return new Qs(n,!0,0);let r=Du(t.commands[0])?0:1,i=n.segments.length-1+r;return WP(n,i,t.numberOfDoubleDots)}function WP(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ye(4005,!1);i=r.segments.length}return new Qs(r,!1,i-s)}function GP(t){return Oa(t[0])?t[0].outlets:{[Pe]:t}}function dw(t,e,n){if(t??=new Ke([],{}),t.segments.length===0&&t.hasChildren())return Ma(t,e,n);let r=KP(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Ke(t.segments.slice(0,r.pathIndex),{});return s.children[Pe]=new Ke(t.segments.slice(r.pathIndex),t.children),Ma(s,0,i)}else return r.match&&i.length===0?new Ke(t.segments,{}):r.match&&!t.hasChildren()?sg(t,e,n):r.match?Ma(t,0,i):sg(t,e,n)}function Ma(t,e,n){if(n.length===0)return new Ke(t.segments,{});{let r=GP(n),i={};if(Object.keys(r).some(s=>s!==Pe)&&t.children[Pe]&&t.numberOfChildren===1&&t.children[Pe].segments.length===0){let s=Ma(t.children[Pe],e,n);return new Ke(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=dw(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ke(t.segments,i)}}function KP(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],c=n[r];if(Oa(c))break;let l=`${c}`,u=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!Kb(l,u,o))return s;r+=2}else{if(!Kb(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function sg(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Oa(s)){let l=YP(s.outlets);return new Ke(r,l)}if(i===0&&Du(n[0])){let l=t.segments[e];r.push(new Bi(l.path,Gb(n[0]))),i++;continue}let o=Oa(s)?s.outlets[Pe]:`${s}`,c=i<n.length-1?n[i+1]:null;o&&c&&Du(c)?(r.push(new Bi(o,Gb(c))),i+=2):(r.push(new Bi(o,{})),i++)}return new Ke(r,{})}function YP(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=sg(new Ke([],{}),0,r))}),e}function Gb(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Kb(t,e,n){return t==n.path&&nr(e,n.parameters)}var ka="imperative",kt=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(kt||{}),In=class{id;url;constructor(e,n){this.id=e,this.url=n}},ro=class extends In{type=kt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ri=class extends In{urlAfterRedirects;type=kt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},nn=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(nn||{}),Pu=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(Pu||{}),Ir=class extends In{reason;code;type=kt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ii=class extends In{reason;code;type=kt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Fa=class extends In{error;target;type=kt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},xu=class extends In{urlAfterRedirects;state;type=kt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},og=class extends In{urlAfterRedirects;state;type=kt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ag=class extends In{urlAfterRedirects;state;shouldActivate;type=kt.GuardsCheckEnd;constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},cg=class extends In{urlAfterRedirects;state;type=kt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lg=class extends In{urlAfterRedirects;state;type=kt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ug=class{route;type=kt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},dg=class{route;type=kt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},hg=class{snapshot;type=kt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fg=class{snapshot;type=kt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pg=class{snapshot;type=kt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gg=class{snapshot;type=kt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var La=class{},io=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function XP(t){return!(t instanceof La)&&!(t instanceof io)}function QP(t,e){return t.providers&&!t._injector&&(t._injector=ga(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Vn(t){return t.outlet||Pe}function ZP(t,e){let n=t.filter(r=>Vn(r)===e);return n.push(...t.filter(r=>Vn(r)!==e)),n}function oo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var mg=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return oo(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ha(this.rootInjector)}},Ha=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new mg(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(Se(It))};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Mu=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=yg(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=yg(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=vg(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return vg(e,this._root).map(n=>n.value)}};function yg(t,e){if(t===e.value)return e;for(let n of e.children){let r=yg(t,n);if(r)return r}return null}function vg(t,e){if(t===e.value)return[e];for(let n of e.children){let r=vg(t,n);if(r.length)return r.unshift(e),r}return[]}var dn=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Xs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ku=class extends Mu{snapshot;constructor(e,n){super(e),this.snapshot=n,Cg(this,e)}toString(){return this.snapshot.toString()}};function hw(t){let e=JP(t),n=new ut([new Bi("",{})]),r=new ut({}),i=new ut({}),s=new ut({}),o=new ut(""),c=new Hi(n,r,s,o,i,Pe,t,e.root);return c.snapshot=e.root,new ku(new dn(c,[]),e)}function JP(t){let e={},n={},r={},s=new Zs([],e,r,"",n,Pe,t,null,{});return new Ou("",new dn(s,[]))}var Hi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,s,o,c,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ce(u=>u[$a]))??we(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ce(e=>eo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ce(e=>eo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Nu(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:ge(ge({},e.params),t.params),data:ge(ge({},e.data),t.data),resolve:ge(ge(ge(ge({},t.data),e.data),i?.data),t._resolvedData)}:r={params:ge({},t.params),data:ge({},t.data),resolve:ge(ge({},t.data),t._resolvedData??{})},i&&pw(i)&&(r.resolve[$a]=i.title),r}var Zs=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[$a]}constructor(e,n,r,i,s,o,c,l,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=eo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=eo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ou=class extends Mu{url;constructor(e,n){super(n),this.url=e,Cg(this,n)}toString(){return fw(this._root)}};function Cg(t,e){e.value._routerState=t,e.children.forEach(n=>Cg(t,n))}function fw(t){let e=t.children.length>0?` { ${t.children.map(fw).join(", ")} } `:"";return`${t.value}${e}`}function Jp(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,nr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),nr(e.params,n.params)||t.paramsSubject.next(n.params),AP(e.url,n.url)||t.urlSubject.next(n.url),nr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function _g(t,e){let n=nr(t.params,e.params)&&RP(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||_g(t.parent,e.parent))}function pw(t){return typeof t.title=="string"||t.title===null}var ex=new Ee(""),gw=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Pe;activateEvents=new Gt;deactivateEvents=new Gt;attachEvents=new Gt;detachEvents=new Gt;routerOutletData=Ab();parentContexts=ue(Ha);location=ue(_r);changeDetector=ue(Fp);inputBinder=ue(Uu,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ye(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ye(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ye(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new ye(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Eg(n,c,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ws({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Yl]})}return t})(),Eg=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Hi?this.route:e===Ha?this.childContexts:e===ex?this.outletData:this.parent.get(e,n)}},Uu=new Ee("");var mw=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ma({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Er(0,"router-outlet")},dependencies:[gw],encapsulation:2})}return t})();function Dg(t){let e=t.children&&t.children.map(Dg),n=e?Be(ge({},t),{children:e}):ge({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Pe&&(n.component=mw),n}function tx(t,e,n){let r=Va(t,e._root,n?n._root:void 0);return new ku(r,e)}function Va(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=nx(t,e,n);return new dn(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>Va(t,c)),o}}let r=rx(e.value),i=e.children.map(s=>Va(t,s));return new dn(r,i)}}function nx(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Va(t,r,i);return Va(t,r)})}function rx(t){return new Hi(new ut(t.url),new ut(t.params),new ut(t.queryParams),new ut(t.fragment),new ut(t.data),t.outlet,t.component,t)}var Ua=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},yw="ngNavigationCancelingError";function Fu(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=no(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=vw(!1,nn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function vw(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[yw]=!0,n.cancellationCode=e,n}function ix(t){return _w(t)&&no(t.url)}function _w(t){return!!t&&t[yw]}var sx=(t,e,n,r)=>Ce(i=>(new bg(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),bg=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Jp(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Xs(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Xs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Xs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Xs(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new gg(s.value.snapshot))}),e.children.length&&this.forwardEvent(new fg(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Jp(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),Jp(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Lu=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Js=class{component;route;constructor(e,n){this.component=e,this.route=n}};function ox(t,e,n){let r=t._root,i=e?e._root:null;return xa(r,i,n,[r.value])}function ax(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ao(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Rh(t)?t:e.get(t):r}function xa(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Xs(e);return t.children.forEach(o=>{cx(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>Na(c,n.getContext(o),i)),i}function cx(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=lx(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Lu(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?xa(t,e,c?c.children:null,r,i):xa(t,e,n,r,i),l&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Js(c.outlet.component,o))}else o&&Na(e,c,i),i.canActivateChecks.push(new Lu(r)),s.component?xa(t,null,c?c.children:null,r,i):xa(t,null,n,r,i);return i}function lx(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!$i(t.url,e.url);case"pathParamsOrQueryParamsChange":return!$i(t.url,e.url)||!nr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_g(t,e)||!nr(t.queryParams,e.queryParams);case"paramsChange":default:return!_g(t,e)}}function Na(t,e,n){let r=Xs(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Na(o,e.children.getContext(s),n):Na(o,null,n):Na(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Js(e.outlet.component,i)):n.canDeactivateChecks.push(new Js(null,i)):n.canDeactivateChecks.push(new Js(null,i))}function za(t){return typeof t=="function"}function ux(t){return typeof t=="boolean"}function dx(t){return t&&za(t.canLoad)}function hx(t){return t&&za(t.canActivate)}function fx(t){return t&&za(t.canActivateChild)}function px(t){return t&&za(t.canDeactivate)}function gx(t){return t&&za(t.canMatch)}function Ew(t){return t instanceof hr||t?.name==="EmptyError"}var Tu=Symbol("INITIAL_VALUE");function so(){return dt(t=>il(t.map(e=>e.pipe(Ht(1),fh(Tu)))).pipe(Ce(e=>{for(let n of e)if(n!==!0){if(n===Tu)return Tu;if(n===!1||mx(n))return n}return!0}),$t(e=>e!==Tu),Ht(1)))}function mx(t){return no(t)||t instanceof Ua}function yx(t,e){return wt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?we(Be(ge({},n),{guardsResult:!0})):vx(o,r,i,t).pipe(wt(c=>c&&ux(c)?_x(r,s,t,e):we(c)),Ce(c=>Be(ge({},n),{guardsResult:c})))})}function vx(t,e,n,r){return at(t).pipe(wt(i=>Tx(i.component,i.route,n,e,r)),pr(i=>i!==!0,!0))}function _x(t,e,n,r){return at(e).pipe(Is(i=>ws(bx(i.route.parent,r),Ex(i.route,r),Ix(t,i.path,n),wx(t,i.route,n))),pr(i=>i!==!0,!0))}function Ex(t,e){return t!==null&&e&&e(new pg(t)),we(!0)}function bx(t,e){return t!==null&&e&&e(new hg(t)),we(!0)}function wx(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return we(!0);let i=r.map(s=>jo(()=>{let o=oo(e)??n,c=ao(s,o),l=hx(c)?c.canActivate(e,t):Tt(o,()=>c(e,t));return Ar(l).pipe(pr())}));return we(i).pipe(so())}function Ix(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>ax(o)).filter(o=>o!==null).map(o=>jo(()=>{let c=o.guards.map(l=>{let u=oo(o.node)??n,d=ao(l,u),h=fx(d)?d.canActivateChild(r,t):Tt(u,()=>d(r,t));return Ar(h).pipe(pr())});return we(c).pipe(so())}));return we(s).pipe(so())}function Tx(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return we(!0);let o=s.map(c=>{let l=oo(e)??i,u=ao(c,l),d=px(u)?u.canDeactivate(t,e,n,r):Tt(l,()=>u(t,e,n,r));return Ar(d).pipe(pr())});return we(o).pipe(so())}function Ax(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return we(!0);let s=i.map(o=>{let c=ao(o,t),l=dx(c)?c.canLoad(e,n):Tt(t,()=>c(e,n));return Ar(l)});return we(s).pipe(so(),bw(r))}function bw(t){return th(yt(e=>{if(typeof e!="boolean")throw Fu(t,e)}),Ce(e=>e===!0))}function Sx(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return we(!0);let s=i.map(o=>{let c=ao(o,t),l=gx(c)?c.canMatch(e,n):Tt(t,()=>c(e,n));return Ar(l)});return we(s).pipe(so(),bw(r))}var ja=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Ba=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ys(t){return bs(new ja(t))}function Cx(t){return bs(new ye(4e3,!1))}function Dx(t){return bs(vw(!1,nn.GuardRejected))}var wg=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return we(r);if(i.numberOfChildren>1||!i.children[Pe])return Cx(`${e.redirectTo}`);i=i.children[Pe]}}applyRedirectCommands(e,n,r,i,s){return Rx(n,i,s).pipe(Ce(o=>{if(o instanceof Tr)throw new Ba(o);let c=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new Ba(c);return c}))}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Tr(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=n[c]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(e,l,r,i)}),new Ke(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new ye(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function Rx(t,e,n){if(typeof t=="string")return we(t);let r=t,{queryParams:i,fragment:s,routeConfig:o,url:c,outlet:l,params:u,data:d,title:h}=e;return Ar(Tt(n,()=>r({params:u,data:d,queryParams:i,fragment:s,routeConfig:o,url:c,outlet:l,title:h})))}var Ig={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Px(t,e,n,r,i){let s=ww(t,e,n);return s.matched?(r=QP(e,r),Sx(r,e,n,i).pipe(Ce(o=>o===!0?s:ge({},Ig)))):we(s)}function ww(t,e,n){if(e.path==="**")return xx(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?ge({},Ig):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||TP)(n,t,e);if(!i)return ge({},Ig);let s={};Object.entries(i.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=i.consumed.length>0?ge(ge({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function xx(t){return{matched:!0,parameters:t.length>0?Jb(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Yb(t,e,n,r){return n.length>0&&Nx(t,n,r)?{segmentGroup:new Ke(e,kx(r,new Ke(n,t.children))),slicedSegments:[]}:n.length===0&&Ox(t,n,r)?{segmentGroup:new Ke(t.segments,Mx(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ke(t.segments,t.children),slicedSegments:n}}function Mx(t,e,n,r){let i={};for(let s of n)if(ju(t,e,s)&&!r[Vn(s)]){let o=new Ke([],{});i[Vn(s)]=o}return ge(ge({},r),i)}function kx(t,e){let n={};n[Pe]=e;for(let r of t)if(r.path===""&&Vn(r)!==Pe){let i=new Ke([],{});n[Vn(r)]=i}return n}function Nx(t,e,n){return n.some(r=>ju(t,e,r)&&Vn(r)!==Pe)}function Ox(t,e,n){return n.some(r=>ju(t,e,r))}function ju(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Fx(t,e,n){return e.length===0&&!t.children[n]}var Tg=class{};function Lx(t,e,n,r,i,s,o="emptyOnly"){return new Ag(t,e,n,r,i,o,s).recognize()}var Vx=31,Ag=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,s,o,c){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new wg(this.urlSerializer,this.urlTree)}noMatchError(e){return new ye(4002,`'${e.segmentGroup}'`)}recognize(){let e=Yb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ce(({children:n,rootSnapshot:r})=>{let i=new dn(r,n),s=new Ou("",i),o=HP(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new Zs([],Object.freeze({}),Object.freeze(ge({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Pe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Pe,n).pipe(Ce(r=>({children:r,rootSnapshot:n})),gn(r=>{if(r instanceof Ba)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ja?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(Ce(o=>o instanceof dn?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return at(s).pipe(Is(o=>{let c=r.children[o],l=ZP(n,o);return this.processSegmentGroup(e,l,c,o,i)}),hh((o,c)=>(o.push(...c),o)),Br(null),dh(),wt(o=>{if(o===null)return Ys(r);let c=Iw(o);return Ux(c),we(c)}))}processSegment(e,n,r,i,s,o,c){return at(n).pipe(Is(l=>this.processSegmentAgainstRoute(l._injector??e,n,l,r,i,s,o,c).pipe(gn(u=>{if(u instanceof ja)return we(null);throw u}))),pr(l=>!!l),gn(l=>{if(Ew(l))return Fx(r,i,s)?we(new Tg):Ys(r);throw l}))}processSegmentAgainstRoute(e,n,r,i,s,o,c,l){return Vn(r)!==o&&(o===Pe||!ju(i,s,r))?Ys(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,l):Ys(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,c){let{matched:l,parameters:u,consumedSegments:d,positionalParamSegments:h,remainingSegments:f}=ww(n,i,s);if(!l)return Ys(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Vx&&(this.allowRedirects=!1));let p=new Zs(s,u,Object.freeze(ge({},this.urlTree.queryParams)),this.urlTree.fragment,Xb(i),Vn(i),i.component??i._loadedComponent??null,i,Qb(i)),m=Nu(p,c,this.paramsInheritanceStrategy);return p.params=Object.freeze(m.params),p.data=Object.freeze(m.data),this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,p,e).pipe(dt(_=>this.applyRedirects.lineralizeSegments(i,_)),wt(_=>this.processSegment(e,r,n,_.concat(f),o,!1,c)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let c=Px(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),c.pipe(dt(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(dt(({routes:u})=>{let d=r._loadedInjector??e,{parameters:h,consumedSegments:f,remainingSegments:p}=l,m=new Zs(f,h,Object.freeze(ge({},this.urlTree.queryParams)),this.urlTree.fragment,Xb(r),Vn(r),r.component??r._loadedComponent??null,r,Qb(r)),g=Nu(m,o,this.paramsInheritanceStrategy);m.params=Object.freeze(g.params),m.data=Object.freeze(g.data);let{segmentGroup:_,slicedSegments:E}=Yb(n,f,p,u);if(E.length===0&&_.hasChildren())return this.processChildren(d,u,_,m).pipe(Ce(V=>new dn(m,V)));if(u.length===0&&E.length===0)return we(new dn(m,[]));let C=Vn(r)===s;return this.processSegment(d,u,_,E,C?Pe:s,!0,m).pipe(Ce(V=>new dn(m,V instanceof dn?[V]:[])))}))):Ys(n)))}getChildConfig(e,n,r){return n.children?we({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?we({routes:n._loadedRoutes,injector:n._loadedInjector}):Ax(e,n,r,this.urlSerializer).pipe(wt(i=>i?this.configLoader.loadChildren(e,n).pipe(yt(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):Dx(n))):we({routes:[],injector:e})}};function Ux(t){t.sort((e,n)=>e.value.outlet===Pe?-1:n.value.outlet===Pe?1:e.value.outlet.localeCompare(n.value.outlet))}function jx(t){let e=t.value.routeConfig;return e&&e.path===""}function Iw(t){let e=[],n=new Set;for(let r of t){if(!jx(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Iw(r.children);e.push(new dn(r.value,i))}return e.filter(r=>!n.has(r))}function Xb(t){return t.data||{}}function Qb(t){return t.resolve||{}}function Bx(t,e,n,r,i,s){return wt(o=>Lx(t,e,n,r,o.extractedUrl,i,s).pipe(Ce(({state:c,tree:l})=>Be(ge({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function $x(t,e){return wt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return we(n);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let u of Tw(l))o.add(u);let c=0;return at(o).pipe(Is(l=>s.has(l)?Hx(l,r,t,e):(l.data=Nu(l,l.parent,t).resolve,we(void 0))),yt(()=>c++),Ts(1),wt(l=>c===o.size?we(n):Xt))})}function Tw(t){let e=t.children.map(n=>Tw(n)).flat();return[t,...e]}function Hx(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!pw(i)&&(s[$a]=i.title),jo(()=>(t.data=Nu(t,t.parent,n).resolve,zx(s,t,e,r).pipe(Ce(o=>(t._resolvedData=o,t.data=ge(ge({},t.data),o),null)))))}function zx(t,e,n,r){let i=ng(t);if(i.length===0)return we({});let s={};return at(i).pipe(wt(o=>qx(t[o],e,n,r).pipe(pr(),yt(c=>{if(c instanceof Ua)throw Fu(new to,c);s[o]=c}))),Ts(1),Ce(()=>s),gn(o=>Ew(o)?Xt:bs(o)))}function qx(t,e,n,r){let i=oo(e)??r,s=ao(t,i),o=s.resolve?s.resolve(e,n):Tt(i,()=>s(e,n));return Ar(o)}function eg(t){return dt(e=>{let n=t(e);return n?at(n).pipe(Ce(()=>e)):we(e)})}var Aw=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Pe);return r}getResolvedTitleForRoute(n){return n.data[$a]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>ue(Wx),providedIn:"root"})}return t})(),Wx=(()=>{class t extends Aw{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(Se(zb))};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Bu=new Ee("",{providedIn:"root",factory:()=>({})}),$u=new Ee(""),Sw=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=ue(Cp);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return we(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ar(Tt(n,()=>r.loadComponent())).pipe(Ce(Cw),dt(Dw),yt(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Bo(()=>{this.componentLoaders.delete(r)})),s=new ys(i,()=>new ot).pipe(ms());return this.componentLoaders.set(r,s),s}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return we({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=Gx(r,this.compiler,n,this.onLoadEndListener).pipe(Bo(()=>{this.childrenLoaders.delete(r)})),o=new ys(s,()=>new ot).pipe(ms());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Gx(t,e,n,r){return Ar(Tt(n,()=>t.loadChildren())).pipe(Ce(Cw),dt(Dw),wt(i=>i instanceof su||Array.isArray(i)?we(i):at(e.compileModuleAsync(i))),Ce(i=>{r&&r(t);let s,o,c=!1;return Array.isArray(i)?(o=i,c=!0):(s=i.create(n).injector,o=s.get($u,[],{optional:!0,self:!0}).flat()),{routes:o.map(Dg),injector:s}}))}function Kx(t){return t&&typeof t=="object"&&"default"in t}function Cw(t){return Kx(t)?t.default:t}function Dw(t){return we(t)}var Rg=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>ue(Yx),providedIn:"root"})}return t})(),Yx=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Rw=new Ee("");var Pw=new Ee(""),xw=(()=>{class t{currentNavigation=Ns(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new ot;transitionAbortWithErrorSubject=new ot;configLoader=ue(Sw);environmentInjector=ue(It);destroyRef=ue(Oi);urlSerializer=ue(Vu);rootContexts=ue(Ha);location=ue(Ks);inputBindingEnabled=ue(Uu,{optional:!0})!==null;titleStrategy=ue(Aw);options=ue(Bu,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=ue(Rg);createViewTransition=ue(Rw,{optional:!0});navigationErrorHandler=ue(Pw,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>we(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new ug(i)),r=i=>this.events.next(new dg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;br(()=>{this.transitions?.next(Be(ge({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new ut(null),this.transitions.pipe($t(r=>r!==null),dt(r=>{let i=!1;return we(r).pipe(dt(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",nn.SupersededByNewNavigation),Xt;this.currentTransition=r,this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?Be(ge({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>s.abortController.abort()});let o=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!o&&c!=="reload")return this.events.next(new ii(s.id,this.urlSerializer.serialize(s.rawUrl),"",Pu.IgnoredSameUrlNavigation)),s.resolve(!1),Xt;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return we(s).pipe(dt(l=>(this.events.next(new ro(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Xt:Promise.resolve(l))),Bx(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),yt(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(d=>(d.finalUrl=l.urlAfterRedirects,d));let u=new xu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}));if(o&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:u,source:d,restoredState:h,extras:f}=s,p=new ro(l,this.urlSerializer.serialize(u),d,h);this.events.next(p);let m=hw(this.rootComponentType).snapshot;return this.currentTransition=r=Be(ge({},s),{targetSnapshot:m,urlAfterRedirects:u,extras:Be(ge({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(g=>(g.finalUrl=u,g)),we(r)}else return this.events.next(new ii(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Pu.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Xt}),yt(s=>{let o=new og(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(o)}),Ce(s=>(this.currentTransition=r=Be(ge({},s),{guards:ox(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),yx(this.environmentInjector,s=>this.events.next(s)),yt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Fu(this.urlSerializer,s.guardsResult);let o=new ag(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(o)}),$t(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",nn.GuardRejected),!1)),eg(s=>{if(s.guards.canActivateChecks.length!==0)return we(s).pipe(yt(o=>{let c=new cg(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(c)}),dt(o=>{let c=!1;return we(o).pipe($x(this.paramsInheritanceStrategy,this.environmentInjector),yt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(o,"",nn.NoDataFromResolver)}}))}),yt(o=>{let c=new lg(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(c)}))}),eg(s=>{let o=c=>{let l=[];if(c.routeConfig?.loadComponent){let u=oo(c)??this.environmentInjector;l.push(this.configLoader.loadComponent(u,c.routeConfig).pipe(yt(d=>{c.component=d}),Ce(()=>{})))}for(let u of c.children)l.push(...o(u));return l};return il(o(s.targetSnapshot.root)).pipe(Br(null),Ht(1))}),eg(()=>this.afterPreactivation()),dt(()=>{let{currentSnapshot:s,targetSnapshot:o}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,o.root);return c?at(c).pipe(Ce(()=>r)):we(r)}),Ce(s=>{let o=tx(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=Be(ge({},s),{targetRouterState:o}),this.currentNavigation.update(c=>(c.targetRouterState=o,c)),r}),yt(()=>{this.events.next(new La)}),sx(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Ht(1),ol(new Ie(s=>{let o=r.abortController.signal,c=()=>s.next();return o.addEventListener("abort",c),()=>o.removeEventListener("abort",c)}).pipe($t(()=>!i&&!r.targetRouterState),yt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",nn.Aborted)}))),yt({next:s=>{i=!0,this.lastSuccessfulNavigation=br(this.currentNavigation),this.events.next(new ri(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),ol(this.transitionAbortWithErrorSubject.pipe(yt(s=>{throw s}))),Bo(()=>{i||this.cancelNavigationTransition(r,"",nn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),gn(s=>{if(this.destroyed)return r.resolve(!1),Xt;if(i=!0,_w(s))this.events.next(new Ir(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),ix(s)?this.events.next(new io(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let o=new Fa(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=Tt(this.environmentInjector,()=>this.navigationErrorHandler?.(o));if(c instanceof Ua){let{message:l,cancellationCode:u}=Fu(this.urlSerializer,c);this.events.next(new Ir(r.id,this.urlSerializer.serialize(r.extractedUrl),l,u)),this.events.next(new io(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(o),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Xt}))}))}cancelNavigationTransition(n,r,i){let s=new Ir(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=br(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Xx(t){return t!==ka}var Qx=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>ue(Zx),providedIn:"root"})}return t})(),Sg=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Zx=(()=>{class t extends Sg{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Xl(t)))(i||t)}})();static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Mw=(()=>{class t{urlSerializer=ue(Vu);options=ue(Bu,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=ue(Ks);urlHandlingStrategy=ue(Rg);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Tr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let s=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,o=i??s;return o instanceof Tr?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=hw(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>ue(Jx),providedIn:"root"})}return t})(),Jx=(()=>{class t extends Mw{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof ro?this.updateStateMemento():n instanceof ii?this.commitTransition(r):n instanceof xu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof La?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Ir&&n.code!==nn.SupersededByNewNavigation&&n.code!==nn.Redirect?this.restoreHistory(r):n instanceof Fa?this.restoreHistory(r,!0):n instanceof ri&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(n)||s){let c=this.browserPageId,l=ge(ge({},o),this.generateNgRouterState(i,c));this.location.replaceState(n,"",l)}else{let c=ge(ge({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",c)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===n.finalUrl&&s===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Xl(t)))(i||t)}})();static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kw(t,e){t.events.pipe($t(n=>n instanceof ri||n instanceof Ir||n instanceof Fa||n instanceof ii),Ce(n=>n instanceof ri||n instanceof ii?0:(n instanceof Ir?n.code===nn.Redirect||n.code===nn.SupersededByNewNavigation:!1)?2:1),$t(n=>n!==2),Ht(1)).subscribe(()=>{e()})}var eM={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Pg=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=ue(_p);stateManager=ue(Mw);options=ue(Bu,{optional:!0})||{};pendingTasks=ue(Qn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=ue(xw);urlSerializer=ue(Vu);location=ue(Ks);urlHandlingStrategy=ue(Rg);injector=ue(It);_events=new ot;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=ue(Qx);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=ue($u,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!ue(Uu,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new rt;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=br(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Ir&&r.code!==nn.Redirect&&r.code!==nn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ri)this.navigated=!0;else if(r instanceof io){let o=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=ge({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Xx(i.source)},o);this.scheduleNavigation(c,ka,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}XP(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ka,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let l=ge({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(n);this.scheduleNavigation(c,r,o,s).catch(l=>{this.disposed||this.injector.get(un)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return br(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Dg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:o,d=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":d=ge(ge({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=i?i.snapshot:this.routerState.snapshot.root;h=cw(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),h=this.currentUrlTree.root}return lw(h,n,d,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=no(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,ka,null,r)}navigate(n,r={skipLocationChange:!1}){return nM(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(zr(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=ge({},eM):r===!1?i=ge({},tM):i=r,no(n))return qb(this.currentUrlTree,n,i);let s=this.parseUrl(n);return qb(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let c,l,u;o?(c=o.resolve,l=o.reject,u=o.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return kw(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function nM(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new ye(4008,!1)}var rM=new Ee("");function xg(t,...e){return Jt([{provide:$u,multi:!0,useValue:t},[],{provide:Hi,useFactory:iM,deps:[Pg]},{provide:au,multi:!0,useFactory:sM},e.map(n=>n.\u0275providers)])}function iM(t){return t.routerState.root}function sM(){let t=ue(vt);return e=>{let n=t.get(tr);if(e!==n.components[0])return;let r=t.get(Pg),i=t.get(oM);t.get(aM)===1&&r.initialNavigation(),t.get(cM,null,{optional:!0})?.setUpPreloading(),t.get(rM,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var oM=new Ee("",{factory:()=>new ot}),aM=new Ee("",{providedIn:"root",factory:()=>1});var cM=new Ee("");var Nw=[];var Mg="Service workers are disabled or not supported by this browser",co=class{serviceWorker;worker;registration;events;constructor(e,n){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new Ie(r=>r.error(new ye(5601,!1)));else{let r=null,i=new ot;this.worker=new Ie(u=>(r!==null&&u.next(r),i.subscribe(d=>u.next(d))));let s=()=>{let{controller:u}=e;u!==null&&(r=u,i.next(r))};e.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(dt(()=>e.getRegistration().then(u=>{if(!u)throw new ye(5601,!1);return u})));let o=new ot;this.events=o.asObservable();let c=u=>{let{data:d}=u;d?.type&&o.next(d)};e.addEventListener("message",c),n?.get(tr,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",s),e.removeEventListener("message",c)})}}postMessage(e,n){return new Promise(r=>{this.worker.pipe(Ht(1)).subscribe(i=>{i.postMessage(ge({action:e},n)),r()})})}postMessageWithOperation(e,n,r){let i=this.waitForOperationCompleted(r),s=this.postMessage(e,n);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let n;return typeof e=="string"?n=r=>r.type===e:n=r=>e.includes(r.type),this.events.pipe($t(n))}nextEventOfType(e){return this.eventsOfType(e).pipe(Ht(1))}waitForOperationCompleted(e){return new Promise((n,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe($t(i=>i.nonce===e),Ht(1),Ce(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:n,error:r})})}get isEnabled(){return!!this.serviceWorker}},uM=(()=>{class t{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new ot;constructor(n){if(this.sw=n,!n.isEnabled){this.messages=fr,this.notificationClicks=fr,this.notificationCloses=fr,this.pushSubscriptionChanges=fr,this.subscription=fr;return}this.messages=this.sw.eventsOfType("PUSH").pipe(Ce(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Ce(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(Ce(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(Ce(i=>i.data)),this.pushManager=this.sw.registration.pipe(Ce(i=>i.pushManager));let r=this.pushManager.pipe(dt(i=>i.getSubscription()));this.subscription=new Ie(i=>{let s=r.subscribe(i),o=this.subscriptionChanges.subscribe(i);return()=>{s.unsubscribe(),o.unsubscribe()}})}requestSubscription(n){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Mg));let r={userVisibleOnly:!0},i=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return r.applicationServerKey=s,new Promise((o,c)=>{this.pushManager.pipe(dt(l=>l.subscribe(r)),Ht(1)).subscribe({next:l=>{this.subscriptionChanges.next(l),o(l)},error:c})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Mg));let n=r=>{if(r===null)throw new ye(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new ye(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(Ht(1),dt(n)).subscribe({next:r,error:i})})}decodeBase64(n){return atob(n)}static \u0275fac=function(r){return new(r||t)(Se(co))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),dM=(()=>{class t{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(n){if(this.sw=n,!n.isEnabled){this.versionUpdates=fr,this.unrecoverable=fr;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Mg));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let n=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new ye(5601,!1));let n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}static \u0275fac=function(r){return new(r||t)(Se(co))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();var Fw=new Ee("");function hM(){let t=ue(qa);if(!("serviceWorker"in navigator&&t.enabled!==!1))return;let e=ue(Fw),n=ue(ze),r=ue(tr);n.runOutsideAngular(()=>{let i=navigator.serviceWorker,s=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",s),r.onDestroy(()=>{i.removeEventListener("controllerchange",s)})}),n.runOutsideAngular(()=>{let i,{registrationStrategy:s}=t;if(typeof s=="function")i=new Promise(o=>s().subscribe(()=>o()));else{let[o,...c]=(s||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=Ow(+c[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),Ow(+c[0])]);break;default:throw new ye(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:t.scope,updateViaCache:t.updateViaCache,type:t.type}).catch(o=>console.error(zr(5604,!1)))})})}function Ow(t){return new Promise(e=>setTimeout(e,t))}function fM(t,e){return new co(t.enabled!==!1?navigator.serviceWorker:void 0,e)}var qa=class{enabled;updateViaCache;type;scope;registrationStrategy};function Lw(t,e={}){return Jt([uM,dM,{provide:Fw,useValue:t},{provide:qa,useValue:e},{provide:co,useFactory:fM,deps:[qa,vt]},ou(hM)])}var Vw=()=>{};var Bw=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},pM=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],c=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Hu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,c=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|c>>4,f=(c&15)<<2|u>>6,p=u&63;l||(p=64,o||(f=64)),r.push(n[d],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Bw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||u==null||h==null)throw new Ng;let f=s<<2|c>>4;if(r.push(f),u!==64){let p=c<<4&240|u>>2;if(r.push(p),h!==64){let m=u<<6&192|h;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Ng=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},gM=function(t){let e=Bw(t);return Hu.encodeByteArray(e,!0)},Ga=function(t){return gM(t).replace(/\./g,"")},zu=function(t){try{return Hu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Fg(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var mM=()=>Fg().__FIREBASE_DEFAULTS__,yM=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&zu(t[1]);return e&&JSON.parse(e)},Lg=()=>{try{return Vw()||mM()||yM()||vM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$w=t=>{var e,n;return(n=(e=Lg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},qu=t=>{let e=$w(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Vg=()=>{var t;return(t=Lg())===null||t===void 0?void 0:t.config},Hw=t=>{var e;return(e=Lg())===null||e===void 0?void 0:e[`_${t}`]};var zi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Sr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function Ka(t){return ne(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function Wu(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ga(JSON.stringify(n)),Ga(JSON.stringify(o)),""].join(".")}var Wa={};function _M(){let t={prod:[],emulator:[]};for(let e of Object.keys(Wa))Wa[e]?t.emulator.push(e):t.prod.push(e);return t}function EM(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var Uw=!1;function Ya(t,e){if(typeof window>"u"||typeof document>"u"||!Sr(window.location.host)||Wa[t]===e||Wa[t]||Uw)return;Wa[t]=e;function n(f){return`__firebase__banner__${f}`}let r="__firebase__banner",s=_M().prod.length>0;function o(){let f=document.getElementById(r);f&&f.remove()}function c(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){let f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Uw=!0,o()},f}function d(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){let f=EM(r),p=n("text"),m=document.getElementById(p)||document.createElement("span"),g=n("learnmore"),_=document.getElementById(g)||document.createElement("a"),E=n("preprendIcon"),C=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){let V=f.element;c(V),d(_,g);let k=u();l(C,E),V.append(C,m,_,k),document.body.appendChild(V)}s?(m.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function Tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function qw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ww(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Gw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Xa(){try{return typeof indexedDB=="object"}catch{return!1}}function Kw(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var bM="FirebaseError",rn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=bM,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Un.prototype.create)}},Un=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?wM(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new rn(i,c,r)}};function wM(t,e){return t.replace(IM,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var IM=/\{\$([^}]+)}/g;function qi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(jw(s)&&jw(o)){if(!qi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function jw(t){return t!==null&&typeof t=="object"}function Ug(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yw(t,e){let n=new Og(t,e);return n.subscribe.bind(n)}var Og=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");TM(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=kg),i.error===void 0&&(i.error=kg),i.complete===void 0&&(i.complete=kg);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function TM(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function kg(){}var dK=14400*1e3;function jn(t){return t&&t._delegate?t._delegate:t}var Nt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Wi="[DEFAULT]";var jg=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new zi;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SM(e))try{this.getOrInitializeService({instanceIdentifier:Wi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Wi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return ne(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Wi){return this.instances.has(e)}getOptions(e=Wi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wi){return this.component?this.component.multipleInstances?e:Wi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function AM(t){return t===Wi?void 0:t}function SM(t){return t.instantiationMode==="EAGER"}var Gu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new jg(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var CM=[],qe=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(qe||{}),DM={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},RM=qe.INFO,PM={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},xM=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=PM[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},rr=class{constructor(e){this.name=e,this._logLevel=RM,this._logHandler=xM,this._userLogHandler=null,CM.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}};var MM=(t,e)=>e.some(n=>t instanceof n),Xw,Qw;function kM(){return Xw||(Xw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NM(){return Qw||(Qw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Zw=new WeakMap,$g=new WeakMap,Jw=new WeakMap,Bg=new WeakMap,zg=new WeakMap;function OM(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ir(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Zw.set(n,t)}).catch(()=>{}),zg.set(e,t),e}function FM(t){if($g.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});$g.set(t,e)}var Hg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $g.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Jw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ir(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eI(t){Hg=t(Hg)}function LM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Ku(this),e,...n);return Jw.set(r,e.sort?e.sort():[e]),ir(r)}:NM().includes(t)?function(...e){return t.apply(Ku(this),e),ir(Zw.get(this))}:function(...e){return ir(t.apply(Ku(this),e))}}function VM(t){return typeof t=="function"?LM(t):(t instanceof IDBTransaction&&FM(t),MM(t,kM())?new Proxy(t,Hg):t)}function ir(t){if(t instanceof IDBRequest)return OM(t);if(Bg.has(t))return Bg.get(t);let e=VM(t);return e!==t&&(Bg.set(t,e),zg.set(e,t)),e}var Ku=t=>zg.get(t);function nI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),c=ir(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ir(o.result),l.oldVersion,l.newVersion,ir(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}var UM=["get","getKey","getAll","getAllKeys","count"],jM=["put","add","delete","clear"],qg=new Map;function tI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(qg.get(e))return qg.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=jM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||UM.includes(n)))return;let s=function(o,...c){return ne(this,null,function*(){let l=this.transaction(o,i?"readwrite":"readonly"),u=l.store;return r&&(u=u.index(c.shift())),(yield Promise.all([u[n](...c),i&&l.done]))[0]})};return qg.set(e,s),s}eI(t=>Be(ge({},t),{get:(e,n,r)=>tI(e,n)||t.get(e,n,r),has:(e,n)=>!!tI(e,n)||t.has(e,n)}));var Gg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(BM(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function BM(t){let e=t.getComponent();return e?.type==="VERSION"}var Kg="@firebase/app",rI="0.13.2";var Cr=new rr("@firebase/app"),$M="@firebase/app-compat",HM="@firebase/analytics-compat",zM="@firebase/analytics",qM="@firebase/app-check-compat",WM="@firebase/app-check",GM="@firebase/auth",KM="@firebase/auth-compat",YM="@firebase/database",XM="@firebase/data-connect",QM="@firebase/database-compat",ZM="@firebase/functions",JM="@firebase/functions-compat",ek="@firebase/installations",tk="@firebase/installations-compat",nk="@firebase/messaging",rk="@firebase/messaging-compat",ik="@firebase/performance",sk="@firebase/performance-compat",ok="@firebase/remote-config",ak="@firebase/remote-config-compat",ck="@firebase/storage",lk="@firebase/storage-compat",uk="@firebase/firestore",dk="@firebase/ai",hk="@firebase/firestore-compat",fk="firebase",pk="11.10.0";var Yg="[DEFAULT]",gk={[Kg]:"fire-core",[$M]:"fire-core-compat",[zM]:"fire-analytics",[HM]:"fire-analytics-compat",[WM]:"fire-app-check",[qM]:"fire-app-check-compat",[GM]:"fire-auth",[KM]:"fire-auth-compat",[YM]:"fire-rtdb",[XM]:"fire-data-connect",[QM]:"fire-rtdb-compat",[ZM]:"fire-fn",[JM]:"fire-fn-compat",[ek]:"fire-iid",[tk]:"fire-iid-compat",[nk]:"fire-fcm",[rk]:"fire-fcm-compat",[ik]:"fire-perf",[sk]:"fire-perf-compat",[ok]:"fire-rc",[ak]:"fire-rc-compat",[ck]:"fire-gcs",[lk]:"fire-gcs-compat",[uk]:"fire-fst",[hk]:"fire-fst-compat",[dk]:"fire-vertex","fire-js":"fire-js",[fk]:"fire-js-all"};var Qa=new Map,mk=new Map,Xg=new Map;function iI(t,e){try{t.container.addComponent(e)}catch(n){Cr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hn(t){let e=t.name;if(Xg.has(e))return Cr.debug(`There were multiple attempts to register component ${e}.`),!1;Xg.set(e,t);for(let n of Qa.values())iI(n,t);for(let n of mk.values())iI(n,t);return!0}function lo(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Bn(t){return t==null?!1:t.settings!==void 0}var yk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},si=new Un("app","Firebase",yk);var Qg=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw si.create("app-deleted",{appName:this._name})}};var oi=pk;function em(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Yg,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw si.create("bad-app-name",{appName:String(i)});if(n||(n=Vg()),!n)throw si.create("no-options");let s=Qa.get(i);if(s){if(qi(n,s.options)&&qi(r,s.config))return s;throw si.create("duplicate-app",{appName:i})}let o=new Gu(i);for(let l of Xg.values())o.addComponent(l);let c=new Qg(n,r,o);return Qa.set(i,c),c}function ai(t=Yg){let e=Qa.get(t);if(!e&&t===Yg&&Vg())return em();if(!e)throw si.create("no-app",{appName:t});return e}function Yu(){return Array.from(Qa.values())}function tt(t,e,n){var r;let i=(r=gk[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cr.warn(c.join(" "));return}hn(new Nt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var vk="firebase-heartbeat-database",_k=1,Za="firebase-heartbeat-store",Wg=null;function cI(){return Wg||(Wg=nI(vk,_k,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Za)}catch(n){console.warn(n)}}}}).catch(t=>{throw si.create("idb-open",{originalErrorMessage:t.message})})),Wg}function Ek(t){return ne(this,null,function*(){try{let n=(yield cI()).transaction(Za),r=yield n.objectStore(Za).get(lI(t));return yield n.done,r}catch(e){if(e instanceof rn)Cr.warn(e.message);else{let n=si.create("idb-get",{originalErrorMessage:e?.message});Cr.warn(n.message)}}})}function sI(t,e){return ne(this,null,function*(){try{let r=(yield cI()).transaction(Za,"readwrite");yield r.objectStore(Za).put(e,lI(t)),yield r.done}catch(n){if(n instanceof rn)Cr.warn(n.message);else{let r=si.create("idb-set",{originalErrorMessage:n?.message});Cr.warn(r.message)}}})}function lI(t){return`${t.name}!${t.options.appId}`}var bk=1024,wk=30,Zg=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Jg(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return ne(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=oI();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>wk){let o=Tk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Cr.warn(r)}})}getHeartbeatsHeader(){return ne(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=oI(),{heartbeatsToSend:r,unsentEntries:i}=Ik(this._heartbeatsCache.heartbeats),s=Ga(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Cr.warn(n),""}})}};function oI(){return new Date().toISOString().substring(0,10)}function Ik(t,e=bk){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),aI(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),aI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Jg=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return ne(this,null,function*(){return Xa()?Kw().then(()=>!0).catch(()=>!1):!1})}read(){return ne(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield Ek(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return ne(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return sI(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return ne(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return sI(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function aI(t){return Ga(JSON.stringify({version:2,heartbeats:t})).length}function Tk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Ak(t){hn(new Nt("platform-logger",e=>new Gg(e),"PRIVATE")),hn(new Nt("heartbeat",e=>new Zg(e),"PRIVATE")),tt(Kg,rI,t),tt(Kg,rI,"esm2017"),tt("fire-js","")}Ak("");var Sk="firebase",Ck="11.10.0";tt(Sk,Ck,"app");function uI(t){t===void 0&&(t=ue(vt));let e=t.get(Os);return n=>new Ie(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let c=n.subscribe({next:l=>{r.next(l),o()},complete:()=>{r.complete(),o()},error:l=>{r.error(l),o()}});return c.add(()=>{r.unsubscribe(),o()}),c})}var Dr=new Ss("ANGULARFIRE2_VERSION");function ho(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ci=(t,e)=>{let n=e?[e]:Yu(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},uo=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(uo||{}),dI=Ia()&&typeof Zone<"u"?uo.WARN:uo.SILENT;var Xu=class{zone;delegate;constructor(e,n=ah){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,n,r)}},Rr=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=ue(ze);this.outsideAngular=n.runOutsideAngular(()=>new Xu(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Xu(typeof Zone>"u"?void 0:Zone.current,oh))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hI=!1;function Dk(t,e){!hI&&(dI>uo.SILENT||Ia())&&(hI=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),dI>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function Rk(t){let e=ue(ze,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Gi(t){let e=ue(ze,{optional:!0});return e?e.run(()=>t()):t()}var Pk=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Tt(n,()=>Gi(()=>t.apply(void 0,r)))),sr=(t,e,n)=>(n||=e?uo.WARN:uo.VERBOSE,function(){let r,i=arguments,s,o,c;try{s=ue(Rr),o=ue(Os),c=ue(It)}catch{return Dk(t,n),t.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=Gi(()=>o.add())),i[u]=Pk(i[u],r,c));let l=Rk(()=>t.apply(this,i));return e?l instanceof Ie?l.pipe(jr(s.outsideAngular),Ur(s.insideAngular),uI(c)):l instanceof Promise?Gi(()=>{let u=o.add();return new Promise((d,h)=>{l.then(f=>Tt(c,()=>Gi(()=>d(f))),f=>Tt(c,()=>Gi(()=>h(f)))).finally(u)})}):typeof l=="function"&&r?function(){return setTimeout(r,0),l.apply(this,arguments)}:Gi(()=>l):l instanceof Ie?l.pipe(jr(s.outsideAngular),Ur(s.insideAngular)):Gi(()=>l)});var Pr=class{constructor(e){return e}},Ki=class{constructor(){return Yu()}};function xk(t){return t&&t.length===1?t[0]:new Pr(ai())}var tm=new Ee("angularfire2._apps"),Mk={provide:Pr,useFactory:xk,deps:[[new tn,tm]]},kk={provide:Ki,deps:[[new tn,tm]]};function Nk(t){return(e,n)=>{let r=n.get(ji);tt("angularfire",Dr.full,"core"),tt("angularfire",Dr.full,"app"),tt("angular",Sh.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Pr(i)}}function fI(t,...e){return Jt([Mk,kk,{provide:tm,useFactory:Nk(t),multi:!0,deps:[ze,vt,Rr,...e]}])}var pI=sr(em,!0);var Ok=new Map,Fk={activated:!1,tokenObservers:[]},Lk={initialized:!1,enabled:!1};function $n(t){return Ok.get(t)||Object.assign({},Fk)}function vI(){return Lk}var Vk="https://content-firebaseappcheck.googleapis.com/v1";var Uk="exchangeDebugToken",gI={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},p7=1440*60*1e3;var im=class{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return ne(this,null,function*(){this.stop();try{this.pending=new zi,this.pending.promise.catch(n=>{}),yield jk(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new zi,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function jk(t){return new Promise(e=>{setTimeout(e,t)})}var Bk={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},li=new Un("appCheck","AppCheck",Bk);function _I(t){if(!$n(t).activated)throw li.create("use-before-activation",{appName:t.name})}function EI(r,i){return ne(this,arguments,function*({url:t,body:e},n){let s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let p=yield o.getHeartbeatsHeader();p&&(s["X-Firebase-Client"]=p)}let c={method:"POST",body:JSON.stringify(e),headers:s},l;try{l=yield fetch(t,c)}catch(p){throw li.create("fetch-network-error",{originalErrorMessage:p?.message})}if(l.status!==200)throw li.create("fetch-status-error",{httpStatus:l.status});let u;try{u=yield l.json()}catch(p){throw li.create("fetch-parse-error",{originalErrorMessage:p?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw li.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let h=Number(d[1])*1e3,f=Date.now();return{token:u.token,expireTimeMillis:f+h,issuedAtTimeMillis:f}})}function bI(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${Vk}/projects/${n}/apps/${r}:${Uk}?key=${i}`,body:{debug_token:e}}}var $k="firebase-app-check-database",Hk=1,sm="firebase-app-check-store";var Qu=null;function zk(){return Qu||(Qu=new Promise((t,e)=>{try{let n=indexedDB.open($k,Hk);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(li.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(sm,{keyPath:"compositeKey"})}}}catch(n){e(li.create("storage-open",{originalErrorMessage:n?.message}))}}),Qu)}function qk(t,e){return Wk(Gk(t),e)}function Wk(t,e){return ne(this,null,function*(){let r=(yield zk()).transaction(sm,"readwrite"),s=r.objectStore(sm).put({compositeKey:t,value:e});return new Promise((o,c)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var u;c(li.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})})}function Gk(t){return`${t.options.appId}-${t.name}`}var Ja=new rr("@firebase/app-check");function nm(t,e){return Xa()?qk(t,e).catch(n=>{Ja.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function wI(){return vI().enabled}function II(){return ne(this,null,function*(){let t=vI();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Kk={error:"UNKNOWN_ERROR"};function Yk(t){return Hu.encodeString(JSON.stringify(t),!1)}function om(t,e=!1,n=!1){return ne(this,null,function*(){let r=t.app;_I(r);let i=$n(r),s=i.token,o;if(s&&!ec(s)&&(i.token=void 0,s=void 0),!s){let u=yield i.cachedTokenPromise;u&&(ec(u)?s=u:yield nm(r,void 0))}if(!e&&s&&ec(s))return{token:s.token};let c=!1;if(wI())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=EI(bI(r,yield II()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let u=yield i.exchangeTokenPromise;return yield nm(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Ja.warn(u.message):n&&Ja.error(u),rm(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),s=yield $n(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Ja.warn(u.message):n&&Ja.error(u),o=u}let l;return s?o?ec(s)?l={token:s.token,internalError:o}:l=rm(o):(l={token:s.token},i.token=s,yield nm(r,s)):l=rm(o),c&&Jk(r,l),l})}function Xk(t){return ne(this,null,function*(){let e=t.app;_I(e);let{provider:n}=$n(e);if(wI()){let r=yield II(),{token:i}=yield EI(bI(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function Qk(t,e,n,r){let{app:i}=t,s=$n(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&ec(s.token)){let c=s.token;Promise.resolve().then(()=>{n({token:c.token}),mI(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>mI(t))}function TI(t,e){let n=$n(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function mI(t){let{app:e}=t,n=$n(e),r=n.tokenRefresher;r||(r=Zk(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Zk(t){let{app:e}=t;return new im(()=>ne(null,null,function*(){let n=$n(e),r;if(n.token?r=yield om(t,!0):r=yield om(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=$n(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},gI.RETRIAL_MIN_WAIT,gI.RETRIAL_MAX_WAIT)}function Jk(t,e){let n=$n(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ec(t){return t.expireTimeMillis-Date.now()>0}function rm(t){return{token:Yk(Kk),error:t}}var am=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=$n(this.app);for(let n of e)TI(this.app,n.next);return Promise.resolve()}};function eN(t,e){return new am(t,e)}function tN(t){return{getToken:e=>om(t,e),getLimitedUseToken:()=>Xk(t),addTokenListener:e=>Qk(t,"INTERNAL",e),removeTokenListener:e=>TI(t.app,e)}}var nN="@firebase/app-check",rN="0.10.1";var iN="app-check",yI="app-check-internal";function sN(){hn(new Nt(iN,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return eN(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(yI).initialize()})),hn(new Nt(yI,t=>{let e=t.getProvider("app-check").getImmediate();return tN(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),tt(nN,rN)}sN();var oN="app-check";var fo=class{constructor(){return ci(oN)}};var aN=["localhost","0.0.0.0","127.0.0.1"],C7=typeof window<"u"&&aN.includes(window.location.hostname);function MI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var kI=MI,NI=new Un("auth","Firebase",MI());var td=new rr("@firebase/auth");function lN(t,...e){td.logLevel<=qe.WARN&&td.warn(`Auth (${oi}): ${t}`,...e)}function Ju(t,...e){td.logLevel<=qe.ERROR&&td.error(`Auth (${oi}): ${t}`,...e)}function AI(t,...e){throw _m(t,...e)}function vm(t,...e){return _m(t,...e)}function OI(t,e,n){let r=Object.assign(Object.assign({},kI()),{[e]:n});return new Un("auth","Firebase",r).create(e,{appName:t.name})}function ed(t){return OI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _m(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return NI.create(t,...e)}function We(t,e,...n){if(!t)throw _m(e,...n)}function tc(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Ju(e),new Error(e)}function nd(t,e){t||tc(e)}function uN(){return SI()==="http:"||SI()==="https:"}function SI(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function dN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uN()||Ww()||"connection"in navigator)?navigator.onLine:!0}function hN(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Qi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,nd(n>e,"Short delay should be less than long delay!"),this.isMobile=zw()||Gw()}get(){return dN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function fN(t,e){nd(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var rd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var pN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var gN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mN=new Qi(3e4,6e4);function FI(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function cd(s,o,c,l){return ne(this,arguments,function*(t,e,n,r,i={}){return LI(t,i,()=>ne(null,null,function*(){let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});let h=Ug(Object.assign({key:t.config.apiKey},d)).slice(1),f=yield t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);let p=Object.assign({method:e,headers:f},u);return qw()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&Sr(t.emulatorConfig.host)&&(p.credentials="include"),rd.fetch()(yield VI(t,t.config.apiHost,n,h),p)}))})}function LI(t,e,n){return ne(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},pN),e);try{let i=new um(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Zu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Zu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Zu(t,"user-disabled",o);let d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw OI(t,d,u);AI(t,d)}}catch(i){if(i instanceof rn)throw i;AI(t,"network-request-failed",{message:String(i)})}})}function VI(t,e,n,r){return ne(this,null,function*(){let i=`${e}${n}?${r}`,s=t,o=s.config.emulator?fN(t.config,i):`${t.config.apiScheme}://${i}`;return gN.includes(n)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}var um=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(vm(this.auth,"network-request-failed")),mN.get())})}};function Zu(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=vm(t,e,r);return i.customData._tokenResponse=n,i}function yN(t,e){return ne(this,null,function*(){return cd(t,"POST","/v1/accounts:delete",e)})}function id(t,e){return ne(this,null,function*(){return cd(t,"POST","/v1/accounts:lookup",e)})}function nc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Em(t,e=!1){return ne(this,null,function*(){let n=jn(t),r=yield n.getIdToken(e),i=UI(r);We(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:nc(cm(i.auth_time)),issuedAtTime:nc(cm(i.iat)),expirationTime:nc(cm(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function cm(t){return Number(t)*1e3}function UI(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ju("JWT malformed, contained fewer than 3 sections"),null;try{let i=zu(n);return i?JSON.parse(i):(Ju("Failed to decode base64 JWT payload"),null)}catch(i){return Ju("Caught error parsing JWT payload as JSON",i?.toString()),null}}function CI(t){let e=UI(t);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function dm(t,e,n=!1){return ne(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof rn&&vN(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function vN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var hm=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>ne(this,null,function*(){yield this.iteration()}),n)}iteration(){return ne(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ic=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nc(this.lastLoginAt),this.creationTime=nc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function sd(t){return ne(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield dm(t,id(n,{idToken:r}));We(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?jI(s.providerUserInfo):[],c=_N(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!c?.length,d=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new ic(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)})}function bm(t){return ne(this,null,function*(){let e=jn(t);yield sd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function _N(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function jI(t){return t.map(e=>{var{providerId:n}=e,r=ch(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function EN(t,e){return ne(this,null,function*(){let n=yield LI(t,{},()=>ne(null,null,function*(){let r=Ug({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=yield VI(t,i,"/v1/token",`key=${s}`),c=yield t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:c,body:r};return t.emulatorConfig&&Sr(t.emulatorConfig.host)&&(l.credentials="include"),rd.fetch()(o,l)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function bN(t,e){return ne(this,null,function*(){return cd(t,"POST","/v2/accounts:revokeToken",FI(t,e))})}var rc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):CI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){We(e.length!==0,"internal-error");let n=CI(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return ne(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return ne(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield EN(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(We(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(We(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(We(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return tc("not implemented")}};function ui(t,e){We(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Yi=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ch(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ic(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return ne(this,null,function*(){let n=yield dm(this,this.stsTokenManager.getToken(this.auth,e));return We(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Em(this,e)}reload(){return bm(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return ne(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield sd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return ne(this,null,function*(){if(Bn(this.auth.app))return Promise.reject(ed(this.auth));let e=yield this.getIdToken();return yield dm(this,yN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,c,l,u,d;let h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(c=n.tenantId)!==null&&c!==void 0?c:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,E=(u=n.createdAt)!==null&&u!==void 0?u:void 0,C=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:V,emailVerified:k,isAnonymous:S,providerData:P,stsTokenManager:D}=n;We(V&&D,e,"internal-error");let A=rc.fromJSON(this.name,D);We(typeof V=="string",e,"internal-error"),ui(h,e.name),ui(f,e.name),We(typeof k=="boolean",e,"internal-error"),We(typeof S=="boolean",e,"internal-error"),ui(p,e.name),ui(m,e.name),ui(g,e.name),ui(_,e.name),ui(E,e.name),ui(C,e.name);let T=new t({uid:V,auth:e,email:f,emailVerified:k,displayName:h,isAnonymous:S,photoURL:m,phoneNumber:p,tenantId:g,stsTokenManager:A,createdAt:E,lastLoginAt:C});return P&&Array.isArray(P)&&(T.providerData=P.map(O=>Object.assign({},O))),_&&(T._redirectEventId=_),T}static _fromIdTokenResponse(e,n,r=!1){return ne(this,null,function*(){let i=new rc;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield sd(s),s})}static _fromGetAccountInfoResponse(e,n,r){return ne(this,null,function*(){let i=n.users[0];We(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?jI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new rc;c.updateFromIdToken(r);let l=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ic(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,u),l})}};var DI=new Map;function Xi(t){nd(t instanceof Function,"Expected a class definition");let e=DI.get(t);return e?(nd(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,DI.set(t,e),e)}var wN=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return ne(this,null,function*(){return!0})}_set(n,r){return ne(this,null,function*(){this.storage[n]=r})}_get(n){return ne(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return ne(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),fm=wN;function lm(t,e,n){return`firebase:${t}:${e}:${n}`}var od=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=lm(this.userKey,i.apiKey,s),this.fullPersistenceKey=lm("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return ne(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield id(this.auth,{idToken:e}).catch(()=>{});return n?Yi._fromGetAccountInfoResponse(this.auth,n,e):null}return Yi._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return ne(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return ne(this,null,function*(){if(!n.length)return new t(Xi(fm),e,r);let i=(yield Promise.all(n.map(u=>ne(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||Xi(fm),o=lm(r,e.config.apiKey,e.name),c=null;for(let u of n)try{let d=yield u._get(o);if(d){let h;if(typeof d=="string"){let f=yield id(e,{idToken:d}).catch(()=>{});if(!f)break;h=yield Yi._fromGetAccountInfoResponse(e,f,d)}else h=Yi._fromJSON(e,d);u!==s&&(c=h),s=u;break}}catch{}let l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new t(s,e,r):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(n.map(u=>ne(null,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new t(s,e,r))})}};function RI(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DN(e))return"Blackberry";if(RN(e))return"Webos";if(TN(e))return"Safari";if((e.includes("chrome/")||AN(e))&&!e.includes("edge/"))return"Chrome";if(CN(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function IN(t=Tn()){return/firefox\//i.test(t)}function TN(t=Tn()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AN(t=Tn()){return/crios\//i.test(t)}function SN(t=Tn()){return/iemobile/i.test(t)}function CN(t=Tn()){return/android/i.test(t)}function DN(t=Tn()){return/blackberry/i.test(t)}function RN(t=Tn()){return/webos/i.test(t)}function BI(t,e=[]){let n;switch(t){case"Browser":n=RI(Tn());break;case"Worker":n=`${RI(Tn())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oi}/${r}`}var pm=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,c)=>{try{let l=e(s);o(l)}catch(l){c(l)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return ne(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function PN(n){return ne(this,arguments,function*(t,e={}){return cd(t,"GET","/v2/passwordPolicy",FI(t,e))})}var xN=6,gm=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:xN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var mm=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ad(this),this.idTokenSubscription=new ad(this),this.beforeStateQueue=new pm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xi(n)),this._initializationPromise=this.queue(()=>ne(this,null,function*(){var r,i,s;if(!this._deleted&&(this.persistenceManager=yield od.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return ne(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return ne(this,null,function*(){try{let n=yield id(this,{idToken:e}),r=yield Yi._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return ne(this,null,function*(){var n;if(Bn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===c)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return ne(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return ne(this,null,function*(){try{yield sd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=hN()}_delete(){return ne(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return ne(this,null,function*(){if(Bn(this.app))return Promise.reject(ed(this));let n=e?jn(e):null;return n&&We(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return ne(this,null,function*(){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>ne(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return ne(this,null,function*(){return Bn(this.app)?Promise.reject(ed(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Bn(this.app)?Promise.reject(ed(this)):this.queue(()=>ne(this,null,function*(){yield this.assertedPersistence.setPersistence(Xi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return ne(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return ne(this,null,function*(){let e=yield PN(this),n=new gm(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Un("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return ne(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield bN(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return ne(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return ne(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Xi(e)||this._popupRedirectResolver;We(n,this,"argument-error"),this.redirectPersistenceManager=yield od.create(this,[Xi(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return ne(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>ne(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return ne(this,null,function*(){if(e===this.currentUser)return this.queue(()=>ne(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{let l=e.addObserver(n);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return ne(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return ne(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return ne(this,null,function*(){var e;if(Bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&lN(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function MN(t){return jn(t)}var ad=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Yw(n=>this.observer=n)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var kN={loadJS(){return ne(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NN(t){kN=t}function ON(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function FN(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Xi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var U7=ON("rcb"),j7=new Qi(3e4,6e4);var B7=new Qi(2e3,1e4);var $7=600*1e3;var H7=new Qi(3e4,6e4);var z7=new Qi(5e3,15e3);var q7=encodeURIComponent("fac");var PI="@firebase/auth",xI="1.10.8";var ym=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return ne(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function LN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VN(t){hn(new Nt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;We(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BI(t)},u=new mm(r,i,s,l);return FN(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),hn(new Nt("auth-internal",e=>{let n=MN(e.getProvider("auth").getImmediate());return(r=>new ym(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),tt(PI,xI,LN(t)),tt(PI,xI,"esm2017")}var UN=300,W7=Hw("authIdTokenMaxAge")||UN;function jN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}NN({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=vm("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",jN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VN("Browser");var VO="auth";var po=class{constructor(){return ci(VO)}};var $I=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},HI={};var ld,zI;(function(){var t;function e(D,A){function T(){}T.prototype=A.prototype,D.D=A.prototype,D.prototype=new T,D.prototype.constructor=D,D.C=function(O,F,W){for(var U=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)U[ae-2]=arguments[ae];return A.prototype[F].apply(O,U)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,A,T){T||(T=0);var O=Array(16);if(typeof A=="string")for(var F=0;16>F;++F)O[F]=A.charCodeAt(T++)|A.charCodeAt(T++)<<8|A.charCodeAt(T++)<<16|A.charCodeAt(T++)<<24;else for(F=0;16>F;++F)O[F]=A[T++]|A[T++]<<8|A[T++]<<16|A[T++]<<24;A=D.g[0],T=D.g[1],F=D.g[2];var W=D.g[3],U=A+(W^T&(F^W))+O[0]+3614090360&4294967295;A=T+(U<<7&4294967295|U>>>25),U=W+(F^A&(T^F))+O[1]+3905402710&4294967295,W=A+(U<<12&4294967295|U>>>20),U=F+(T^W&(A^T))+O[2]+606105819&4294967295,F=W+(U<<17&4294967295|U>>>15),U=T+(A^F&(W^A))+O[3]+3250441966&4294967295,T=F+(U<<22&4294967295|U>>>10),U=A+(W^T&(F^W))+O[4]+4118548399&4294967295,A=T+(U<<7&4294967295|U>>>25),U=W+(F^A&(T^F))+O[5]+1200080426&4294967295,W=A+(U<<12&4294967295|U>>>20),U=F+(T^W&(A^T))+O[6]+2821735955&4294967295,F=W+(U<<17&4294967295|U>>>15),U=T+(A^F&(W^A))+O[7]+4249261313&4294967295,T=F+(U<<22&4294967295|U>>>10),U=A+(W^T&(F^W))+O[8]+1770035416&4294967295,A=T+(U<<7&4294967295|U>>>25),U=W+(F^A&(T^F))+O[9]+2336552879&4294967295,W=A+(U<<12&4294967295|U>>>20),U=F+(T^W&(A^T))+O[10]+4294925233&4294967295,F=W+(U<<17&4294967295|U>>>15),U=T+(A^F&(W^A))+O[11]+2304563134&4294967295,T=F+(U<<22&4294967295|U>>>10),U=A+(W^T&(F^W))+O[12]+1804603682&4294967295,A=T+(U<<7&4294967295|U>>>25),U=W+(F^A&(T^F))+O[13]+4254626195&4294967295,W=A+(U<<12&4294967295|U>>>20),U=F+(T^W&(A^T))+O[14]+2792965006&4294967295,F=W+(U<<17&4294967295|U>>>15),U=T+(A^F&(W^A))+O[15]+1236535329&4294967295,T=F+(U<<22&4294967295|U>>>10),U=A+(F^W&(T^F))+O[1]+4129170786&4294967295,A=T+(U<<5&4294967295|U>>>27),U=W+(T^F&(A^T))+O[6]+3225465664&4294967295,W=A+(U<<9&4294967295|U>>>23),U=F+(A^T&(W^A))+O[11]+643717713&4294967295,F=W+(U<<14&4294967295|U>>>18),U=T+(W^A&(F^W))+O[0]+3921069994&4294967295,T=F+(U<<20&4294967295|U>>>12),U=A+(F^W&(T^F))+O[5]+3593408605&4294967295,A=T+(U<<5&4294967295|U>>>27),U=W+(T^F&(A^T))+O[10]+38016083&4294967295,W=A+(U<<9&4294967295|U>>>23),U=F+(A^T&(W^A))+O[15]+3634488961&4294967295,F=W+(U<<14&4294967295|U>>>18),U=T+(W^A&(F^W))+O[4]+3889429448&4294967295,T=F+(U<<20&4294967295|U>>>12),U=A+(F^W&(T^F))+O[9]+568446438&4294967295,A=T+(U<<5&4294967295|U>>>27),U=W+(T^F&(A^T))+O[14]+3275163606&4294967295,W=A+(U<<9&4294967295|U>>>23),U=F+(A^T&(W^A))+O[3]+4107603335&4294967295,F=W+(U<<14&4294967295|U>>>18),U=T+(W^A&(F^W))+O[8]+1163531501&4294967295,T=F+(U<<20&4294967295|U>>>12),U=A+(F^W&(T^F))+O[13]+2850285829&4294967295,A=T+(U<<5&4294967295|U>>>27),U=W+(T^F&(A^T))+O[2]+4243563512&4294967295,W=A+(U<<9&4294967295|U>>>23),U=F+(A^T&(W^A))+O[7]+1735328473&4294967295,F=W+(U<<14&4294967295|U>>>18),U=T+(W^A&(F^W))+O[12]+2368359562&4294967295,T=F+(U<<20&4294967295|U>>>12),U=A+(T^F^W)+O[5]+4294588738&4294967295,A=T+(U<<4&4294967295|U>>>28),U=W+(A^T^F)+O[8]+2272392833&4294967295,W=A+(U<<11&4294967295|U>>>21),U=F+(W^A^T)+O[11]+1839030562&4294967295,F=W+(U<<16&4294967295|U>>>16),U=T+(F^W^A)+O[14]+4259657740&4294967295,T=F+(U<<23&4294967295|U>>>9),U=A+(T^F^W)+O[1]+2763975236&4294967295,A=T+(U<<4&4294967295|U>>>28),U=W+(A^T^F)+O[4]+1272893353&4294967295,W=A+(U<<11&4294967295|U>>>21),U=F+(W^A^T)+O[7]+4139469664&4294967295,F=W+(U<<16&4294967295|U>>>16),U=T+(F^W^A)+O[10]+3200236656&4294967295,T=F+(U<<23&4294967295|U>>>9),U=A+(T^F^W)+O[13]+681279174&4294967295,A=T+(U<<4&4294967295|U>>>28),U=W+(A^T^F)+O[0]+3936430074&4294967295,W=A+(U<<11&4294967295|U>>>21),U=F+(W^A^T)+O[3]+3572445317&4294967295,F=W+(U<<16&4294967295|U>>>16),U=T+(F^W^A)+O[6]+76029189&4294967295,T=F+(U<<23&4294967295|U>>>9),U=A+(T^F^W)+O[9]+3654602809&4294967295,A=T+(U<<4&4294967295|U>>>28),U=W+(A^T^F)+O[12]+3873151461&4294967295,W=A+(U<<11&4294967295|U>>>21),U=F+(W^A^T)+O[15]+530742520&4294967295,F=W+(U<<16&4294967295|U>>>16),U=T+(F^W^A)+O[2]+3299628645&4294967295,T=F+(U<<23&4294967295|U>>>9),U=A+(F^(T|~W))+O[0]+4096336452&4294967295,A=T+(U<<6&4294967295|U>>>26),U=W+(T^(A|~F))+O[7]+1126891415&4294967295,W=A+(U<<10&4294967295|U>>>22),U=F+(A^(W|~T))+O[14]+2878612391&4294967295,F=W+(U<<15&4294967295|U>>>17),U=T+(W^(F|~A))+O[5]+4237533241&4294967295,T=F+(U<<21&4294967295|U>>>11),U=A+(F^(T|~W))+O[12]+1700485571&4294967295,A=T+(U<<6&4294967295|U>>>26),U=W+(T^(A|~F))+O[3]+2399980690&4294967295,W=A+(U<<10&4294967295|U>>>22),U=F+(A^(W|~T))+O[10]+4293915773&4294967295,F=W+(U<<15&4294967295|U>>>17),U=T+(W^(F|~A))+O[1]+2240044497&4294967295,T=F+(U<<21&4294967295|U>>>11),U=A+(F^(T|~W))+O[8]+1873313359&4294967295,A=T+(U<<6&4294967295|U>>>26),U=W+(T^(A|~F))+O[15]+4264355552&4294967295,W=A+(U<<10&4294967295|U>>>22),U=F+(A^(W|~T))+O[6]+2734768916&4294967295,F=W+(U<<15&4294967295|U>>>17),U=T+(W^(F|~A))+O[13]+1309151649&4294967295,T=F+(U<<21&4294967295|U>>>11),U=A+(F^(T|~W))+O[4]+4149444226&4294967295,A=T+(U<<6&4294967295|U>>>26),U=W+(T^(A|~F))+O[11]+3174756917&4294967295,W=A+(U<<10&4294967295|U>>>22),U=F+(A^(W|~T))+O[2]+718787259&4294967295,F=W+(U<<15&4294967295|U>>>17),U=T+(W^(F|~A))+O[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(F+(U<<21&4294967295|U>>>11))&4294967295,D.g[2]=D.g[2]+F&4294967295,D.g[3]=D.g[3]+W&4294967295}r.prototype.u=function(D,A){A===void 0&&(A=D.length);for(var T=A-this.blockSize,O=this.B,F=this.h,W=0;W<A;){if(F==0)for(;W<=T;)i(this,D,W),W+=this.blockSize;if(typeof D=="string"){for(;W<A;)if(O[F++]=D.charCodeAt(W++),F==this.blockSize){i(this,O),F=0;break}}else for(;W<A;)if(O[F++]=D[W++],F==this.blockSize){i(this,O),F=0;break}}this.h=F,this.o+=A},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;var T=8*this.o;for(A=D.length-8;A<D.length;++A)D[A]=T&255,T/=256;for(this.u(D),D=Array(16),A=T=0;4>A;++A)for(var O=0;32>O;O+=8)D[T++]=this.g[A]>>>O&255;return D};function s(D,A){var T=c;return Object.prototype.hasOwnProperty.call(T,D)?T[D]:T[D]=A(D)}function o(D,A){this.h=A;for(var T=[],O=!0,F=D.length-1;0<=F;F--){var W=D[F]|0;O&&W==A||(T[F]=W,O=!1)}this.g=T}var c={};function l(D){return-128<=D&&128>D?s(D,function(A){return new o([A|0],0>A?-1:0)}):new o([D|0],0>D?-1:0)}function u(D){if(isNaN(D)||!isFinite(D))return h;if(0>D)return _(u(-D));for(var A=[],T=1,O=0;D>=T;O++)A[O]=D/T|0,T*=4294967296;return new o(A,0)}function d(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return _(d(D.substring(1),A));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(A,8)),O=h,F=0;F<D.length;F+=8){var W=Math.min(8,D.length-F),U=parseInt(D.substring(F,F+W),A);8>W?(W=u(Math.pow(A,W)),O=O.j(W).add(u(U))):(O=O.j(T),O=O.add(u(U)))}return O}var h=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(g(this))return-_(this).m();for(var D=0,A=1,T=0;T<this.g.length;T++){var O=this.i(T);D+=(0<=O?O:4294967296+O)*A,A*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(m(this))return"0";if(g(this))return"-"+_(this).toString(D);for(var A=u(Math.pow(D,6)),T=this,O="";;){var F=k(T,A).g;T=E(T,F.j(A));var W=((0<T.g.length?T.g[0]:T.h)>>>0).toString(D);if(T=F,m(T))return W+O;for(;6>W.length;)W="0"+W;O=W+O}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function m(D){if(D.h!=0)return!1;for(var A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function g(D){return D.h==-1}t.l=function(D){return D=E(this,D),g(D)?-1:m(D)?0:1};function _(D){for(var A=D.g.length,T=[],O=0;O<A;O++)T[O]=~D.g[O];return new o(T,~D.h).add(f)}t.abs=function(){return g(this)?_(this):this},t.add=function(D){for(var A=Math.max(this.g.length,D.g.length),T=[],O=0,F=0;F<=A;F++){var W=O+(this.i(F)&65535)+(D.i(F)&65535),U=(W>>>16)+(this.i(F)>>>16)+(D.i(F)>>>16);O=U>>>16,W&=65535,U&=65535,T[F]=U<<16|W}return new o(T,T[T.length-1]&-2147483648?-1:0)};function E(D,A){return D.add(_(A))}t.j=function(D){if(m(this)||m(D))return h;if(g(this))return g(D)?_(this).j(_(D)):_(_(this).j(D));if(g(D))return _(this.j(_(D)));if(0>this.l(p)&&0>D.l(p))return u(this.m()*D.m());for(var A=this.g.length+D.g.length,T=[],O=0;O<2*A;O++)T[O]=0;for(O=0;O<this.g.length;O++)for(var F=0;F<D.g.length;F++){var W=this.i(O)>>>16,U=this.i(O)&65535,ae=D.i(F)>>>16,he=D.i(F)&65535;T[2*O+2*F]+=U*he,C(T,2*O+2*F),T[2*O+2*F+1]+=W*he,C(T,2*O+2*F+1),T[2*O+2*F+1]+=U*ae,C(T,2*O+2*F+1),T[2*O+2*F+2]+=W*ae,C(T,2*O+2*F+2)}for(O=0;O<A;O++)T[O]=T[2*O+1]<<16|T[2*O];for(O=A;O<2*A;O++)T[O]=0;return new o(T,0)};function C(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function V(D,A){this.g=D,this.h=A}function k(D,A){if(m(A))throw Error("division by zero");if(m(D))return new V(h,h);if(g(D))return A=k(_(D),A),new V(_(A.g),_(A.h));if(g(A))return A=k(D,_(A)),new V(_(A.g),A.h);if(30<D.g.length){if(g(D)||g(A))throw Error("slowDivide_ only works with positive integers.");for(var T=f,O=A;0>=O.l(D);)T=S(T),O=S(O);var F=P(T,1),W=P(O,1);for(O=P(O,2),T=P(T,2);!m(O);){var U=W.add(O);0>=U.l(D)&&(F=F.add(T),W=U),O=P(O,1),T=P(T,1)}return A=E(D,F.j(A)),new V(F,A)}for(F=h;0<=D.l(A);){for(T=Math.max(1,Math.floor(D.m()/A.m())),O=Math.ceil(Math.log(T)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),W=u(T),U=W.j(A);g(U)||0<U.l(D);)T-=O,W=u(T),U=W.j(A);m(W)&&(W=f),F=F.add(W),D=E(D,U)}return new V(F,D)}t.A=function(D){return k(this,D).h},t.and=function(D){for(var A=Math.max(this.g.length,D.g.length),T=[],O=0;O<A;O++)T[O]=this.i(O)&D.i(O);return new o(T,this.h&D.h)},t.or=function(D){for(var A=Math.max(this.g.length,D.g.length),T=[],O=0;O<A;O++)T[O]=this.i(O)|D.i(O);return new o(T,this.h|D.h)},t.xor=function(D){for(var A=Math.max(this.g.length,D.g.length),T=[],O=0;O<A;O++)T[O]=this.i(O)^D.i(O);return new o(T,this.h^D.h)};function S(D){for(var A=D.g.length+1,T=[],O=0;O<A;O++)T[O]=D.i(O)<<1|D.i(O-1)>>>31;return new o(T,D.h)}function P(D,A){var T=A>>5;A%=32;for(var O=D.g.length-T,F=[],W=0;W<O;W++)F[W]=0<A?D.i(W+T)>>>A|D.i(W+T+1)<<32-A:D.i(W+T);return new o(F,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,zI=HI.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,ld=HI.Integer=o}).apply(typeof $I<"u"?$I:typeof self<"u"?self:typeof window<"u"?window:{});var ud=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xr={};var qI,UO,WI,GI,KI,YI,XI,QI,ZI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,y,b){return a==Array.prototype||a==Object.prototype||(a[y]=b.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ud=="object"&&ud];for(var y=0;y<a.length;++y){var b=a[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function i(a,y){if(y)e:{var b=r;a=a.split(".");for(var L=0;L<a.length-1;L++){var X=a[L];if(!(X in b))break e;b=b[X]}a=a[a.length-1],L=b[a],y=y(L),y!=L&&y!=null&&e(b,a,{configurable:!0,writable:!0,value:y})}}function s(a,y){a instanceof String&&(a+="");var b=0,L=!1,X={next:function(){if(!L&&b<a.length){var te=b++;return{value:y(te,a[te]),done:!1}}return L=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}i("Array.prototype.values",function(a){return a||function(){return s(this,function(y,b){return b})}});var o=o||{},c=this||self;function l(a){var y=typeof a;return y=y!="object"?y:a?Array.isArray(a)?"array":y:"null",y=="array"||y=="object"&&typeof a.length=="number"}function u(a){var y=typeof a;return y=="object"&&a!=null||y=="function"}function d(a,y,b){return a.call.apply(a.bind,arguments)}function h(a,y,b){if(!a)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,L),a.apply(y,X)}}return function(){return a.apply(y,arguments)}}function f(a,y,b){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function p(a,y){var b=Array.prototype.slice.call(arguments,1);return function(){var L=b.slice();return L.push.apply(L,arguments),a.apply(this,L)}}function m(a,y){function b(){}b.prototype=y.prototype,a.aa=y.prototype,a.prototype=new b,a.prototype.constructor=a,a.Qb=function(L,X,te){for(var fe=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)fe[Qe-2]=arguments[Qe];return y.prototype[X].apply(L,fe)}}function g(a){let y=a.length;if(0<y){let b=Array(y);for(let L=0;L<y;L++)b[L]=a[L];return b}return[]}function _(a,y){for(let b=1;b<arguments.length;b++){let L=arguments[b];if(l(L)){let X=a.length||0,te=L.length||0;a.length=X+te;for(let fe=0;fe<te;fe++)a[X+fe]=L[fe]}else a.push(L)}}class E{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function C(a){return/^[\s\xa0]*$/.test(a)}function V(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function k(a){return k[" "](a),a}k[" "]=function(){};var S=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function P(a,y,b){for(let L in a)y.call(b,a[L],L,a)}function D(a,y){for(let b in a)y.call(void 0,a[b],b,a)}function A(a){let y={};for(let b in a)y[b]=a[b];return y}let T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(a,y){let b,L;for(let X=1;X<arguments.length;X++){L=arguments[X];for(b in L)a[b]=L[b];for(let te=0;te<T.length;te++)b=T[te],Object.prototype.hasOwnProperty.call(L,b)&&(a[b]=L[b])}}function F(a){var y=1;a=a.split(":");let b=[];for(;0<y&&a.length;)b.push(a.shift()),y--;return a.length&&b.push(a.join(":")),b}function W(a){c.setTimeout(()=>{throw a},0)}function U(){var a=w;let y=null;return a.g&&(y=a.g,a.g=a.g.next,a.g||(a.h=null),y.next=null),y}class ae{constructor(){this.h=this.g=null}add(y,b){let L=he.get();L.set(y,b),this.h?this.h.next=L:this.g=L,this.h=L}}var he=new E(()=>new oe,a=>a.reset());class oe{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let q,x=!1,w=new ae,I=()=>{let a=c.Promise.resolve(void 0);q=()=>{a.then(M)}};var M=()=>{for(var a;a=U();){try{a.h.call(a.g)}catch(b){W(b)}var y=he;y.j(a),100>y.h&&(y.h++,a.next=y.g,y.g=a)}x=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(a,y){this.type=a,this.g=this.target=y,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var G=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,y=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let b=()=>{};c.addEventListener("test",b,y),c.removeEventListener("test",b,y)}catch{}return a})();function j(a,y){if($.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var b=this.type=a.type,L=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=y,y=a.relatedTarget){if(S){e:{try{k(y.nodeName);var X=!0;break e}catch{}X=!1}X||(y=null)}}else b=="mouseover"?y=a.fromElement:b=="mouseout"&&(y=a.toElement);this.relatedTarget=y,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:v[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&j.aa.h.call(this)}}m(j,$);var v={2:"touch",3:"pen",4:"mouse"};j.prototype.h=function(){j.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var R="closure_listenable_"+(1e6*Math.random()|0),N=0;function B(a,y,b,L,X){this.listener=a,this.proxy=null,this.src=y,this.type=b,this.capture=!!L,this.ha=X,this.key=++N,this.da=this.fa=!1}function z(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function K(a){this.src=a,this.g={},this.h=0}K.prototype.add=function(a,y,b,L,X){var te=a.toString();a=this.g[te],a||(a=this.g[te]=[],this.h++);var fe=J(a,y,L,X);return-1<fe?(y=a[fe],b||(y.fa=!1)):(y=new B(y,this.src,te,!!L,X),y.fa=b,a.push(y)),y};function Y(a,y){var b=y.type;if(b in a.g){var L=a.g[b],X=Array.prototype.indexOf.call(L,y,void 0),te;(te=0<=X)&&Array.prototype.splice.call(L,X,1),te&&(z(y),a.g[b].length==0&&(delete a.g[b],a.h--))}}function J(a,y,b,L){for(var X=0;X<a.length;++X){var te=a[X];if(!te.da&&te.listener==y&&te.capture==!!b&&te.ha==L)return X}return-1}var de="closure_lm_"+(1e6*Math.random()|0),ee={};function re(a,y,b,L,X){if(L&&L.once)return ce(a,y,b,L,X);if(Array.isArray(y)){for(var te=0;te<y.length;te++)re(a,y[te],b,L,X);return null}return b=Rt(b),a&&a[R]?a.K(y,b,u(L)?!!L.capture:!!L,X):ie(a,y,b,!1,L,X)}function ie(a,y,b,L,X,te){if(!y)throw Error("Invalid event type");var fe=u(X)?!!X.capture:!!X,Qe=xe(a);if(Qe||(a[de]=Qe=new K(a)),b=Qe.add(y,b,L,fe,te),b.proxy)return b;if(L=se(),b.proxy=L,L.src=a,L.listener=b,a.addEventListener)G||(X=fe),X===void 0&&(X=!1),a.addEventListener(y.toString(),L,X);else if(a.attachEvent)a.attachEvent(be(y.toString()),L);else if(a.addListener&&a.removeListener)a.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return b}function se(){function a(b){return y.call(a.src,a.listener,b)}let y=Te;return a}function ce(a,y,b,L,X){if(Array.isArray(y)){for(var te=0;te<y.length;te++)ce(a,y[te],b,L,X);return null}return b=Rt(b),a&&a[R]?a.L(y,b,u(L)?!!L.capture:!!L,X):ie(a,y,b,!0,L,X)}function pe(a,y,b,L,X){if(Array.isArray(y))for(var te=0;te<y.length;te++)pe(a,y[te],b,L,X);else L=u(L)?!!L.capture:!!L,b=Rt(b),a&&a[R]?(a=a.i,y=String(y).toString(),y in a.g&&(te=a.g[y],b=J(te,b,L,X),-1<b&&(z(te[b]),Array.prototype.splice.call(te,b,1),te.length==0&&(delete a.g[y],a.h--)))):a&&(a=xe(a))&&(y=a.g[y.toString()],a=-1,y&&(a=J(y,b,L,X)),(b=-1<a?y[a]:null)&&ve(b))}function ve(a){if(typeof a!="number"&&a&&!a.da){var y=a.src;if(y&&y[R])Y(y.i,a);else{var b=a.type,L=a.proxy;y.removeEventListener?y.removeEventListener(b,L,a.capture):y.detachEvent?y.detachEvent(be(b),L):y.addListener&&y.removeListener&&y.removeListener(L),(b=xe(y))?(Y(b,a),b.h==0&&(b.src=null,y[de]=null)):z(a)}}}function be(a){return a in ee?ee[a]:ee[a]="on"+a}function Te(a,y){if(a.da)a=!0;else{y=new j(y,this);var b=a.listener,L=a.ha||a.src;a.fa&&ve(a),a=b.call(L,y)}return a}function xe(a){return a=a[de],a instanceof K?a:null}var $e="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rt(a){return typeof a=="function"?a:(a[$e]||(a[$e]=function(y){return a.handleEvent(y)}),a[$e])}function Ue(){H.call(this),this.i=new K(this),this.M=this,this.F=null}m(Ue,H),Ue.prototype[R]=!0,Ue.prototype.removeEventListener=function(a,y,b,L){pe(this,a,y,b,L)};function it(a,y){var b,L=a.F;if(L)for(b=[];L;L=L.F)b.push(L);if(a=a.M,L=y.type||y,typeof y=="string")y=new $(y,a);else if(y instanceof $)y.target=y.target||a;else{var X=y;y=new $(L,a),O(y,X)}if(X=!0,b)for(var te=b.length-1;0<=te;te--){var fe=y.g=b[te];X=pt(fe,L,!0,y)&&X}if(fe=y.g=a,X=pt(fe,L,!0,y)&&X,X=pt(fe,L,!1,y)&&X,b)for(te=0;te<b.length;te++)fe=y.g=b[te],X=pt(fe,L,!1,y)&&X}Ue.prototype.N=function(){if(Ue.aa.N.call(this),this.i){var a=this.i,y;for(y in a.g){for(var b=a.g[y],L=0;L<b.length;L++)z(b[L]);delete a.g[y],a.h--}}this.F=null},Ue.prototype.K=function(a,y,b,L){return this.i.add(String(a),y,!1,b,L)},Ue.prototype.L=function(a,y,b,L){return this.i.add(String(a),y,!0,b,L)};function pt(a,y,b,L){if(y=a.i.g[String(y)],!y)return!0;y=y.concat();for(var X=!0,te=0;te<y.length;++te){var fe=y[te];if(fe&&!fe.da&&fe.capture==b){var Qe=fe.listener,Pt=fe.ha||fe.src;fe.fa&&Y(a.i,fe),X=Qe.call(Pt,L)!==!1&&X}}return X&&!L.defaultPrevented}function fn(a,y,b){if(typeof a=="function")b&&(a=f(a,b));else if(a&&typeof a.handleEvent=="function")a=f(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:c.setTimeout(a,y||0)}function ns(a){a.g=fn(()=>{a.g=null,a.i&&(a.i=!1,ns(a))},a.l);let y=a.h;a.h=null,a.m.apply(null,y)}class Ad extends H{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ns(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hi(a){H.call(this),this.h=a,this.g={}}m(hi,H);var le=[];function Z(a){P(a.g,function(y,b){this.g.hasOwnProperty(b)&&ve(y)},a),a.g={}}hi.prototype.N=function(){hi.aa.N.call(this),Z(this)},hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Q=c.JSON.stringify,me=c.JSON.parse,He=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function ct(){}ct.prototype.h=null;function gt(a){return a.h||(a.h=a.i())}function cr(){}var pn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Sn(){$.call(this,"d")}m(Sn,$);function St(){$.call(this,"c")}m(St,$);var Kt={},Cn=null;function lr(){return Cn=Cn||new Ue}Kt.La="serverreachability";function lt(a){$.call(this,Kt.La,a)}m(lt,$);function qn(a){let y=lr();it(y,new lt(y))}Kt.STAT_EVENT="statevent";function fi(a,y){$.call(this,Kt.STAT_EVENT,a),this.stat=y}m(fi,$);function Et(a){let y=lr();it(y,new fi(y,a))}Kt.Ma="timingevent";function rs(a,y){$.call(this,Kt.Ma,a),this.size=y}m(rs,$);function Dn(a,y){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},y)}function bt(){this.g=!0}bt.prototype.xa=function(){this.g=!1};function pi(a,y,b,L,X,te){a.info(function(){if(a.g)if(te)for(var fe="",Qe=te.split("&"),Pt=0;Pt<Qe.length;Pt++){var je=Qe[Pt].split("=");if(1<je.length){var Vt=je[0];je=je[1];var Ut=Vt.split("_");fe=2<=Ut.length&&Ut[1]=="type"?fe+(Vt+"="+je+"&"):fe+(Vt+"=redacted&")}}else fe=null;else fe=te;return"XMLHTTP REQ ("+L+") [attempt "+X+"]: "+y+`
`+b+`
`+fe})}function To(a,y,b,L,X,te,fe){a.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+X+"]: "+y+`
`+b+`
`+te+" "+fe})}function is(a,y,b,L){a.info(function(){return"XMLHTTP TEXT ("+y+"): "+I0(a,b)+(L?" "+L:"")})}function w0(a,y){a.info(function(){return"TIMEOUT: "+y})}bt.prototype.info=function(){};function I0(a,y){if(!a.g)return y;if(!y)return null;try{var b=JSON.parse(y);if(b){for(a=0;a<b.length;a++)if(Array.isArray(b[a])){var L=b[a];if(!(2>L.length)){var X=L[1];if(Array.isArray(X)&&!(1>X.length)){var te=X[0];if(te!="noop"&&te!="stop"&&te!="close")for(var fe=1;fe<X.length;fe++)X[fe]=""}}}}return Q(b)}catch{return y}}var yc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ry={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sd;function vc(){}m(vc,ct),vc.prototype.g=function(){return new XMLHttpRequest},vc.prototype.i=function(){return{}},Sd=new vc;function Nr(a,y,b,L){this.j=a,this.i=y,this.l=b,this.R=L||1,this.U=new hi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new iy}function iy(){this.i=null,this.g="",this.h=!1}var sy={},Cd={};function Dd(a,y,b){a.L=1,a.v=wc(ur(y)),a.m=b,a.P=!0,oy(a,null)}function oy(a,y){a.F=Date.now(),_c(a),a.A=ur(a.v);var b=a.A,L=a.R;Array.isArray(L)||(L=[String(L)]),Ey(b.i,"t",L),a.C=0,b=a.j.J,a.h=new iy,a.g=Vy(a.j,b?y:null,!a.m),0<a.O&&(a.M=new Ad(f(a.Y,a,a.g),a.O)),y=a.U,b=a.g,L=a.ca;var X="readystatechange";Array.isArray(X)||(X&&(le[0]=X.toString()),X=le);for(var te=0;te<X.length;te++){var fe=re(b,X[te],L||y.handleEvent,!1,y.h||y);if(!fe)break;y.g[fe.key]=fe}y=a.H?A(a.H):{},a.m?(a.u||(a.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,y)):(a.u="GET",a.g.ea(a.A,a.u,null,y)),qn(),pi(a.i,a.u,a.A,a.l,a.R,a.m)}Nr.prototype.ca=function(a){a=a.target;let y=this.M;y&&dr(a)==3?y.j():this.Y(a)},Nr.prototype.Y=function(a){try{if(a==this.g)e:{let Ut=dr(this.g);var y=this.g.Ba();let as=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||Cy(this.g)))){this.J||Ut!=4||y==7||(y==8||0>=as?qn(3):qn(2)),Rd(this);var b=this.g.Z();this.X=b;t:if(ay(this)){var L=Cy(this.g);a="";var X=L.length,te=dr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gi(this),Ao(this);var fe="";break t}this.h.i=new c.TextDecoder}for(y=0;y<X;y++)this.h.h=!0,a+=this.h.i.decode(L[y],{stream:!(te&&y==X-1)});L.length=0,this.h.g+=a,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=b==200,To(this.i,this.u,this.A,this.l,this.R,Ut,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Pt=this.g;if((Qe=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(Qe)){var je=Qe;break t}}je=null}if(b=je)is(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pd(this,b);else{this.o=!1,this.s=3,Et(12),gi(this),Ao(this);break e}}if(this.P){b=!0;let Rn;for(;!this.J&&this.C<fe.length;)if(Rn=T0(this,fe),Rn==Cd){Ut==4&&(this.s=4,Et(14),b=!1),is(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==sy){this.s=4,Et(15),is(this.i,this.l,fe,"[Invalid Chunk]"),b=!1;break}else is(this.i,this.l,Rn,null),Pd(this,Rn);if(ay(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||fe.length!=0||this.h.h||(this.s=1,Et(16),b=!1),this.o=this.o&&b,!b)is(this.i,this.l,fe,"[Invalid Chunked Response]"),gi(this),Ao(this);else if(0<fe.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),Fd(Vt),Vt.M=!0,Et(11))}}else is(this.i,this.l,fe,null),Pd(this,fe);Ut==4&&gi(this),this.o&&!this.J&&(Ut==4?Ny(this.j,this):(this.o=!1,_c(this)))}else B0(this.g),b==400&&0<fe.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),gi(this),Ao(this)}}}catch{}finally{}};function ay(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function T0(a,y){var b=a.C,L=y.indexOf(`
`,b);return L==-1?Cd:(b=Number(y.substring(b,L)),isNaN(b)?sy:(L+=1,L+b>y.length?Cd:(y=y.slice(L,L+b),a.C=L+b,y)))}Nr.prototype.cancel=function(){this.J=!0,gi(this)};function _c(a){a.S=Date.now()+a.I,cy(a,a.I)}function cy(a,y){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Dn(f(a.ba,a),y)}function Rd(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Nr.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(w0(this.i,this.A),this.L!=2&&(qn(),Et(17)),gi(this),this.s=2,Ao(this)):cy(this,this.S-a)};function Ao(a){a.j.G==0||a.J||Ny(a.j,a)}function gi(a){Rd(a);var y=a.M;y&&typeof y.ma=="function"&&y.ma(),a.M=null,Z(a.U),a.g&&(y=a.g,a.g=null,y.abort(),y.ma())}function Pd(a,y){try{var b=a.j;if(b.G!=0&&(b.g==a||xd(b.h,a))){if(!a.K&&xd(b.h,a)&&b.G==3){try{var L=b.Da.g.parse(y)}catch{L=null}if(Array.isArray(L)&&L.length==3){var X=L;if(X[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<a.F)Cc(b),Ac(b);else break e;Od(b),Et(18)}}else b.za=X[1],0<b.za-b.T&&37500>X[2]&&b.F&&b.v==0&&!b.C&&(b.C=Dn(f(b.Za,b),6e3));if(1>=dy(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else yi(b,11)}else if((a.K||b.g==a)&&Cc(b),!C(y))for(X=b.Da.g.parse(y),y=0;y<X.length;y++){let je=X[y];if(b.T=je[0],je=je[1],b.G==2)if(je[0]=="c"){b.K=je[1],b.ia=je[2];let Vt=je[3];Vt!=null&&(b.la=Vt,b.j.info("VER="+b.la));let Ut=je[4];Ut!=null&&(b.Aa=Ut,b.j.info("SVER="+b.Aa));let as=je[5];as!=null&&typeof as=="number"&&0<as&&(L=1.5*as,b.L=L,b.j.info("backChannelRequestTimeoutMs_="+L)),L=b;let Rn=a.g;if(Rn){let Rc=Rn.g?Rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rc){var te=L.h;te.g||Rc.indexOf("spdy")==-1&&Rc.indexOf("quic")==-1&&Rc.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Md(te,te.h),te.h=null))}if(L.D){let Ld=Rn.g?Rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ld&&(L.ya=Ld,nt(L.I,L.D,Ld))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-a.F,b.j.info("Handshake RTT: "+b.R+"ms")),L=b;var fe=a;if(L.qa=Ly(L,L.J?L.ia:null,L.W),fe.K){hy(L.h,fe);var Qe=fe,Pt=L.L;Pt&&(Qe.I=Pt),Qe.B&&(Rd(Qe),_c(Qe)),L.g=fe}else My(L);0<b.i.length&&Sc(b)}else je[0]!="stop"&&je[0]!="close"||yi(b,7);else b.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?yi(b,7):Nd(b):je[0]!="noop"&&b.l&&b.l.ta(je),b.v=0)}}qn(4)}catch{}}var A0=class{constructor(a,y){this.g=a,this.map=y}};function ly(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function uy(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function dy(a){return a.h?1:a.g?a.g.size:0}function xd(a,y){return a.h?a.h==y:a.g?a.g.has(y):!1}function Md(a,y){a.g?a.g.add(y):a.h=y}function hy(a,y){a.h&&a.h==y?a.h=null:a.g&&a.g.has(y)&&a.g.delete(y)}ly.prototype.cancel=function(){if(this.i=fy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function fy(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let y=a.i;for(let b of a.g.values())y=y.concat(b.D);return y}return g(a.i)}function S0(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var y=[],b=a.length,L=0;L<b;L++)y.push(a[L]);return y}y=[],b=0;for(L in a)y[b++]=a[L];return y}function C0(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var y=[];a=a.length;for(var b=0;b<a;b++)y.push(b);return y}y=[],b=0;for(let L in a)y[b++]=L;return y}}}function py(a,y){if(a.forEach&&typeof a.forEach=="function")a.forEach(y,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,y,void 0);else for(var b=C0(a),L=S0(a),X=L.length,te=0;te<X;te++)y.call(void 0,L[te],b&&b[te],a)}var gy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function D0(a,y){if(a){a=a.split("&");for(var b=0;b<a.length;b++){var L=a[b].indexOf("="),X=null;if(0<=L){var te=a[b].substring(0,L);X=a[b].substring(L+1)}else te=a[b];y(te,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function mi(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof mi){this.h=a.h,Ec(this,a.j),this.o=a.o,this.g=a.g,bc(this,a.s),this.l=a.l;var y=a.i,b=new Do;b.i=y.i,y.g&&(b.g=new Map(y.g),b.h=y.h),my(this,b),this.m=a.m}else a&&(y=String(a).match(gy))?(this.h=!1,Ec(this,y[1]||"",!0),this.o=So(y[2]||""),this.g=So(y[3]||"",!0),bc(this,y[4]),this.l=So(y[5]||"",!0),my(this,y[6]||"",!0),this.m=So(y[7]||"")):(this.h=!1,this.i=new Do(null,this.h))}mi.prototype.toString=function(){var a=[],y=this.j;y&&a.push(Co(y,yy,!0),":");var b=this.g;return(b||y=="file")&&(a.push("//"),(y=this.o)&&a.push(Co(y,yy,!0),"@"),a.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&a.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&a.push("/"),a.push(Co(b,b.charAt(0)=="/"?x0:P0,!0))),(b=this.i.toString())&&a.push("?",b),(b=this.m)&&a.push("#",Co(b,k0)),a.join("")};function ur(a){return new mi(a)}function Ec(a,y,b){a.j=b?So(y,!0):y,a.j&&(a.j=a.j.replace(/:$/,""))}function bc(a,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);a.s=y}else a.s=null}function my(a,y,b){y instanceof Do?(a.i=y,N0(a.i,a.h)):(b||(y=Co(y,M0)),a.i=new Do(y,a.h))}function nt(a,y,b){a.i.set(y,b)}function wc(a){return nt(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function So(a,y){return a?y?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Co(a,y,b){return typeof a=="string"?(a=encodeURI(a).replace(y,R0),b&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function R0(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var yy=/[#\/\?@]/g,P0=/[#\?:]/g,x0=/[#\?]/g,M0=/[#\?@]/g,k0=/#/g;function Do(a,y){this.h=this.g=null,this.i=a||null,this.j=!!y}function Or(a){a.g||(a.g=new Map,a.h=0,a.i&&D0(a.i,function(y,b){a.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}t=Do.prototype,t.add=function(a,y){Or(this),this.i=null,a=ss(this,a);var b=this.g.get(a);return b||this.g.set(a,b=[]),b.push(y),this.h+=1,this};function vy(a,y){Or(a),y=ss(a,y),a.g.has(y)&&(a.i=null,a.h-=a.g.get(y).length,a.g.delete(y))}function _y(a,y){return Or(a),y=ss(a,y),a.g.has(y)}t.forEach=function(a,y){Or(this),this.g.forEach(function(b,L){b.forEach(function(X){a.call(y,X,L,this)},this)},this)},t.na=function(){Or(this);let a=Array.from(this.g.values()),y=Array.from(this.g.keys()),b=[];for(let L=0;L<y.length;L++){let X=a[L];for(let te=0;te<X.length;te++)b.push(y[L])}return b},t.V=function(a){Or(this);let y=[];if(typeof a=="string")_y(this,a)&&(y=y.concat(this.g.get(ss(this,a))));else{a=Array.from(this.g.values());for(let b=0;b<a.length;b++)y=y.concat(a[b])}return y},t.set=function(a,y){return Or(this),this.i=null,a=ss(this,a),_y(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[y]),this.h+=1,this},t.get=function(a,y){return a?(a=this.V(a),0<a.length?String(a[0]):y):y};function Ey(a,y,b){vy(a,y),0<b.length&&(a.i=null,a.g.set(ss(a,y),g(b)),a.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],y=Array.from(this.g.keys());for(var b=0;b<y.length;b++){var L=y[b];let te=encodeURIComponent(String(L)),fe=this.V(L);for(L=0;L<fe.length;L++){var X=te;fe[L]!==""&&(X+="="+encodeURIComponent(String(fe[L]))),a.push(X)}}return this.i=a.join("&")};function ss(a,y){return y=String(y),a.j&&(y=y.toLowerCase()),y}function N0(a,y){y&&!a.j&&(Or(a),a.i=null,a.g.forEach(function(b,L){var X=L.toLowerCase();L!=X&&(vy(this,L),Ey(this,X,b))},a)),a.j=y}function O0(a,y){let b=new bt;if(c.Image){let L=new Image;L.onload=p(Fr,b,"TestLoadImage: loaded",!0,y,L),L.onerror=p(Fr,b,"TestLoadImage: error",!1,y,L),L.onabort=p(Fr,b,"TestLoadImage: abort",!1,y,L),L.ontimeout=p(Fr,b,"TestLoadImage: timeout",!1,y,L),c.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=a}else y(!1)}function F0(a,y){let b=new bt,L=new AbortController,X=setTimeout(()=>{L.abort(),Fr(b,"TestPingServer: timeout",!1,y)},1e4);fetch(a,{signal:L.signal}).then(te=>{clearTimeout(X),te.ok?Fr(b,"TestPingServer: ok",!0,y):Fr(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(X),Fr(b,"TestPingServer: error",!1,y)})}function Fr(a,y,b,L,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),L(b)}catch{}}function L0(){this.g=new He}function V0(a,y,b){let L=b||"";try{py(a,function(X,te){let fe=X;u(X)&&(fe=Q(X)),y.push(L+te+"="+encodeURIComponent(fe))})}catch(X){throw y.push(L+"type="+encodeURIComponent("_badmap")),X}}function Ro(a){this.l=a.Ub||null,this.j=a.eb||!1}m(Ro,ct),Ro.prototype.g=function(){return new Ic(this.l,this.j)},Ro.prototype.i=(function(a){return function(){return a}})({});function Ic(a,y){Ue.call(this),this.D=a,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Ic,Ue),t=Ic.prototype,t.open=function(a,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=y,this.readyState=1,xo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(y.body=a),(this.D||c).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Po(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,xo(this)),this.g&&(this.readyState=3,xo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;by(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function by(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var y=a.value?a.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!a.done}))&&(this.response=this.responseText+=y)}a.done?Po(this):xo(this),this.readyState==3&&by(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Po(this))},t.Qa=function(a){this.g&&(this.response=a,Po(this))},t.ga=function(){this.g&&Po(this)};function Po(a){a.readyState=4,a.l=null,a.j=null,a.v=null,xo(a)}t.setRequestHeader=function(a,y){this.u.append(a,y)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,a.push(b[0]+": "+b[1]),b=y.next();return a.join(`\r
`)};function xo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ic.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function wy(a){let y="";return P(a,function(b,L){y+=L,y+=":",y+=b,y+=`\r
`}),y}function kd(a,y,b){e:{for(L in b){var L=!1;break e}L=!0}L||(b=wy(b),typeof a=="string"?b!=null&&encodeURIComponent(String(b)):nt(a,y,b))}function st(a){Ue.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(st,Ue);var U0=/^https?$/i,j0=["POST","PUT"];t=st.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,y,b,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);y=y?y.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sd.g(),this.v=this.o?gt(this.o):gt(Sd),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(y,String(a),!0),this.B=!1}catch(te){Iy(this,te);return}if(a=b||"",b=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var X in L)b.set(X,L[X]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(let te of L.keys())b.set(te,L.get(te));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(b.keys()).find(te=>te.toLowerCase()=="content-type"),X=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(j0,y,void 0))||L||X||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[te,fe]of b)this.g.setRequestHeader(te,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Sy(this),this.u=!0,this.g.send(a),this.u=!1}catch(te){Iy(this,te)}};function Iy(a,y){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=y,a.m=5,Ty(a),Tc(a)}function Ty(a){a.A||(a.A=!0,it(a,"complete"),it(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,it(this,"complete"),it(this,"abort"),Tc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tc(this,!0)),st.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ay(this):this.bb())},t.bb=function(){Ay(this)};function Ay(a){if(a.h&&typeof o<"u"&&(!a.v[1]||dr(a)!=4||a.Z()!=2)){if(a.u&&dr(a)==4)fn(a.Ea,0,a);else if(it(a,"readystatechange"),dr(a)==4){a.h=!1;try{let fe=a.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var L;if(L=fe===0){var X=String(a.D).match(gy)[1]||null;!X&&c.self&&c.self.location&&(X=c.self.location.protocol.slice(0,-1)),L=!U0.test(X?X.toLowerCase():"")}b=L}if(b)it(a,"complete"),it(a,"success");else{a.m=6;try{var te=2<dr(a)?a.g.statusText:""}catch{te=""}a.l=te+" ["+a.Z()+"]",Ty(a)}}finally{Tc(a)}}}}function Tc(a,y){if(a.g){Sy(a);let b=a.g,L=a.v[0]?()=>{}:null;a.g=null,a.v=null,y||it(a,"ready");try{b.onreadystatechange=L}catch{}}}function Sy(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function dr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<dr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var y=this.g.responseText;return a&&y.indexOf(a)==0&&(y=y.substring(a.length)),me(y)}};function Cy(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function B0(a){let y={};a=(a.g&&2<=dr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<a.length;L++){if(C(a[L]))continue;var b=F(a[L]);let X=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();let te=y[X]||[];y[X]=te,te.push(b)}D(y,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mo(a,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[a]||y}function Dy(a){this.Aa=0,this.i=[],this.j=new bt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mo("baseRetryDelayMs",5e3,a),this.cb=Mo("retryDelaySeedMs",1e4,a),this.Wa=Mo("forwardChannelMaxRetries",2,a),this.wa=Mo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new ly(a&&a.concurrentRequestLimit),this.Da=new L0,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Dy.prototype,t.la=8,t.G=1,t.connect=function(a,y,b,L){Et(0),this.W=a,this.H=y||{},b&&L!==void 0&&(this.H.OSID=b,this.H.OAID=L),this.F=this.X,this.I=Ly(this,null,this.W),Sc(this)};function Nd(a){if(Ry(a),a.G==3){var y=a.U++,b=ur(a.I);if(nt(b,"SID",a.K),nt(b,"RID",y),nt(b,"TYPE","terminate"),ko(a,b),y=new Nr(a,a.j,y),y.L=2,y.v=wc(ur(b)),b=!1,c.navigator&&c.navigator.sendBeacon)try{b=c.navigator.sendBeacon(y.v.toString(),"")}catch{}!b&&c.Image&&(new Image().src=y.v,b=!0),b||(y.g=Vy(y.j,null),y.g.ea(y.v)),y.F=Date.now(),_c(y)}Fy(a)}function Ac(a){a.g&&(Fd(a),a.g.cancel(),a.g=null)}function Ry(a){Ac(a),a.u&&(c.clearTimeout(a.u),a.u=null),Cc(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Sc(a){if(!uy(a.h)&&!a.s){a.s=!0;var y=a.Ga;q||I(),x||(q(),x=!0),w.add(y,a),a.B=0}}function $0(a,y){return dy(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=y.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Dn(f(a.Ga,a,y),Oy(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let X=new Nr(this,this.j,a),te=this.o;if(this.S&&(te?(te=A(te),O(te,this.S)):te=this.S),this.m!==null||this.O||(X.H=te,te=null),this.P)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var L=this.i[b];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(y+=L,4096<y){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=xy(this,X,y),b=ur(this.I),nt(b,"RID",a),nt(b,"CVER",22),this.D&&nt(b,"X-HTTP-Session-Id",this.D),ko(this,b),te&&(this.O?y="headers="+encodeURIComponent(String(wy(te)))+"&"+y:this.m&&kd(b,this.m,te)),Md(this.h,X),this.Ua&&nt(b,"TYPE","init"),this.P?(nt(b,"$req",y),nt(b,"SID","null"),X.T=!0,Dd(X,b,null)):Dd(X,b,y),this.G=2}}else this.G==3&&(a?Py(this,a):this.i.length==0||uy(this.h)||Py(this))};function Py(a,y){var b;y?b=y.l:b=a.U++;let L=ur(a.I);nt(L,"SID",a.K),nt(L,"RID",b),nt(L,"AID",a.T),ko(a,L),a.m&&a.o&&kd(L,a.m,a.o),b=new Nr(a,a.j,b,a.B+1),a.m===null&&(b.H=a.o),y&&(a.i=y.D.concat(a.i)),y=xy(a,b,1e3),b.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Md(a.h,b),Dd(b,L,y)}function ko(a,y){a.H&&P(a.H,function(b,L){nt(y,L,b)}),a.l&&py({},function(b,L){nt(y,L,b)})}function xy(a,y,b){b=Math.min(a.i.length,b);var L=a.l?f(a.l.Na,a.l,a):null;e:{var X=a.i;let te=-1;for(;;){let fe=["count="+b];te==-1?0<b?(te=X[0].g,fe.push("ofs="+te)):te=0:fe.push("ofs="+te);let Qe=!0;for(let Pt=0;Pt<b;Pt++){let je=X[Pt].g,Vt=X[Pt].map;if(je-=te,0>je)te=Math.max(0,X[Pt].g-100),Qe=!1;else try{V0(Vt,fe,"req"+je+"_")}catch{L&&L(Vt)}}if(Qe){L=fe.join("&");break e}}}return a=a.i.splice(0,b),y.D=a,L}function My(a){if(!a.g&&!a.u){a.Y=1;var y=a.Fa;q||I(),x||(q(),x=!0),w.add(y,a),a.v=0}}function Od(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Dn(f(a.Fa,a),Oy(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,ky(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Dn(f(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),Ac(this),ky(this))};function Fd(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function ky(a){a.g=new Nr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var y=ur(a.qa);nt(y,"RID","rpc"),nt(y,"SID",a.K),nt(y,"AID",a.T),nt(y,"CI",a.F?"0":"1"),!a.F&&a.ja&&nt(y,"TO",a.ja),nt(y,"TYPE","xmlhttp"),ko(a,y),a.m&&a.o&&kd(y,a.m,a.o),a.L&&(a.g.I=a.L);var b=a.g;a=a.ia,b.L=1,b.v=wc(ur(y)),b.m=null,b.P=!0,oy(b,a)}t.Za=function(){this.C!=null&&(this.C=null,Ac(this),Od(this),Et(19))};function Cc(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Ny(a,y){var b=null;if(a.g==y){Cc(a),Fd(a),a.g=null;var L=2}else if(xd(a.h,y))b=y.D,hy(a.h,y),L=1;else return;if(a.G!=0){if(y.o)if(L==1){b=y.m?y.m.length:0,y=Date.now()-y.F;var X=a.B;L=lr(),it(L,new rs(L,b)),Sc(a)}else My(a);else if(X=y.s,X==3||X==0&&0<y.X||!(L==1&&$0(a,y)||L==2&&Od(a)))switch(b&&0<b.length&&(y=a.h,y.i=y.i.concat(b)),X){case 1:yi(a,5);break;case 4:yi(a,10);break;case 3:yi(a,6);break;default:yi(a,2)}}}function Oy(a,y){let b=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(b*=2),b*y}function yi(a,y){if(a.j.info("Error code "+y),y==2){var b=f(a.fb,a),L=a.Xa;let X=!L;L=new mi(L||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ec(L,"https"),wc(L),X?O0(L.toString(),b):F0(L.toString(),b)}else Et(2);a.G=0,a.l&&a.l.sa(y),Fy(a),Ry(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function Fy(a){if(a.G=0,a.ka=[],a.l){let y=fy(a.h);(y.length!=0||a.i.length!=0)&&(_(a.ka,y),_(a.ka,a.i),a.h.i.length=0,g(a.i),a.i.length=0),a.l.ra()}}function Ly(a,y,b){var L=b instanceof mi?ur(b):new mi(b);if(L.g!="")y&&(L.g=y+"."+L.g),bc(L,L.s);else{var X=c.location;L=X.protocol,y=y?y+"."+X.hostname:X.hostname,X=+X.port;var te=new mi(null);L&&Ec(te,L),y&&(te.g=y),X&&bc(te,X),b&&(te.l=b),L=te}return b=a.D,y=a.ya,b&&y&&nt(L,b,y),nt(L,"VER",a.la),ko(a,L),L}function Vy(a,y,b){if(y&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=a.Ca&&!a.pa?new st(new Ro({eb:b})):new st(a.pa),y.Ha(a.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uy(){}t=Uy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Dc(){}Dc.prototype.g=function(a,y){return new on(a,y)};function on(a,y){Ue.call(this),this.g=new Dy(y),this.l=a,this.h=y&&y.messageUrlParams||null,a=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(a?a["X-WebChannel-Content-Type"]=y.messageContentType:a={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(a?a["X-WebChannel-Client-Profile"]=y.va:a={"X-WebChannel-Client-Profile":y.va}),this.g.S=a,(a=y&&y.Sb)&&!C(a)&&(this.g.m=a),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!C(y)&&(this.g.D=y,a=this.h,a!==null&&y in a&&(a=this.h,y in a&&delete a[y])),this.j=new os(this)}m(on,Ue),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){Nd(this.g)},on.prototype.o=function(a){var y=this.g;if(typeof a=="string"){var b={};b.__data__=a,a=b}else this.u&&(b={},b.__data__=Q(a),a=b);y.i.push(new A0(y.Ya++,a)),y.G==3&&Sc(y)},on.prototype.N=function(){this.g.l=null,delete this.j,Nd(this.g),delete this.g,on.aa.N.call(this)};function jy(a){Sn.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var y=a.__sm__;if(y){e:{for(let b in y){a=b;break e}a=void 0}(this.i=a)&&(a=this.i,y=y!==null&&a in y?y[a]:void 0),this.data=y}else this.data=a}m(jy,Sn);function By(){St.call(this),this.status=1}m(By,St);function os(a){this.g=a}m(os,Uy),os.prototype.ua=function(){it(this.g,"a")},os.prototype.ta=function(a){it(this.g,new jy(a))},os.prototype.sa=function(a){it(this.g,new By)},os.prototype.ra=function(){it(this.g,"b")},Dc.prototype.createWebChannel=Dc.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,ZI=xr.createWebChannelTransport=function(){return new Dc},QI=xr.getStatEventTarget=function(){return lr()},XI=xr.Event=Kt,YI=xr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yc.NO_ERROR=0,yc.TIMEOUT=8,yc.HTTP_ERROR=6,KI=xr.ErrorCode=yc,ry.COMPLETE="complete",GI=xr.EventType=ry,cr.EventType=pn,pn.OPEN="a",pn.CLOSE="b",pn.ERROR="c",pn.MESSAGE="d",Ue.prototype.listen=Ue.prototype.K,WI=xr.WebChannel=cr,UO=xr.FetchXmlHttpFactory=Ro,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,qI=xr.XhrIo=st}).apply(typeof ud<"u"?ud:typeof self<"u"?self:typeof window<"u"?window:{});var JI="@firebase/firestore",eT="4.8.0";var Ot=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");var dc="11.10.0";var _o=new rr("@firebase/firestore");function Hn(t,...e){if(_o.logLevel<=qe.DEBUG){let n=e.map($m);_o.debug(`Firestore (${dc}): ${t}`,...n)}}function fT(t,...e){if(_o.logLevel<=qe.ERROR){let n=e.map($m);_o.error(`Firestore (${dc}): ${t}`,...n)}}function jO(t,...e){if(_o.logLevel<=qe.WARN){let n=e.map($m);_o.warn(`Firestore (${dc}): ${t}`,...n)}}function $m(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function sn(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,pT(t,r,n)}function pT(t,e,n){let r=`FIRESTORE (${dc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw fT(r),new Error(r)}function Zi(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||pT(e,i,r)}var Ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Oe=class extends rn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ji=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var dd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Im=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}},Tm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Am=class{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Zi(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve(),s=new Ji;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ji,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>ne(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},c=l=>{Hn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(Hn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ji)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Hn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Zi(typeof r.accessToken=="string",31837,{l:r}),new dd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Zi(e===null||typeof e=="string",2055,{h:e}),new Ot(e)}},Sm=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Cm=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Sm(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}},hd=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Dm=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Zi(this.o===void 0,3512);let r=s=>{s.error!=null&&Hn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,Hn("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{Hn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):Hn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new hd(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Zi(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new hd(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function BO(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function $O(){return new TextEncoder}var Rm=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=BO(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}};function An(t,e){return t<e?-1:t>e?1:0}function HO(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return An(r,i);{let s=$O(),o=zO(s.encode(tT(t,n)),s.encode(tT(e,n)));return o!==0?o:An(r,i)}}n+=r>65535?2:1}return An(t.length,e.length)}function tT(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function zO(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return An(t[n],e[n]);return An(t.length,e.length)}var nT="__name__",fd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&sn(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&sn(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=t.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return An(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):HO(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ld.fromString(e.substring(4,e.length-2))}},Mr=class t extends fd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new Oe(Ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},qO=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Pm=class t extends fd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return qO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nT}static keyField(){return new t([nT])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new Oe(Ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new Oe(Ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Oe(Ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new Oe(Ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var kr=class t{constructor(e){this.path=e}static fromPath(e){return new t(Mr.fromString(e))}static fromName(e){return new t(Mr.fromString(e).popFirst(5))}static empty(){return new t(Mr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Mr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Mr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Mr(e.slice()))}};function WO(t,e,n,r){if(e===!0&&r===!0)throw new Oe(Ve.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function GO(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function KO(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":sn(12329,{type:typeof t})}function YO(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Oe(Ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=KO(t);throw new Oe(Ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function _t(t,e){let n={typeString:t};return e&&(n.value=e),n}function hc(t,e){if(!GO(t))throw new Oe(Ve.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Oe(Ve.INVALID_ARGUMENT,n);return!0}var rT=-62135596800,iT=1e6,sc=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*iT);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Oe(Ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Oe(Ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<rT)throw new Oe(Ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(Ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iT}_compareTo(e){return this.seconds===e.seconds?An(this.nanoseconds,e.nanoseconds):An(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hc(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-rT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};sc._jsonSchemaVersion="firestore/timestamp/1.0",sc._jsonSchema={type:_t("string",sc._jsonSchemaVersion),seconds:_t("number"),nanoseconds:_t("number")};var xm=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};xm.UNKNOWN_ID=-1;function XO(t){return t.name==="IndexedDbTransactionError"}function QO(t){return t===0&&1/t==-1/0}var ZO="remoteDocuments",gT="owner";var mT="mutationQueues";var yT="mutations";var vT="documentMutations",JO="remoteDocumentsV14";var _T="remoteDocumentGlobal";var ET="targets";var bT="targetDocuments";var wT="targetGlobal",IT="collectionParents";var TT="clientMetadata";var AT="bundles";var ST="namedQueries";var e1="indexConfiguration";var t1="indexState";var n1="indexEntries";var CT="documentOverlays";var r1="globals";var i1=[mT,yT,vT,ZO,ET,gT,wT,bT,TT,_T,IT,AT,ST],QY=[...i1,CT],s1=[mT,yT,vT,JO,ET,gT,wT,bT,TT,_T,IT,AT,ST,CT],o1=s1,a1=[...o1,e1,t1,n1];var ZY=[...a1,r1];var Eo=class t{constructor(e,n){this.comparator=e,this.root=n||ar.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ar.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ar.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new go(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new go(this.root,e,this.comparator,!1)}getReverseIterator(){return new go(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new go(this.root,e,this.comparator,!0)}},go=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ar=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw sn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw sn(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw sn(27949);return e+(this.isRed()?0:1)}};ar.EMPTY=null,ar.RED=!0,ar.BLACK=!1;ar.EMPTY=new class{constructor(){this.size=0}get key(){throw sn(57766)}get value(){throw sn(16141)}get color(){throw sn(16727)}get left(){throw sn(29726)}get right(){throw sn(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new ar(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var pd=class t{constructor(e){this.comparator=e,this.data=new Eo(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gd(this.data.getIterator())}getIteratorFrom(e){return new gd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},gd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Mm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var di=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Mm("Invalid base64 string: "+s):s}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return An(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};di.EMPTY_BYTE_STRING=new di("");var c1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function l1(t){if(Zi(!!t,39018),typeof t=="string"){let e=0,n=c1.exec(t);if(Zi(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:oc(t.seconds),nanos:oc(t.nanos)}}function oc(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function u1(t){return typeof t=="string"?di.fromBase64String(t):di.fromUint8Array(t)}var km="(default)",Nm=class t{constructor(e,n){this.projectId=e,this.database=n||km}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===km}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var DT="__type__",d1="__max__";var RT="__vector__",PT="value";function h1(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[DT])===null||n===void 0?void 0:n.stringValue)===RT}function f1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===d1}var eX={mapValue:{fields:{[DT]:{stringValue:RT},[PT]:{arrayValue:{}}}}};var Om=class{constructor(e,n=null,r=[],i=[],s=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function p1(t){return new Om(t)}var tX=new Eo(kr.comparator);var nX=new Eo(kr.comparator);var rX=new Eo(kr.comparator),iX=new pd(kr.comparator);var sX=new pd(An);var sT,Le;(Le=sT||(sT={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";var oX=new ld([4294967295,4294967295],0);var md=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(oc(e.integerValue));else if("doubleValue"in e){let r=oc(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),QO(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=l1(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(u1(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?f1(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):h1(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):sn(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let s=e.fields||{};this.Ct(n,53);let o=PT,c=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(oc(c)),this.xt(o,n),this.Dt(s[o],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),kr.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};md.Ut=new md;var aX=new Uint8Array(0);var xT=41943040,or=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};or.DEFAULT_COLLECTION_PERCENTILE=10,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,or.DEFAULT=new or(xT,or.DEFAULT_COLLECTION_PERCENTILE,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),or.DISABLED=new or(-1,0,0);var g1=1048576;function wm(){return typeof document<"u"?document:null}var Fm=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&Hn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var Lm=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,c=new t(e,n,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Oe(Ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var oT,aT;(aT=oT||(oT={})).Fa="default",aT.Cache="cache";function m1(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var cT=new Map;var MT="firestore.googleapis.com",lT=!0,yd=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Oe(Ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MT,this.ssl=lT}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:lT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<g1)throw new Oe(Ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=m1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Oe(Ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Oe(Ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Oe(Ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},vd=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Oe(Ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Oe(Ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yd(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Im;switch(r.type){case"firstParty":return new Cm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Oe(Ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return ne(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=cT.get(n);r&&(Hn("ComponentProvider","Removing Datastore"),cT.delete(n),r.terminate())})(this),Promise.resolve()}};function kT(t,e,n,r={}){var i;t=YO(t,vd);let s=Sr(e),o=t._getSettings(),c=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;s&&(Ka(`https://${l}`),Ya("Firestore",!0)),o.host!==MT&&o.host!==l&&jO("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!qi(u,c)&&(t._setSettings(u),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=Ot.MOCK_USER;else{d=Wu(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Oe(Ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ot(f)}t._authCredentials=new Tm(new dd(d,h))}}var Vm=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},es=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Um(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(hc(n,t._jsonSchema))return new t(e,r||null,new kr(Mr.fromString(n.referencePath)))}};es._jsonSchemaVersion="firestore/documentReference/1.0",es._jsonSchema={type:_t("string",es._jsonSchemaVersion),referencePath:_t("string")};var Um=class t extends Vm{constructor(e,n,r){super(e,n,p1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new es(this.firestore,null,new kr(e))}withConverter(e){return new t(this.firestore,e,this._path)}};var uT="AsyncQueue",_d=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Fm(this,"async_queue_retry"),this.oc=()=>{let r=wm();r&&Hn(uT,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=wm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=wm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new Ji;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return ne(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!XO(e))throw e;Hn(uT,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,fT("INTERNAL UNHANDLED ERROR: ",dT(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=Lm.createAndSchedule(this,e,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&sn(47125,{hc:dT(this.tc)})}verifyOperationInProgress(){}Pc(){return ne(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function dT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var jm=class extends vd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new _d,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return ne(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new _d(e),this._firestoreClient=void 0,yield e}})}};function NT(t,e){let n=typeof t=="object"?t:ai(),r=typeof t=="string"?t:e||km,i=lo(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=qu("firestore");s&&kT(i,...s)}return i}var ac=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(di.fromBase64String(e))}catch(n){throw new Oe(Ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(di.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hc(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};ac._jsonSchemaVersion="firestore/bytes/1.0",ac._jsonSchema={type:_t("string",ac._jsonSchemaVersion),bytes:_t("string")};var Ed=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Oe(Ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pm(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var cc=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Oe(Ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Oe(Ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return An(this._lat,e._lat)||An(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(hc(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};cc._jsonSchemaVersion="firestore/geoPoint/1.0",cc._jsonSchema={type:_t("string",cc._jsonSchemaVersion),latitude:_t("number"),longitude:_t("number")};var lc=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hc(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new Oe(Ve.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};lc._jsonSchemaVersion="firestore/vectorValue/1.0",lc._jsonSchema={type:_t("string",lc._jsonSchemaVersion),vectorValues:_t("object")};var y1=new RegExp("[~\\*/\\[\\]]");function v1(t,e,n){if(e.search(y1)>=0)throw hT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ed(...e.split("."))._internalPath}catch{throw hT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hT(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Oe(Ve.INVALID_ARGUMENT,c+t+l)}var bd=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new es(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Bm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(OT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Bm=class extends bd{data(){return super.data()}};function OT(t,e){return typeof e=="string"?v1(t,e):e instanceof Ed?e._internalPath:e._delegate._internalPath}var mo=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},yo=class t extends bd{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new vo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(OT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Oe(Ve.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};yo._jsonSchemaVersion="firestore/documentSnapshot/1.0",yo._jsonSchema={type:_t("string",yo._jsonSchemaVersion),bundleSource:_t("string","DocumentSnapshot"),bundleName:_t("string"),bundle:_t("string")};var vo=class extends yo{data(e={}){return super.data(e)}},uc=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new mo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new vo(this._firestore,this._userDataWriter,r.key,r,new mo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Oe(Ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let l=new vo(i._firestore,i._userDataWriter,c.doc.key,c.doc,new mo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new vo(i._firestore,i._userDataWriter,c.doc.key,c.doc,new mo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return c.type!==0&&(u=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),d=o.indexOf(c.doc.key)),{type:_1(c.type),doc:l,oldIndex:u,newIndex:d}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Oe(Ve.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function _1(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sn(61501,{type:t})}}uc._jsonSchemaVersion="firestore/querySnapshot/1.0",uc._jsonSchema={type:_t("string",uc._jsonSchemaVersion),bundleSource:_t("string","QuerySnapshot"),bundleName:_t("string"),bundle:_t("string")};(function(e,n=!0){(function(i){dc=i})(oi),hn(new Nt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new jm(new Am(r.getProvider("auth-internal")),new Dm(o,r.getProvider("app-check-internal")),(function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Oe(Ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nm(u.options.projectId,d)})(o,i),o);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),tt(JI,eT,e),tt(JI,eT,"esm2017")})();var fc=class{constructor(e){return e}},FT="firestore",Hm=class{constructor(){return ci(FT)}};var zm=new Ee("angularfire2.firestore-instances");function E1(t,e){let n=ho(FT,t,e);return n&&new fc(n)}function b1(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new fc(r)}}var w1={provide:Hm,deps:[[new tn,zm]]},I1={provide:fc,useFactory:E1,deps:[[new tn,zm],Pr]};function LT(t,...e){return tt("angularfire",Dr.full,"fst"),Jt([I1,w1,{provide:zm,useFactory:b1(t),multi:!0,deps:[ze,vt,Rr,Ki,[new tn,po],[new tn,fo],...e]}])}var VT=sr(NT,!0);var zT="firebasestorage.googleapis.com",qT="storageBucket",T1=120*1e3,A1=600*1e3;var Dt=class t extends rn{constructor(e,n,r=0){super(qm(e),`Firebase Storage: ${n} (${qm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return qm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Lt=(function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t})(Lt||{});function qm(t){return"storage/"+t}function WT(){let t="An unknown error occurred, please check the error payload for server response.";return new Dt(Lt.UNKNOWN,t)}function S1(t){return new Dt(Lt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function C1(t){return new Dt(Lt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function D1(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Dt(Lt.UNAUTHENTICATED,t)}function R1(){return new Dt(Lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function P1(t){return new Dt(Lt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function x1(){return new Dt(Lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function M1(){return new Dt(Lt.CANCELED,"User canceled the upload/download.")}function k1(t){return new Dt(Lt.INVALID_URL,"Invalid URL '"+t+"'.")}function N1(t){return new Dt(Lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function O1(){return new Dt(Lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+qT+"' property when initializing the app?")}function F1(){return new Dt(Lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Wm(t){return new Dt(Lt.INVALID_ARGUMENT,t)}function GT(){return new Dt(Lt.APP_DELETED,"The Firebase app was deleted.")}function L1(t){return new Dt(Lt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function pc(t){throw new Dt(Lt.INTERNAL_ERROR,"Internal error: "+t)}var zn=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw N1(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}let o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(k){k.path_=decodeURIComponent(k.path)}let d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${i}/o${f}`,"i"),m={bucket:1,path:3},g=n===zT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",E=new RegExp(`^https?://${g}/${i}/${_}`,"i"),V=[{regex:c,indices:l,postModify:s},{regex:p,indices:m,postModify:u},{regex:E,indices:{bucket:1,path:2},postModify:u}];for(let k=0;k<V.length;k++){let S=V[k],P=S.regex.exec(e);if(P){let D=P[S.indices.bucket],A=P[S.indices.path];A||(A=""),r=new t(D,A),S.postModify(r);break}}if(r==null)throw k1(e);return r}},Gm=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function V1(t,e,n){let r=1,i=null,s=null,o=!1,c=0;function l(){return c===2}let u=!1;function d(..._){u||(u=!0,e.apply(null,_))}function h(_){i=setTimeout(()=>{i=null,t(p,l())},_)}function f(){s&&clearTimeout(s)}function p(_,...E){if(u){f();return}if(_){f(),d.call(null,_,...E);return}if(l()||o){f(),d.call(null,_,...E);return}r<64&&(r*=2);let V;c===1?(c=2,V=0):V=(r+Math.random())*1e3,h(V)}let m=!1;function g(_){m||(m=!0,f(),!u&&(i!==null?(_||(c=2),clearTimeout(i),h(0)):_||(c=1)))}return h(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}function U1(t){t(!1)}function j1(t){return t!==void 0}function B1(t){return typeof t=="object"&&!Array.isArray(t)}function KT(t){return typeof t=="string"||t instanceof String}function UT(t,e,n,r){if(r<e)throw Wm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Wm(`Invalid value for '${t}'. Expected ${n} or less.`)}function YT(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function XT(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var wo=(function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t})(wo||{});function $1(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var Km=class{constructor(e,n,r,i,s,o,c,l,u,d,h,f=!0,p=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,g)=>{this.resolve_=m,this.reject_=g,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new bo(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=c=>{let l=c.loaded,u=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let c=s.getErrorCode()===wo.NO_ERROR,l=s.getStatus();if(!c||$1(l,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===wo.ABORT;r(!1,new bo(!1,null,d));return}let u=this.successCodes_.indexOf(l)!==-1;r(!0,new bo(u,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{let l=this.callback_(c,c.getResponse());j1(l)?s(l):s()}catch(l){o(l)}else if(c!==null){let l=WT();l.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,l)):o(l)}else if(i.canceled){let l=this.appDelete_?GT():M1();o(l)}else{let l=x1();o(l)}};this.canceled_?n(!1,new bo(!1,null,!0)):this.backoffId_=V1(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&U1(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},bo=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function H1(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function z1(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function q1(t,e){e&&(t["X-Firebase-GMPID"]=e)}function W1(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function G1(t,e,n,r,i,s,o=!0,c=!1){let l=XT(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return q1(d,e),H1(d,n),z1(d,s),W1(d,r),new Km(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,c)}function QT(t){let e;try{e=JSON.parse(t)}catch{return null}return B1(e)?e:null}function K1(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Y1(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function ZT(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function X1(t,e){return e}var Ft=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||X1}},wd=null;function Q1(t){return!KT(t)||t.length<2?t:ZT(t)}function Z1(){if(wd)return wd;let t=[];t.push(new Ft("bucket")),t.push(new Ft("generation")),t.push(new Ft("metageneration")),t.push(new Ft("name","fullPath",!0));function e(s,o){return Q1(o)}let n=new Ft("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}let i=new Ft("size");return i.xform=r,t.push(i),t.push(new Ft("timeCreated")),t.push(new Ft("updated")),t.push(new Ft("md5Hash",null,!0)),t.push(new Ft("cacheControl",null,!0)),t.push(new Ft("contentDisposition",null,!0)),t.push(new Ft("contentEncoding",null,!0)),t.push(new Ft("contentLanguage",null,!0)),t.push(new Ft("contentType",null,!0)),t.push(new Ft("metadata","customMetadata",!0)),wd=t,wd}function J1(t,e){function n(){let r=t.bucket,i=t.fullPath,s=new zn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function eF(t,e,n){let r={};r.type="file";let i=n.length;for(let s=0;s<i;s++){let o=n[s];r[o.local]=o.xform(r,e[o.server])}return J1(r,t),r}function tF(t,e,n){let r=QT(e);return r===null?null:eF(t,r,n)}function nF(t,e,n,r){let i=QT(e);if(i===null||!KT(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(u=>{let d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),p=YT(f,n,r),m=XT({alt:"media",token:u});return p+m})[0]}var Ym=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function rF(t){if(!t)throw WT()}function iF(t,e){function n(r,i){let s=tF(t,i,e);return rF(s!==null),nF(s,i,t.host,t._protocol)}return n}function sF(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=R1():i=D1():n.getStatus()===402?i=C1(t.bucket):n.getStatus()===403?i=P1(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function oF(t){let e=sF(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=S1(t.path)),s.serverResponse=i.serverResponse,s}return n}function aF(t,e,n){let r=e.fullServerUrl(),i=YT(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,c=new Ym(i,s,iF(t,n),o);return c.errorHandler=oF(e),c}var CQ=256*1024;var jT=null,Xm=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=wo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=wo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=wo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw pc("cannot .send() more than once");if(Sr(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(let o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw pc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw pc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw pc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw pc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},Qm=class extends Xm{initXhr(){this.xhr_.responseType="text"}};function cF(){return jT?jT():new Qm}var Io=class t{constructor(e,n){this._service=e,n instanceof zn?this._location=n:this._location=zn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new zn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ZT(this._location.path)}get storage(){return this._service}get parent(){let e=K1(this._location.path);if(e===null)return null;let n=new zn(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw L1(e)}};function lF(t){t._throwIfRoot("getDownloadURL");let e=aF(t.storage,t._location,Z1());return t.storage.makeRequestWithTokens(e,cF).then(n=>{if(n===null)throw F1();return n})}function uF(t,e){let n=Y1(t._location.path,e),r=new zn(t._location.bucket,n);return new Io(t.storage,r)}function dF(t){return/^[A-Za-z]+:\/\//.test(t)}function hF(t,e){return new Io(t,e)}function JT(t,e){if(t instanceof gc){let n=t;if(n._bucket==null)throw O1();let r=new Io(n,n._bucket);return e!=null?JT(r,e):r}else return e!==void 0?uF(t,e):t}function fF(t,e){if(e&&dF(e)){if(t instanceof gc)return hF(t,e);throw Wm("To use ref(service, url), the first argument must be a Storage instance.")}else return JT(t,e)}function BT(t,e){let n=e?.[qT];return n==null?null:zn.makeFromBucketSpec(n,t)}function pF(t,e,n,r={}){t.host=`${e}:${n}`;let i=Sr(e);i&&(Ka(`https://${t.host}/b`),Ya("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";let{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Wu(s,t.app.options.projectId))}var gc=class{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=zT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=T1,this._maxUploadRetryTime=A1,this._requests=new Set,i!=null?this._bucket=zn.makeFromBucketSpec(i,this._host):this._bucket=BT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=zn.makeFromBucketSpec(this._url,e):this._bucket=BT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){UT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){UT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return ne(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return ne(this,null,function*(){if(Bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Io(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Gm(GT());{let o=G1(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return ne(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},$T="@firebase/storage",HT="0.13.14";var e0="storage";function t0(t){return t=jn(t),lF(t)}function n0(t,e){return t=jn(t),fF(t,e)}function r0(t=ai(),e){t=jn(t);let r=lo(t,e0).getImmediate({identifier:e}),i=qu("storage");return i&&i0(r,...i),r}function i0(t,e,n,r={}){pF(t,e,n,r)}function gF(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new gc(n,r,i,e,oi)}function mF(){hn(new Nt(e0,gF,"PUBLIC").setMultipleInstances(!0)),tt($T,HT,""),tt($T,HT,"esm2017")}mF();var ts=class{constructor(e){return e}},s0="storage",Zm=class{constructor(){return ci(s0)}};var Jm=new Ee("angularfire2.storage-instances");function yF(t,e){let n=ho(s0,t,e);return n&&new ts(n)}function vF(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ts(r)}}var _F={provide:Zm,deps:[[new tn,Jm]]},EF={provide:ts,useFactory:yF,deps:[[new tn,Jm],Pr]};function o0(t,...e){return tt("angularfire",Dr.full,"gcs"),Jt([EF,_F,{provide:Jm,useFactory:vF(t),multi:!0,deps:[ze,vt,Rr,Ki,[new tn,po],[new tn,fo],...e]}])}var a0=sr(t0,!0);var c0=sr(r0,!0);var l0=sr(n0,!0,2);var u0={production:!1,test:!0,firebaseConfig:{apiKey:"AIzaSyCZ1Qe3D6_ccxpHAzjImp-u4cYJb2AX6_A",authDomain:"bazz-testing-python.firebaseapp.com",projectId:"bazz-testing-python",storageBucket:"bazz-testing-python.firebasestorage.app",messagingSenderId:"161772090075",appId:"1:161772090075:web:33cbd1f928e751d87392fe",measurementId:"G-2PF1F2JZ05"}};var d0={providers:[Rp({eventCoalescing:!0}),xg(Nw),Lw("ngsw-worker.js",{enabled:!Ia(),registrationStrategy:"registerWhenStable:30000"}),fI(()=>pI(u0.firebaseConfig)),LT(()=>VT()),o0(()=>c0())]};var Td=H0(v0());var _0=(()=>{let e=class e{constructor(){this.paramsSubject=new ut({file:null,userId:null}),this.params$=this.paramsSubject.asObservable(),this.parseUrlParams()}parseUrlParams(){try{let r=new URLSearchParams(window.location.search),i=r.get("file"),s=r.get("userId"),o=null;i&&(o=i,console.log("File param:",i));let c=s&&this.isValidUserId(s)?s:null;this.paramsSubject.next({file:o,userId:c})}catch(r){console.error("Error parsing URL parameters:",r),this.paramsSubject.next({file:null,userId:null})}}isValidUserId(r){return/^[a-zA-Z0-9_-]+$/.test(r)&&r.length>0&&r.length<256}getCurrentParams(){return this.paramsSubject.value}hasRequiredParams(){let r=this.getCurrentParams();return r.file!==null&&r.userId!==null}getValidationErrors(){let r=this.getCurrentParams(),i=[];return r.file||i.push("PDF file URL is missing"),r.userId||i.push("User ID is missing or invalid"),i}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=_e({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var E0=(()=>{let e=class e{constructor(r){this.storage=r,this.signatureCache=new Map,this.loadingSubject=new ut(!1),this.loading$=this.loadingSubject.asObservable()}loadUserAssets(r){return this.signatureCache.has(r)?we(this.signatureCache.get(r)):(this.loadingSubject.next(!0),uh({signature:this.fetchImage(r,"signatures","user_signature.png"),initial:this.fetchImage(r,"initials","user_initial.png")}).pipe(Ce(({signature:i,initial:s})=>({signatureUrl:i.url,initialUrl:s.url,signatureDataUrl:i.dataUrl,initialDataUrl:s.dataUrl})),yt(i=>{this.signatureCache.set(r,i),this.loadingSubject.next(!1)}),gn(i=>(console.error("Error loading user assets:",i),this.loadingSubject.next(!1),we({signatureUrl:null,initialUrl:null,signatureDataUrl:void 0,initialDataUrl:void 0})))))}fetchImage(r,i,s){let o=`users/${r}/${i}/${s}`,c=l0(this.storage,o);return at(a0(c)).pipe(gn(l=>(console.warn(`Image not found at ${o}:`,l),we(null))),dt(l=>l?this.convertUrlToDataUrl(l).pipe(Ce(u=>({url:l,dataUrl:u})),gn(()=>we({url:l,dataUrl:void 0}))):we({url:null,dataUrl:void 0})))}convertUrlToDataUrl(r){return new Ie(i=>{let s=r;r.includes("firebasestorage.googleapis.com")&&window.location.hostname==="localhost"&&(s=r.replace("https://firebasestorage.googleapis.com","/firebase-storage"),console.log("Using proxy URL for signature/initial:",s)),fetch(s).then(o=>o.blob()).then(o=>{let c=new FileReader;c.onloadend=()=>{i.next(c.result),i.complete()},c.onerror=()=>{i.error("Failed to convert to data URL")},c.readAsDataURL(o)}).catch(o=>{i.error(o)})})}clearCache(r){r?this.signatureCache.delete(r):this.signatureCache.clear()}getCachedSignature(r){return this.signatureCache.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(Se(ts))},e.\u0275prov=_e({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var FF=["pdfViewer"];function LF(t,e){if(t&1){let n=uu();Ye(0,"div",10)(1,"button",11),wn("click",function(){qt(n);let i=Mt();return Wt(i.goToPreviousPage())}),ft(2,"\u2B05\uFE0F"),Xe(),Ye(3,"span",12),ft(4),Xe(),Ye(5,"button",13),wn("click",function(){qt(n);let i=Mt();return Wt(i.goToNextPage())}),ft(6,"\u27A1\uFE0F"),Xe()()}if(t&2){let n=Mt();Je(),ht("disabled",n.currentPageNumber===1),Je(3),ba("Page ",n.currentPageNumber," / ",n.totalPages),Je(),ht("disabled",n.currentPageNumber===n.totalPages)}}function VF(t,e){if(t&1&&(Ye(0,"div",20)(1,"h3"),ft(2,"\u26A0\uFE0F Error"),Xe(),Ye(3,"p"),ft(4),Xe()()),t&2){let n=Mt(2);Je(4),_a(n.errors.general)}}function UF(t,e){t&1&&(Ye(0,"div",21),Er(1,"div",22),Ye(2,"p"),ft(3,"Loading PDF..."),Xe()())}function jF(t,e){if(t&1&&(Ye(0,"div",20)(1,"h3"),ft(2,"\u26A0\uFE0F PDF Load Error"),Xe(),Ye(3,"p"),ft(4),Xe()()),t&2){let n=Mt(2);Je(4),_a(n.errors.pdf)}}function BF(t,e){t&1&&(Ye(0,"div",23),Er(1,"div",22),Ye(2,"p"),ft(3,"Loading signature and initial..."),Xe()())}function $F(t,e){t&1&&(Ye(0,"div",24)(1,"h2"),ft(2,"PDF Viewer"),Xe(),Ye(3,"p"),ft(4,"Initializing..."),Xe(),Ye(5,"div",25),ft(6,"\u{1F4C4} \u270F\uFE0F"),Xe()())}function HF(t,e){if(t&1&&(Ye(0,"section",14)(1,"div",15),ti(2,VF,5,1,"div",16)(3,UF,4,0,"div",17)(4,jF,5,1,"div",16)(5,BF,4,0,"div",18)(6,$F,7,0,"div",19),Xe()()),t&2){let n=Mt();Je(2),ht("ngIf",n.errors.general),Je(),ht("ngIf",n.loading.pdf),Je(),ht("ngIf",n.errors.pdf),Je(),ht("ngIf",n.loading.signature||n.loading.initial),Je(),ht("ngIf",!n.loading.pdf&&!n.errors.pdf&&!n.errors.general)}}function zF(t,e){if(t&1&&(Ye(0,"span",33),ft(1),Xe()),t&2){let n=Mt(2);Je(),Ea(" ",n.getSignaturesForCurrentPage().length," \u270D\uFE0F ")}}function qF(t,e){if(t&1){let n=uu();cu(0),Ye(1,"div",34),wn("pointerdown",function(i){let s=qt(n).$implicit,o=Mt(2);return Wt(o.startDrag(s,i))})("touchstart",function(i){let s=qt(n).$implicit,o=Mt(2);return Wt(o.startDrag(s,i))})("mousedown",function(i){let s=qt(n).$implicit,o=Mt(2);return Wt(o.startDrag(s,i))}),Er(2,"img",35),Ye(3,"button",36),wn("click",function(){let i=qt(n).$implicit,s=Mt(2);return Wt(s.removeSignature(i.id))})("pointerdown",function(i){return qt(n),Wt(i.stopPropagation())})("touchstart",function(i){return qt(n),Wt(i.stopPropagation())})("mousedown",function(i){return qt(n),Wt(i.stopPropagation())}),ft(4,"\xD7"),Xe(),Ye(5,"div",37)(6,"div",38),wn("pointerdown",function(i){let s=qt(n).$implicit,o=Mt(2);return Wt(o.startResize(s,i))})("touchstart",function(i){let s=qt(n).$implicit,o=Mt(2);return Wt(o.startResize(s,i))})("mousedown",function(i){let s=qt(n).$implicit,o=Mt(2);return Wt(o.startResize(s,i))}),Xe()()(),lu()}if(t&2){let n=e.$implicit;Je(),va("left",n.x,"px")("top",n.y,"px")("width",n.width,"px")("height",n.height,"px"),Je(),ht("src",n.imageData,Xf)}}function WF(t,e){if(t&1&&(Ye(0,"section",14)(1,"div",26,0)(3,"div",27)(4,"div",28)(5,"span"),ft(6),Xe(),ti(7,zF,2,1,"span",29),Xe(),Ye(8,"div",30),Er(9,"canvas",31),ti(10,qF,7,9,"ng-container",32),Xe()()()()),t&2){let n=Mt();Je(6),ba("Page ",n.currentPageNumber," / ",n.totalPages),Je(),ht("ngIf",n.getSignaturesForCurrentPage().length>0),Je(),va("width",n.currentPageData.width,"px")("height",n.currentPageData.height,"px"),Je(),ht("width",n.currentPageData.width)("height",n.currentPageData.height),Je(),ht("ngForOf",n.getSignaturesForCurrentPage())}}var b0=(()=>{let e=class e{constructor(r,i){this.urlParamsService=r,this.signatureService=i,this.pdfLoaded=!1,this.currentPageNumber=1,this.totalPages=0,this.currentPageData=null,this.signatures=[],this.currentSignature=null,this.currentInitial=null,this.loading={pdf:!1,signature:!1,initial:!1},this.errors={pdf:null,signature:null,initial:null,general:null},this.draggedSignature=null,this.resizingSignature=null,this.dragOffset={x:0,y:0},this.resizeOffset={x:0,y:0},this.lastTouchPosition=null,this.touchStartTime=0,this.isDragging=!1,this.isResizing=!1,this.activePointerId=null,this.subscriptions=new rt,this.handleMove=s=>{if(!this.isDragging&&!this.isResizing)return;s.preventDefault&&s.preventDefault(),s.stopPropagation&&s.stopPropagation();let{x:o,y:c}=this.getClientCoordinates(s),l=Date.now();this.lastTouchPosition={x:o,y:c,timestamp:l},this.isDragging&&this.draggedSignature?this.performDrag(o,c):this.isResizing&&this.resizingSignature&&this.performResize(o,c)},this.handleEnd=s=>{let o=this.isDragging||this.isResizing;this.isDragging=!1,this.isResizing=!1,this.draggedSignature=null,this.resizingSignature=null,this.activePointerId=null,this.lastTouchPosition=null,document.body.classList.remove("dragging","resizing"),this.removeFlutterCompatibleListeners();try{s.target&&s.target.releasePointerCapture&&s.pointerId!==void 0&&s.target.releasePointerCapture(s.pointerId)}catch{}o&&s.preventDefault&&s.preventDefault()},this.preventDefault=s=>{(this.isDragging||this.isResizing)&&s.preventDefault()}}ngOnInit(){Td.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",this.initializeFromUrlParams()}ngOnDestroy(){this.removeFlutterCompatibleListeners(),this.subscriptions.unsubscribe()}initializeFromUrlParams(){let r=this.urlParamsService.getCurrentParams();if(console.log("Initializing with params:",r),!this.urlParamsService.hasRequiredParams()){let i=this.urlParamsService.getValidationErrors();this.errors.general=`Missing required parameters: ${i.join(", ")}`,console.error("URL parameter validation failed:",i);return}r.file&&this.loadPDFFromUrl(r.file),r.userId&&this.loadUserSignatures(r.userId)}loadPDFFromUrl(r){return ne(this,null,function*(){console.log("=== Starting PDF Load ==="),console.log("Attempting to load PDF from:",r),this.loading.pdf=!0,this.errors.pdf=null;try{let i=r;r.includes("firebasestorage.googleapis.com")&&window.location.hostname==="localhost"&&(i=r.replace("https://firebasestorage.googleapis.com","/firebase-storage"),console.log("Using proxy URL:",i)),console.log("Fetching PDF...");let s=yield fetch(i);if(console.log("Fetch response status:",s.status,s.statusText),console.log("Response headers:",{contentType:s.headers.get("content-type"),contentLength:s.headers.get("content-length")}),!s.ok)throw new Error(`Failed to fetch PDF: ${s.statusText}`);console.log("Converting to array buffer...");let o=yield s.arrayBuffer();console.log("Array buffer size:",o.byteLength,"bytes"),console.log("Loading PDF document..."),this.pdfDocument=yield Td.getDocument(o).promise,this.totalPages=this.pdfDocument.numPages,this.currentPageNumber=1,this.signatures=[],console.log("PDF loaded successfully! Total pages:",this.totalPages),yield this.renderCurrentPage(),this.pdfLoaded=!0,this.loading.pdf=!1,console.log("=== PDF Load Complete ===")}catch(i){console.error("=== PDF Load Error ==="),console.error("Error details:",i),this.errors.pdf=`Failed to load PDF: ${i instanceof Error?i.message:"Unknown error"}`,this.loading.pdf=!1}})}loadUserSignatures(r){console.log("Loading signatures for user:",r),this.loading.signature=!0,this.loading.initial=!0;let i=this.signatureService.loadUserAssets(r).subscribe({next:s=>{console.log("User signature data received:",{hasSignature:!!s.signatureDataUrl,hasInitial:!!s.initialDataUrl}),s.signatureDataUrl?(this.currentSignature=s.signatureDataUrl,console.log("Signature loaded successfully")):(this.errors.signature="Signature not found for this user",console.warn("No signature found for user")),s.initialDataUrl?(this.currentInitial=s.initialDataUrl,console.log("Initial loaded successfully")):(this.errors.initial="Initial not found for this user",console.warn("No initial found for user")),this.loading.signature=!1,this.loading.initial=!1},error:s=>{console.error("Error loading user signatures:",s),this.errors.signature="Failed to load signature",this.errors.initial="Failed to load initial",this.loading.signature=!1,this.loading.initial=!1}});this.subscriptions.add(i)}renderCurrentPage(){return ne(this,null,function*(){if(!this.pdfDocument)return;let r=this.getPageScale(),s=(yield this.pdfDocument.getPage(this.currentPageNumber)).getViewport({scale:r});this.currentPageData={width:Math.round(s.width),height:Math.round(s.height),scale:r},setTimeout(()=>this.renderPage(),100)})}renderPage(){return ne(this,null,function*(){if(!this.currentPageData||!this.pdfDocument)return;let r=document.querySelector("canvas");if(!r)return;let i=r.getContext("2d"),s=yield this.pdfDocument.getPage(this.currentPageNumber),o=window.devicePixelRatio||1,l=window.innerWidth<=768?Math.max(o,2):o,u=this.currentPageData.scale*l,d=s.getViewport({scale:u});r.width=Math.floor(d.width),r.height=Math.floor(d.height),r.style.width=`${this.currentPageData.width}px`,r.style.height=`${this.currentPageData.height}px`,this.currentPageData.canvas=r,i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high";let h={canvasContext:i,viewport:d,intent:"display",renderInteractiveForms:!1,optionalContentConfigPromise:null,annotationMode:0};yield s.render(h).promise})}getPageScale(){let r=window.innerWidth<=768,i=window.innerWidth>768&&window.innerWidth<=1024;if(r){let s=window.innerWidth*.85;return Math.min(1.2,s/595)}else if(i){let s=window.innerWidth*.9;return Math.min(1.4,s/595)}else return Math.min(1.6,1200/595)}goToNextPage(){this.currentPageNumber<this.totalPages&&(this.currentPageNumber++,this.renderCurrentPage())}goToPreviousPage(){this.currentPageNumber>1&&(this.currentPageNumber--,this.renderCurrentPage())}addSignature(){if(!this.currentSignature||!this.pdfLoaded||!this.currentPageData)return;let r=100,i=50,s=(this.currentPageData.width-r)/2,o=(this.currentPageData.height-i)/2;this.signatures.push({id:Date.now().toString(),x:s,y:o,width:r,height:i,page:this.currentPageNumber,imageData:this.currentSignature,type:"signature"})}addInitial(){if(!this.currentInitial||!this.pdfLoaded||!this.currentPageData)return;let r=60,i=60,s=(this.currentPageData.width-r)/2,o=(this.currentPageData.height-i)/2;this.signatures.push({id:Date.now().toString(),x:s,y:o,width:r,height:i,page:this.currentPageNumber,imageData:this.currentInitial,type:"initial"})}getClientCoordinates(r){if(typeof r.clientX=="number"&&typeof r.clientY=="number")return{x:r.clientX,y:r.clientY};if(r.touches&&r.touches.length>0){let i=r.touches[0];return{x:i.clientX,y:i.clientY}}if(r.changedTouches&&r.changedTouches.length>0){let i=r.changedTouches[0];return{x:i.clientX,y:i.clientY}}return typeof r.pageX=="number"&&typeof r.pageY=="number"?{x:r.pageX,y:r.pageY}:{x:0,y:0}}startDrag(r,i){i.preventDefault&&i.preventDefault(),i.stopPropagation&&i.stopPropagation(),this.isDragging=!0,this.draggedSignature=r,this.touchStartTime=Date.now(),i.pointerId!==void 0&&(this.activePointerId=i.pointerId);let{x:s,y:o}=this.getClientCoordinates(i);this.lastTouchPosition={x:s,y:o,timestamp:Date.now()};let c=i.currentTarget||i.target,l=c.getBoundingClientRect();this.dragOffset={x:s-l.left,y:o-l.top},document.body.classList.add("dragging"),this.attachFlutterCompatibleListeners("drag");try{c.setPointerCapture&&i.pointerId!==void 0&&c.setPointerCapture(i.pointerId)}catch{console.log("Pointer capture not available")}}startResize(r,i){i.preventDefault&&i.preventDefault(),i.stopPropagation&&i.stopPropagation(),this.isResizing=!0,this.resizingSignature=r,this.touchStartTime=Date.now(),i.pointerId!==void 0&&(this.activePointerId=i.pointerId);let{x:s,y:o}=this.getClientCoordinates(i);this.lastTouchPosition={x:s,y:o,timestamp:Date.now()};let c=i.currentTarget||i.target,l=c.getBoundingClientRect();this.resizeOffset={x:s-l.left,y:o-l.top},document.body.classList.add("resizing"),this.attachFlutterCompatibleListeners("resize");try{c.setPointerCapture&&i.pointerId!==void 0&&c.setPointerCapture(i.pointerId)}catch{console.log("Pointer capture not available")}}performDrag(r,i){if(!this.draggedSignature||!this.currentPageData)return;let s=document.querySelector(".page-canvas-container");if(!s)return;let o=s.getBoundingClientRect(),c=s.offsetWidth/this.currentPageData.width,l=s.offsetHeight/this.currentPageData.height,u=(r-o.left-this.dragOffset.x)/c,d=(i-o.top-this.dragOffset.y)/l;this.draggedSignature.x=this.clamp(u,0,this.currentPageData.width-this.draggedSignature.width),this.draggedSignature.y=this.clamp(d,0,this.currentPageData.height-this.draggedSignature.height)}performResize(r,i){if(!this.resizingSignature||!this.currentPageData)return;let s=document.querySelector(".page-canvas-container");if(!s)return;let o=s.getBoundingClientRect(),c=s.offsetWidth/this.currentPageData.width,l=s.offsetHeight/this.currentPageData.height,u=Math.max(50,(r-o.left-this.resizingSignature.x*c)/c),d=Math.max(25,(i-o.top-this.resizingSignature.y*l)/l);this.resizingSignature.width=this.clamp(u,50,this.currentPageData.width-this.resizingSignature.x),this.resizingSignature.height=this.clamp(d,25,this.currentPageData.height-this.resizingSignature.y)}attachFlutterCompatibleListeners(r){this.removeFlutterCompatibleListeners(),document.addEventListener("pointermove",this.handleMove,{passive:!1}),document.addEventListener("pointerup",this.handleEnd,{passive:!1}),document.addEventListener("pointercancel",this.handleEnd,{passive:!1}),document.addEventListener("touchmove",this.handleMove,{passive:!1}),document.addEventListener("touchend",this.handleEnd,{passive:!1}),document.addEventListener("touchcancel",this.handleEnd,{passive:!1}),document.addEventListener("mousemove",this.handleMove,{passive:!1}),document.addEventListener("mouseup",this.handleEnd,{passive:!1}),document.addEventListener("mouseleave",this.handleEnd,{passive:!1}),document.addEventListener("contextmenu",this.preventDefault,{passive:!1}),document.addEventListener("selectstart",this.preventDefault,{passive:!1})}removeFlutterCompatibleListeners(){document.removeEventListener("pointermove",this.handleMove),document.removeEventListener("pointerup",this.handleEnd),document.removeEventListener("pointercancel",this.handleEnd),document.removeEventListener("touchmove",this.handleMove),document.removeEventListener("touchend",this.handleEnd),document.removeEventListener("touchcancel",this.handleEnd),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleEnd),document.removeEventListener("mouseleave",this.handleEnd),document.removeEventListener("contextmenu",this.preventDefault),document.removeEventListener("selectstart",this.preventDefault)}clamp(r,i,s){return Math.max(i,Math.min(s,r))}getSignaturesForCurrentPage(){return this.signatures.filter(r=>r.page===this.currentPageNumber)}removeSignature(r){this.signatures=this.signatures.filter(i=>i.id!==r)}clearSignatures(){this.signatures=[]}dataURLToBytes(r){let i=r.split(",")[1];return Uint8Array.from(atob(i),s=>s.charCodeAt(0))}savePDF(){return ne(this,null,function*(){if(!(!this.pdfDocument||this.signatures.length===0))try{let{PDFDocument:r}=yield import("./chunk-M6T3JJQN.js"),i=yield this.pdfDocument.getData(),s=yield r.load(i),o=this.getPageScale(),c=this.groupSignaturesByPage();for(let[l,u]of c){let d=s.getPage(l-1),{height:h}=d.getSize();for(let f of u){let p=this.dataURLToBytes(f.imageData),m=f.imageData.includes("data:image/png")?yield s.embedPng(p):yield s.embedJpg(p);d.drawImage(m,{x:f.x/o,y:h-f.y/o-f.height/o,width:f.width/o,height:f.height/o})}}this.downloadPDF(yield s.save())}catch(r){console.error("Error saving PDF:",r),alert("Error saving PDF. Please try again.")}})}groupSignaturesByPage(){let r=new Map;return this.signatures.forEach(i=>{r.has(i.page)||r.set(i.page,[]),r.get(i.page).push(i)}),r}downloadPDF(r){let i=new Blob([r],{type:"application/pdf"}),s=URL.createObjectURL(i),o=document.createElement("a");o.href=s,o.download="signed-document.pdf",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)}};e.\u0275fac=function(i){return new(i||e)(Fn(_0),Fn(E0))},e.\u0275cmp=ma({type:e,selectors:[["app-root"]],viewQuery:function(i,s){if(i&1&&Tp(FF,5),i&2){let o;Ap(o=Sp())&&(s.pdfViewer=o.first)}},decls:14,vars:7,consts:[["pdfViewer",""],[1,"app-container"],[1,"header"],["aria-label","Main actions",1,"controls"],["title","Add Signature","aria-label","Add Signature",1,"btn","btn-secondary",3,"click","disabled"],["title","Add Initial","aria-label","Add Initial",1,"btn","btn-secondary",3,"click","disabled"],["title","Save PDF","aria-label","Save PDF",1,"btn","btn-success",3,"click","disabled"],["title","Clear All Signatures","aria-label","Clear All",1,"btn","btn-warning",3,"click","disabled"],["class","page-controls",4,"ngIf"],["class","main-content",4,"ngIf"],[1,"page-controls"],["title","Previous Page","aria-label","Previous Page",1,"btn","btn-nav",3,"click","disabled"],[1,"page-info"],["title","Next Page","aria-label","Next Page",1,"btn","btn-nav",3,"click","disabled"],[1,"main-content"],[1,"upload-area"],["class","error-message",4,"ngIf"],["class","loading-message",4,"ngIf"],["class","info-message",4,"ngIf"],["class","upload-message",4,"ngIf"],[1,"error-message"],[1,"loading-message"],[1,"spinner"],[1,"info-message"],[1,"upload-message"],[1,"upload-icons"],[1,"pdf-viewer"],[1,"page-container"],[1,"page-header"],["class","signature-count",4,"ngIf"],[1,"page-canvas-container",2,"touch-action","none","-webkit-touch-callout","none","-webkit-user-select","none","user-select","none"],[2,"touch-action","none","pointer-events","none",3,"width","height"],[4,"ngFor","ngForOf"],[1,"signature-count"],[1,"placed-signature",2,"touch-action","none","-webkit-touch-callout","none","-webkit-user-select","none","user-select","none",3,"pointerdown","touchstart","mousedown"],["alt","Signature","draggable","false",1,"signature-image",2,"pointer-events","none","touch-action","none","-webkit-touch-callout","none","-webkit-user-select","none","user-select","none",3,"src"],["title","Delete Signature","aria-label","Delete Signature",1,"delete-signature",2,"touch-action","manipulation",3,"click","pointerdown","touchstart","mousedown"],[1,"resize-handles"],[1,"resize-handle","resize-se",2,"touch-action","none","-webkit-touch-callout","none","-webkit-user-select","none","user-select","none",3,"pointerdown","touchstart","mousedown"]],template:function(i,s){i&1&&(Ye(0,"div",1)(1,"header",2)(2,"nav",3)(3,"button",4),wn("click",function(){return s.addSignature()}),ft(4,"\u270D\uFE0F"),Xe(),Ye(5,"button",5),wn("click",function(){return s.addInitial()}),ft(6,"\u{1F524}"),Xe(),Ye(7,"button",6),wn("click",function(){return s.savePDF()}),ft(8,"\u{1F4BE}"),Xe(),Ye(9,"button",7),wn("click",function(){return s.clearSignatures()}),ft(10,"\u{1F5D1}\uFE0F"),Xe()(),ti(11,LF,7,4,"div",8),Xe(),ti(12,HF,7,5,"section",9)(13,WF,11,10,"section",9),Xe()),i&2&&(Je(3),ht("disabled",!s.pdfLoaded||!s.currentSignature||s.loading.signature),Je(2),ht("disabled",!s.pdfLoaded||!s.currentInitial||s.loading.initial),Je(2),ht("disabled",!s.pdfLoaded||s.signatures.length===0),Je(2),ht("disabled",s.signatures.length===0),Je(2),ht("ngIf",s.pdfLoaded),Je(),ht("ngIf",!s.pdfLoaded),Je(),ht("ngIf",s.pdfLoaded&&s.currentPageData))},dependencies:[vu,yu,jp],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}.app-container[_ngcontent-%COMP%]{min-height:100vh;background:#f9f9f9;font-family:Segoe UI,sans-serif;color:#333}.header[_ngcontent-%COMP%]{background:#fff;padding:.5rem 1rem;border-bottom:1px solid #ddd;position:sticky;top:0;z-index:100}.controls[_ngcontent-%COMP%]{display:flex;justify-content:space-around;gap:.25rem;margin-bottom:.5rem}.page-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;font-size:.9rem}.page-info[_ngcontent-%COMP%]{font-weight:600;color:#007bff;margin:0 .5rem}.signature-summary[_ngcontent-%COMP%]{color:#28a745;font-size:.8rem}.btn[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1.2rem;border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer}.btn-nav[_ngcontent-%COMP%]{width:35px;height:35px;font-size:1rem;background:#007bff;color:#fff}.btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.btn-info[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-success[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn-warning[_ngcontent-%COMP%]{background:#ffc107;color:#212529}.main-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100vh - 120px)}.upload-area[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;text-align:center;padding:1rem}.upload-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:.5rem}.upload-icons[_ngcontent-%COMP%]{font-size:2rem;margin-top:1rem;opacity:.3}.spinner[_ngcontent-%COMP%]{border:3px solid #f3f3f3;border-top:3px solid #007bff;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-message[_ngcontent-%COMP%]{text-align:center;color:#007bff;padding:2rem}.loading-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:.5rem;font-size:1rem}.error-message[_ngcontent-%COMP%]{text-align:center;color:#dc3545;padding:2rem;background:#fff;border-radius:8px;box-shadow:0 2px 6px #dc35451a;max-width:400px;margin:0 auto}.error-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.5rem;font-size:1.2rem}.error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.5}.info-message[_ngcontent-%COMP%]{text-align:center;color:#17a2b8;padding:1rem;font-size:.9rem}.pdf-viewer[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:1rem;display:flex;justify-content:center;align-items:flex-start}.page-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 6px #00000014;display:inline-block}.page-header[_ngcontent-%COMP%]{padding:.5rem;font-size:.9rem;display:flex;justify-content:space-between}.signature-count[_ngcontent-%COMP%]{color:#28a745;font-weight:600}.page-canvas-container[_ngcontent-%COMP%]{position:relative;margin:0 auto;max-width:100%;background:#fff;overflow:hidden}canvas[_ngcontent-%COMP%]{width:100%!important;height:auto!important;display:block;image-rendering:crisp-edges;transform-origin:top left}.placed-signature[_ngcontent-%COMP%]{position:absolute;border:1px solid transparent;touch-action:none;-webkit-user-select:none;user-select:none}.signature-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:fill;pointer-events:none}.delete-signature[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-6px;width:18px;height:18px;border:none;border-radius:50%;background:#dc3545;color:#fff;font-size:12px;display:none}.placed-signature[_ngcontent-%COMP%]:hover   .delete-signature[_ngcontent-%COMP%]{display:block}.resize-handle[_ngcontent-%COMP%]{position:absolute;width:10px;height:10px;background:#007bff;bottom:-5px;right:-5px;cursor:se-resize}.page-navigation[_ngcontent-%COMP%]{background:#fff;border-top:1px solid #ddd;padding:.5rem;position:sticky;bottom:0}.page-dots[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.25rem;max-width:100%;overflow-x:auto;padding:.25rem}.page-dot[_ngcontent-%COMP%]{min-width:35px;height:35px;border:1px solid #ddd;background:#fff;border-radius:6px;font-size:.8rem;cursor:pointer;position:relative;display:flex;align-items:center;justify-content:center;flex-shrink:0}.page-dot.active[_ngcontent-%COMP%]{background:#007bff;color:#fff;border-color:#007bff}.dot-signature-count[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;background:#28a745;color:#fff;font-size:.6rem;width:14px;height:14px;border-radius:50%;display:flex;align-items:center;justify-content:center}@media (max-width: 600px){.controls[_ngcontent-%COMP%]{justify-content:space-between;gap:.2rem}.btn[_ngcontent-%COMP%]{width:36px;height:36px;font-size:1rem}.btn-nav[_ngcontent-%COMP%]{width:30px;height:30px;font-size:.9rem}.page-controls[_ngcontent-%COMP%]{gap:.25rem}.page-info[_ngcontent-%COMP%]{font-size:.8rem;margin:0 .25rem}.signature-summary[_ngcontent-%COMP%]{font-size:.7rem}.main-content[_ngcontent-%COMP%]{height:calc(100vh - 140px)}.pdf-viewer[_ngcontent-%COMP%]{padding:.5rem}.page-dot[_ngcontent-%COMP%]{min-width:30px;height:30px;font-size:.7rem}.dot-signature-count[_ngcontent-%COMP%]{width:12px;height:12px;font-size:.5rem}}"]});let t=e;return t})();Xp(b0,d0).catch(t=>console.error(t));
