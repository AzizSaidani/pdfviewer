<!-- app.component.html -->
<div class="pdf-container">
  <!-- PDF Content -->
  <div class="pdf-content">
    <div *ngIf="!isLoaded && !error" class="loading">
      <div class="loading-spinner"></div>
      <p>Loading PDF...</p>
    </div>

    <div *ngIf="error" class="error">
      <h3>âŒ Error Loading PDF</h3>
      <p>{{ error }}</p>
      <button class="btn btn-retry" (click)="retry()">Try Again</button>
    </div>

    <!-- Multi-page scroll container with draggable images -->
    <div class="canvas-container" [class.hidden]="!isLoaded || error">
      <!-- PDF Pages -->
      <div class="page-wrapper" *ngFor="let page of pages; let i = index">
        <canvas #pdfCanvas class="pdf-canvas"></canvas>
      </div>

      <!-- Draggable Images Overlay -->
      <div class="images-overlay">
        <div
          *ngFor="let image of draggableImages"
          class="draggable-image"
          [class.dragging]="image.isDragging"
          [class.resizing]="image.isResizing"
          [class.selected]="image.isSelected"
          [style.left.px]="image.x"
          [style.top.px]="image.y"
          [style.width.px]="image.width"
          [style.height.px]="image.height"
          (mousedown)="onImageMouseDown($event, image)"
          (touchstart)="onImageMouseDown($event, image)">

          <img [src]="image.src"
               [alt]="image.src.includes('initial') ? 'Initial' : 'Signature'"
               draggable="false">

          <!-- Remove button - only show when selected -->
          <button *ngIf="image.isSelected"
                  class="remove-btn"
                  (click)="removeImage(image)"
                  (touchend)="removeImage(image)">
            Ã—
          </button>

          <!-- Resize handle - only show when selected -->
          <div *ngIf="image.isSelected" class="resize-handle"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Signature Toolbar (Bottom, Always Visible) -->
  <div class="toolbar signature-toolbar" *ngIf="isLoaded">
    <button class="btn btn-signature" (click)="addInitial()">
      ğŸ“ Initial
    </button>
    <button class="btn btn-signature" (click)="addSignature()">
      âœï¸ Signature
    </button>
    <button class="btn btn-clear"
            (click)="clearAllImages()"
            [disabled]="draggableImages.length === 0">
      ğŸ—‘ï¸ Clear
    </button>
  </div>
</div>
